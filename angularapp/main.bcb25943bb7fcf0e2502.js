(self.webpackChunkprimer_parcial=self.webpackChunkprimer_parcial||[]).push([[179],{8255:Ze=>{function Te(V){return Promise.resolve().then(()=>{var g=new Error("Cannot find module '"+V+"'");throw g.code="MODULE_NOT_FOUND",g})}Te.keys=()=>[],Te.resolve=Te,Te.id=8255,Ze.exports=Te},7716:(Ze,Te,V)=>{"use strict";V.d(Te,{deG:()=>Ym,tb:()=>Z0,AFp:()=>q0,ip1:()=>Rh,CZH:()=>ra,hGG:()=>HO,z2F:()=>Vh,sBO:()=>ky,Sil:()=>Bg,_Vd:()=>Jo,EJc:()=>z0,SBq:()=>Xo,qLn:()=>y,vpe:()=>na,gxx:()=>Oa,tBr:()=>Da,XFs:()=>Je,OlP:()=>zt,zs3:()=>Zt,ZZ4:()=>co,aQg:()=>cc,soG:()=>zl,YKP:()=>Hl,v3s:()=>kA,h0i:()=>_r,PXZ:()=>Wg,R0b:()=>Qi,FiY:()=>si,Lbi:()=>W0,g9A:()=>gv,Qsj:()=>cP,FYo:()=>Ry,JOm:()=>Ii,Tiy:()=>mg,q3G:()=>Sn,tp0:()=>ps,EAV:()=>Av,Rgc:()=>mh,dDg:()=>IA,DyG:()=>$i,q4F:()=>XC,GfV:()=>_g,s_b:()=>r0,ifc:()=>Fe,eFA:()=>qn,G48:()=>AA,Gpc:()=>H,X6Q:()=>qg,_c5:()=>hb,VLi:()=>MO,c2e:()=>CA,zSh:()=>xl,wAp:()=>ut,vHH:()=>ue,EiD:()=>XE,mCW:()=>Ed,qzn:()=>Sa,JVY:()=>sp,pB0:()=>ap,eBb:()=>op,L6k:()=>c_,LAX:()=>d_,cg1:()=>IC,Tjo:()=>GA,kL8:()=>DC,yhl:()=>Uo,dqk:()=>an,sIi:()=>Zd,CqO:()=>iC,QGY:()=>ly,F4k:()=>rC,RDi:()=>Om,AaK:()=>X,z3N:()=>Ks,qOj:()=>Wd,TTD:()=>ha,_Bn:()=>ph,xp6:()=>YT,uIk:()=>Kw,Tol:()=>Kp,ekj:()=>ah,Suo:()=>tA,Xpm:()=>kr,lG2:()=>Hc,Yz7:()=>rn,cJS:()=>Pt,oAB:()=>Bc,Yjl:()=>Ja,Y36:()=>th,_UZ:()=>sy,BQk:()=>ay,ynx:()=>oy,qZA:()=>nC,TgZ:()=>jr,EpF:()=>tc,n5z:()=>hs,Ikx:()=>wC,LFG:()=>Dn,$8M:()=>Kn,NdJ:()=>sC,CRH:()=>mc,oxw:()=>uy,ALo:()=>Th,lcZ:()=>Jy,Q6J:()=>nh,DdM:()=>ZS,iGM:()=>tv,CHM:()=>Nf,oJD:()=>ew,LSH:()=>mp,kYT:()=>jc,Udp:()=>cC,d8E:()=>CC,YNc:()=>X_,_uU:()=>Ua,Oqu:()=>fC,hij:()=>_y});var g=V(9765),te=V(5319),G=V(7574),Ee=V(6682),ye=V(8819);function Q(a){for(let l in a)if(a[l]===Q)return l;throw Error("Could not find renamed property on target object.")}function de(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function X(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(X).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function ne(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const j=Q({__forward_ref__:Q});function H(a){return a.__forward_ref__=H,a.toString=function(){return X(this())},a}function $(a){return ie(a)?a():a}function ie(a){return"function"==typeof a&&a.hasOwnProperty(j)&&a.__forward_ref__===H}class ue extends Error{constructor(l,u){super(function(a,l){return`${a?`NG0${a}: `:""}${l}`}(l,u)),this.code=l}}function he(a){return"string"==typeof a?a:null==a?"":String(a)}function we(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():he(a)}function Vt(a,l){const u=l?` in ${l}`:"";throw new ue("201",`No provider for ${we(a)} found${u}`)}function et(a,l){null==a&&function(a,l,u,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${u} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function rn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Pt(a){return{providers:a.providers||[],imports:a.imports||[]}}function lr(a){return ki(a,Ls)||ki(a,Vs)}function ki(a,l){return a.hasOwnProperty(l)?a[l]:null}function wo(a){return a&&(a.hasOwnProperty(Co)||a.hasOwnProperty(ua))?a[Co]:null}const Ls=Q({\u0275prov:Q}),Co=Q({\u0275inj:Q}),Vs=Q({ngInjectableDef:Q}),ua=Q({ngInjectorDef:Q});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Gn;function mi(a){const l=Gn;return Gn=a,l}function ht(a,l,u){const d=lr(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&Je.Optional?null:void 0!==l?l:void Vt(X(a),"Injector")}function Ht(a){return{toString:a}.toString()}var kt=(()=>((kt=kt||{})[kt.OnPush=0]="OnPush",kt[kt.Default=1]="Default",kt))(),Fe=(()=>((Fe=Fe||{})[Fe.Emulated=0]="Emulated",Fe[Fe.None=2]="None",Fe[Fe.ShadowDom=3]="ShadowDom",Fe))();const st="undefined"!=typeof globalThis&&globalThis,Li="undefined"!=typeof window&&window,bo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ss="undefined"!=typeof global&&global,an=st||ss||Li||bo,W={},q=[],z=Q({\u0275cmp:Q}),Ie=Q({\u0275dir:Q}),se=Q({\u0275pipe:Q}),ze=Q({\u0275mod:Q}),mt=Q({\u0275loc:Q}),Ft=Q({\u0275fac:Q}),dn=Q({__NG_ELEMENT_ID__:Q});let En=0;function kr(a){return Ht(()=>{const u={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||q,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Fe.Emulated,id:"c",styles:a.styles||q,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,m=a.features,E=a.pipes;return d.id+=En++,d.inputs=yf(a.inputs,u),d.outputs=yf(a.outputs),m&&m.forEach(C=>C(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Wn):null,d.pipeDefs=E?()=>("function"==typeof E?E():E).map(ei):null,d})}function Wn(a){return ur(a)||function(a){return a[Ie]||null}(a)}function ei(a){return function(a){return a[se]||null}(a)}const fu={};function Bc(a){return Ht(()=>{const l={type:a.type,bootstrap:a.bootstrap||q,declarations:a.declarations||q,imports:a.imports||q,exports:a.exports||q,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(fu[a.id]=a.type),l})}function jc(a,l){return Ht(()=>{const u=yi(a,!0);u.declarations=l.declarations||q,u.imports=l.imports||q,u.exports=l.exports||q})}function yf(a,l){if(null==a)return W;const u={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=d,l&&(l[f]=m)}return u}const Hc=kr;function Ja(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function ur(a){return a[z]||null}function yi(a,l){const u=a[ze]||null;if(!u&&!0===l)throw new Error(`Type ${X(a)} does not have '\u0275mod' property.`);return u}function Ui(a){return Array.isArray(a)&&"object"==typeof a[1]}function wi(a){return Array.isArray(a)&&!0===a[1]}function vu(a){return 0!=(8&a.flags)}function $c(a){return 2==(2&a.flags)}function tl(a){return 1==(1&a.flags)}function Lr(a){return null!==a.template}function jn(a){return 0!=(512&a[2])}function So(a,l){return a.hasOwnProperty(Ft)?a[Ft]:null}class xm{constructor(l,u,d){this.previousValue=l,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function ha(){return Ao}function Ao(a){return a.type.prototype.ngOnChanges&&(a.setInput=Cf),EE}function EE(){const a=Pm(this),l=null==a?void 0:a.current;if(l){const u=a.previous;if(u===W)a.previous=l;else for(let d in l)u[d]=l[d];a.current=null,this.ngOnChanges(l)}}function Cf(a,l,u,d){const f=Pm(a)||function(a,l){return a[bf]=l}(a,{previous:W,current:null}),m=f.current||(f.current={}),E=f.previous,C=this.declaredInputs[u],D=E[C];m[C]=new xm(D&&D.currentValue,l,E===W),a[d]=l}ha.ngInherit=!0;const bf="__ngSimpleChanges__";function Pm(a){return a[bf]||null}let Tu;function Om(a){Tu=a}function Mm(){return void 0!==Tu?Tu:"undefined"!=typeof document?document:void 0}function gn(a){return!!a.listen}const js={createRenderer:(a,l)=>Mm()};function mn(a){for(;Array.isArray(a);)a=a[0];return a}function rl(a,l){return mn(l[a])}function Cr(a,l){return mn(l[a.index])}function Zc(a,l){return a.data[l]}function Vr(a,l){const u=l[a];return Ui(u)?u:u[0]}function Sf(a){return 4==(4&a[2])}function Fm(a){return 128==(128&a[2])}function fa(a,l){return null==l?null:a[l]}function zc(a){a[18]=0}function sl(a,l){a[5]+=l;let u=a,d=a[3];for(;null!==d&&(1===l&&1===u[5]||-1===l&&0===u[5]);)d[5]+=l,u=d,d=d[3]}const ft={lFrame:Um(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Rf(){return ft.bindingsEnabled}function Se(){return ft.lFrame.lView}function Rt(){return ft.lFrame.tView}function Nf(a){return ft.lFrame.contextLView=a,a[8]}function hn(){let a=xf();for(;null!==a&&64===a.type;)a=a.parent;return a}function xf(){return ft.lFrame.currentTNode}function Ci(a,l){const u=ft.lFrame;u.currentTNode=a,u.isParent=l}function Yc(){return ft.lFrame.isParent}function ol(){ft.lFrame.isParent=!1}function al(){return ft.isInCheckNoChangesMode}function Qc(a){ft.isInCheckNoChangesMode=a}function Ln(){const a=ft.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function $s(){return ft.lFrame.bindingIndex++}function ri(a){const l=ft.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Lm(a,l){const u=ft.lFrame;u.bindingIndex=u.bindingRootIndex=a,Mf(l)}function Mf(a){ft.lFrame.currentDirectiveIndex=a}function Du(a){const l=ft.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Vm(){return ft.lFrame.currentQueryIndex}function Su(a){ft.lFrame.currentQueryIndex=a}function kf(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Xc(a,l,u){if(u&Je.SkipSelf){let f=l,m=a;for(;!(f=f.parent,null!==f||u&Je.Host||(f=kf(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;l=f,a=m}const d=ft.lFrame=ga();return d.currentTNode=l,d.lView=a,!0}function ed(a){const l=ga(),u=a[1];ft.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function ga(){const a=ft.lFrame,l=null===a?null:a.child;return null===l?Um(a):l}function Um(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Bm(){const a=ft.lFrame;return ft.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const DE=Bm;function Au(){const a=Bm();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function br(){return ft.lFrame.selectedIndex}function ll(a){ft.lFrame.selectedIndex=a}function Vn(){const a=ft.lFrame;return Zc(a.tView,a.selectedIndex)}function ul(a,l){for(let u=l.directiveStart,d=l.directiveEnd;u<d;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:N}=m;E&&(a.contentHooks||(a.contentHooks=[])).push(-u,E),C&&((a.contentHooks||(a.contentHooks=[])).push(u,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,C)),D&&(a.viewHooks||(a.viewHooks=[])).push(-u,D),A&&((a.viewHooks||(a.viewHooks=[])).push(u,A),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,A)),null!=N&&(a.destroyHooks||(a.destroyHooks=[])).push(u,N)}}function cl(a,l,u){jm(a,l,3,u)}function td(a,l,u,d){(3&a[2])===u&&jm(a,l,u,d)}function Lf(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function jm(a,l,u,d){const m=null!=d?d:-1,E=l.length-1;let C=0;for(let D=void 0!==d?65535&a[18]:0;D<E;D++)if("number"==typeof l[D+1]){if(C=l[D],null!=d&&C>=d)break}else l[D]<0&&(a[18]+=65536),(C<m||-1==m)&&(Vf(a,u,l,D),a[18]=(4294901760&a[18])+D+2),D++}function Vf(a,l,u,d){const f=u[d]<0,m=u[d+1],C=a[f?-u[d]:u[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class nd{constructor(l,u,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function us(a,l,u){const d=gn(a);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const E=u[f++],C=u[f++],D=u[f++];d?a.setAttribute(l,C,D,E):l.setAttributeNS(E,C,D)}else{const E=m,C=u[++f];cs(E)?d&&a.setProperty(l,E,C):d?a.setAttribute(l,E,C):l.setAttribute(E,C),f++}}return f}function $m(a){return 3===a||4===a||6===a}function cs(a){return 64===a.charCodeAt(0)}function No(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?u=f:0===u||qm(a,u,f,null,-1===u||2===u?l[++d]:null)}}return a}function qm(a,l,u,d,f){let m=0,E=a.length;if(-1===l)E=-1;else for(;m<a.length;){const C=a[m++];if("number"==typeof C){if(C===l){E=-1;break}if(C>l){E=m-1;break}}}for(;m<a.length;){const C=a[m];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==f&&(a[m+1]=f));if(d===a[m+1])return void(a[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==E&&(a.splice(E,0,l),m=E+1),a.splice(m++,0,u),null!==d&&a.splice(m++,0,d),null!==f&&a.splice(m++,0,f)}function In(a){return-1!==a}function ma(a){return 32767&a}function Nu(a,l){let u=function(a){return a>>16}(a),d=l;for(;u>0;)d=d[15],u--;return d}let rd=!0;function id(a){const l=rd;return rd=a,l}let qf=0;function qs(a,l){const u=on(a,l);if(-1!==u)return u;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,xu(d.data,a),xu(l,null),xu(d.blueprint,null));const f=zn(a,l),m=a.injectorIndex;if(In(f)){const E=ma(f),C=Nu(f,l),D=C[1].data;for(let A=0;A<8;A++)l[m+A]=C[E+A]|D[E+A]}return l[m+8]=f,m}function xu(a,l){a.push(0,0,0,0,0,0,0,0,l)}function on(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function zn(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,d=null,f=l;for(;null!==f;){const m=f[1],E=m.type;if(d=2===E?m.declTNode:1===E?f[6]:null,null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function _a(a,l,u){!function(a,l,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(dn)&&(d=u[dn]),null==d&&(d=u[dn]=qf++);const f=255&d;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function Wm(a,l,u){if(u&Je.Optional)return a;Vt(l,"NodeInjector")}function sd(a,l,u,d){if(u&Je.Optional&&void 0===d&&(d=null),0==(u&(Je.Self|Je.Host))){const f=a[9],m=mi(void 0);try{return f?f.get(l,d,u&Je.Optional):ht(l,d,u&Je.Optional)}finally{mi(m)}}return Wm(d,l,u)}function dl(a,l,u,d=Je.Default,f){if(null!==a){const m=function(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(dn)?a[dn]:void 0;return"number"==typeof l?l>=0?255&l:ya:l}(u);if("function"==typeof m){if(!Xc(l,a,d))return d&Je.Host?Wm(f,u,d):sd(l,u,d,f);try{const E=m(d);if(null!=E||d&Je.Optional)return E;Vt(u)}finally{DE()}}else if("number"==typeof m){let E=null,C=on(a,l),D=-1,A=d&Je.Host?l[16][6]:null;for((-1===C||d&Je.SkipSelf)&&(D=-1===C?zn(a,l):l[C+8],-1!==D&&od(d,!1)?(E=l[1],C=ma(D),l=Nu(D,l)):C=-1);-1!==C;){const N=l[1];if(Zm(m,C,N.data)){const O=Gs(C,l,u,E,d,A);if(O!==Gf)return O}D=l[C+8],-1!==D&&od(d,l[1].data[C+8]===A)&&Zm(m,C,l)?(E=N,C=ma(D),l=Nu(D,l)):C=-1}}}return sd(l,u,d,f)}const Gf={};function ya(){return new ds(hn(),Se())}function Gs(a,l,u,d,f,m){const E=l[1],C=E.data[a+8],N=xo(C,E,u,null==d?$c(C)&&rd:d!=E&&0!=(3&C.type),f&Je.Host&&m===C);return null!==N?hl(l,E,N,C):Gf}function xo(a,l,u,d,f){const m=a.providerIndexes,E=l.data,C=1048575&m,D=a.directiveStart,N=m>>20,M=f?C+N:a.directiveEnd;for(let B=d?C:C+N;B<M;B++){const Z=E[B];if(B<D&&u===Z||B>=D&&Z.type===u)return B}if(f){const B=E[D];if(B&&Lr(B)&&B.type===u)return D}return null}function hl(a,l,u,d){let f=a[u];const m=l.data;if(function(a){return a instanceof nd}(f)){const E=f;E.resolving&&function(a,l){throw new ue("200",`Circular dependency in DI detected for ${a}`)}(we(m[u]));const C=id(E.canSeeViewProviders);E.resolving=!0;const D=E.injectImpl?mi(E.injectImpl):null;Xc(a,d,Je.Default);try{f=a[u]=E.factory(void 0,m,a,d),l.firstCreatePass&&u>=d.directiveStart&&function(a,l,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(d){const E=Ao(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,E),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,E)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==D&&mi(D),id(C),E.resolving=!1,DE()}}return f}function Zm(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function od(a,l){return!(a&Je.Self||a&Je.Host&&l)}class ds{constructor(l,u){this._tNode=l,this._lView=u}get(l,u){return dl(this._tNode,this._lView,l,void 0,u)}}function hs(a){return Ht(()=>{const l=a.prototype.constructor,u=l[Ft]||Pu(l),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const m=f[Ft]||Pu(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Pu(a){return ie(a)?()=>{const l=Pu($(a));return l&&l()}:So(a)}function Kn(a){return function(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const m=u[f];if($m(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(m===l)return u[f+1];f+=2}}}return null}(hn(),a)}const Ws="__parameters__";function fs(a,l,u){return Ht(()=>{const d=function(a){return function(...u){if(a){const d=a(...u);for(const f in d)this[f]=d[f]}}}(l);function f(...m){if(this instanceof f)return d.apply(this,m),this;const E=new f(...m);return C.annotation=E,C;function C(D,A,N){const O=D.hasOwnProperty(Ws)?D[Ws]:Object.defineProperty(D,Ws,{value:[]})[Ws];for(;O.length<=N;)O.push(null);return(O[N]=O[N]||[]).push(E),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class zt{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=rn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ym=new zt("AnalyzeForEntryComponents"),$i=Function;function ln(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let d=a[u];Array.isArray(d)?(l===a&&(l=a.slice(0,u)),ln(d,l)):l!==a&&l.push(d)}return l}function dr(a,l){a.forEach(u=>Array.isArray(u)?dr(u,l):l(u))}function va(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Ea(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Tr(a,l,u){let d=Ca(a,l);return d>=0?a[1|d]=u:(d=~d,function(a,l,u,d){let f=a.length;if(f==l)a.push(u,d);else if(1===f)a.push(d,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=d}}(a,d,l,u)),d}function Jm(a,l){const u=Ca(a,l);if(u>=0)return a[1|u]}function Ca(a,l){return function(a,l,u){let d=0,f=a.length>>u;for(;f!==d;){const m=d+(f-d>>1),E=a[m<<u];if(l===E)return m<<u;E>l?f=m:d=m+1}return~(f<<u)}(a,l,1)}const Oo={},Jf="__NG_DI_FLAG__",Mo="ngTempTokenPath",BE=/\n/gm,Xf="__source",ml=Q({provide:String,useValue:Q});let zs;function Ta(a){const l=zs;return zs=a,l}function md(a,l=Je.Default){if(void 0===zs)throw new Error("inject() must be called from an injection context");return null===zs?ht(a,void 0,l):zs.get(a,l&Je.Optional?null:void 0,l)}function Dn(a,l=Je.Default){return(Gn||md)($(a),l)}function bi(a){const l=[];for(let u=0;u<a.length;u++){const d=$(a[u]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,m=Je.Default;for(let E=0;E<d.length;E++){const C=d[E],D=Ia(C);"number"==typeof D?-1===D?f=C.token:m|=D:f=C}l.push(Dn(f,m))}else l.push(Dn(d))}return l}function ko(a,l){return a[Jf]=l,a.prototype[Jf]=l,a}function Ia(a){return a[Jf]}function Fo(a,l,u,d){const f=a[Mo];throw l[Xf]&&f.unshift(l[Xf]),a.message=function(a,l,u,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=X(l);if(Array.isArray(l))f=l.map(X).join(" -> ");else if("object"==typeof l){let m=[];for(let E in l)if(l.hasOwnProperty(E)){let C=l[E];m.push(E+":"+("string"==typeof C?JSON.stringify(C):X(C)))}f=`{${m.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${a.replace(BE,"\n  ")}`}("\n"+a.message,f,u,d),a.ngTokenPath=f,a[Mo]=null,a}const Da=ko(fs("Inject",a=>({token:a})),-1),si=ko(fs("Optional"),8),ps=ko(fs("SkipSelf"),4);let vl,np;function Vo(a){var l;return(null===(l=function(){if(void 0===vl&&(vl=null,an.trustedTypes))try{vl=an.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return vl}())||void 0===l?void 0:l.createHTML(a))||a}function a_(a){var l;return(null===(l=function(){if(void 0===np&&(np=null,an.trustedTypes))try{np=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return np}())||void 0===l?void 0:l.createHTML(a))||a}class ms{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class rp extends ms{getTypeName(){return"HTML"}}class qE extends ms{getTypeName(){return"Style"}}class u_ extends ms{getTypeName(){return"Script"}}class GE extends ms{getTypeName(){return"URL"}}class ip extends ms{getTypeName(){return"ResourceURL"}}function Ks(a){return a instanceof ms?a.changingThisBreaksApplicationSecurity:a}function Sa(a,l){const u=Uo(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function Uo(a){return a instanceof ms&&a.getTypeName()||null}function sp(a){return new rp(a)}function c_(a){return new qE(a)}function op(a){return new u_(a)}function d_(a){return new GE(a)}function ap(a){return new ip(a)}class WE{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Vo(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Cl{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Vo(l),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Vo(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const E=u.item(f).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&l.removeAttribute(E)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const zE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,KE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ed(a){return(a=String(a)).match(zE)||a.match(KE)?a:"unsafe:"+a}function _s(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function bl(...a){const l={};for(const u of a)for(const d in u)u.hasOwnProperty(d)&&(l[d]=!0);return l}const Cd=_s("area,br,col,hr,img,wbr"),bd=_s("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cp=_s("rp,rt"),hp=bl(Cd,bl(bd,_s("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bl(cp,_s("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bl(cp,bd)),Aa=_s("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ra=_s("srcset"),f_=bl(Aa,Ra,_s("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_s("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fp=_s("script,style,template");class QE{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!hp.hasOwnProperty(u))return this.sanitizedSomething=!0,!fp.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=l.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),E=m.name,C=E.toLowerCase();if(!f_.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=m.value;Aa[C]&&(D=Ed(D)),Ra[C]&&(a=D,D=(a=String(a)).split(",").map(l=>Ed(l.trim())).join(", ")),this.buf.push(" ",E,'="',pp(D),'"')}var a;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();hp.hasOwnProperty(u)&&!Cd.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(pp(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const p_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,JE=/([^\#-~ |!])/g;function pp(a){return a.replace(/&/g,"&amp;").replace(p_,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(JE,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tl;function XE(a,l){let u=null;try{Tl=Tl||function(a){const l=new Cl(a);return function(){try{return!!(new window.DOMParser).parseFromString(Vo(""),"text/html")}catch(a){return!1}}()?new WE(l):l}(a);let d=l?String(l):"";u=Tl.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=u.innerHTML,u=Tl.getInertBodyElement(d)}while(d!==m);return Vo((new QE).sanitizeChildren(gp(u)||u))}finally{if(u){const d=gp(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function gp(a){return"content"in a&&function(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function ew(a){const l=Qs();return l?a_(l.sanitize(Sn.HTML,a)||""):Sa(a,"HTML")?a_(Ks(a)):XE(Mm(),he(a))}function mp(a){const l=Qs();return l?l.sanitize(Sn.URL,a)||"":Sa(a,"URL")?Ks(a):Ed(he(a))}function Qs(){const a=Se();return a&&a[12]}const y_="__ngContext__";function Ir(a,l){a[y_]=l}function wp(a){const l=function(a){return a[y_]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function Sl(a){return a.ngOriginalError}function b(a,...l){a.error(...l)}class y{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),d=this._findContext(l),f=(a=l)&&a.ngErrorLogger||b;var a;f(this._console,"ERROR",l),u&&f(this._console,"ORIGINAL ERROR",u),d&&f(this._console,"ERROR CONTEXT",d)}_findContext(l){return l?l.ngDebugContext||this._findContext(Sl(l)):null}_findOriginalError(l){let u=l&&Sl(l);for(;u&&Sl(u);)u=Sl(u);return u||null}}const Uu=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(an))();function Zi(a){return a instanceof Function?a():a}var Ii=(()=>((Ii=Ii||{})[Ii.Important=1]="Important",Ii[Ii.DashCase=2]="DashCase",Ii))();function Bu(a,l){return undefined(a,l)}function jo(a){const l=a[3];return wi(l)?l[3]:l}function T_(a){return Js(a[13])}function I_(a){return Js(a[4])}function Js(a){for(;null!==a&&!wi(a);)a=a[4];return a}function Ho(a,l,u,d,f){if(null!=d){let m,E=!1;wi(d)?m=d:Ui(d)&&(E=!0,d=d[0]);const C=mn(d);0===a&&null!==u?null==f?ow(l,u,C):Al(l,u,C,f||null,!0):1===a&&null!==u?Al(l,u,C,f||null,!0):2===a?function(a,l,u){const d=Rp(a,l);d&&function(a,l,u,d){gn(a)?a.removeChild(l,u,d):l.removeChild(u)}(a,d,l,u)}(l,C,E):3===a&&l.destroyNode(C),null!=m&&function(a,l,u,d,f){const m=u[7];m!==mn(u)&&Ho(l,a,d,m,f);for(let C=10;C<u.length;C++){const D=u[C];Op(D[1],D,a,l,d,m)}}(l,a,m,u,f)}}function xd(a,l,u){return gn(a)?a.createElement(l,u):null===u?a.createElement(l):a.createElementNS(u,l)}function Di(a,l){const u=a[9],d=u.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,sl(f,-1)),u.splice(d,1)}function Ip(a,l){if(a.length<=10)return;const u=10+l,d=a[u];if(d){const f=d[17];null!==f&&f!==a&&Di(f,d),l>0&&(a[u-1][4]=d[4]);const m=Ea(a,10+l);!function(a,l){Op(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const E=m[19];null!==E&&E.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Dp(a,l){if(!(256&l[2])){const u=l[11];gn(u)&&u.destroyNode&&Op(a,l,u,3,null,null),function(a){let l=a[13];if(!l)return sw(a[1],a);for(;l;){let u=null;if(Ui(l))u=l[13];else{const d=l[10];d&&(u=d)}if(!u){for(;l&&!l[4]&&l!==a;)Ui(l)&&sw(l[1],l),l=l[3];null===l&&(l=a),Ui(l)&&sw(l[1],l),u=l&&l[4]}l=u}}(l)}}function sw(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let d=0;d<u.length;d+=2){const f=l[u[d]];if(!(f instanceof nd)){const m=u[d+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const C=f[m[E]],D=m[E+1];try{D.call(C)}finally{}}else try{m.call(f)}finally{}}}}(a,l),function(a,l){const u=a.cleanup,d=l[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const E=u[m+1],C="function"==typeof E?E(l):mn(l[E]),D=d[f=u[m+2]],A=u[m+3];"boolean"==typeof A?C.removeEventListener(u[m],D,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),m+=2}else{const E=d[f=u[m+1]];u[m].call(E)}if(null!==d){for(let m=f+1;m<d.length;m++)d[m]();l[7]=null}}(a,l),1===l[1].type&&gn(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&wi(l[3])){u!==l[3]&&Di(u,l);const d=l[19];null!==d&&d.detachView(a)}}}function Sp(a,l,u){return function(a,l,u){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return u[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===Fe.None||f===Fe.Emulated)return null}return Cr(d,u)}(a,l.parent,u)}function Al(a,l,u,d,f){gn(a)?a.insertBefore(l,u,d,f):l.insertBefore(u,d,f)}function ow(a,l,u){gn(a)?a.appendChild(l,u):l.appendChild(u)}function BT(a,l,u,d,f){null!==d?Al(a,l,u,d,f):ow(a,l,u)}function Rp(a,l){return gn(a)?a.parentNode(l):l.parentNode}let $T=function(a,l,u){return 40&a.type?Cr(a,u):null};function A_(a,l,u,d){const f=Sp(a,d,l),m=l[11],C=function(a,l,u){return $T(a,l,u)}(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)BT(m,f,u[D],C,!1);else BT(m,f,u,C,!1)}function $o(a,l){if(null!==l){const u=l.type;if(3&u)return Cr(l,a);if(4&u)return xp(-1,a[l.index]);if(8&u){const d=l.child;if(null!==d)return $o(a,d);{const f=a[l.index];return wi(f)?xp(-1,f):mn(f)}}if(32&u)return Bu(l,a)()||mn(a[l.index]);{const d=R_(a,l);return null!==d?Array.isArray(d)?d[0]:$o(jo(a[16]),d):$o(a,l.next)}}return null}function R_(a,l){return null!==l?a[16][6].projection[l.projection]:null}function xp(a,l){const u=10+a+1;if(u<l.length){const d=l[u],f=d[1].firstChild;if(null!==f)return $o(d,f)}return l[7]}function uw(a,l,u,d,f,m,E){for(;null!=u;){const C=d[u.index],D=u.type;if(E&&0===l&&(C&&Ir(mn(C),d),u.flags|=4),64!=(64&u.flags))if(8&D)uw(a,l,u.child,d,f,m,!1),Ho(l,a,f,C,m);else if(32&D){const A=Bu(u,d);let N;for(;N=A();)Ho(l,a,f,N,m);Ho(l,a,f,C,m)}else 16&D?qT(a,l,d,u,f,m):Ho(l,a,f,C,m);u=E?u.projectionNext:u.next}}function Op(a,l,u,d,f,m){uw(u,d,a.firstChild,l,f,m,!1)}function qT(a,l,u,d,f,m){const E=u[16],D=E[6].projection[d.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)Ho(l,a,f,D[A],m);else uw(a,l,D,E[3],f,m,!0)}function GT(a,l,u){gn(a)?a.setAttribute(l,"style",u):l.style.cssText=u}function Pd(a,l,u){gn(a)?""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u):l.className=u}function N_(a,l,u){let d=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=l.length;if(f+m===d||a.charCodeAt(f+m)<=32)return f}u=f+1}}const WT="ng-template";function ZT(a,l,u){let d=0;for(;d<a.length;){let f=a[d++];if(u&&"class"===f){if(f=a[d],-1!==N_(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function zT(a){return 4===a.type&&a.value!==WT}function Qk(a,l,u){return l===(4!==a.type||u?a.value:WT)}function hw(a,l,u){let d=4;const f=a.attrs||[],m=function(a){for(let l=0;l<a.length;l++)if($m(a[l]))return l;return a.length}(f);let E=!1;for(let C=0;C<l.length;C++){const D=l[C];if("number"!=typeof D){if(!E)if(4&d){if(d=2|1&d,""!==D&&!Qk(a,D,u)||""===D&&1===l.length){if(qo(d))return!1;E=!0}}else{const A=8&d?D:l[++C];if(8&d&&null!==a.attrs){if(!ZT(a.attrs,A,u)){if(qo(d))return!1;E=!0}continue}const O=CN(8&d?"class":D,f,zT(a),u);if(-1===O){if(qo(d))return!1;E=!0;continue}if(""!==A){let M;M=O>m?"":f[O+1].toLowerCase();const B=8&d?M:null;if(B&&-1!==N_(B,A,0)||2&d&&A!==M){if(qo(d))return!1;E=!0}}}}else{if(!E&&!qo(d)&&!qo(D))return!1;if(E&&qo(D))continue;E=!1,d=D|1&d}}return qo(d)||E}function qo(a){return 0==(1&a)}function CN(a,l,u,d){if(null===l)return-1;let f=0;if(d||!u){let m=!1;for(;f<l.length;){const E=l[f];if(E===a)return f;if(3===E||6===E)m=!0;else{if(1===E||2===E){let C=l[++f];for(;"string"==typeof C;)C=l[++f];continue}if(4===E)break;if(0===E){f+=4;continue}}f+=m?1:2}return-1}return function(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const d=a[u];if("number"==typeof d)return-1;if(d===l)return u;u++}return-1}(l,a)}function bN(a,l,u=!1){for(let d=0;d<l.length;d++)if(hw(a,l[d],u))return!0;return!1}function pw(a,l){return a?":not("+l.trim()+")":l}function DN(a){let l=a[0],u=1,d=2,f="",m=!1;for(;u<a.length;){let E=a[u];if("string"==typeof E)if(2&d){const C=a[++u];f+="["+E+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+E:4&d&&(f+=" "+E);else""!==f&&!qo(E)&&(l+=pw(m,f),f=""),d=E,m=m||!qo(d);u++}return""!==f&&(l+=pw(m,f)),l}const Et={};function YT(a){gw(Rt(),Se(),br()+a,al())}function gw(a,l,u,d){if(!d)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&cl(l,m,u)}else{const m=a.preOrderHooks;null!==m&&td(l,m,0,u)}ll(u)}function x_(a,l){return a<<17|l<<2}function Xs(a){return a>>17&32767}function P_(a){return 2|a}function Go(a){return(131068&a)>>2}function _w(a,l){return-131069&a|l<<2}function yw(a){return 1|a}function L_(a,l){const u=a.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],m=u[d+1];if(-1!==m){const E=a.data[m];Su(f),E.contentQueries(2,l[m],m)}}}function kp(a,l,u,d,f,m,E,C,D,A){const N=l.blueprint.slice();return N[0]=f,N[2]=140|d,zc(N),N[3]=N[15]=a,N[8]=u,N[10]=E||a&&a[10],N[11]=C||a&&a[11],N[12]=D||a&&a[12]||null,N[9]=A||a&&a[9]||null,N[6]=m,N[16]=2==l.type?a[16]:N,N}function ju(a,l,u,d,f){let m=a.data[l];if(null===m)m=function(a,l,u,d,f){const m=xf(),E=Yc(),D=a.data[l]=function(a,l,u,d,f,m){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,u,l,d,f);return null===a.firstChild&&(a.firstChild=D),null!==m&&(E?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(a,l,u,d,f),ft.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=d,m.attrs=f;const E=function(){const a=ft.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===E?-1:E.injectorIndex}return Ci(m,!0),m}function kd(a,l,u,d){if(0===u)return-1;const f=l.length;for(let m=0;m<u;m++)l.push(d),a.blueprint.push(d),a.data.push(null);return f}function Fd(a,l,u){ed(l);try{const d=a.viewQuery;null!==d&&Vd(1,d,u);const f=a.template;null!==f&&oI(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&L_(a,l),a.staticViewQueries&&Vd(2,a.viewQuery,u);const m=a.components;null!==m&&function(a,l){for(let u=0;u<l.length;u++)Ow(a,l[u])}(l,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,Au()}}function Hu(a,l,u,d){const f=l[2];if(256==(256&f))return;ed(l);const m=al();try{zc(l),function(a){ft.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&oI(a,l,u,2,d);const E=3==(3&f);if(!m)if(E){const A=a.preOrderCheckHooks;null!==A&&cl(l,A,null)}else{const A=a.preOrderHooks;null!==A&&td(l,A,0,null),Lf(l,0)}if(function(a){for(let l=T_(a);null!==l;l=I_(l)){if(!l[2])continue;const u=l[9];for(let d=0;d<u.length;d++){const f=u[d],m=f[3];0==(1024&f[2])&&sl(m,1),f[2]|=1024}}}(l),function(a){for(let l=T_(a);null!==l;l=I_(l))for(let u=10;u<l.length;u++){const d=l[u],f=d[1];Fm(d)&&Hu(f,d,f.template,d[8])}}(l),null!==a.contentQueries&&L_(a,l),!m)if(E){const A=a.contentCheckHooks;null!==A&&cl(l,A)}else{const A=a.contentHooks;null!==A&&td(l,A,1),Lf(l,1)}!function(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)ll(~f);else{const m=f,E=u[++d],C=u[++d];Lm(E,m),C(2,l[m])}}}finally{ll(-1)}}(a,l);const C=a.components;null!==C&&function(a,l){for(let u=0;u<l.length;u++)dF(a,l[u])}(l,C);const D=a.viewQuery;if(null!==D&&Vd(2,D,d),!m)if(E){const A=a.viewCheckHooks;null!==A&&cl(l,A)}else{const A=a.viewHooks;null!==A&&td(l,A,2),Lf(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),m||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,sl(l[3],-1))}finally{Au()}}function LN(a,l,u,d){const f=l[10],m=!al(),E=Sf(l);try{m&&!E&&f.begin&&f.begin(),E&&Fd(a,l,d),Hu(a,l,u,d)}finally{m&&!E&&f.end&&f.end()}}function oI(a,l,u,d,f){const m=br(),E=2&d;try{ll(-1),E&&l.length>20&&gw(a,l,20,al()),u(d,f)}finally{ll(m)}}function aI(a,l,u){if(vu(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const E=a.data[m];E.contentQueries&&E.contentQueries(1,u[m],m)}}}function V_(a,l,u){!Rf()||(function(a,l,u,d){const f=u.directiveStart,m=u.directiveEnd;a.firstCreatePass||qs(u,l),Ir(d,l);const E=u.initialInputs;for(let C=f;C<m;C++){const D=a.data[C],A=Lr(D);A&&ZN(l,u,D);const N=hl(l,a,C,u);Ir(N,l),null!==E&&zN(0,C-f,N,D,0,E),A&&(Vr(u.index,l)[8]=N)}}(a,l,u,Cr(u,l)),128==(128&u.flags)&&function(a,l,u){const d=u.directiveStart,f=u.directiveEnd,E=u.index,C=ft.lFrame.currentDirectiveIndex;try{ll(E);for(let D=d;D<f;D++){const A=a.data[D],N=l[D];Mf(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&qN(A,N)}}finally{ll(-1),Mf(C)}}(a,l,u))}function lI(a,l,u=Cr){const d=l.localNames;if(null!==d){let f=l.index+1;for(let m=0;m<d.length;m+=2){const E=d[m+1],C=-1===E?u(l,a):a[E];a[f++]=C}}}function Aw(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=U_(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function U_(a,l,u,d,f,m,E,C,D,A){const N=20+d,O=N+f,M=function(a,l){const u=[];for(let d=0;d<l;d++)u.push(d<a?null:Et);return u}(N,O),B="function"==typeof A?A():A;return M[1]={type:a,blueprint:M,template:u,queries:null,viewQuery:C,declTNode:l,data:M.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:D,consts:B,incompleteFirstPass:!1}}function cI(a,l,u,d){const f=Lw(l);null===u?f.push(d):(f.push(u),a.firstCreatePass&&tx(a).push(d,f.length-1))}function Fp(a,l,u){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(l,f):u[d]=[l,f]}return u}function Si(a,l,u,d,f,m,E,C){const D=Cr(l,u);let N,A=l.inputs;!C&&null!=A&&(N=A[d])?(nx(a,u,N,d,f),$c(l)&&function(a,l){const u=Vr(l,a);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(d=function(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=E?E(f,l.value||"",d):f,gn(m)?m.setProperty(D,d,f):cs(d)||(D.setProperty?D.setProperty(d,f):D[d]=f))}function B_(a,l,u,d){let f=!1;if(Rf()){const m=function(a,l,u){const d=a.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const E=d[m];bN(u,E.selectors,!1)&&(f||(f=[]),_a(qs(u,l),a,E.type),Lr(E)?(xw(a,u),f.unshift(E)):f.push(E))}return f}(a,l,u),E=null===d?null:{"":-1};if(null!==m){f=!0,mI(u,a.data.length,m.length);for(let N=0;N<m.length;N++){const O=m[N];O.providersResolver&&O.providersResolver(O)}let C=!1,D=!1,A=kd(a,l,m.length,null);for(let N=0;N<m.length;N++){const O=m[N];u.mergedAttrs=No(u.mergedAttrs,O.hostAttrs),_I(a,u,l,A,O),WN(A,O,E),null!==O.contentQueries&&(u.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=128);const M=O.type.prototype;!C&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),C=!0),!D&&(M.ngOnChanges||M.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),D=!0),A++}!function(a,l){const d=l.directiveEnd,f=a.data,m=l.attrs,E=[];let C=null,D=null;for(let A=l.directiveStart;A<d;A++){const N=f[A],O=N.inputs,M=null===m||zT(l)?null:KN(O,m);E.push(M),C=Fp(O,A,C),D=Fp(N.outputs,A,D)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=E,l.inputs=C,l.outputs=D}(a,u)}E&&function(a,l,u){if(l){const d=a.localNames=[];for(let f=0;f<l.length;f+=2){const m=u[l[f+1]];if(null==m)throw new ue("301",`Export of name '${l[f+1]}' not found!`);d.push(l[f],m)}}}(u,d,E)}return u.mergedAttrs=No(u.mergedAttrs,u.attrs),f}function Nw(a,l,u,d,f,m){const E=m.hostBindings;if(E){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const D=~l.index;(function(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(d,f,E)}}function qN(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function xw(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function WN(a,l,u){if(u){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)u[l.exportAs[d]]=a;Lr(l)&&(u[""]=a)}}function mI(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function _I(a,l,u,d,f){a.data[d]=f;const m=f.factory||(f.factory=So(f.type)),E=new nd(m,Lr(f),null);a.blueprint[d]=E,u[d]=E,Nw(a,l,0,d,kd(a,u,f.hostVars,Et),f)}function ZN(a,l,u){const d=Cr(l,a),f=Aw(u),m=a[10],E=j_(a,kp(a,f,null,u.onPush?64:16,d,l,m,m.createRenderer(d,u),null,null));a[l.index]=E}function Zo(a,l,u,d,f,m){const E=Cr(a,l);!function(a,l,u,d,f,m,E){if(null==m)gn(a)?a.removeAttribute(l,f,u):l.removeAttribute(f);else{const C=null==E?he(m):E(m,d||"",f);gn(a)?a.setAttribute(l,f,C,u):u?l.setAttributeNS(u,f,C):l.setAttribute(f,C)}}(l[11],E,m,a.value,u,d,f)}function zN(a,l,u,d,f,m){const E=m[l];if(null!==E){const C=d.setInput;for(let D=0;D<E.length;){const A=E[D++],N=E[D++],O=E[D++];null!==C?d.setInput(u,O,A,N):u[N]=O}}}function KN(a,l){let u=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,a[f],l[d+1])),d+=2}else d+=2;else d+=4}return u}function yI(a,l,u,d){return new Array(a,!0,!1,l,null,0,d,u,null,null)}function dF(a,l){const u=Vr(l,a);if(Fm(u)){const d=u[1];80&u[2]?Hu(d,u,d.template,u[8]):u[5]>0&&Ld(u)}}function Ld(a){for(let d=T_(a);null!==d;d=I_(d))for(let f=10;f<d.length;f++){const m=d[f];if(1024&m[2]){const E=m[1];Hu(E,m,E.template,m[8])}else m[5]>0&&Ld(m)}const u=a[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=Vr(u[d],a);Fm(f)&&f[5]>0&&Ld(f)}}function Ow(a,l){const u=Vr(l,a),d=u[1];(function(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(d,u),Fd(d,u,u[8])}function j_(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Mw(a){for(;a;){a[2]|=64;const l=jo(a);if(jn(a)&&!l)return a;a=l}return null}function kw(a,l,u){const d=l[10];d.begin&&d.begin();try{Hu(a,l,a.template,u)}catch(f){throw EI(l,f),f}finally{d.end&&d.end()}}function Fw(a){!function(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],d=wp(u),f=d[1];LN(f,d,f.template,u)}}(a[8])}function Vd(a,l,u){Su(0),l(a,u)}const ex=(()=>Promise.resolve(null))();function Lw(a){return a[7]||(a[7]=[])}function tx(a){return a.cleanup||(a.cleanup=[])}function EI(a,l){const u=a[9],d=u?u.get(y,null):null;d&&d.handleError(l)}function nx(a,l,u,d,f){for(let m=0;m<u.length;){const E=u[m++],C=u[m++],D=l[E],A=a.data[E];null!==A.setInput?A.setInput(D,f,d,C):D[C]=f}}function Nn(a,l,u){const d=rl(l,a);!function(a,l,u){gn(a)?a.setValue(l,u):l.textContent=u}(a[11],d,u)}function Ud(a,l,u){let d=u?a.styles:null,f=u?a.classes:null,m=0;if(null!==l)for(let E=0;E<l.length;E++){const C=l[E];"number"==typeof C?m=C:1==m?f=ne(f,C):2==m&&(d=ne(d,C+": "+l[++E]+";"))}u?a.styles=d:a.stylesWithoutHost=d,u?a.classes=f:a.classesWithoutHost=f}const Oa=new zt("INJECTOR",-1);class Uw{get(l,u=Oo){if(u===Oo){const d=new Error(`NullInjectorError: No provider for ${X(l)}!`);throw d.name="NullInjectorError",d}return u}}const xl=new zt("Set Injector scope."),xn={},rx={};let Bw;function Es(){return void 0===Bw&&(Bw=new Uw),Bw}function wI(a,l=null,u=null,d){return new ix(a,u,l||Es(),d)}class ix{constructor(l,u,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&dr(u,C=>this.processProvider(C,l,u)),dr([l],C=>this.processInjectorType(C,[],m)),this.records.set(Oa,Bd(void 0,this));const E=this.records.get(xl);this.scope=null!=E?E.value:null,this.source=f||("object"==typeof l?null:X(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=Oo,d=Je.Default){this.assertNotDestroyed();const f=Ta(this),m=mi(void 0);try{if(!(d&Je.SkipSelf)){let C=this.records.get(l);if(void 0===C){const D=("function"==typeof(a=l)||"object"==typeof a&&a instanceof zt)&&lr(l);C=D&&this.injectableDefInScope(D)?Bd($_(l),xn):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(d&Je.Self?Es():this.parent).get(l,u=d&Je.Optional&&u===Oo?null:u)}catch(E){if("NullInjectorError"===E.name){if((E[Mo]=E[Mo]||[]).unshift(X(l)),f)throw E;return Fo(E,l,"R3InjectorError",this.source)}throw E}finally{mi(m),Ta(f)}var a}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,f)=>l.push(X(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(l,u,d){if(!(l=$(l)))return!1;let f=wo(l);const m=null==f&&l.ngModule||void 0,E=void 0===m?l:m,C=-1!==d.indexOf(E);if(void 0!==m&&(f=wo(m)),null==f)return!1;if(null!=f.imports&&!C){let N;d.push(E);try{dr(f.imports,O=>{this.processInjectorType(O,u,d)&&(void 0===N&&(N=[]),N.push(O))})}finally{}if(void 0!==N)for(let O=0;O<N.length;O++){const{ngModule:M,providers:B}=N[O];dr(B,Z=>this.processProvider(Z,M,B||q))}}this.injectorDefTypes.add(E);const D=So(E)||(()=>new E);this.records.set(E,Bd(D,xn));const A=f.providers;if(null!=A&&!C){const N=l;dr(A,O=>this.processProvider(O,N,A))}return void 0!==m&&void 0!==l.providers}processProvider(l,u,d){let f=jd(l=$(l))?l:$(l&&l.provide);const m=bI(a=l)?Bd(void 0,a.useValue):Bd(CI(a),xn);var a;if(jd(l)||!0!==l.multi)this.records.get(f);else{let E=this.records.get(f);E||(E=Bd(void 0,xn,!0),E.factory=()=>bi(E.multi),this.records.set(f,E)),f=l,E.multi.push(l)}this.records.set(f,m)}hydrate(l,u){return u.value===xn&&(u.value=rx,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(a=u.value)&&"object"==typeof a&&"function"==typeof a.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var a}injectableDefInScope(l){if(!l.providedIn)return!1;const u=$(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function $_(a){const l=lr(a),u=null!==l?l.factory:So(a);if(null!==u)return u;if(a instanceof zt)throw new Error(`Token ${X(a)} is missing a \u0275prov definition.`);if(a instanceof Function)return function(a){const l=a.length;if(l>0){const d=function(a,l){const u=[];for(let d=0;d<a;d++)u.push(l);return u}(l,"?");throw new Error(`Can't resolve all parameters for ${X(a)}: (${d.join(", ")}).`)}const u=function(a){const l=a&&(a[Ls]||a[Vs]);if(l){const u=function(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Error("unreachable")}function CI(a,l,u){let d;if(jd(a)){const f=$(a);return So(f)||$_(f)}if(bI(a))d=()=>$(a.useValue);else if(function(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...bi(a.deps||[]));else if(function(a){return!(!a||!a.useExisting)}(a))d=()=>Dn($(a.useExisting));else{const f=$(a&&(a.useClass||a.provide));if(!function(a){return!!a.deps}(a))return So(f)||$_(f);d=()=>new f(...bi(a.deps))}return d}function Bd(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function bI(a){return null!==a&&"object"==typeof a&&ml in a}function jd(a){return"function"==typeof a}const L=function(a,l,u){return function(a,l=null,u=null,d){const f=wI(a,l,u,d);return f._resolveInjectorDefTypes(),f}({name:u},l,a,u)};let Zt=(()=>{class a{static create(u,d){return Array.isArray(u)?L(u,d,""):L(u.providers,u.parent,u.name||"")}}return a.THROW_IF_NOT_FOUND=Oo,a.NULL=new Uw,a.\u0275prov=rn({token:a,providedIn:"any",factory:()=>Dn(Oa)}),a.__NG_ELEMENT_ID__=-1,a})();function px(a,l){ul(wp(a)[1],hn())}function Wd(a){let l=function(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const d=[a];for(;l;){let f;if(Lr(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Error("Directives cannot inherit Components");f=l.\u0275dir}if(f){if(u){d.push(f);const E=a;E.inputs=K_(a.inputs),E.declaredInputs=K_(a.declaredInputs),E.outputs=K_(a.outputs);const C=f.hostBindings;C&&MI(a,C);const D=f.viewQuery,A=f.contentQueries;if(D&&PI(a,D),A&&OI(a,A),de(a.inputs,f.inputs),de(a.declaredInputs,f.declaredInputs),de(a.outputs,f.outputs),Lr(f)&&f.data.animation){const N=a.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let E=0;E<m.length;E++){const C=m[E];C&&C.ngInherit&&C(a),C===Wd&&(u=!1)}}l=Object.getPrototypeOf(l)}!function(a){let l=0,u=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=l+=f.hostVars,f.hostAttrs=No(f.hostAttrs,u=No(u,f.hostAttrs))}}(d)}function K_(a){return a===W?{}:a===q?[]:a}function PI(a,l){const u=a.viewQuery;a.viewQuery=u?(d,f)=>{l(d,f),u(d,f)}:l}function OI(a,l){const u=a.contentQueries;a.contentQueries=u?(d,f,m)=>{l(d,f,m),u(d,f,m)}:l}function MI(a,l){const u=a.hostBindings;a.hostBindings=u?(d,f)=>{l(d,f),u(d,f)}:l}let Bp=null;function zu(){if(!Bp){const a=an.Symbol;if(a&&a.iterator)Bp=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const d=l[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Bp=d)}}}return Bp}class oo{constructor(l){this.wrapped=l}static wrap(l){return new oo(l)}static unwrap(l){return oo.isWrapped(l)?l.wrapped:l}static isWrapped(l){return l instanceof oo}}function Zd(a){return!!jp(a)&&(Array.isArray(a)||!(a instanceof Map)&&zu()in a)}function jp(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ws(a,l,u){return a[l]=u}function Br(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Kw(a,l,u,d){const f=Se();return Br(f,$s(),l)&&(Rt(),Zo(Vn(),f,a,l,u,d)),Kw}function X_(a,l,u,d,f,m,E,C){const D=Se(),A=Rt(),N=a+20,O=A.firstCreatePass?function(a,l,u,d,f,m,E,C,D){const A=l.consts,N=ju(l,a,4,E||null,fa(A,C));B_(l,u,N,fa(A,D)),ul(l,N);const O=N.tViews=U_(2,N,d,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,A);return null!==l.queries&&(l.queries.template(l,N),O.queries=l.queries.embeddedTView(N)),N}(N,A,D,l,u,d,f,m,E):A.data[N];Ci(O,!1);const M=D[11].createComment("");A_(A,D,M,O),Ir(M,D),j_(D,D[N]=yI(M,D,M,O)),tl(O)&&V_(A,D,O),null!=E&&lI(D,O,C)}function th(a,l=Je.Default){const u=Se();return null===u?Dn(a,l):dl(hn(),u,$(a),l)}function nh(a,l,u){const d=Se();return Br(d,$s(),l)&&Si(Rt(),Vn(),d,a,l,d[11],u,!1),nh}function Ki(a,l,u,d,f){const E=f?"class":"style";nx(a,u,l.inputs[E],E,d)}function jr(a,l,u,d){const f=Se(),m=Rt(),E=20+a,C=f[11],D=f[E]=xd(C,l,ft.lFrame.currentNamespace),A=m.firstCreatePass?function(a,l,u,d,f,m,E){const C=l.consts,A=ju(l,a,2,f,fa(C,m));return B_(l,u,A,fa(C,E)),null!==A.attrs&&Ud(A,A.attrs,!1),null!==A.mergedAttrs&&Ud(A,A.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,A),A}(E,m,f,0,l,u,d):m.data[E];Ci(A,!0);const N=A.mergedAttrs;null!==N&&us(C,D,N);const O=A.classes;null!==O&&Pd(C,D,O);const M=A.styles;null!==M&&GT(C,D,M),64!=(64&A.flags)&&A_(m,f,D,A),0===ft.lFrame.elementDepthCount&&Ir(D,f),ft.lFrame.elementDepthCount++,tl(A)&&(V_(m,f,A),aI(m,A,f)),null!==d&&lI(f,A)}function nC(){let a=hn();Yc()?ol():(a=a.parent,Ci(a,!1));const l=a;ft.lFrame.elementDepthCount--;const u=Rt();u.firstCreatePass&&(ul(u,a),vu(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function(a){return 0!=(16&a.flags)}(l)&&Ki(u,l,Se(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function(a){return 0!=(32&a.flags)}(l)&&Ki(u,l,Se(),l.stylesWithoutHost,!1)}function sy(a,l,u,d){jr(a,l,u,d),nC()}function oy(a,l,u){const d=Se(),f=Rt(),m=a+20,E=f.firstCreatePass?function(a,l,u,d,f){const m=l.consts,E=fa(m,d),C=ju(l,a,8,"ng-container",E);return null!==E&&Ud(C,E,!0),B_(l,u,C,fa(m,f)),null!==l.queries&&l.queries.elementStart(l,C),C}(m,f,d,l,u):f.data[m];Ci(E,!0);const C=d[m]=d[11].createComment("");A_(f,d,C,E),Ir(C,d),tl(E)&&(V_(f,d,E),aI(f,E,d)),null!=u&&lI(d,E)}function ay(){let a=hn();const l=Rt();Yc()?ol():(a=a.parent,Ci(a,!1)),l.firstCreatePass&&(ul(l,a),vu(a)&&l.queries.elementEnd(a))}function tc(){return Se()}function ly(a){return!!a&&"function"==typeof a.then}function rC(a){return!!a&&"function"==typeof a.subscribe}const iC=rC;function sC(a,l,u,d){const f=Se(),m=Rt(),E=hn();return function(a,l,u,d,f,m,E,C){const D=tl(d),N=a.firstCreatePass&&tx(a),O=l[8],M=Lw(l);let B=!0;if(3&d.type||C){const Y=Cr(d,l),xe=C?C(Y):Y,ge=M.length,Le=C?pt=>C(mn(pt[d.index])):d.index;if(gn(u)){let pt=null;if(!C&&D&&(pt=function(a,l,u,d){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const E=f[m];if(E===u&&f[m+1]===d){const C=l[7],D=f[m+2];return C.length>D?C[D]:null}"string"==typeof E&&(m+=2)}return null}(a,l,f,d.index)),null!==pt)(pt.__ngLastListenerFn__||pt).__ngNextListenerFn__=m,pt.__ngLastListenerFn__=m,B=!1;else{m=rh(d,l,O,m,!1);const Lt=u.listen(xe,f,m);M.push(m,Lt),N&&N.push(f,Le,ge,ge+1)}}else m=rh(d,l,O,m,!0),xe.addEventListener(f,m,E),M.push(m),N&&N.push(f,Le,ge,E)}else m=rh(d,l,O,m,!1);const Z=d.outputs;let le;if(B&&null!==Z&&(le=Z[f])){const Y=le.length;if(Y)for(let xe=0;xe<Y;xe+=2){const nn=l[le[xe]][le[xe+1]].subscribe(m),Ps=M.length;M.push(m,nn),N&&N.push(f,d.index,Ps,-(Ps+1))}}}(m,f,f[11],E,a,l,!!u,d),sC}function oD(a,l,u,d){try{return!1!==u(d)}catch(f){return EI(a,f),!1}}function rh(a,l,u,d,f){return function m(E){if(E===Function)return d;const C=2&a.flags?Vr(a.index,l):l;0==(32&l[2])&&Mw(C);let D=oD(l,0,d,E),A=m.__ngNextListenerFn__;for(;A;)D=oD(l,0,A,E)&&D,A=A.__ngNextListenerFn__;return f&&!1===D&&(E.preventDefault(),E.returnValue=!1),D}}function uy(a=1){return function(a){return(ft.lFrame.contextLView=function(a,l){for(;a>0;)l=l[15],a--;return l}(a,ft.lFrame.contextLView))[8]}(a)}function aC(a,l,u,d,f){const m=a[u+1],E=null===l;let C=d?Xs(m):Go(m),D=!1;for(;0!==C&&(!1===D||E);){const N=a[C+1];cD(a[C],l)&&(D=!0,a[C+1]=d?yw(N):P_(N)),C=d?Xs(N):Go(N)}D&&(a[u+1]=d?P_(m):yw(m))}function cD(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Ca(a,l)>=0}const Jn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rc(a){return a.substring(Jn.key,Jn.keyEnd)}function dD(a,l){const u=Jn.textEnd;return u===l?-1:(l=Jn.keyEnd=function(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,Jn.key=l,u),Va(a,l,u))}function Va(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function cC(a,l,u){return Ai(a,l,u,!1),cC}function ah(a,l){return Ai(a,l,null,!0),ah}function Kp(a){!function(a,l,u,d){const f=Rt(),m=ri(2);f.firstUpdatePass&&py(f,null,m,d);const E=Se();if(u!==Et&&Br(E,m,u)){const C=f.data[br()];if(sc(C,d)&&!fy(f,m)){let D=d?C.classesWithoutHost:C.stylesWithoutHost;null!==D&&(u=ne(D,u||"")),Ki(f,C,E,u,d)}else!function(a,l,u,d,f,m,E,C){f===Et&&(f=q);let D=0,A=0,N=0<f.length?f[0]:null,O=0<m.length?m[0]:null;for(;null!==N||null!==O;){const M=D<f.length?f[D+1]:void 0,B=A<m.length?m[A+1]:void 0;let le,Z=null;N===O?(D+=2,A+=2,M!==B&&(Z=O,le=B)):null===O||null!==N&&N<O?(D+=2,Z=N):(A+=2,Z=O,le=B),null!==Z&&my(a,l,u,d,Z,le,E,C),N=D<f.length?f[D]:null,O=A<m.length?m[A]:null}}(f,C,E,E[11],E[m+1],E[m+1]=function(a,l,u){if(null==u||""===u)return q;const d=[],f=Ks(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)a(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&a(d,m,f[m]);else"string"==typeof f&&l(d,f);return d}(a,l,u),d,m)}}(Tr,Yo,a,!0)}function Yo(a,l){for(let u=function(a){return function(a){Jn.key=0,Jn.keyEnd=0,Jn.value=0,Jn.valueEnd=0,Jn.textEnd=a.length}(a),dD(a,Va(a,0,Jn.textEnd))}(l);u>=0;u=dD(l,u))Tr(a,rc(l),!0)}function Ai(a,l,u,d){const f=Se(),m=Rt(),E=ri(2);m.firstUpdatePass&&py(m,a,E,d),l!==Et&&Br(f,E,l)&&my(m,m.data[br()],f,f[11],a,f[E+1]=function(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=X(Ks(a)))),a}(l,u),d,E)}function fy(a,l){return l>=a.expandoStartIndex}function py(a,l,u,d){const f=a.data;if(null===f[u+1]){const m=f[br()],E=fy(a,u);sc(m,d)&&null===l&&!E&&(l=!1),l=function(a,l,u,d){const f=Du(a);let m=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(u=Yp(u=dC(null,a,l,u,d),l.attrs,d),m=null);else{const E=l.directiveStylingLast;if(-1===E||a[E]!==f)if(u=dC(f,a,l,u,d),null===m){let D=function(a,l,u){const d=u?l.classBindings:l.styleBindings;if(0!==Go(d))return a[Xs(d)]}(a,l,d);void 0!==D&&Array.isArray(D)&&(D=dC(null,a,l,D[1],d),D=Yp(D,l.attrs,d),function(a,l,u,d){a[Xs(u?l.classBindings:l.styleBindings)]=d}(a,l,d,D))}else m=function(a,l,u){let d;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)d=Yp(d,a[m].hostAttrs,u);return Yp(d,l.attrs,u)}(a,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),u}(f,m,l,d),function(a,l,u,d,f,m){let E=m?l.classBindings:l.styleBindings,C=Xs(E),D=Go(E);a[d]=u;let N,A=!1;if(Array.isArray(u)){const O=u;N=O[1],(null===N||Ca(O,N)>0)&&(A=!0)}else N=u;if(f)if(0!==D){const M=Xs(a[C+1]);a[d+1]=x_(M,C),0!==M&&(a[M+1]=_w(a[M+1],d)),a[C+1]=function(a,l){return 131071&a|l<<17}(a[C+1],d)}else a[d+1]=x_(C,0),0!==C&&(a[C+1]=_w(a[C+1],d)),C=d;else a[d+1]=x_(D,0),0===C?C=d:a[D+1]=_w(a[D+1],d),D=d;A&&(a[d+1]=P_(a[d+1])),aC(a,N,d,!0),aC(a,N,d,!1),function(a,l,u,d,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&Ca(m,l)>=0&&(u[d+1]=yw(u[d+1]))}(l,N,a,d,m),E=x_(C,D),m?l.classBindings=E:l.styleBindings=E}(f,m,l,u,E,d)}}function dC(a,l,u,d,f){let m=null;const E=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<E&&(m=l[C],d=Yp(d,m.hostAttrs,f),m!==a);)C++;return null!==a&&(u.directiveStylingLast=C),d}function Yp(a,l,u){const d=u?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const E=l[m];"number"==typeof E?f=E:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Tr(a,E,!!u||l[++m]))}return void 0===a?null:a}function my(a,l,u,d,f,m,E,C){if(!(3&l.type))return;const D=a.data,A=D[C+1];kl(function(a){return 1==(1&a)}(A)?Qp(D,l,u,f,Go(A),E):void 0)||(kl(m)||function(a){return 2==(2&a)}(A)&&(m=Qp(D,null,u,f,C,E)),function(a,l,u,d,f){const m=gn(a);if(l)f?m?a.addClass(u,d):u.classList.add(d):m?a.removeClass(u,d):u.classList.remove(d);else{let E=-1===d.indexOf("-")?void 0:Ii.DashCase;if(null==f)m?a.removeStyle(u,d,E):u.style.removeProperty(d);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),E|=Ii.Important),m?a.setStyle(u,d,f,E):u.style.setProperty(d,f,C?"important":"")}}}(d,E,rl(br(),u),f,m))}function Qp(a,l,u,d,f,m){const E=null===l;let C;for(;f>0;){const D=a[f],A=Array.isArray(D),N=A?D[1]:D,O=null===N;let M=u[f+1];M===Et&&(M=O?q:void 0);let B=O?Jm(M,d):N===d?M:void 0;if(A&&!kl(B)&&(B=Jm(D,d)),kl(B)&&(C=B,E))return C;const Z=a[f+1];f=E?Xs(Z):Go(Z)}if(null!==l){let D=m?l.residualClasses:l.residualStyles;null!=D&&(C=Jm(D,d))}return C}function kl(a){return void 0!==a}function sc(a,l){return 0!=(a.flags&(l?16:32))}function Ua(a,l=""){const u=Se(),d=Rt(),f=a+20,m=d.firstCreatePass?ju(d,f,1,l,null):d.data[f],E=u[f]=function(a,l){return gn(a)?a.createText(l):a.createTextNode(l)}(u[11],l);A_(d,u,E,m),Ci(m,!1)}function fC(a){return _y("",a,""),fC}function _y(a,l,u){const d=Se(),f=function(a,l,u,d){return Br(a,$s(),u)?l+he(u)+d:Et}(d,a,l,u);return f!==Et&&Nn(d,br(),f),_y}function wC(a,l,u){const d=Se();return Br(d,$s(),l)&&Si(Rt(),Vn(),d,a,l,d[11],u,!0),wC}function CC(a,l,u){const d=Se();if(Br(d,$s(),l)){const m=Rt(),E=Vn();Si(m,E,d,a,l,function(a,l,u){return(null===a||Lr(a))&&(u=function(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}(Du(m.data),E,d),u,!0)}return CC}const ac=void 0;var bC=["en",[["a","p"],["AM","PM"],ac],[["AM","PM"],ac,ac],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ac,"{1} 'at' {0}",ac],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(a){const l=Math.floor(Math.abs(a)),u=a.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let lc={};function IC(a){const l=function(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=SC(l);if(u)return u;const d=l.split("-")[0];if(u=SC(d),u)return u;if("en"===d)return bC;throw new Error(`Missing locale data for the locale "${a}".`)}function DC(a){return IC(a)[ut.PluralCase]}function SC(a){return a in lc||(lc[a]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[a]),lc[a]}var ut=(()=>((ut=ut||{})[ut.LocaleId=0]="LocaleId",ut[ut.DayPeriodsFormat=1]="DayPeriodsFormat",ut[ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",ut[ut.DaysFormat=3]="DaysFormat",ut[ut.DaysStandalone=4]="DaysStandalone",ut[ut.MonthsFormat=5]="MonthsFormat",ut[ut.MonthsStandalone=6]="MonthsStandalone",ut[ut.Eras=7]="Eras",ut[ut.FirstDayOfWeek=8]="FirstDayOfWeek",ut[ut.WeekendRange=9]="WeekendRange",ut[ut.DateFormat=10]="DateFormat",ut[ut.TimeFormat=11]="TimeFormat",ut[ut.DateTimeFormat=12]="DateTimeFormat",ut[ut.NumberSymbols=13]="NumberSymbols",ut[ut.NumberFormats=14]="NumberFormats",ut[ut.CurrencyCode=15]="CurrencyCode",ut[ut.CurrencySymbol=16]="CurrencySymbol",ut[ut.CurrencyName=17]="CurrencyName",ut[ut.Currencies=18]="Currencies",ut[ut.Directionality=19]="Directionality",ut[ut.PluralCase=20]="PluralCase",ut[ut.ExtraData=21]="ExtraData",ut))();const Ey="en-US";let RC=Ey;function NC(a){et(a,"Expected localeId to be defined"),"string"==typeof a&&(RC=a.toLowerCase().replace(/_/g,"-"))}function fg(a,l,u,d,f){if(a=$(a),Array.isArray(a))for(let m=0;m<a.length;m++)fg(a[m],l,u,d,f);else{const m=Rt(),E=Se();let C=jd(a)?a:$(a.provide),D=CI(a);const A=hn(),N=1048575&A.providerIndexes,O=A.directiveStart,M=A.providerIndexes>>20;if(jd(a)||!a.multi){const B=new nd(D,f,th),Z=zC(C,l,f?N:N+M,O);-1===Z?(_a(qs(A,E),m,C),ZC(m,a,l.length),l.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(B),E.push(B)):(u[Z]=B,E[Z]=B)}else{const B=zC(C,l,N+M,O),Z=zC(C,l,N,N+M),le=B>=0&&u[B],Y=Z>=0&&u[Z];if(f&&!Y||!f&&!le){_a(qs(A,E),m,C);const xe=function(a,l,u,d,f){const m=new nd(a,u,th);return m.multi=[],m.index=l,m.componentProviders=0,tS(m,f,d&&!u),m}(f?Sy:KC,u.length,f,d,D);!f&&Y&&(u[Z].providerFactory=xe),ZC(m,a,l.length,0),l.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(xe),E.push(xe)}else ZC(m,a,B>-1?B:Z,tS(u[f?Z:B],D,!f&&d));!f&&d&&Y&&u[Z].componentProviders++}}}function ZC(a,l,u,d){const f=jd(l);if(f||function(a){return!!a.useClass}(l)){const E=(l.useClass||l).prototype.ngOnDestroy;if(E){const C=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const D=C.indexOf(u);-1===D?C.push(u,[d,E]):C[D+1].push(d,E)}else C.push(u,E)}}}function tS(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function zC(a,l,u,d){for(let f=u;f<d;f++)if(l[f]===a)return f;return-1}function KC(a,l,u,d){return Ay(this.multi,[])}function Sy(a,l,u,d){const f=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,C=hl(u,u[1],this.providerFactory.index,d);m=C.slice(0,E),Ay(f,m);for(let D=E;D<C.length;D++)m.push(C[D])}else m=[],Ay(f,m);return m}function Ay(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function ph(a,l=[]){return u=>{u.providersResolver=(d,f)=>function(a,l,u){const d=Rt();if(d.firstCreatePass){const f=Lr(a);fg(u,d.data,d.blueprint,f,!0),fg(l,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,l)}}class gh{}const YC="ngComponent";class pg{resolveComponentFactory(l){throw function(a){const l=Error(`No component factory found for ${X(a)}. Did you add it to @NgModule.entryComponents?`);return l[YC]=a,l}(l)}}let Jo=(()=>{class a{}return a.NULL=new pg,a})();function gg(...a){}function Ha(a,l){return new Xo(Cr(a,l))}const iS=function(){return Ha(hn(),Se())};let Xo=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=iS,a})();function JC(a){return a instanceof Xo?a.nativeElement:a}class Ry{}let cP=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>oS(),a})();const oS=function(){const a=Se(),u=Vr(hn().index,a);return function(a){return a[11]}(Ui(u)?u:a)};let mg=(()=>{class a{}return a.\u0275prov=rn({token:a,providedIn:"root",factory:()=>null}),a})();class _g{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const XC=new _g("12.2.8");class xy{constructor(){}supports(l){return Zd(l)}create(l){return new fP(l)}}const hP=(a,l)=>l;class fP{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||hP}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,d=this._removalsHead,f=0,m=null;for(;u||d;){const E=!d||u&&u.currentIndex<cS(d,f,m)?u:d,C=cS(E,f,m),D=E.currentIndex;if(E===d)f--,d=d._nextRemoved;else if(u=u._next,null==E.previousIndex)f++;else{m||(m=[]);const A=C-f,N=D-f;if(A!=N){for(let M=0;M<A;M++){const B=M<m.length?m[M]:m[M]=0,Z=B+M;N<=Z&&Z<A&&(m[M]=B+1)}m[E.previousIndex]=N-A}}C!==D&&l(E,C,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Zd(l))throw new Error(`Error trying to diff '${X(l)}'. Only arrays and iterables are allowed`);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,E,u=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)m=l[C],E=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,E)?(d&&(u=this._verifyReinsertion(u,m,E,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,E,C),d=!0),u=u._next}else f=0,function(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[zu()]();let d;for(;!(d=u.next()).done;)l(d.value)}}(l,C=>{E=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,E)?(d&&(u=this._verifyReinsertion(u,C,E,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,E,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,d,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,f)):l=this._addAfter(new lS(u,d),m,f),l}_verifyReinsertion(l,u,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,u,d),this._addToMoves(l,d),l}_moveAfter(l,u,d){return this._unlink(l),this._insertAfter(l,u,d),this._addToMoves(l,d),l}_addAfter(l,u,d){return this._insertAfter(l,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,d){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new uS),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,d=l._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uS),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class lS{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pP{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const u=l._prevDup,d=l._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class uS{constructor(){this.map=new Map}put(l){const u=l.trackById;let d=this.map.get(u);d||(d=new pP,this.map.set(u,d)),d.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cS(a,l,u){const d=a.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+l+f}class Py{constructor(){}supports(l){return l instanceof Map||jp(l)}create(){return new dS}}class dS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||jp(l)))throw new Error(`Error trying to diff '${X(l)}'. Only maps and objects are allowed`)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const d=l._prev;return u._next=l,u._prev=d,l._prev=u,d&&(d._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const m=f._prev,E=f._next;return m&&(m._next=E),E&&(E._prev=m),f._next=null,f._prev=null,f}const d=new gP(l);return this._records.set(l,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(d=>u(l[d],d))}}class gP{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uc(){return new co([new xy])}let co=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||uc()),deps:[[a,new ps,new si]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(a){return a.name||typeof a}(u)}'`)}}return a.\u0275prov=rn({token:a,providedIn:"root",factory:uc}),a})();function Oy(){return new cc([new Py])}let cc=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||Oy()),deps:[[a,new ps,new si]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(d)return d;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return a.\u0275prov=rn({token:a,providedIn:"root",factory:Oy}),a})();function My(a,l,u,d,f=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&d.push(mn(m)),wi(m))for(let C=10;C<m.length;C++){const D=m[C],A=D[1].firstChild;null!==A&&My(D[1],D,A,d)}const E=u.type;if(8&E)My(a,l,u.child,d);else if(32&E){const C=Bu(u,l);let D;for(;D=C();)d.push(D)}else if(16&E){const C=R_(l,u);if(Array.isArray(C))d.push(...C);else{const D=jo(l[16]);My(D[1],D,C,d,!0)}}u=f?u.projectionNext:u.next}return d}class ea{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return My(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(wi(l)){const u=l[8],d=u?u.indexOf(this):-1;d>-1&&(Ip(l,d),Ea(u,d))}this._attachedToViewContainer=!1}Dp(this._lView[1],this._lView)}onDestroy(l){cI(this._lView[1],this._lView,null,l)}markForCheck(){Mw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){kw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(a,l,u){Qc(!0);try{kw(a,l,u)}finally{Qc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var l;this._appRef=null,Op(this._lView[1],l=this._lView,l[11],2,null,null)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=l}}class _P extends ea{constructor(l){super(l),this._view=l}detectChanges(){Fw(this._view)}checkNoChanges(){!function(a){Qc(!0);try{Fw(a)}finally{Qc(!1)}}(this._view)}get context(){return null}}const fS=function(a){return function(a,l,u){if($c(a)&&!u){const d=Vr(a.index,l);return new ea(d,d)}return 47&a.type?new ea(l[16],l):null}(hn(),Se(),16==(16&a))};let ky=(()=>{class a{}return a.__NG_ELEMENT_ID__=fS,a})();const vP=[new Py],n0=new co([new xy]),wP=new cc(vP),gS=function(){return dc(hn(),Se())};let mh=(()=>{class a{}return a.__NG_ELEMENT_ID__=gS,a})();const Ni=mh,Fy=class extends Ni{constructor(l,u,d){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(l){const u=this._declarationTContainer.tViews,d=kp(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(u)),Fd(u,d,l),new ea(d)}};function dc(a,l){return 4&a.type?new Fy(l,a,Ha(a,l)):null}class _r{}class Hl{}const hc=function(){return yS(hn(),Se())};let r0=(()=>{class a{}return a.__NG_ELEMENT_ID__=hc,a})();const IP=r0,Ly=class extends IP{constructor(l,u,d){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=d}get element(){return Ha(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){const l=zn(this._hostTNode,this._hostLView);if(In(l)){const u=Nu(l,this._hostLView),d=ma(l);return new ds(u[1].data[d+8],u)}return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=_S(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,d){const f=l.createEmbeddedView(u||{});return this.insert(f,d),f}createComponent(l,u,d,f,m){const E=d||this.parentInjector;if(!m&&null==l.ngModule&&E){const D=E.get(_r,null);D&&(m=D)}const C=l.create(E,f,void 0,m);return this.insert(C.hostView,u),C}insert(l,u){const d=l._lView,f=d[1];if(wi(d[3])){const N=this.indexOf(l);if(-1!==N)this.detach(N);else{const O=d[3],M=new Ly(O,O[6],O[3]);M.detach(M.indexOf(l))}}const m=this._adjustIndex(u),E=this._lContainer;!function(a,l,u,d){const f=10+d,m=u.length;d>0&&(u[f-1][4]=l),d<m-10?(l[4]=u[f],va(u,10+d,l)):(u.push(l),l[4]=null),l[3]=u;const E=l[17];null!==E&&u!==E&&function(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(E,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=128}(f,d,E,m);const C=xp(m,E),D=d[11],A=Rp(D,E[7]);return null!==A&&function(a,l,u,d,f,m){d[0]=f,d[6]=l,Op(a,d,u,1,f,m)}(f,E[6],D,d,A,C),l.attachToViewContainerRef(),va(s0(E),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=_S(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),d=Ip(this._lContainer,u);d&&(Ea(s0(this._lContainer),u),Dp(d[1],d))}detach(l){const u=this._adjustIndex(l,-1),d=Ip(this._lContainer,u);return d&&null!=Ea(s0(this._lContainer),u)?new ea(d):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function _S(a){return a[8]}function s0(a){return a[8]||(a[8]=[])}function yS(a,l){let u;const d=l[a.index];if(wi(d))u=d;else{let f;if(8&a.type)f=mn(d);else{const m=l[11];f=m.createComment("");const E=Cr(a,l);Al(m,Rp(m,E),f,function(a,l){return gn(a)?a.nextSibling(l):l.nextSibling}(m,E),!1)}l[a.index]=u=yI(d,l,f,a),j_(l,u)}return new Ly(u,a,l)}const Ch={};class jS extends Jo{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=ur(l);return new I0(u,this.ngModule)}}function T0(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}const YP=new zt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Uu});class I0 extends gh{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=l.selectors.map(DN).join(","),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return T0(this.componentDef.inputs)}get outputs(){return T0(this.componentDef.outputs)}create(l,u,d,f){const m=(f=f||this.ngModule)?function(a,l){return{get:(u,d,f)=>{const m=a.get(u,Ch,f);return m!==Ch||d===Ch?m:l.get(u,d,f)}}}(l,f.injector):l,E=m.get(Ry,js),C=m.get(mg,null),D=E.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=d?function(a,l,u){if(gn(a))return a.selectRootElement(l,u===Fe.ShadowDom);let d="string"==typeof l?a.querySelector(l):l;return d.textContent="",d}(D,d,this.componentDef.encapsulation):xd(E.createRenderer(null,this.componentDef),A,function(a){const l=a.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(A)),O=this.componentDef.onPush?576:528,M=function(a,l){return{components:[],scheduler:a||Uu,clean:ex,playerHandler:l||null,flags:0}}(),B=U_(0,null,null,1,0,null,null,null,null,null),Z=kp(null,B,M,O,null,null,E,D,C,m);let le,Y;ed(Z);try{const xe=function(a,l,u,d,f,m){const E=u[1];u[20]=a;const D=ju(E,20,2,"#host",null),A=D.mergedAttrs=l.hostAttrs;null!==A&&(Ud(D,A,!0),null!==a&&(us(f,a,A),null!==D.classes&&Pd(f,a,D.classes),null!==D.styles&&GT(f,a,D.styles)));const N=d.createRenderer(a,l),O=kp(u,Aw(l),null,l.onPush?64:16,u[20],D,d,N,m||null,null);return E.firstCreatePass&&(_a(qs(D,u),E,l.type),xw(E,D),mI(D,u.length,1)),j_(u,O),u[20]=O}(N,this.componentDef,Z,E,D);if(N)if(d)us(D,N,["ng-version",XC.full]);else{const{attrs:ge,classes:Le}=function(a){const l=[],u=[];let d=1,f=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===f?""!==m&&l.push(m,a[++d]):8===f&&u.push(m);else{if(!qo(f))break;f=m}d++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);ge&&us(D,N,ge),Le&&Le.length>0&&Pd(D,N,Le.join(" "))}if(Y=Zc(B,20),void 0!==u){const ge=Y.projection=[];for(let Le=0;Le<this.ngContentSelectors.length;Le++){const pt=u[Le];ge.push(null!=pt?Array.from(pt):null)}}le=function(a,l,u,d,f){const m=u[1],E=function(a,l,u){const d=hn();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),_I(a,d,l,kd(a,l,1,null),u));const f=hl(l,a,d.directiveStart,d);Ir(f,l);const m=Cr(d,l);return m&&Ir(m,l),f}(m,u,l);if(d.components.push(E),a[8]=E,f&&f.forEach(D=>D(E,l)),l.contentQueries){const D=hn();l.contentQueries(1,E,D.directiveStart)}const C=hn();return!m.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ll(C.index),Nw(u[1],C,0,C.directiveStart,C.directiveEnd,l),qN(l,E)),E}(xe,this.componentDef,Z,M,[px]),Fd(B,Z,null)}finally{Au()}return new QP(this.componentType,le,Ha(Y,Z),Z,Y)}}class QP extends class{}{constructor(l,u,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new _P(f),this.componentType=l}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}const gc=new Map;class XP extends _r{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jS(this);const d=yi(l),f=l[mt]||null;f&&NC(f),this._bootstrapComponents=Zi(d.bootstrap),this._r3Injector=wI(l,u,[{provide:_r,useValue:this},{provide:Jo,useValue:this.componentFactoryResolver}],X(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=Zt.THROW_IF_NOT_FOUND,d=Je.Default){return l===Zt||l===_r||l===Oa?this:this._r3Injector.get(l,u,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class D0 extends Hl{constructor(l){super(),this.moduleType=l,null!==yi(l)&&function(a){const l=new Set;!function u(d){const f=yi(d,!0),m=f.id;null!==m&&(function(a,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${a} - ${X(l)} vs ${X(l.name)}`)}(m,gc.get(m),d),gc.set(m,d));const E=Zi(f.imports);for(const C of E)l.has(C)||(l.add(C),u(C))}(a)}(l)}create(l){return new XP(this.moduleType,l)}}function ZS(a,l,u){const d=Ln()+a,f=Se();return f[d]===Et?ws(f,d,u?l.call(u):l()):function(a,l){return a[l]}(f,d)}function qe(a,l,u,d,f,m){const E=l+u;return Br(a,E,f)?ws(a,E+1,m?d.call(m,f):d(f)):function(a,l){const u=a[l];return u===Et?void 0:u}(a,E+1)}function Th(a,l){const u=Rt();let d;const f=a+20;u.firstCreatePass?(d=function(a,l){if(l)for(let u=l.length-1;u>=0;u--){const d=l[u];if(a===d.name)return d}throw new ue("302",`The pipe '${a}' could not be found!`)}(l,u.pipeRegistry),u.data[f]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,d.onDestroy)):d=u.data[f];const m=d.factory||(d.factory=So(d.type)),E=mi(th);try{const C=id(!1),D=m();return id(C),function(a,l,u,d){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=d}(u,Se(),f,D),D}finally{mi(E)}}function Jy(a,l,u){const d=a+20,f=Se(),m=function(a,l){return a[l]}(f,d);return function(a,l){oo.isWrapped(l)&&(l=oo.unwrap(l),a[ft.lFrame.bindingIndex]=Et);return l}(f,function(a,l){return a[1].data[l].pure}(f,d)?qe(f,Ln(),l,m.transform,u,m):m.transform(u))}function R0(a){return l=>{setTimeout(a,void 0,l)}}const na=class extends g.xQ{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,d){var f,m,E;let C=l,D=u||(()=>null),A=d;if(l&&"object"==typeof l){const O=l;C=null===(f=O.next)||void 0===f?void 0:f.bind(O),D=null===(m=O.error)||void 0===m?void 0:m.bind(O),A=null===(E=O.complete)||void 0===E?void 0:E.bind(O)}this.__isAsync&&(D=R0(D),C&&(C=R0(C)),A&&(A=R0(A)));const N=super.subscribe({next:C,error:D,complete:A});return l instanceof te.w&&l.add(N),N}};function KS(){return this._results[zu()]()}class Ag{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=zu(),d=Ag.prototype;d[u]||(d[u]=KS)}get changes(){return this._changes||(this._changes=new na)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const d=this;d.dirty=!1;const f=ln(l);(this._changesDetected=!function(a,l,u){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],m=l[d];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ih{constructor(l){this.queryList=l,this.matches=null}clone(){return new Ih(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xy{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const d=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let m=0;m<d;m++){const E=u.getByIndex(m);f.push(this.queries[E.indexInDeclarationView].clone())}return new Xy(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==O0(l,u).matches&&this.queries[u].setDirty()}}class Gr{constructor(l,u,d=null){this.predicate=l,this.flags=u,this.read=d}}class Rg{constructor(l=[]){this.queries=l}elementStart(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,m=this.getByIndex(d).embeddedTView(l,f);m&&(m.indexInDeclarationView=d,null!==u?u.push(m):u=[m])}return null!==u?new Rg(u):null}template(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Rr{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Rr(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(l,u,JS(u,m)),this.matchTNodeWithReadOption(l,u,xo(u,l,m,!1,!1))}else d===mh?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,xo(u,l,d,!1,!1))}matchTNodeWithReadOption(l,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Xo||f===r0||f===mh&&4&u.type)this.addMatch(u.index,-2);else{const m=xo(u,l,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,d)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function JS(a,l){const u=a.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===l)return u[d+1];return null}function N0(a,l,u,d){return-1===u?function(a,l){return 11&a.type?Ha(a,l):4&a.type?dc(a,l):null}(l,a):-2===u?function(a,l,u){return u===Xo?Ha(l,a):u===mh?dc(l,a):u===r0?yS(l,a):void 0}(a,l,d):hl(a,a[1],u,l)}function x0(a,l,u,d){const f=l[19].queries[d];if(null===f.matches){const m=a.data,E=u.matches,C=[];for(let D=0;D<E.length;D+=2){const A=E[D];C.push(A<0?null:N0(l,m[A],E[D+1],u.metadata.read))}f.matches=C}return f.matches}function ev(a,l,u,d){const f=a.queries.getByIndex(u),m=f.matches;if(null!==m){const E=x0(a,l,f,u);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)d.push(E[C/2]);else{const A=m[C+1],N=l[-D];for(let O=10;O<N.length;O++){const M=N[O];M[17]===M[3]&&ev(M[1],M,A,d)}if(null!==N[9]){const O=N[9];for(let M=0;M<O.length;M++){const B=O[M];ev(B[1],B,A,d)}}}}}return d}function tv(a){const l=Se(),u=Rt(),d=Vm();Su(d+1);const f=O0(u,d);if(a.dirty&&Sf(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?ev(u,l,d,[]):x0(u,l,f,d);a.reset(m,JC),a.notifyOnChanges()}return!0}return!1}function tA(a,l,u,d){const f=Rt();if(f.firstCreatePass){const m=hn();(function(a,l,u){null===a.queries&&(a.queries=new Rg),a.queries.track(new Rr(l,u))})(f,new Gr(l,u,d),m.index),function(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}!function(a,l,u){const d=new Ag(4==(4&u));cI(a,l,d,d.destroy),null===l[19]&&(l[19]=new Xy),l[19].queries.push(new Ih(d))}(f,Se(),u)}function mc(){return a=Se(),l=Vm(),a[19].queries[l].queryList;var a,l}function O0(a,l){return a.queries.getByIndex(l)}const Rh=new zt("Application Initializer");let ra=(()=>{class a{constructor(u){this.appInits=u,this.resolve=gg,this.reject=gg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(ly(m))u.push(m);else if(iC(m)){const E=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});u.push(E)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Dn(Rh,8))},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})();const q0=new zt("AppId"),G0={provide:q0,useFactory:function(){return`${Nh()}${Nh()}${Nh()}`},deps:[]};function Nh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gv=new zt("Platform Initializer"),W0=new zt("Platform ID"),Z0=new zt("appBootstrapListener");let CA=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})();const zl=new zt("LocaleId"),z0=new zt("DefaultCurrencyCode");class Oh{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}const _v=function(a){return new D0(a)},RO=_v,yv=function(a){return Promise.resolve(_v(a))},Ug=function(a){const l=_v(a),d=Zi(yi(a).declarations).reduce((f,m)=>{const E=ur(m);return E&&f.push(new I0(E)),f},[]);return new Oh(l,d)},TA=Ug,NO=function(a){return Promise.resolve(Ug(a))};let Bg=(()=>{class a{constructor(){this.compileModuleSync=RO,this.compileModuleAsync=yv,this.compileModuleAndAllComponentsSync=TA,this.compileModuleAndAllComponentsAsync=NO}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})();const xO=(()=>Promise.resolve(0))();function vv(a){"undefined"==typeof Zone?xO.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Qi{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new na(!1),this.onMicrotaskEmpty=new na(!1),this.onStable=new na(!1),this.onError=new na(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let a=an.requestAnimationFrame,l=an.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function(a){const l=()=>{!function(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(an,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Ev(a),a.isCheckStableRunning=!0,X0(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Ev(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,m,E,C)=>{try{return eb(a),u.invokeTask(f,m,E,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),tb(a)}},onInvoke:(u,d,f,m,E,C,D)=>{try{return eb(a),u.invoke(f,m,E,C,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),tb(a)}},onHasTask:(u,d,f,m)=>{u.hasTask(f,m),d===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,Ev(a),X0(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,d,f,m)=>(u.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,d){return this._inner.run(l,u,d)}runTask(l,u,d,f){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+f,l,OO,gg,gg);try{return m.runTask(E,u,d)}finally{m.cancelTask(E)}}runGuarded(l,u,d){return this._inner.runGuarded(l,u,d)}runOutsideAngular(l){return this._outer.run(l)}}const OO={};function X0(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Ev(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function eb(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function tb(a){a._nesting--,X0(a)}class Fh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new na,this.onMicrotaskEmpty=new na,this.onStable=new na,this.onError=new na}run(l,u,d){return l.apply(u,d)}runGuarded(l,u,d){return l.apply(u,d)}runOutsideAngular(l){return l()}runTask(l,u,d,f){return l.apply(u,d)}}let IA=(()=>{class a{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qi.assertNotInAngularZone(),vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vv(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(Dn(Qi))},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})(),DA=(()=>{class a{constructor(){this._applications=new Map,wv.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return wv.findTestabilityInTree(this,u,d)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})();class SA{addToWindow(l){}findTestabilityInTree(l,u,d){return null}}function MO(a){wv=a}let wv=new SA,nb=!0,Cv=!1;function qg(){return Cv=!0,nb}function AA(){if(Cv)throw new Error("Cannot enable prod mode after platform setup.");nb=!1}let As;const Lh=new zt("AllowMultipleToken");class Wg{constructor(l,u){this.name=l,this.token=u}}function qn(a,l,u=[]){const d=`Platform: ${l}`,f=new zt(d);return(m=[])=>{let E=PA();if(!E||E.injector.get(Lh,!1))if(a)a(u.concat(m).concat({provide:f,useValue:!0}));else{const C=u.concat(m).concat({provide:f,useValue:!0},{provide:xl,useValue:"platform"});!function(a){if(As&&!As.destroyed&&!As.injector.get(Lh,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");As=a.get(OA);const l=a.get(gv,null);l&&l.forEach(u=>u())}(Zt.create({providers:C,name:d}))}return function(a){const l=PA();if(!l)throw new Error("No platform exists!");if(!l.injector.get(a,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return l}(f)}}function PA(){return As&&!As.destroyed?As:null}let OA=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const C=function(a,l){let u;return u="noop"===a?new Fh:("zone.js"===a?void 0:a)||new Qi({enableLongStackTrace:qg(),shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),D=[{provide:Qi,useValue:C}];return C.run(()=>{const A=Zt.create({providers:D,parent:this.injector,name:u.moduleType.name}),N=u.create(A),O=N.injector.get(y,null);if(!O)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return C.runOutsideAngular(()=>{const M=C.onError.subscribe({next:B=>{O.handleError(B)}});N.onDestroy(()=>{Uh(this._modules,N),M.unsubscribe()})}),function(a,l,u){try{const d=u();return ly(d)?d.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(O,C,()=>{const M=N.injector.get(ra);return M.runInitializers(),M.donePromise.then(()=>(NC(N.injector.get(zl,Ey)||Ey),this._moduleDoBootstrap(N),N))})})}bootstrapModule(u,d=[]){const f=ib({},d);return function(a,l,u){const d=new D0(u);return Promise.resolve(d)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const d=u.injector.get(Vh);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${X(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Dn(Zt))},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})();function ib(a,l){return Array.isArray(l)?l.reduce(ib,a):Object.assign(Object.assign({},a),l)}let Vh=(()=>{class a{constructor(u,d,f,m,E){this._zone=u,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=E,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new G.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),D=new G.y(A=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Qi.assertNotInAngularZone(),vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Qi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{N.unsubscribe(),O.unsubscribe()}});this.isStable=(0,Ee.T)(C,D.pipe((0,ye.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let f;f=u instanceof gh?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function(a){return a.isBoundToModule}(f)?void 0:this._injector.get(_r),C=f.create(Zt.NULL,[],d||f.selector,m),D=C.location.nativeElement,A=C.injector.get(IA,null),N=A&&C.injector.get(DA);return A&&N&&N.registerApplication(D,A),C.onDestroy(()=>{this.detachView(C.hostView),Uh(this.components,C),N&&N.unregisterApplication(D)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Uh(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Z0,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(u){return new(u||a)(Dn(Qi),Dn(Zt),Dn(y),Dn(Jo),Dn(ra))},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})();function Uh(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}class kA{}class LA{}const ab={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Av=(()=>{class a{constructor(u,d){this._compiler=u,this._config=d||ab}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[d,f]=u.split("#");return void 0===f&&(f="default"),V(8255)(d).then(m=>m[f]).then(m=>VA(m,d,f)).then(m=>this._compiler.compileModuleAsync(m))}loadFactory(u){let[d,f]=u.split("#"),m="NgFactory";return void 0===f&&(f="default",m=""),V(8255)(this._config.factoryPathPrefix+d+this._config.factoryPathSuffix).then(E=>E[f+m]).then(E=>VA(E,d,f))}}return a.\u0275fac=function(u){return new(u||a)(Dn(Bg),Dn(LA,8))},a.\u0275prov=rn({token:a,factory:a.\u0275fac}),a})();function VA(a,l,u){if(!a)throw new Error(`Cannot find '${u}' in '${l}'`);return a}const GA=function(a){return null},hb=qn(null,"core",[{provide:W0,useValue:"unknown"},{provide:OA,deps:[Zt]},{provide:DA,deps:[]},{provide:CA,deps:[]}]),Xe=[{provide:Vh,useClass:Vh,deps:[Qi,Zt,y,Jo,ra]},{provide:YP,deps:[Qi],useFactory:function(a){let l=[];return a.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(u){l.push(u)}}},{provide:ra,useClass:ra,deps:[[new si,Rh]]},{provide:Bg,useClass:Bg,deps:[]},G0,{provide:co,useFactory:function(){return n0},deps:[]},{provide:cc,useFactory:function(){return wP},deps:[]},{provide:zl,useFactory:function(a){return NC(a=a||"undefined"!=typeof $localize&&$localize.locale||Ey),a},deps:[[new Da(zl),new si,new ps]]},{provide:z0,useValue:"USD"}];let HO=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Dn(Vh))},a.\u0275mod=Bc({type:a}),a.\u0275inj=Pt({providers:Xe}),a})()},8939:(Ze,Te,V)=>{"use strict";V.d(Te,{hO:()=>ie,xv:()=>ne,Dh:()=>X,GT:()=>Q,on:()=>j,pX:()=>ye});var g=V(7716),te=V(7841),G=V(9126);Ze=V.hmd(Ze);const Ee=["ngOnDestroy"],ye=(re,ue,ae,Ae={})=>new Proxy(re,{get:(he,we)=>ae.runOutsideAngular(()=>{var Ve;if(re[we])return(null===(Ve=null==Ae?void 0:Ae.spy)||void 0===Ve?void 0:Ve.get)&&Ae.spy.get(we,re[we]),re[we];if(Ee.indexOf(we)>-1)return()=>{};const He=ue.toPromise().then(ot=>{const Vt=ot&&ot[we];return"function"==typeof Vt?Vt.bind(ot):Vt&&Vt.then?Vt.then(St=>ae.run(()=>St)):ae.run(()=>Vt)});return new Proxy(()=>{},{get:(ot,Vt)=>He[Vt],apply:(ot,Vt,St)=>He.then(Ut=>{var De;const oe=Ut&&Ut(...St);return(null===(De=null==Ae?void 0:Ae.spy)||void 0===De?void 0:De.apply)&&Ae.spy.apply(we,St,oe),oe})})})}),Q=(re,ue)=>{ue.forEach(ae=>{Object.getOwnPropertyNames(ae.prototype||ae).forEach(Ae=>{Object.defineProperty(re.prototype,Ae,Object.getOwnPropertyDescriptor(ae.prototype||ae,Ae))})})};class de{constructor(ue){return ue}}const X=new g.OlP("angularfire2.app.options"),ne=new g.OlP("angularfire2.app.name");function j(re,ue,ae){const he="object"==typeof ae&&ae||{};he.name=he.name||"string"==typeof ae&&ae||"[DEFAULT]";const Ve=te.Z.apps.filter(He=>He&&He.name===he.name)[0]||ue.runOutsideAngular(()=>te.Z.initializeApp(re,he));try{JSON.stringify(re)!==JSON.stringify(Ve.options)&&H("error",`${Ve.name} Firebase App already initialized with different options${Ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(He){}return new de(Ve)}const H=(re,...ue)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[re](...ue)},$={provide:de,useFactory:j,deps:[X,g.R0b,[new g.FiY,ne]]};let ie=(()=>{class re{constructor(ae){te.Z.registerVersion("angularfire",G.q4.full,"core"),te.Z.registerVersion("angularfire",G.q4.full,"app-compat"),te.Z.registerVersion("angular",g.q4F.full,ae.toString())}static initializeApp(ae,Ae){return{ngModule:re,providers:[{provide:X,useValue:ae},{provide:ne,useValue:Ae}]}}}return re.\u0275fac=function(ae){return new(ae||re)(g.LFG(g.Lbi))},re.\u0275mod=g.oAB({type:re}),re.\u0275inj=g.cJS({providers:[$]}),re})()},9126:(Ze,Te,V)=>{"use strict";V.d(Te,{q4:()=>j,iC:()=>oe,fc:()=>Ut,HU:()=>He,cc:()=>ie});var g=V(7716);(0,V(5452).registerVersion)("firebase","9.1.0","app");var ye=V(7771),Q=V(3637),de=V(3342),X=V(309),ne=V(3101);Ze=V.hmd(Ze);const j=new g.GfV("7.0.4"),H=!!Ze.hot,$=(pe,...ee)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[pe](...ee)};function ie(pe,ee,ke,Ye,bt){const[,nt,et]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===pe)||[];if(nt)return function(pe,ee){try{return pe.toString()===ee.toString()}catch(ke){return pe===ee}}(bt,et)||($("error",`${ee} was already initialized on the ${ke} Firebase App with different settings.${H?" You may need to reload as Firebase is not HMR aware.":""}`),$("warn",{is:bt,was:et})),nt;{const dt=Ye();return globalThis.\u0275AngularfireInstanceCache.push([pe,dt,bt]),dt}}function he(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class we{constructor(ee,ke=ye.c){this.zone=ee,this.delegate=ke}now(){return this.delegate.now()}schedule(ee,ke,Ye){const bt=this.zone;return this.delegate.schedule(function(et){bt.runGuarded(()=>{ee.apply(this,[et])})},ke,Ye)}}class Ve{constructor(ee){this.zone=ee,this.task=null}call(ee,ke){const Ye=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",he,{},he,he)),ke.pipe((0,de.b)({next:Ye,complete:Ye,error:Ye})).subscribe(ee).add(Ye)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let He=(()=>{class pe{constructor(ke){this.ngZone=ke,this.outsideAngular=ke.runOutsideAngular(()=>new we(Zone.current)),this.insideAngular=ke.run(()=>new we(Zone.current,Q.P)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return pe.\u0275fac=function(ke){return new(ke||pe)(g.LFG(g.R0b))},pe.\u0275prov=g.Yz7({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe})();function ot(){const pe=globalThis.\u0275AngularFireScheduler;if(!pe)throw new Error("AngularFireModule has not been provided");return pe}function Ut(pe){return pe.pipe((0,X.QV)(ot().outsideAngular))}function oe(pe){return ot(),function(pe){return function(ke){return(ke=ke.lift(new Ve(pe.ngZone))).pipe((0,ne.R)(pe.outsideAngular),(0,X.QV)(pe.insideAngular))}}(ot())(pe)}},4486:(Ze,Te,V)=>{"use strict";V.d(Te,{Z:()=>ue});var g=V(3854),te=V(6034),G=V(5452),Ee=V(5601);class ye{constructor(Ae,he){this._delegate=Ae,this.firebase=he,(0,G._addComponent)(Ae,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Ae,he=G._DEFAULT_ENTRY_NAME){var we;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(Ae);return!Ve.isInitialized()&&"EXPLICIT"===(null===(we=Ve.getComponent())||void 0===we?void 0:we.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:he})}_removeServiceInstance(Ae,he=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(he)}_addComponent(Ae){(0,G._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,G._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ne(){const ae=function(ae){const Ae={},he={__esModule:!0,initializeApp:function(Ut,De={}){const oe=G.initializeApp(Ut,De);if((0,g.r3)(Ae,oe.name))return Ae[oe.name];const ce=new ae(oe,he);return Ae[oe.name]=ce,ce},app:Ve,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function(Ut){const De=Ut.name,oe=De.replace("-compat","");if(G._registerComponent(Ut)&&"PUBLIC"===Ut.type){const ce=(be=Ve())=>{if("function"!=typeof be[oe])throw de.create("invalid-app-argument",{appName:De});return be[oe]()};void 0!==Ut.serviceProps&&(0,g.ZB)(ce,Ut.serviceProps),he[oe]=ce,ae.prototype[oe]=function(...be){return this._getService.bind(this,De).apply(this,Ut.multipleInstances?be:[])}}return"PUBLIC"===Ut.type?he[oe]:null},removeApp:function(Ut){delete Ae[Ut]},useAsService:function(Ut,De){return"serverAuth"===De?null:De},modularAPIs:G}};function Ve(Ut){if(!(0,g.r3)(Ae,Ut=Ut||G._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Ut});return Ae[Ut]}return he.default=he,Object.defineProperty(he,"apps",{get:function(){return Object.keys(Ae).map(Ut=>Ae[Ut])}}),Ve.App=ae,he}(ye);return ae.INTERNAL=Object.assign(Object.assign({},ae.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(he){(0,g.ZB)(ae,he)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ae}(),H=new Ee.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ae=self.firebase.SDK_VERSION;ae&&ae.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ue=j;(0,G.registerVersion)("@firebase/app-compat","0.1.2",undefined)},5452:(Ze,Te,V)=>{"use strict";V.r(Te),V.d(Te,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>gi,_DEFAULT_ENTRY_NAME:()=>bt,_addComponent:()=>bn,_addOrOverwriteComponent:()=>pi,_apps:()=>et,_clearComponents:()=>Pt,_components:()=>dt,_getProvider:()=>rn,_registerComponent:()=>Jr,_removeServiceInstance:()=>cn,deleteApp:()=>Vs,getApp:()=>Ls,getApps:()=>Co,initializeApp:()=>wo,onLog:()=>Gn,registerVersion:()=>Je,setLogLevel:()=>Fi});var g=V(8239),te=V(6034),G=V(5601),Ee=V(3854);class ye{constructor(it){this.container=it}getPlatformInfoString(){return this.container.getProviders().map(Ht=>{if(function(ht){const it=ht.getComponent();return"VERSION"===(null==it?void 0:it.type)}(Ht)){const kt=Ht.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(Ht=>Ht).join(" ")}}const de="@firebase/app",ne=new G.Yd("@firebase/app"),bt="[DEFAULT]",nt={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,dt=new Map;function bn(ht,it){try{ht.container.addComponent(it)}catch(Ht){ne.debug(`Component ${it.name} failed to register with FirebaseApp ${ht.name}`,Ht)}}function pi(ht,it){ht.container.addOrOverwriteComponent(it)}function Jr(ht){const it=ht.name;if(dt.has(it))return ne.debug(`There were multiple attempts to register component ${it}.`),!1;dt.set(it,ht);for(const Ht of et.values())bn(Ht,ht);return!0}function rn(ht,it){return ht.container.getProvider(it)}function cn(ht,it,Ht=bt){rn(ht,it).clearInstance(Ht)}function Pt(){dt.clear()}const ki=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class la{constructor(it,Ht,kt){this._isDeleted=!1,this._options=Object.assign({},it),this._config=Object.assign({},Ht),this._name=Ht.name,this._automaticDataCollectionEnabled=Ht.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this.checkDestroyed(),this._automaticDataCollectionEnabled=it}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(it){this._isDeleted=it}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}const gi="9.1.0";function wo(ht,it={}){"object"!=typeof it&&(it={name:it});const Ht=Object.assign({name:bt,automaticDataCollectionEnabled:!1},it),kt=Ht.name;if("string"!=typeof kt||!kt)throw ki.create("bad-app-name",{appName:String(kt)});const gr=et.get(kt);if(gr){if((0,Ee.vZ)(ht,gr.options)&&(0,Ee.vZ)(Ht,gr.config))return gr;throw ki.create("duplicate-app",{appName:kt})}const Kt=new te.H0(kt);for(const st of dt.values())Kt.addComponent(st);const Fe=new la(ht,Ht,Kt);return et.set(kt,Fe),Fe}function Ls(ht=bt){const it=et.get(ht);if(!it)throw ki.create("no-app",{appName:ht});return it}function Co(){return Array.from(et.values())}function Vs(ht){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(ht){const it=ht.name;et.has(it)&&(et.delete(it),yield Promise.all(ht.container.getProviders().map(Ht=>Ht.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function Je(ht,it,Ht){var kt;let gr=null!==(kt=nt[ht])&&void 0!==kt?kt:ht;Ht&&(gr+=`-${Ht}`);const Kt=gr.match(/\s|\//),Fe=it.match(/\s|\//);if(Kt||Fe){const st=[`Unable to register library "${gr}" with version "${it}":`];return Kt&&st.push(`library name "${gr}" contains illegal characters (whitespace or "/")`),Kt&&Fe&&st.push("and"),Fe&&st.push(`version name "${it}" contains illegal characters (whitespace or "/")`),void ne.warn(st.join(" "))}Jr(new te.wA(`${gr}-version`,()=>({library:gr,version:it}),"VERSION"))}function Gn(ht,it){if(null!==ht&&"function"!=typeof ht)throw ki.create("invalid-log-argument");(0,G.Am)(ht,it)}function Fi(ht){(0,G.Ub)(ht)}Jr(new te.wA("platform-logger",it=>new ye(it),"PRIVATE")),Je(de,"0.7.1",undefined),Je("fire-js","")},6034:(Ze,Te,V)=>{"use strict";V.d(Te,{wA:()=>G,H0:()=>X,zt:()=>ye});var g=V(4762),te=V(3854),G=function(){function ne(j,H,$){this.name=j,this.instanceFactory=H,this.type=$,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ne.prototype.setInstantiationMode=function(j){return this.instantiationMode=j,this},ne.prototype.setMultipleInstances=function(j){return this.multipleInstances=j,this},ne.prototype.setServiceProps=function(j){return this.serviceProps=j,this},ne.prototype.setInstanceCreatedCallback=function(j){return this.onInstanceCreated=j,this},ne}(),Ee="[DEFAULT]",ye=function(){function ne(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ne.prototype.get=function(j){var H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){var $=new te.BH;if(this.instancesDeferred.set(H,$),this.isInitialized(H)||this.shouldAutoInitialize())try{var ie=this.getOrInitializeService({instanceIdentifier:H});ie&&$.resolve(ie)}catch(re){}}return this.instancesDeferred.get(H).promise},ne.prototype.getImmediate=function(j){var H,$=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),ie=null!==(H=null==j?void 0:j.optional)&&void 0!==H&&H;if(!this.isInitialized($)&&!this.shouldAutoInitialize()){if(ie)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:$})}catch(re){if(ie)return null;throw re}},ne.prototype.getComponent=function(){return this.component},ne.prototype.setComponent=function(j){var H,$;if(j.name!==this.name)throw Error("Mismatching Component "+j.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=j,this.shouldAutoInitialize()){if(function(ne){return"EAGER"===ne.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(Ve){}try{for(var ie=(0,g.XA)(this.instancesDeferred.entries()),re=ie.next();!re.done;re=ie.next()){var ue=(0,g.CR)(re.value,2),Ae=ue[1],he=this.normalizeInstanceIdentifier(ue[0]);try{var we=this.getOrInitializeService({instanceIdentifier:he});Ae.resolve(we)}catch(Ve){}}}catch(Ve){H={error:Ve}}finally{try{re&&!re.done&&($=ie.return)&&$.call(ie)}finally{if(H)throw H.error}}}},ne.prototype.clearInstance=function(j){void 0===j&&(j=Ee),this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)},ne.prototype.delete=function(){return(0,g.mG)(this,void 0,void 0,function(){var j;return(0,g.Jh)(this,function(H){switch(H.label){case 0:return j=Array.from(this.instances.values()),[4,Promise.all((0,g.ev)((0,g.ev)([],(0,g.CR)(j.filter(function($){return"INTERNAL"in $}).map(function($){return $.INTERNAL.delete()}))),(0,g.CR)(j.filter(function($){return"_delete"in $}).map(function($){return $._delete()}))))];case 1:return H.sent(),[2]}})})},ne.prototype.isComponentSet=function(){return null!=this.component},ne.prototype.isInitialized=function(j){return void 0===j&&(j=Ee),this.instances.has(j)},ne.prototype.getOptions=function(j){return void 0===j&&(j=Ee),this.instancesOptions.get(j)||{}},ne.prototype.initialize=function(j){var H,$;void 0===j&&(j={});var ie=j.options,re=void 0===ie?{}:ie,ue=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(ue))throw Error(this.name+"("+ue+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ae=this.getOrInitializeService({instanceIdentifier:ue,options:re});try{for(var Ae=(0,g.XA)(this.instancesDeferred.entries()),he=Ae.next();!he.done;he=Ae.next()){var we=(0,g.CR)(he.value,2),He=we[1];ue===this.normalizeInstanceIdentifier(we[0])&&He.resolve(ae)}}catch(Vt){H={error:Vt}}finally{try{he&&!he.done&&($=Ae.return)&&$.call(Ae)}finally{if(H)throw H.error}}return ae},ne.prototype.onInit=function(j,H){var $,ie=this.normalizeInstanceIdentifier(H),re=null!==($=this.onInitCallbacks.get(ie))&&void 0!==$?$:new Set;re.add(j),this.onInitCallbacks.set(ie,re);var ue=this.instances.get(ie);return ue&&j(ue,ie),function(){re.delete(j)}},ne.prototype.invokeOnInitCallbacks=function(j,H){var $,ie,re=this.onInitCallbacks.get(H);if(re)try{for(var ue=(0,g.XA)(re),ae=ue.next();!ae.done;ae=ue.next()){var Ae=ae.value;try{Ae(j,H)}catch(he){}}}catch(he){$={error:he}}finally{try{ae&&!ae.done&&(ie=ue.return)&&ie.call(ue)}finally{if($)throw $.error}}},ne.prototype.getOrInitializeService=function(j){var H=j.instanceIdentifier,$=j.options,ie=void 0===$?{}:$,re=this.instances.get(H);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:Q(H),options:ie}),this.instances.set(H,re),this.instancesOptions.set(H,ie),this.invokeOnInitCallbacks(re,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,re)}catch(ue){}return re||null},ne.prototype.normalizeInstanceIdentifier=function(j){return void 0===j&&(j=Ee),this.component?this.component.multipleInstances?j:Ee:j},ne.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ne}();function Q(ne){return ne===Ee?void 0:ne}var X=function(){function ne(j){this.name=j,this.providers=new Map}return ne.prototype.addComponent=function(j){var H=this.getProvider(j.name);if(H.isComponentSet())throw new Error("Component "+j.name+" has already been registered with "+this.name);H.setComponent(j)},ne.prototype.addOrOverwriteComponent=function(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)},ne.prototype.getProvider=function(j){if(this.providers.has(j))return this.providers.get(j);var H=new ye(j,this);return this.providers.set(j,H),H},ne.prototype.getProviders=function(){return Array.from(this.providers.values())},ne}()},5601:(Ze,Te,V)=>{"use strict";V.d(Te,{in:()=>te,Yd:()=>de,Ub:()=>X,Am:()=>ne});const g=[];var te=(()=>{return(j=te||(te={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",te;var j})();const G={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Ee=te.INFO,ye={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Q=(j,H,...$)=>{if(H<j.logLevel)return;const ie=(new Date).toISOString(),re=ye[H];if(!re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[re](`[${ie}]  ${j.name}:`,...$)};class de{constructor(H){this.name=H,this._logLevel=Ee,this._logHandler=Q,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in te))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?G[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...H),this._logHandler(this,te.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...H),this._logHandler(this,te.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,te.INFO,...H),this._logHandler(this,te.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,te.WARN,...H),this._logHandler(this,te.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...H),this._logHandler(this,te.ERROR,...H)}}function X(j){g.forEach(H=>{H.setLogLevel(j)})}function ne(j,H){for(const $ of g){let ie=null;H&&H.level&&(ie=G[H.level]),$.userLogHandler=null===j?null:(re,ue,...ae)=>{const Ae=ae.map(he=>{if(null==he)return null;if("string"==typeof he)return he;if("number"==typeof he||"boolean"==typeof he)return he.toString();if(he instanceof Error)return he.message;try{return JSON.stringify(he)}catch(we){return null}}).filter(he=>he).join(" ");ue>=(null!=ie?ie:re.logLevel)&&j({level:te[ue].toLowerCase(),message:Ae,args:ae,type:re.name})}}}},3854:(Ze,Te,V)=>{"use strict";V.d(Te,{BH:()=>ie,LL:()=>ee,ZR:()=>pe,gQ:()=>Co,hu:()=>te,g5:()=>G,US:()=>Q,tV:()=>ne,h$:()=>de,r3:()=>rn,Sg:()=>re,ne:()=>Vs,p$:()=>j,vZ:()=>ki,ZB:()=>H,gK:()=>ht,pd:()=>Ls,m9:()=>Qa,z$:()=>ue,GJ:()=>Jr,jU:()=>he,ru:()=>we,d:()=>He,xb:()=>Pt,w1:()=>ot,hl:()=>De,uI:()=>ae,UG:()=>Ae,Yr:()=>St,b$:()=>Ve,G6:()=>Ut,Mn:()=>Vt,w9:()=>pi,cI:()=>bt,UI:()=>lr,xO:()=>gi,zd:()=>wo,DV:()=>cn,ug:()=>Kt,dS:()=>gr,Pz:()=>nt,Dv:()=>mi,Wj:()=>Ht,lb:()=>kt});const te=function(W,q){if(!W)throw G(q)},G=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},Ee=function(W){const q=[];let z=0;for(let Ie=0;Ie<W.length;Ie++){let se=W.charCodeAt(Ie);se<128?q[z++]=se:se<2048?(q[z++]=se>>6|192,q[z++]=63&se|128):55296==(64512&se)&&Ie+1<W.length&&56320==(64512&W.charCodeAt(Ie+1))?(se=65536+((1023&se)<<10)+(1023&W.charCodeAt(++Ie)),q[z++]=se>>18|240,q[z++]=se>>12&63|128,q[z++]=se>>6&63|128,q[z++]=63&se|128):(q[z++]=se>>12|224,q[z++]=se>>6&63|128,q[z++]=63&se|128)}return q},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,q){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let se=0;se<W.length;se+=3){const ze=W[se],mt=se+1<W.length,Ft=mt?W[se+1]:0,dn=se+2<W.length,En=dn?W[se+2]:0;let Wn=(15&Ft)<<2|En>>6,ei=63&En;dn||(ei=64,mt||(Wn=64)),Ie.push(z[ze>>2],z[(3&ze)<<4|Ft>>4],z[Wn],z[ei])}return Ie.join("")},encodeString(W,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(W):this.encodeByteArray(Ee(W),q)},decodeString(W,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(W):function(W){const q=[];let z=0,Ie=0;for(;z<W.length;){const se=W[z++];if(se<128)q[Ie++]=String.fromCharCode(se);else if(se>191&&se<224){const ze=W[z++];q[Ie++]=String.fromCharCode((31&se)<<6|63&ze)}else if(se>239&&se<365){const dn=((7&se)<<18|(63&W[z++])<<12|(63&W[z++])<<6|63&W[z++])-65536;q[Ie++]=String.fromCharCode(55296+(dn>>10)),q[Ie++]=String.fromCharCode(56320+(1023&dn))}else{const ze=W[z++],mt=W[z++];q[Ie++]=String.fromCharCode((15&se)<<12|(63&ze)<<6|63&mt)}}return q.join("")}(this.decodeStringToByteArray(W,q))},decodeStringToByteArray(W,q){this.init_();const z=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let se=0;se<W.length;){const ze=z[W.charAt(se++)],Ft=se<W.length?z[W.charAt(se)]:0;++se;const En=se<W.length?z[W.charAt(se)]:64;++se;const Mt=se<W.length?z[W.charAt(se)]:64;if(++se,null==ze||null==Ft||null==En||null==Mt)throw Error();Ie.push(ze<<2|Ft>>4),64!==En&&(Ie.push(Ft<<4&240|En>>2),64!==Mt&&Ie.push(En<<6&192|Mt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},de=function(W){const q=Ee(W);return Q.encodeByteArray(q,!0)},X=function(W){return de(W).replace(/\./g,"")},ne=function(W){try{return Q.decodeString(W,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(W){return H(void 0,W)}function H(W,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return q}for(const z in q)!q.hasOwnProperty(z)||!$(z)||(W[z]=H(W[z],q[z]));return W}function $(W){return"__proto__"!==W}class ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,z)=>{this.resolve=q,this.reject=z})}wrapCallback(q){return(z,Ie)=>{z?this.reject(z):this.resolve(Ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(z):q(z,Ie))}}}function re(W,q){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=q||"demo-project",se=W.iat||0,ze=W.sub||W.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:se,exp:se+3600,auth_time:se,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},W);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(mt)),""].join(".")}function ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ae(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ue())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function he(){return"object"==typeof self&&self.self===self}function we(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function He(){return ue().indexOf("Electron/")>=0}function ot(){const W=ue();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Vt(){return ue().indexOf("MSAppHost/")>=0}function St(){return!1}function Ut(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){return"object"==typeof indexedDB}class pe extends Error{constructor(q,z,Ie){super(z),this.code=q,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ee.prototype.create)}}class ee{constructor(q,z,Ie){this.service=q,this.serviceName=z,this.errors=Ie}create(q,...z){const Ie=z[0]||{},se=`${this.service}/${q}`,ze=this.errors[q],mt=ze?function(W,q){return W.replace(Ye,(z,Ie)=>{const se=q[Ie];return null!=se?String(se):`<${Ie}?>`})}(ze,Ie):"Error";return new pe(se,`${this.serviceName}: ${mt} (${se}).`,Ie)}}const Ye=/\{\$([^}]+)}/g;function bt(W){return JSON.parse(W)}function nt(W){return JSON.stringify(W)}const et=function(W){let q={},z={},Ie={},se="";try{const ze=W.split(".");q=bt(ne(ze[0])||""),z=bt(ne(ze[1])||""),se=ze[2],Ie=z.d||{},delete z.d}catch(ze){}return{header:q,claims:z,data:Ie,signature:se}},pi=function(W){const z=et(W).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Jr=function(W){const q=et(W).claims;return"object"==typeof q&&!0===q.admin};function rn(W,q){return Object.prototype.hasOwnProperty.call(W,q)}function cn(W,q){if(Object.prototype.hasOwnProperty.call(W,q))return W[q]}function Pt(W){for(const q in W)if(Object.prototype.hasOwnProperty.call(W,q))return!1;return!0}function lr(W,q,z){const Ie={};for(const se in W)Object.prototype.hasOwnProperty.call(W,se)&&(Ie[se]=q.call(z,W[se],se,W));return Ie}function ki(W,q){if(W===q)return!0;const z=Object.keys(W),Ie=Object.keys(q);for(const se of z){if(!Ie.includes(se))return!1;const ze=W[se],mt=q[se];if(la(ze)&&la(mt)){if(!ki(ze,mt))return!1}else if(ze!==mt)return!1}for(const se of Ie)if(!z.includes(se))return!1;return!0}function la(W){return null!==W&&"object"==typeof W}function gi(W){const q=[];for(const[z,Ie]of Object.entries(W))Array.isArray(Ie)?Ie.forEach(se=>{q.push(encodeURIComponent(z)+"="+encodeURIComponent(se))}):q.push(encodeURIComponent(z)+"="+encodeURIComponent(Ie));return q.length?"&"+q.join("&"):""}function wo(W){const q={};return W.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[se,ze]=Ie.split("=");q[decodeURIComponent(se)]=decodeURIComponent(ze)}}),q}function Ls(W){const q=W.indexOf("?");if(!q)return"";const z=W.indexOf("#",q);return W.substring(q,z>0?z:void 0)}class Co{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,z){z||(z=0);const Ie=this.W_;if("string"==typeof q)for(let Mt=0;Mt<16;Mt++)Ie[Mt]=q.charCodeAt(z)<<24|q.charCodeAt(z+1)<<16|q.charCodeAt(z+2)<<8|q.charCodeAt(z+3),z+=4;else for(let Mt=0;Mt<16;Mt++)Ie[Mt]=q[z]<<24|q[z+1]<<16|q[z+2]<<8|q[z+3],z+=4;for(let Mt=16;Mt<80;Mt++){const Wn=Ie[Mt-3]^Ie[Mt-8]^Ie[Mt-14]^Ie[Mt-16];Ie[Mt]=4294967295&(Wn<<1|Wn>>>31)}let En,kr,se=this.chain_[0],ze=this.chain_[1],mt=this.chain_[2],Ft=this.chain_[3],dn=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(En=Ft^ze&(mt^Ft),kr=1518500249):(En=ze^mt^Ft,kr=1859775393):Mt<60?(En=ze&mt|Ft&(ze|mt),kr=2400959708):(En=ze^mt^Ft,kr=3395469782);const Wn=(se<<5|se>>>27)+En+dn+kr+Ie[Mt]&4294967295;dn=Ft,Ft=mt,mt=4294967295&(ze<<30|ze>>>2),ze=se,se=Wn}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+ze&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+Ft&4294967295,this.chain_[4]=this.chain_[4]+dn&4294967295}update(q,z){if(null==q)return;void 0===z&&(z=q.length);const Ie=z-this.blockSize;let se=0;const ze=this.buf_;let mt=this.inbuf_;for(;se<z;){if(0===mt)for(;se<=Ie;)this.compress_(q,se),se+=this.blockSize;if("string"==typeof q){for(;se<z;)if(ze[mt]=q.charCodeAt(se),++mt,++se,mt===this.blockSize){this.compress_(ze),mt=0;break}}else for(;se<z;)if(ze[mt]=q[se],++mt,++se,mt===this.blockSize){this.compress_(ze),mt=0;break}}this.inbuf_=mt,this.total_+=z}digest(){const q=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&z,z/=256;this.compress_(this.buf_);let Ie=0;for(let se=0;se<5;se++)for(let ze=24;ze>=0;ze-=8)q[Ie]=this.chain_[se]>>ze&255,++Ie;return q}}function Vs(W,q){const z=new ua(W,q);return z.subscribe.bind(z)}class ua{constructor(q,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{q(this)}).catch(Ie=>{this.error(Ie)})}next(q){this.forEachObserver(z=>{z.next(q)})}error(q){this.forEachObserver(z=>{z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,z,Ie){let se;if(void 0===q&&void 0===z&&void 0===Ie)throw new Error("Missing Observer.");se=function(W,q){if("object"!=typeof W||null===W)return!1;for(const z of["next","error","complete"])if(z in W&&"function"==typeof W[z])return!0;return!1}(q)?q:{next:q,error:z,complete:Ie},void 0===se.next&&(se.next=Fi),void 0===se.error&&(se.error=Fi),void 0===se.complete&&(se.complete=Fi);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(mt){}}),this.observers.push(se),ze}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,q)}sendOne(q,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{z(this.observers[q])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fi(){}const mi=function(W,q,z,Ie){let se;if(Ie<q?se="at least "+q:Ie>z&&(se=0===z?"none":"no more than "+z),se)throw new Error(W+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+se+".")};function ht(W,q){return`${W} failed: ${q} argument `}function Ht(W,q,z,Ie){if((!Ie||z)&&"function"!=typeof z)throw new Error(ht(W,q)+"must be a valid function.")}function kt(W,q,z,Ie){if((!Ie||z)&&("object"!=typeof z||null===z))throw new Error(ht(W,q)+"must be a valid context object.")}const gr=function(W){const q=[];let z=0;for(let Ie=0;Ie<W.length;Ie++){let se=W.charCodeAt(Ie);if(se>=55296&&se<=56319){const ze=se-55296;Ie++,te(Ie<W.length,"Surrogate pair missing trail surrogate."),se=65536+(ze<<10)+(W.charCodeAt(Ie)-56320)}se<128?q[z++]=se:se<2048?(q[z++]=se>>6|192,q[z++]=63&se|128):se<65536?(q[z++]=se>>12|224,q[z++]=se>>6&63|128,q[z++]=63&se|128):(q[z++]=se>>18|240,q[z++]=se>>12&63|128,q[z++]=se>>6&63|128,q[z++]=63&se|128)}return q},Kt=function(W){let q=0;for(let z=0;z<W.length;z++){const Ie=W.charCodeAt(z);Ie<128?q++:Ie<2048?q+=2:Ie>=55296&&Ie<=56319?(q+=4,z++):q+=3}return q};function Qa(W){return W&&W._delegate?W._delegate:W}},7841:(Ze,Te,V)=>{"use strict";V.d(Te,{Z:()=>g.Z});var g=V(4486);g.Z.registerVersion("firebase","9.1.0","app-compat")},670:(Ze,Te,V)=>{"use strict";V.r(Te);var g=V(8239),te=V(4486),G=V(3854),Ee=V(5452),ye=V(4762),Q=V(5601),de=V(6034);const ue=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ae=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ae=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),we=new Q.Yd("@firebase/auth");function Ve(b,...y){we.logLevel<=Q.in.ERROR&&we.error(`Auth (${Ee.SDK_VERSION}): ${b}`,...y)}function He(b,...y){throw Ut(b,...y)}function ot(b,...y){return Ut(b,...y)}function Vt(b,y,v){const I=Object.assign(Object.assign({},ae()),{[y]:v});return new G.LL("auth","Firebase",I).create(y,{appName:b.name})}function St(b,y,v){if(!(y instanceof v))throw v.name!==y.constructor.name&&He(b,"argument-error"),Vt(b,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ut(b,...y){if("string"!=typeof b){const v=y[0],I=[...y.slice(1)];return I[0]&&(I[0].appName=b.name),b._errorFactory.create(v,...I)}return Ae.create(b,...y)}function De(b,y,...v){if(!b)throw Ut(y,...v)}function oe(b){const y="INTERNAL ASSERTION FAILED: "+b;throw Ve(y),new Error(y)}function ce(b,y){b||oe(y)}const be=new Map;function fe(b){ce(b instanceof Function,"Expected a class definition");let y=be.get(b);return y?(ce(y instanceof b,"Instance stored in cache mismatched with class"),y):(y=new b,be.set(b,y),y)}function ke(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Ye(){return"http:"===bt()||"https:"===bt()}function bt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class dt{constructor(y,v){this.shortDelay=y,this.longDelay=v,ce(v>y,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ye()||(0,G.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function bn(b,y){ce(b.emulator,"Emulator should always be set here");const{url:v}=b.emulator;return y?`${v}${y.startsWith("/")?y.slice(1):y}`:v}class pi{static initialize(y,v,I){this.fetchImpl=y,v&&(this.headersImpl=v),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new dt(3e4,6e4);function cn(b,y){return b.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:b.tenantId}):y}function Pt(b,y,v,I){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(b,y,v,I,x={}){return ki(b,x,()=>{let F={},K={};I&&("GET"===y?K=I:F={body:JSON.stringify(I)});const ve=(0,G.xO)(Object.assign({key:b.config.apiKey},K)).slice(1),Pe=new(pi.headers());return Pe.set("Content-Type","application/json"),Pe.set("X-Client-Version",b._getSdkClientVersion()),b.languageCode&&Pe.set("X-Firebase-Locale",b.languageCode),pi.fetch()(Ls(b,b.config.apiHost,v,ve),Object.assign({method:y,headers:Pe,referrerPolicy:"no-referrer"},F))})})).apply(this,arguments)}function ki(b,y,v){return la.apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(b,y,v){b._canInitEmulator=!1;const I=Object.assign(Object.assign({},Jr),y);try{const x=new Co(b),F=yield Promise.race([v(),x.promise]);x.clearNetworkTimeout();const K=yield F.json();if("needConfirmation"in K)throw Vs(b,"account-exists-with-different-credential",K);if(F.ok&&!("errorMessage"in K))return K;{const ve=F.ok?K.errorMessage:K.error.message,[Pe,We]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw Vs(b,"credential-already-in-use",K);if("EMAIL_EXISTS"===Pe)throw Vs(b,"email-already-in-use",K);const at=I[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(We)throw Vt(b,at,We);He(b,at)}}catch(x){if(x instanceof G.ZR)throw x;He(b,"network-request-failed")}})).apply(this,arguments)}function gi(b,y,v,I){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(b,y,v,I,x={}){const F=yield Pt(b,y,v,I,x);return"mfaPendingCredential"in F&&He(b,"multi-factor-auth-required",{serverResponse:F}),F})).apply(this,arguments)}function Ls(b,y,v,I){const x=`${y}${v}?${I}`;return b.config.emulator?bn(b.config,x):`${b.config.apiScheme}://${x}`}class Co{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((v,I)=>{this.timer=setTimeout(()=>I(ot(this.auth,"timeout")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vs(b,y,v){const I={appName:b.name};v.email&&(I.email=v.email),v.phoneNumber&&(I.phoneNumber=v.phoneNumber);const x=ot(b,y,I);return x.customData._tokenResponse=v,x}function Je(){return(Je=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function Gn(b,y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function mi(b,y){return ht.apply(this,arguments)}function ht(){return(ht=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function it(b){if(b)try{const y=new Date(Number(b));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function gr(){return(gr=(0,g.Z)(function*(b,y=!1){const v=(0,G.m9)(b),I=yield v.getIdToken(y),x=Fe(I);De(x&&x.exp&&x.auth_time&&x.iat,v.auth,"internal-error");const F="object"==typeof x.firebase?x.firebase:void 0,K=null==F?void 0:F.sign_in_provider;return{claims:x,token:I,authTime:it(Kt(x.auth_time)),issuedAtTime:it(Kt(x.iat)),expirationTime:it(Kt(x.exp)),signInProvider:K||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function Kt(b){return 1e3*Number(b)}function Fe(b){const[y,v,I]=b.split(".");if(void 0===y||void 0===v||void 0===I)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,G.tV)(v);return x?JSON.parse(x):(Ve("Failed to decode base64 JWT payload"),null)}catch(x){return Ve("Caught error parsing JWT payload as JSON",x),null}}function Li(b,y){return bo.apply(this,arguments)}function bo(){return(bo=(0,g.Z)(function*(b,y,v=!1){if(v)return y;try{return yield y}catch(I){throw I instanceof G.ZR&&ss(I)&&b.auth.currentUser===b&&(yield b.auth.signOut()),I}})).apply(this,arguments)}function ss({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class an{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var v;if(y){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(y=!1){var v=this;if(!this.isRunning)return;const I=this.getInterval(y);this.timerId=setTimeout((0,g.Z)(function*(){yield v.iteration()}),I)}iteration(){var y=this;return(0,g.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v.code&&y.schedule(!0))}y.schedule()})()}}class Xr{constructor(y,v){this.createdAt=y,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=it(this.lastLoginAt),this.creationTime=it(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qa(b){return W.apply(this,arguments)}function W(){return(W=(0,g.Z)(function*(b){var y;const v=b.auth,I=yield b.getIdToken(),x=yield Li(b,mi(v,{idToken:I}));De(null==x?void 0:x.users.length,v,"internal-error");const F=x.users[0];b._notifyReloadListener(F);const K=(null===(y=F.providerUserInfo)||void 0===y?void 0:y.length)?se(F.providerUserInfo):[],ve=Ie(b.providerData,K),at=!!b.isAnonymous&&!(b.email&&F.passwordHash||(null==ve?void 0:ve.length)),tt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ve,metadata:new Xr(F.createdAt,F.lastLoginAt),isAnonymous:at};Object.assign(b,tt)})).apply(this,arguments)}function z(){return(z=(0,g.Z)(function*(b){const y=(0,G.m9)(b);yield Qa(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Ie(b,y){return[...b.filter(I=>!y.some(x=>x.providerId===I.providerId)),...y]}function se(b){return b.map(y=>{var{providerId:v}=y,I=(0,ye._T)(y,["providerId"]);return{providerId:v,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function mt(){return(mt=(0,g.Z)(function*(b,y){const v=yield ki(b,{},()=>{const I=(0,G.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:x,apiKey:F}=b.config,K=Ls(b,x,"/v1/token",`key=${F}`);return pi.fetch()(K,{method:"POST",headers:{"X-Client-Version":b._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:I})});return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Ft{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){De(y.idToken,"internal-error"),De(void 0!==y.idToken,"internal-error"),De(void 0!==y.refreshToken,"internal-error");const v="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function(b){const y=Fe(b);return De(y,"internal-error"),De(void 0!==y.exp,"internal-error"),De(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,v)}getToken(y,v=!1){var I=this;return(0,g.Z)(function*(){return De(!I.accessToken||I.refreshToken,y,"user-token-expired"),v||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(y,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,v){var I=this;return(0,g.Z)(function*(){const{accessToken:x,refreshToken:F,expiresIn:K}=yield function(b,y){return mt.apply(this,arguments)}(y,v);I.updateTokensAndExpiration(x,F,Number(K))})()}updateTokensAndExpiration(y,v,I){this.refreshToken=v||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(y,v){const{refreshToken:I,accessToken:x,expirationTime:F}=v,K=new Ft;return I&&(De("string"==typeof I,"internal-error",{appName:y}),K.refreshToken=I),x&&(De("string"==typeof x,"internal-error",{appName:y}),K.accessToken=x),F&&(De("number"==typeof F,"internal-error",{appName:y}),K.expirationTime=F),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new Ft,this.toJSON())}_performRefresh(){return oe("not implemented")}}function dn(b,y){De("string"==typeof b||void 0===b,"internal-error",{appName:y})}class En{constructor(y){var{uid:v,auth:I,stsTokenManager:x}=y,F=(0,ye._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new an(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.metadata=new Xr(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(y){var v=this;return(0,g.Z)(function*(){const I=yield Li(v,v.stsTokenManager.getToken(v.auth,y));return De(I,v.auth,"internal-error"),v.accessToken!==I&&(v.accessToken=I,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),I})()}getIdTokenResult(y){return function(b){return gr.apply(this,arguments)}(this,y)}reload(){return function(b){return z.apply(this,arguments)}(this)}_assign(y){this!==y&&(De(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(v=>Object.assign({},v)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new En(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,v=!1){var I=this;return(0,g.Z)(function*(){let x=!1;y.idToken&&y.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(y),x=!0),v&&(yield Qa(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var y=this;return(0,g.Z)(function*(){const v=yield y.getIdToken();return yield Li(y,function(b,y){return Je.apply(this,arguments)}(y.auth,{idToken:v})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,v){var I,x,F,K,ve,Pe,We,at;const tt=null!==(I=v.displayName)&&void 0!==I?I:void 0,Rn=null!==(x=v.email)&&void 0!==x?x:void 0,Ti=null!==(F=v.phoneNumber)&&void 0!==F?F:void 0,Uu=null!==(K=v.photoURL)&&void 0!==K?K:void 0,bp=null!==(ve=v.tenantId)&&void 0!==ve?ve:void 0,Tp=null!==(Pe=v._redirectEventId)&&void 0!==Pe?Pe:void 0,Ad=null!==(We=v.createdAt)&&void 0!==We?We:void 0,vs=null!==(at=v.lastLoginAt)&&void 0!==at?at:void 0,{uid:Zi,emailVerified:kT,isAnonymous:Rd,providerData:xa,stsTokenManager:C_}=v;De(Zi&&C_,y,"internal-error");const Ii=Ft.fromJSON(this.name,C_);De("string"==typeof Zi,y,"internal-error"),dn(tt,y.name),dn(Rn,y.name),De("boolean"==typeof kT,y,"internal-error"),De("boolean"==typeof Rd,y,"internal-error"),dn(Ti,y.name),dn(Uu,y.name),dn(bp,y.name),dn(Tp,y.name),dn(Ad,y.name),dn(vs,y.name);const zi=new En({uid:Zi,auth:y,email:Rn,emailVerified:kT,displayName:tt,isAnonymous:Rd,photoURL:Uu,phoneNumber:Ti,tenantId:bp,stsTokenManager:Ii,createdAt:Ad,lastLoginAt:vs});return xa&&Array.isArray(xa)&&(zi.providerData=xa.map(Bu=>Object.assign({},Bu))),Tp&&(zi._redirectEventId=Tp),zi}static _fromIdTokenResponse(y,v,I=!1){return(0,g.Z)(function*(){const x=new Ft;x.updateFromServerResponse(v);const F=new En({uid:v.localId,auth:y,stsTokenManager:x,isAnonymous:I});return yield Qa(F),F})()}}const Mt=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(v,I){var x=this;return(0,g.Z)(function*(){x.storage[v]=I})()}_get(v){var I=this;return(0,g.Z)(function*(){const x=I.storage[v];return void 0===x?null:x})()}_remove(v){var I=this;return(0,g.Z)(function*(){delete I.storage[v]})()}_addListener(v,I){}_removeListener(v,I){}}return b.type="NONE",b})();function Wn(b,y,v){return`firebase:${b}:${y}:${v}`}class ei{constructor(y,v,I){this.persistence=y,this.auth=v,this.userKey=I;const{config:x,name:F}=this.auth;this.fullUserKey=Wn(this.userKey,x.apiKey,F),this.fullPersistenceKey=Wn("persistence",x.apiKey,F),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,g.Z)(function*(){const v=yield y.persistence._get(y.fullUserKey);return v?En._fromJSON(y.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var v=this;return(0,g.Z)(function*(){if(v.persistence===y)return;const I=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=y,I?v.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,v,I="authUser"){return(0,g.Z)(function*(){if(!v.length)return new ei(fe(Mt),y,I);const x=(yield Promise.all(v.map(function(){var We=(0,g.Z)(function*(at){if(yield at._isAvailable())return at});return function(at){return We.apply(this,arguments)}}()))).filter(We=>We);let F=x[0]||fe(Mt);const K=Wn(I,y.config.apiKey,y.name);let ve=null;for(const We of v)try{const at=yield We._get(K);if(at){const tt=En._fromJSON(y,at);We!==F&&(ve=tt),F=We;break}}catch(at){}const Pe=x.filter(We=>We._shouldAllowMigration);return F._shouldAllowMigration&&Pe.length?(F=Pe[0],ve&&(yield F._set(K,ve.toJSON())),yield Promise.all(v.map(function(){var We=(0,g.Z)(function*(at){if(at!==F)try{yield at._remove(K)}catch(tt){}});return function(at){return We.apply(this,arguments)}}())),new ei(F,y,I)):new ei(F,y,I)})()}}function fu(b){const y=b.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Hc(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Bc(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(ur(y))return"Blackberry";if(_i(y))return"Webos";if(jc(y))return"Safari";if((y.includes("chrome/")||yf(y))&&!y.includes("edge/"))return"Chrome";if(Ja(y))return"Android";{const I=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function Bc(b=(0,G.z$)()){return/firefox\//i.test(b)}function jc(b=(0,G.z$)()){const y=b.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function yf(b=(0,G.z$)()){return/crios\//i.test(b)}function Hc(b=(0,G.z$)()){return/iemobile/i.test(b)}function Ja(b=(0,G.z$)()){return/android/i.test(b)}function ur(b=(0,G.z$)()){return/blackberry/i.test(b)}function _i(b=(0,G.z$)()){return/webos/i.test(b)}function mr(b=(0,G.z$)()){return/iphone|ipad|ipod/i.test(b)}function Ue(b=(0,G.z$)()){return mr(b)||Ja(b)||_i(b)||ur(b)||/windows phone/i.test(b)||Hc(b)}function sn(b,y=[]){let v;switch(b){case"Browser":v=fu((0,G.z$)());break;case"Worker":v=`${fu((0,G.z$)())}-${b}`;break;default:v=b}const I=y.length?y.join(","):"FirebaseCore-web";return`${v}/JsCore/${Ee.SDK_VERSION}/${I}`}class ti{constructor(y,v){this.app=y,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bn(this),this.idTokenSubscription=new Bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ae,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(y,v){var I=this;return v&&(this._popupRedirectResolver=fe(v)),this._initializationPromise=this.queue((0,g.Z)(function*(){var x;I._deleted||(I.persistenceManager=yield ei.create(I,y),!I._deleted&&((null===(x=I._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)&&(yield I._popupRedirectResolver._initialize(I)),yield I.initializeCurrentUser(v),!I._deleted&&(I._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,g.Z)(function*(){if(y._deleted)return;const v=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||v){if(y.currentUser&&v&&y.currentUser.uid===v.uid)return y._currentUser._assign(v),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(v)}})()}initializeCurrentUser(y){var v=this;return(0,g.Z)(function*(){var I;let x=yield v.assertedPersistence.getCurrentUser();if(y&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const F=null===(I=v.redirectUser)||void 0===I?void 0:I._redirectEventId,K=null==x?void 0:x._redirectEventId,ve=yield v.tryRedirectSignIn(y);(!F||F===K)&&(null==ve?void 0:ve.user)&&(x=ve.user)}return x?x._redirectEventId?(De(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===x._redirectEventId?v.directlySetCurrentUser(x):v.reloadAndSetCurrentUserOrClear(x)):v.reloadAndSetCurrentUserOrClear(x):v.directlySetCurrentUser(null)})()}tryRedirectSignIn(y){var v=this;return(0,g.Z)(function*(){let I=null;try{I=yield v._popupRedirectResolver._completeRedirectFn(v,y,!0)}catch(x){yield v._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(y){var v=this;return(0,g.Z)(function*(){try{yield Qa(y)}catch(I){if("auth/network-request-failed"!==I.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var y=this;return(0,g.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var v=this;return(0,g.Z)(function*(){const I=y?(0,G.m9)(y):null;return I&&De(I.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(I&&I._clone(v))})()}_updateCurrentUser(y){var v=this;return(0,g.Z)(function*(){if(!v._deleted)return y&&De(v.tenantId===y.tenantId,v,"tenant-id-mismatch"),v.queue((0,g.Z)(function*(){yield v.directlySetCurrentUser(y),v.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,g.Z)(function*(){return(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null)})()}setPersistence(y){var v=this;return this.queue((0,g.Z)(function*(){yield v.assertedPersistence.setPersistence(fe(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new G.LL("auth","Firebase",y())}onAuthStateChanged(y,v,I){return this.registerStateListener(this.authStateSubscription,y,v,I)}onIdTokenChanged(y,v,I){return this.registerStateListener(this.idTokenSubscription,y,v,I)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,v){var I=this;return(0,g.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(v);return null===y?x.removeCurrentUser():x.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var v=this;return(0,g.Z)(function*(){if(!v.redirectPersistenceManager){const I=y&&fe(y)||v._popupRedirectResolver;De(I,v,"argument-error"),v.redirectPersistenceManager=yield ei.create(v,[fe(I._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(y){var v=this;return(0,g.Z)(function*(){var I,x;return v._isInitialized&&(yield v.queue((0,g.Z)(function*(){}))),(null===(I=v._currentUser)||void 0===I?void 0:I._redirectEventId)===y?v._currentUser:(null===(x=v.redirectUser)||void 0===x?void 0:x._redirectEventId)===y?v.redirectUser:null})()}_persistUserIfCurrent(y){var v=this;return(0,g.Z)(function*(){if(y===v.currentUser)return v.queue((0,g.Z)(function*(){return v.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(v=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,v,I,x){if(this._deleted)return()=>{};const F="function"==typeof v?v:v.next.bind(v),K=this._isInitialized?Promise.resolve():this._initializationPromise;return De(K,this,"internal-error"),K.then(()=>F(this.currentUser)),"function"==typeof v?y.addObserver(v,I,x):y.addObserver(v)}directlySetCurrentUser(y){var v=this;return(0,g.Z)(function*(){v.currentUser&&v.currentUser!==y&&(v._currentUser._stopProactiveRefresh(),y&&v.isProactiveRefreshEnabled&&y._startProactiveRefresh()),v.currentUser=y,y?yield v.assertedPersistence.setCurrentUser(y):yield v.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=sn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function pn(b){return(0,G.m9)(b)}class Bn{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,G.ne)(v=>this.observer=v)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Tn(b){const y=b.indexOf(":");return y<0?"":b.substr(0,y+1)}function ca(b){if(!b)return null;const y=Number(b);return isNaN(y)?null:y}class vi{constructor(y,v){this.providerId=y,this.signInMethod=v}toJSON(){return oe("not implemented")}_getIdTokenResponse(y){return oe("not implemented")}_linkToIdToken(y,v){return oe("not implemented")}_getReauthenticationResolver(y){return oe("not implemented")}}function To(b,y){return gu.apply(this,arguments)}function gu(){return(gu=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:resetPassword",cn(b,y))})).apply(this,arguments)}function Xa(b,y){return cr.apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function mu(b,y){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:update",cn(b,y))})).apply(this,arguments)}function $t(){return($t=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signInWithPassword",cn(b,y))})).apply(this,arguments)}function _u(b,y){return vf.apply(this,arguments)}function vf(){return(vf=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:sendOobCode",cn(b,y))})).apply(this,arguments)}function Ei(b,y){return yu.apply(this,arguments)}function yu(){return(yu=(0,g.Z)(function*(b,y){return _u(b,y)})).apply(this,arguments)}function el(b,y){return Do.apply(this,arguments)}function Do(){return(Do=(0,g.Z)(function*(b,y){return _u(b,y)})).apply(this,arguments)}function Bs(b,y){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,g.Z)(function*(b,y){return _u(b,y)})).apply(this,arguments)}function yE(b,y){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(b,y){return _u(b,y)})).apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signInWithEmailLink",cn(b,y))})).apply(this,arguments)}function tl(){return(tl=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signInWithEmailLink",cn(b,y))})).apply(this,arguments)}class Lr extends vi{constructor(y,v,I,x=null){super("password",I),this._email=y,this._password=v,this._tenantId=x}static _fromEmailAndPassword(y,v){return new Lr(y,v,"password")}static _fromEmailAndCode(y,v,I=null){return new Lr(y,v,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(y){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return function(b,y){return $t.apply(this,arguments)}(y,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(b,y){return vu.apply(this,arguments)}(y,{email:v._email,oobCode:v._password});default:He(y,"internal-error")}})()}_linkToIdToken(y,v){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return Xa(y,{idToken:v,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function(b,y){return tl.apply(this,arguments)}(y,{idToken:v,email:I._email,oobCode:I._password});default:He(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function jn(b,y){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signInWithIdp",cn(b,y))})).apply(this,arguments)}class os extends vi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const v=new os(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(v.idToken=y.idToken),y.accessToken&&(v.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(v.nonce=y.nonce),y.pendingToken&&(v.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(v.accessToken=y.oauthToken,v.secret=y.oauthTokenSecret):He("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:x}=v,F=(0,ye._T)(v,["providerId","signInMethod"]);if(!I||!x)return null;const K=new os(I,x);return Object.assign(K,F),K}_getIdTokenResponse(y){return jn(y,this.buildRequest())}_linkToIdToken(y,v){const I=this.buildRequest();return I.idToken=v,jn(y,I)}_getReauthenticationResolver(y){const v=this.buildRequest();return v.autoCreate=!1,jn(y,v)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),y.postBody=(0,G.xO)(v)}return y}}function cT(b,y){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:sendVerificationCode",cn(b,y))})).apply(this,arguments)}function Am(){return(Am=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signInWithPhoneNumber",cn(b,y))})).apply(this,arguments)}function Rm(){return(Rm=(0,g.Z)(function*(b,y){const v=yield gi(b,"POST","/v1/accounts:signInWithPhoneNumber",cn(b,y));if(v.temporaryProof)throw Vs(b,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const fT={USER_NOT_FOUND:"user-not-found"};function Nm(){return(Nm=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signInWithPhoneNumber",cn(b,Object.assign(Object.assign({},y),{operation:"REAUTH"})),fT)})).apply(this,arguments)}class nl extends vi{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,v){return new nl({verificationId:y,verificationCode:v})}static _fromTokenResponse(y,v){return new nl({phoneNumber:y,temporaryProof:v})}_getIdTokenResponse(y){return function(b,y){return Am.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,v){return function(b,y){return Rm.apply(this,arguments)}(y,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function(b,y){return Nm.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:v,verificationId:I,verificationCode:x}=this.params;return y&&v?{temporaryProof:y,phoneNumber:v}:{sessionInfo:I,code:x}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:v,verificationCode:I,phoneNumber:x,temporaryProof:F}=y;return I||v||x||F?new nl({verificationId:v,verificationCode:I,phoneNumber:x,temporaryProof:F}):null}}class qc{constructor(y){var v,I,x,F,K,ve;const Pe=(0,G.zd)((0,G.pd)(y)),We=null!==(v=Pe.apiKey)&&void 0!==v?v:null,at=null!==(I=Pe.oobCode)&&void 0!==I?I:null,tt=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Pe.mode)&&void 0!==x?x:null);De(We&&at&&tt,"argument-error"),this.apiKey=We,this.operation=tt,this.code=at,this.continueUrl=null!==(F=Pe.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(K=Pe.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ve=Pe.tenantId)&&void 0!==ve?ve:null}static parseLink(y){const v=function(b){const y=(0,G.zd)((0,G.pd)(b)).link,v=y?(0,G.zd)((0,G.pd)(y)).deep_link_id:null,I=(0,G.zd)((0,G.pd)(b)).deep_link_id;return(I?(0,G.zd)((0,G.pd)(I)).link:null)||I||v||y||b}(y);try{return new qc(v)}catch(I){return null}}}let Eu=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(v,I){return Lr._fromEmailAndPassword(v,I)}static credentialWithLink(v,I){const x=qc.parseLink(I);return De(x,"argument-error"),Lr._fromEmailAndCode(v,x.code,x.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class as{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class wu extends as{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class da extends wu{static credentialFromJSON(y){const v="string"==typeof y?JSON.parse(y):y;return De("providerId"in v&&"signInMethod"in v,"argument-error"),os._fromParams(v)}credential(y){return this._credential(y)}_credential(y){return De(y.idToken||y.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return da.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return da.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:v,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:F,nonce:K,providerId:ve}=y;if(!I&&!x&&!v&&!F||!ve)return null;try{return new da(ve)._credential({idToken:v,accessToken:I,rawNonce:K,pendingToken:F})}catch(Pe){return null}}}let wf=(()=>{class b extends wu{constructor(){super("facebook.com")}static credential(v){return os._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(I){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),So=(()=>{class b extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(v,I){return os._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:I})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:I,oauthAccessToken:x}=v;if(!I&&!x)return null;try{return b.credential(I,x)}catch(F){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),xm=(()=>{class b extends wu{constructor(){super("github.com")}static credential(v){return os._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(I){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Ao extends vi{constructor(y,v){super(y,y),this.pendingToken=v}_getIdTokenResponse(y){return jn(y,this.buildRequest())}_linkToIdToken(y,v){const I=this.buildRequest();return I.idToken=v,jn(y,I)}_getReauthenticationResolver(y){const v=this.buildRequest();return v.autoCreate=!1,jn(y,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const v="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:x,pendingToken:F}=v;return I&&x&&F&&I===x?new Ao(I,F):null}static _create(y,v){return new Ao(y,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let bf=(()=>{class b extends wu{constructor(){super("twitter.com")}static credential(v,I){return os._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:I})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=v;if(!I||!x)return null;try{return b.credential(I,x)}catch(F){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Pm(b,y){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signUp",cn(b,y))})).apply(this,arguments)}class ni{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,v,I,x=!1){return(0,g.Z)(function*(){const F=yield En._fromIdTokenResponse(y,I,x),K=wE(I);return new ni({user:F,providerId:K,_tokenResponse:I,operationType:v})})()}static _forOperation(y,v,I){return(0,g.Z)(function*(){yield y._updateTokensIfNecessary(I,!0);const x=wE(I);return new ni({user:y,providerId:x,_tokenResponse:I,operationType:v})})()}}function wE(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Cu(){return(Cu=(0,g.Z)(function*(b){var y;const v=pn(b);if(yield v._initializationPromise,null===(y=v.currentUser)||void 0===y?void 0:y.isAnonymous)return new ni({user:v.currentUser,providerId:null,operationType:"signIn"});const I=yield Pm(v,{returnSecureToken:!0}),x=yield ni._fromIdTokenResponse(v,"signIn",I,!0);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}class bu extends G.ZR{constructor(y,v,I,x){var F;super(v.code,v.message),this.operationType=I,this.user=x,this.name="FirebaseError",Object.setPrototypeOf(this,bu.prototype),this.appName=y.name,this.code=v.code,this.tenantId=null!==(F=y.tenantId)&&void 0!==F?F:void 0,this.serverResponse=v.customData.serverResponse}static _fromErrorAndOperation(y,v,I,x){return new bu(y,v,I,x)}}function Tu(b,y,v,I){return("reauthenticate"===y?v._getReauthenticationResolver(b):v._getIdTokenResponse(b)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?bu._fromErrorAndOperation(b,F,y,I):F})}function Om(b){return new Set(b.map(({providerId:y})=>y).filter(y=>!!y))}function Tf(){return(Tf=(0,g.Z)(function*(b,y){const v=(0,G.m9)(b);yield js(!0,v,y);const{providerUserInfo:I}=yield Gn(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[y]}),x=Om(I||[]);return v.providerData=v.providerData.filter(F=>x.has(F.providerId)),x.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function gn(b,y){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,g.Z)(function*(b,y,v=!1){const I=yield Li(b,y._linkToIdToken(b.auth,yield b.getIdToken()),v);return ni._forOperation(b,"link",I)})).apply(this,arguments)}function js(b,y,v){return If.apply(this,arguments)}function If(){return(If=(0,g.Z)(function*(b,y,v){yield Qa(y);const x=!1===b?"provider-already-linked":"no-such-provider";De(Om(y.providerData).has(v)===b,y.auth,x)})).apply(this,arguments)}function mn(b,y){return Df.apply(this,arguments)}function Df(){return(Df=(0,g.Z)(function*(b,y,v=!1){const{auth:I}=b,x="reauthenticate";try{const F=yield Li(b,Tu(I,x,y,b),v);De(F.idToken,I,"internal-error");const K=Fe(F.idToken);De(K,I,"internal-error");const{sub:ve}=K;return De(b.uid===ve,I,"user-mismatch"),ni._forOperation(b,x,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&He(I,"user-mismatch"),F}})).apply(this,arguments)}function km(b,y){return rl.apply(this,arguments)}function rl(){return(rl=(0,g.Z)(function*(b,y,v=!1){const I="signIn",x=yield Tu(b,I,y),F=yield ni._fromIdTokenResponse(b,I,x);return v||(yield b._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Cr(b,y){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(b,y){return km(pn(b),y)})).apply(this,arguments)}function Zc(b,y){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(b,y){const v=(0,G.m9)(b);return yield js(!1,v,y.providerId),gn(v,y)})).apply(this,arguments)}function Vr(b,y){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,g.Z)(function*(b,y){return mn((0,G.m9)(b),y)})).apply(this,arguments)}function Fm(b,y){return il.apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(b,y){return gi(b,"POST","/v1/accounts:signInWithCustomToken",cn(b,y))})).apply(this,arguments)}function zc(){return(zc=(0,g.Z)(function*(b,y){const v=pn(b),I=yield Fm(v,{token:y,returnSecureToken:!0}),x=yield ni._fromIdTokenResponse(v,"signIn",I);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}class sl{constructor(y,v){this.factorId=y,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(y,v){return"phoneInfo"in v?ft._fromServerResponse(y,v):He(y,"internal-error")}}class ft extends sl{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,v){return new ft(v)}}function Kc(b,y,v){var I;De((null===(I=v.url)||void 0===I?void 0:I.length)>0,b,"invalid-continue-uri"),De(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),y.continueUrl=v.url,y.dynamicLinkDomain=v.dynamicLinkDomain,y.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(De(v.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),y.iosBundleId=v.iOS.bundleId),v.android&&(De(v.android.packageName.length>0,b,"missing-android-pkg-name"),y.androidInstallApp=v.android.installApp,y.androidMinimumVersionCode=v.android.minimumVersion,y.androidPackageName=v.android.packageName)}function Af(){return(Af=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b),x={requestType:"PASSWORD_RESET",email:y};v&&Kc(I,x,v),yield el(I,x)})).apply(this,arguments)}function Rf(){return(Rf=(0,g.Z)(function*(b,y,v){yield To((0,G.m9)(b),{oobCode:y,newPassword:v})})).apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(b,y){yield mu((0,G.m9)(b),{oobCode:y})})).apply(this,arguments)}function Se(b,y){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,g.Z)(function*(b,y){const v=(0,G.m9)(b),I=yield To(v,{oobCode:y}),x=I.requestType;switch(De(x,v,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(I.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(I.mfaInfo,v,"internal-error");default:De(I.email,v,"internal-error")}let F=null;return I.mfaInfo&&(F=sl._fromServerResponse(pn(v),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:x}})).apply(this,arguments)}function hn(){return(hn=(0,g.Z)(function*(b,y){const{data:v}=yield Se((0,G.m9)(b),y);return v.email})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(b,y,v){const I=pn(b),x=yield Pm(I,{returnSecureToken:!0,email:y,password:v}),F=yield ni._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(F.user),F})).apply(this,arguments)}function ol(){return(ol=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b),x={requestType:"EMAIL_SIGNIN",email:y};De(v.handleCodeInApp,I,"argument-error"),v&&Kc(I,x,v),yield Bs(I,x)})).apply(this,arguments)}function al(){return(al=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b),x=Eu.credentialWithLink(y,v||ke());return De(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Cr(I,x)})).apply(this,arguments)}function Qc(b,y){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:createAuthUri",cn(b,y))})).apply(this,arguments)}function Pf(){return(Pf=(0,g.Z)(function*(b,y){const I={identifier:y,continueUri:Ye()?ke():"http://localhost"},{signinMethods:x}=yield Qc((0,G.m9)(b),I);return x||[]})).apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(b,y){const v=(0,G.m9)(b),x={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};y&&Kc(v.auth,x,y);const{email:F}=yield Ei(v.auth,x);F!==b.email&&(yield b.reload())})).apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:y};v&&Kc(I.auth,F,v);const{email:K}=yield yE(I.auth,F);K!==b.email&&(yield b.reload())})).apply(this,arguments)}function Lm(b,y){return Of.apply(this,arguments)}function Of(){return(Of=(0,g.Z)(function*(b,y){return Pt(b,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Du(){return(Du=(0,g.Z)(function*(b,{displayName:y,photoURL:v}){if(void 0===y&&void 0===v)return;const I=(0,G.m9)(b),F={idToken:yield I.getIdToken(),displayName:y,photoUrl:v,returnSecureToken:!0},K=yield Li(I,Lm(I.auth,F));I.displayName=K.displayName||null,I.photoURL=K.photoUrl||null;const ve=I.providerData.find(({providerId:Pe})=>"password"===Pe);ve&&(ve.displayName=I.displayName,ve.photoURL=I.photoURL),yield I._updateTokensIfNecessary(K)})).apply(this,arguments)}function kf(b,y,v){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,g.Z)(function*(b,y,v){const{auth:I}=b,F={idToken:yield b.getIdToken(),returnSecureToken:!0};y&&(F.email=y),v&&(F.password=v);const K=yield Li(b,Xa(I,F));yield b._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class ga{constructor(y,v,I={}){this.isNewUser=y,this.providerId=v,this.profile=I}}class Um extends ga{constructor(y,v,I,x){super(y,v,I),this.username=x}}class Bm extends ga{constructor(y,v){super(y,"facebook.com",v)}}class DE extends Um{constructor(y,v){super(y,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Au extends ga{constructor(y,v){super(y,"google.com",v)}}class SE extends Um{constructor(y,v,I){super(y,"twitter.com",v,I)}}function AE(b){const{user:y,_tokenResponse:v}=b;return y.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function(b){var y,v;if(!b)return null;const{providerId:I}=b,x=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},F=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!I&&(null==b?void 0:b.idToken)){const K=null===(v=null===(y=Fe(b.idToken))||void 0===y?void 0:y.firebase)||void 0===v?void 0:v.sign_in_provider;if(K)return new ga(F,"anonymous"!==K&&"custom"!==K?K:null)}if(!I)return null;switch(I){case"facebook.com":return new Bm(F,x);case"github.com":return new DE(F,x);case"google.com":return new Au(F,x);case"twitter.com":return new SE(F,x,b.screenName||null);case"custom":case"anonymous":return new ga(F,null);default:return new ga(F,I,x)}}(v)}class Hi{constructor(y,v){this.type=y,this.credential=v}static _fromIdtoken(y){return new Hi("enroll",y)}static _fromMfaPendingCredential(y){return new Hi("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var v,I;if(null==y?void 0:y.multiFactorSession){if(null===(v=y.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return Hi._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(I=y.multiFactorSession)||void 0===I?void 0:I.idToken)return Hi._fromIdtoken(y.multiFactorSession.idToken)}return null}}class ul{constructor(y,v,I){this.session=y,this.hints=v,this.signInResolver=I}static _fromError(y,v){const I=pn(y),x=(v.serverResponse.mfaInfo||[]).map(K=>sl._fromServerResponse(I,K));De(v.serverResponse.mfaPendingCredential,I,"internal-error");const F=Hi._fromMfaPendingCredential(v.serverResponse.mfaPendingCredential);return new ul(F,x,function(){var K=(0,g.Z)(function*(ve){const Pe=yield ve._process(I,F);delete v.serverResponse.mfaInfo,delete v.serverResponse.mfaPendingCredential;const We=Object.assign(Object.assign({},v.serverResponse),{idToken:Pe.idToken,refreshToken:Pe.refreshToken});switch(v.operationType){case"signIn":const at=yield ni._fromIdTokenResponse(I,v.operationType,We);return yield I._updateCurrentUser(at.user),at;case"reauthenticate":return De(v.user,I,"internal-error"),ni._forOperation(v.user,v.operationType,We);default:He(I,"internal-error")}});return function(ve){return K.apply(this,arguments)}}())}resolveSignIn(y){var v=this;return(0,g.Z)(function*(){return v.signInResolver(y)})()}}function td(b,y){return Pt(b,"POST","/v2/accounts/mfaEnrollment:start",cn(b,y))}class Vf{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(I=>sl._fromServerResponse(y.auth,I)))})}static _fromUser(y){return new Vf(y)}getSession(){var y=this;return(0,g.Z)(function*(){return Hi._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,v){var I=this;return(0,g.Z)(function*(){const x=y,F=yield I.getSession(),K=yield Li(I.user,x._process(I.user.auth,F,v));return yield I.user._updateTokensIfNecessary(K),I.user.reload()})()}unenroll(y){var v=this;return(0,g.Z)(function*(){const I="string"==typeof y?y:y.uid,x=yield v.user.getIdToken(),F=yield Li(v.user,function(b,y){return Pt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",cn(b,y))}(v.user.auth,{idToken:x,mfaEnrollmentId:I}));v.enrolledFactors=v.enrolledFactors.filter(({uid:K})=>K!==I),yield v.user._updateTokensIfNecessary(F);try{yield v.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const ls=new WeakMap,Uf="__sak";class Hm{constructor(y,v){this.storage=y,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Uf,"1"),this.storage.removeItem(Uf),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,v){return this.storage.setItem(y,JSON.stringify(v)),Promise.resolve()}_get(y){const v=this.storage.getItem(y);return Promise.resolve(v?JSON.parse(v):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}}const Hf=(()=>{class b extends Hm{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(v,I)=>this.onStorageEvent(v,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,G.z$)();return jc(b)||mr(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Ue(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),F=this.localCache[I];x!==F&&v(I,F,x)}}onStorageEvent(v,I=!1){if(!v.key)return void this.forAllChangedKeys((ve,Pe,We)=>{this.notifyListeners(ve,We)});const x=v.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(x);if(v.newValue!==ve)null!==v.newValue?this.storage.setItem(x,v.newValue):this.storage.removeItem(x);else if(this.localCache[x]===v.newValue&&!I)return}const F=()=>{const ve=this.storage.getItem(x);!I&&this.localCache[x]===ve||this.notifyListeners(x,ve)},K=this.storage.getItem(x);(0,G.w1)()&&10===document.documentMode&&K!==v.newValue&&v.newValue!==v.oldValue?setTimeout(F,10):F()}notifyListeners(v,I){this.localCache[v]=I;const x=this.listeners[v];if(x)for(const F of Array.from(x))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,I){var x=()=>super._set,F=this;return(0,g.Z)(function*(){yield x().call(F,v,I),F.localCache[v]=JSON.stringify(I)})()}_get(v){var I=()=>super._get,x=this;return(0,g.Z)(function*(){const F=yield I().call(x,v);return x.localCache[v]=JSON.stringify(F),F})()}_remove(v){var I=()=>super._remove,x=this;return(0,g.Z)(function*(){yield I().call(x,v),delete x.localCache[v]})()}}return b.type="LOCAL",b})(),us=(()=>{class b extends Hm{constructor(){super(window.sessionStorage,"SESSION")}_addListener(v,I){}_removeListener(v,I){}}return b.type="SESSION",b})();let cs=(()=>{class b{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const I=this.receivers.find(F=>F.isListeningto(v));if(I)return I;const x=new b(v);return this.receivers.push(x),x}isListeningto(v){return this.eventTarget===v}handleEvent(v){var I=this;return(0,g.Z)(function*(){const x=v,{eventId:F,eventType:K,data:ve}=x.data,Pe=I.handlersMap[K];if(!(null==Pe?void 0:Pe.size))return;x.ports[0].postMessage({status:"ack",eventId:F,eventType:K});const We=Array.from(Pe).map(function(){var tt=(0,g.Z)(function*(Rn){return Rn(x.origin,ve)});return function(Rn){return tt.apply(this,arguments)}}()),at=yield function(b){return Promise.all(b.map(function(){var y=(0,g.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(I){return{fulfilled:!1,reason:I}}});return function(v){return y.apply(this,arguments)}}()))}(We);x.ports[0].postMessage({status:"done",eventId:F,eventType:K,response:at})})()}_subscribe(v,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(I)}_unsubscribe(v,I){this.handlersMap[v]&&I&&this.handlersMap[v].delete(I),(!I||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function No(b="",y=10){let v="";for(let I=0;I<y;I++)v+=Math.floor(10*Math.random());return b+v}class qm{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,v,I=50){var x=this;return(0,g.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let K,ve;return new Promise((Pe,We)=>{const at=No("",20);F.port1.start();const tt=setTimeout(()=>{We(new Error("unsupported_event"))},I);ve={messageChannel:F,onMessage(Rn){const Ti=Rn;if(Ti.data.eventId===at)switch(Ti.data.status){case"ack":clearTimeout(tt),K=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Pe(Ti.data.response);break;default:clearTimeout(tt),clearTimeout(K),We(new Error("invalid_response"))}}},x.handlers.add(ve),F.port1.addEventListener("message",ve.onMessage),x.target.postMessage({eventType:y,eventId:at,data:v},[F.port2])}).finally(()=>{ve&&x.removeMessageHandler(ve)})})()}}function In(){return window}function Gm(){return void 0!==In().WorkerGlobalScope&&"function"==typeof In().importScripts}function rd(){return(rd=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const $f="firebaseLocalStorageDb",qf="firebaseLocalStorage",NE="fbase_key";class qs{constructor(y){this.request=y}toPromise(){return new Promise((y,v)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function xu(b,y){return b.transaction([qf],y?"readwrite":"readonly").objectStore(qf)}function zn(){const b=indexedDB.open($f,1);return new Promise((y,v)=>{b.addEventListener("error",()=>{v(b.error)}),b.addEventListener("upgradeneeded",()=>{const I=b.result;try{I.createObjectStore(qf,{keyPath:NE})}catch(x){v(x)}}),b.addEventListener("success",(0,g.Z)(function*(){const I=b.result;I.objectStoreNames.contains(qf)?y(I):(I.close(),yield function(){const b=indexedDB.deleteDatabase($f);return new qs(b).toPromise()}(),y(yield zn()))}))})}function _a(b,y,v){return rt.apply(this,arguments)}function rt(){return(rt=(0,g.Z)(function*(b,y,v){const I=xu(b,!0).put({[NE]:y,value:v});return new qs(I).toPromise()})).apply(this,arguments)}function sd(){return(sd=(0,g.Z)(function*(b,y){const v=xu(b,!1).get(y),I=yield new qs(v).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function dl(b,y){const v=xu(b,!0).delete(y);return new qs(v).toPromise()}const xo=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,g.Z)(function*(){return v.db||(v.db=yield zn()),v.db})()}_withRetries(v){var I=this;return(0,g.Z)(function*(){let x=0;for(;;)try{const F=yield I._openDb();return yield v(F)}catch(F){if(x++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,g.Z)(function*(){return Gm()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,g.Z)(function*(){v.receiver=cs._getInstance(Gm()?self:null),v.receiver._subscribe("keyChanged",function(){var I=(0,g.Z)(function*(x,F){return{keyProcessed:(yield v._poll()).includes(F.key)}});return function(x,F){return I.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var I=(0,g.Z)(function*(x,F){return["keyChanged"]});return function(x,F){return I.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,g.Z)(function*(){var I,x;if(v.activeServiceWorker=yield function(){return rd.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new qm(v.activeServiceWorker);const F=yield v.sender._send("ping",{},800);!F||(null===(I=F[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=F[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var I=this;return(0,g.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:v},I.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const v=yield zn();return yield _a(v,Uf,"1"),yield dl(v,Uf),!0}catch(v){}return!1})()}_withPendingWrite(v){var I=this;return(0,g.Z)(function*(){I.pendingWrites++;try{yield v()}finally{I.pendingWrites--}})()}_set(v,I){var x=this;return(0,g.Z)(function*(){return x._withPendingWrite((0,g.Z)(function*(){return yield x._withRetries(F=>_a(F,v,I)),x.localCache[v]=I,x.notifyServiceWorker(v)}))})()}_get(v){var I=this;return(0,g.Z)(function*(){const x=yield I._withRetries(F=>function(b,y){return sd.apply(this,arguments)}(F,v));return I.localCache[v]=x,x})()}_remove(v){var I=this;return(0,g.Z)(function*(){return I._withPendingWrite((0,g.Z)(function*(){return yield I._withRetries(x=>dl(x,v)),delete I.localCache[v],I.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,g.Z)(function*(){const I=yield v._withRetries(K=>{const ve=xu(K,!1).getAll();return new qs(ve).toPromise()});if(!I)return[];if(0!==v.pendingWrites)return[];const x=[],F=new Set;for(const{fbase_key:K,value:ve}of I)F.add(K),JSON.stringify(v.localCache[K])!==JSON.stringify(ve)&&(v.notifyListeners(K,ve),x.push(K));for(const K of Object.keys(v.localCache))v.localCache[K]&&!F.has(K)&&(v.notifyListeners(K,null),x.push(K));return x})()}notifyListeners(v,I){this.localCache[v]=I;const x=this.listeners[v];if(x)for(const F of Array.from(x))F(I)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(I)}_removeListener(v,I){this.listeners[v]&&(this.listeners[v].delete(I),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function hl(b,y){return Pt(b,"POST","/v2/accounts/mfaSignIn:start",cn(b,y))}function od(){return(od=(0,g.Z)(function*(b){return(yield Pt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function hs(b){return new Promise((y,v)=>{const I=document.createElement("script");I.setAttribute("src",b),I.onload=y,I.onerror=x=>{const F=ot("internal-error");F.customData=x,v(F)},I.type="text/javascript",I.charset="UTF-8",function(){var b,y;return null!==(y=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==y?y:document}().appendChild(I)})}function Pu(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ws=1e12;class Ou{constructor(y){this.auth=y,this.counter=Ws,this._widgets=new Map}render(y,v){const I=this.counter;return this._widgets.set(I,new fl(y,this.auth.name,v||{})),this.counter++,I}reset(y){var v;const I=y||Ws;null===(v=this._widgets.get(I))||void 0===v||v.delete(),this._widgets.delete(I)}getResponse(y){var v;return(null===(v=this._widgets.get(y||Ws))||void 0===v?void 0:v.getResponse())||""}execute(y){var v=this;return(0,g.Z)(function*(){var I;return null===(I=v._widgets.get(y||Ws))||void 0===I||I.execute(),""})()}}class fl{constructor(y,v,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof y?document.getElementById(y):y;De(x,"argument-error",{appName:v}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const y=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<50;I++)y.push(v.charAt(Math.floor(Math.random()*v.length)));return y.join("")}();const{callback:y,"expired-callback":v}=this.params;if(y)try{y(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fs=Pu("rcb"),PE=new dt(3e4,6e4);class zm{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!In().grecaptcha}load(y,v=""){return De((b=v).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),y,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(In().grecaptcha):new Promise((I,x)=>{const F=In().setTimeout(()=>{x(ot(y,"network-request-failed"))},PE.get());In()[fs]=()=>{In().clearTimeout(F),delete In()[fs];const ve=In().grecaptcha;if(!ve)return void x(ot(y,"internal-error"));const Pe=ve.render;ve.render=(We,at)=>{const tt=Pe(We,at);return this.counter++,tt},this.hostLanguage=v,I(ve)},hs(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:fs,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(F),x(ot(y,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!In().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Km{load(y){return(0,g.Z)(function*(){return new Ou(y)})()}clearedOneInstance(){}}const zt="recaptcha",Ym={theme:"light",type:"image"};class Wf{constructor(y,v=Object.assign({},Ym),I){this.parameters=v,this.type=zt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(I),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof y?document.getElementById(y):y;De(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Km:new zm,this.validateStartingState()}verify(){var y=this;return(0,g.Z)(function*(){y.assertNotDestroyed();const v=yield y.render(),I=y.getAssertedRecaptcha();return I.getResponse(v)||new Promise(F=>{const K=ve=>{!ve||(y.tokenChangeListeners.delete(K),F(ve))};y.tokenChangeListeners.add(K),y.isInvisible&&I.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return v=>{if(this.tokenChangeListeners.forEach(I=>I(v)),"function"==typeof y)y(v);else if("string"==typeof y){const I=In()[y];"function"==typeof I&&I(v)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,g.Z)(function*(){if(yield y.init(),!y.widgetId){let v=y.container;if(!y.isInvisible){const I=document.createElement("div");v.appendChild(I),v=I}y.widgetId=y.getAssertedRecaptcha().render(v,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,g.Z)(function*(){De(Ye()&&!Gm(),y.auth,"internal-error"),yield function(){let b=null;return new Promise(y=>{"complete"!==document.readyState?(b=()=>y(),window.addEventListener("load",b)):y()}).catch(y=>{throw b&&window.removeEventListener("load",b),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const v=yield function(b){return od.apply(this,arguments)}(y.auth);De(v,y.auth,"internal-error"),y.parameters.sitekey=v})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zf{constructor(y,v){this.verificationId=y,this.onConfirmation=v}confirm(y){const v=nl._fromVerification(this.verificationId,y);return this.onConfirmation(v)}}function zf(){return(zf=(0,g.Z)(function*(b,y,v){const I=pn(b),x=yield cd(I,y,(0,G.m9)(v));return new Zf(x,F=>Cr(I,F))})).apply(this,arguments)}function ld(){return(ld=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b);yield js(!1,I,"phone");const x=yield cd(I.auth,y,(0,G.m9)(v));return new Zf(x,F=>Zc(I,F))})).apply(this,arguments)}function ud(){return(ud=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b),x=yield cd(I.auth,y,(0,G.m9)(v));return new Zf(x,F=>Vr(I,F))})).apply(this,arguments)}function cd(b,y,v){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(b,y,v){var I;const x=yield v.verify();try{let F;if(De("string"==typeof x,b,"argument-error"),De(v.type===zt,b,"argument-error"),F="string"==typeof y?{phoneNumber:y}:y,"session"in F){const K=F.session;if("phoneNumber"in F)return De("enroll"===K.type,b,"internal-error"),(yield td(b,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{De("signin"===K.type,b,"internal-error");const ve=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return De(ve,b,"missing-multi-factor-info"),(yield hl(b,{mfaPendingCredential:K.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield cT(b,{phoneNumber:F.phoneNumber,recaptchaToken:x});return K}}finally{v._reset()}})).apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(b,y){yield gn((0,G.m9)(b),y)})).apply(this,arguments)}let $i=(()=>{class b{constructor(v){this.providerId=b.PROVIDER_ID,this.auth=pn(v)}verifyPhoneNumber(v,I){return cd(this.auth,v,(0,G.m9)(I))}static credential(v,I){return nl._fromVerification(v,I)}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:I,temporaryProof:x}=v;return I&&x?nl._fromTokenResponse(I,x):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function qi(b,y){return y?fe(y):(De(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Kf extends vi{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return jn(y,this._buildIdpRequest())}_linkToIdToken(y,v){return jn(y,this._buildIdpRequest(v))}_getReauthenticationResolver(y){return jn(y,this._buildIdpRequest())}_buildIdpRequest(y){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(v.idToken=y),v}}function Qm(b){return km(b.auth,new Kf(b),b.bypassAuthState)}function ln(b){const{auth:y,user:v}=b;return De(v,y,"internal-error"),mn(v,new Kf(b),b.bypassAuthState)}function dr(b){return va.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(b){const{auth:y,user:v}=b;return De(v,y,"internal-error"),gn(v,new Kf(b),b.bypassAuthState)})).apply(this,arguments)}class Ea{constructor(y,v,I,x,F=!1){this.auth=y,this.resolver=I,this.user=x,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var y=this;return new Promise(function(){var v=(0,g.Z)(function*(I,x){y.pendingPromise={resolve:I,reject:x};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(F){y.reject(F)}});return function(I,x){return v.apply(this,arguments)}}())}onAuthEvent(y){var v=this;return(0,g.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:F,tenantId:K,error:ve,type:Pe}=y;if(ve)return void v.reject(ve);const We={auth:v.auth,requestUri:I,sessionId:x,tenantId:K||void 0,postBody:F||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(Pe)(We))}catch(at){v.reject(at)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return Qm;case"linkViaPopup":case"linkViaRedirect":return dr;case"reauthViaPopup":case"reauthViaRedirect":return ln;default:He(this.auth,"internal-error")}}resolve(y){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wa=new dt(2e3,1e4);function Mu(){return(Mu=(0,g.Z)(function*(b,y,v){const I=pn(b);St(b,y,as);const x=qi(I,v);return new Tr(I,"signInViaPopup",y,x).executeNotNull()})).apply(this,arguments)}function ku(){return(ku=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b);St(I.auth,y,as);const x=qi(I.auth,v);return new Tr(I.auth,"reauthViaPopup",y,x,I).executeNotNull()})).apply(this,arguments)}function pl(){return(pl=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b);St(I.auth,y,as);const x=qi(I.auth,v);return new Tr(I.auth,"linkViaPopup",y,x,I).executeNotNull()})).apply(this,arguments)}let Tr=(()=>{class b extends Ea{constructor(v,I,x,F,K){super(v,I,F,K),this.provider=x,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var v=this;return(0,g.Z)(function*(){const I=yield v.execute();return De(I,v.auth,"internal-error"),I})()}onExecution(){var v=this;return(0,g.Z)(function*(){ce(1===v.filter.length,"Popup operations only handle one event");const I=No();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],I),v.authWindow.associatedEvent=I,v.resolver._originValidation(v.auth).catch(x=>{v.reject(x)}),v.resolver._isIframeWebStorageSupported(v.auth,x=>{x||v.reject(ot(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const v=()=>{var I,x;this.pollId=(null===(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ot(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,wa.get())};v()}}return b.currentPopupAction=null,b})();const Ca=new Map;class fN extends Ea{constructor(y,v,I=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,I),this.eventId=null}execute(){var y=()=>super.execute,v=this;return(0,g.Z)(function*(){let I=Ca.get(v.auth._key());if(!I){try{const F=(yield function(b,y){return Xm.apply(this,arguments)}(v.resolver,v.auth))?yield y().call(v):null;I=()=>Promise.resolve(F)}catch(x){I=()=>Promise.reject(x)}Ca.set(v.auth._key(),I)}return I()})()}onAuthEvent(y){var v=()=>super.onAuthEvent,I=this;return(0,g.Z)(function*(){if("signInViaRedirect"===y.type)return v().call(I,y);if("unknown"!==y.type){if(y.eventId){const x=yield I.auth._redirectUserForId(y.eventId);if(x)return I.user=x,v().call(I,y);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Xm(){return(Xm=(0,g.Z)(function*(b,y){const v=Zs(y),I="true"===(yield ba(b)._get(v));return yield ba(b)._remove(v),I})).apply(this,arguments)}function e_(b,y){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,g.Z)(function*(b,y){return ba(b)._set(Zs(y),"true")})).apply(this,arguments)}function ba(b){return fe(b._redirectPersistence)}function Zs(b){return Wn("pendingRedirect",b.config.apiKey,b.name)}function pd(){return(pd=(0,g.Z)(function*(b,y,v){const I=pn(b);St(b,y,as);const x=qi(I,v);return yield e_(x,I),x._openRedirect(I,y,"signInViaRedirect")})).apply(this,arguments)}function Mo(){return(Mo=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b);St(I.auth,y,as);const x=qi(I.auth,v);yield e_(x,I.auth);const F=yield Ta(I);return x._openRedirect(I.auth,y,"reauthViaRedirect",F)})).apply(this,arguments)}function gd(){return(gd=(0,g.Z)(function*(b,y,v){const I=(0,G.m9)(b);St(I.auth,y,as);const x=qi(I.auth,v);yield js(!1,I,y.providerId),yield e_(x,I.auth);const F=yield Ta(I);return x._openRedirect(I.auth,y,"linkViaRedirect",F)})).apply(this,arguments)}function jE(){return(jE=(0,g.Z)(function*(b,y){return yield pn(b)._initializationPromise,ml(b,y,!1)})).apply(this,arguments)}function ml(b,y){return zs.apply(this,arguments)}function zs(){return(zs=(0,g.Z)(function*(b,y,v=!1){const I=pn(b),x=qi(I,y),K=yield new fN(I,x,v).execute();return K&&!v&&(delete K.user._redirectEventId,yield I._persistUserIfCurrent(K.user),yield I._setRedirectUser(null,y)),K})).apply(this,arguments)}function Ta(b){return md.apply(this,arguments)}function md(){return(md=(0,g.Z)(function*(b){const y=No(`${b.uid}:::`);return b._redirectEventId=y,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),y})).apply(this,arguments)}class _l{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let v=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(y,I)&&(v=!0,this.sendToConsumer(y,I),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bi(b);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=y,v=!0)),v}sendToConsumer(y,v){var I;if(y.error&&!bi(y)){const x=(null===(I=y.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";v.onError(ot(this.auth,x))}else v.onAuthEvent(y)}isEventForConsumer(y,v){const I=null===v.eventId||!!y.eventId&&y.eventId===v.eventId;return v.filter.includes(y.type)&&I}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(TT(y))}saveEventToCache(y){this.cachedEventUids.add(TT(y)),this.lastProcessedEventTime=Date.now()}}function TT(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(y=>y).join("-")}function bi({type:b,error:y}){return"unknown"===b&&"auth/no-auth-event"===(null==y?void 0:y.code)}function Ia(b){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(b,y={}){return Pt(b,"GET","/v1/projects",y)})).apply(this,arguments)}const n_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r_=/^https?/;function si(){return(si=(0,g.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:y}=yield Ia(b);for(const v of y)try{if(Fu(v))return}catch(I){}He(b,"unauthorized-domain")})).apply(this,arguments)}function Fu(b){const y=ke(),{protocol:v,hostname:I}=new URL(y);if(b.startsWith("chrome-extension://")){const K=new URL(b);return""===K.hostname&&""===I?"chrome-extension:"===v&&b.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===v&&K.hostname===I}if(!r_.test(v))return!1;if(n_.test(b))return I===b;const x=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const ps=new dt(3e4,6e4);function _d(){const b=In().___jsl;if(null==b?void 0:b.H)for(const y of Object.keys(b.H))if(b.H[y].r=b.H[y].r||[],b.H[y].L=b.H[y].L||[],b.H[y].r=[...b.H[y].L],b.CP)for(let v=0;v<b.CP.length;v++)b.CP[v]=null}let Lo=null;function yd(b){return Lo=Lo||function(b){return new Promise((y,v)=>{var I,x,F;function K(){_d(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{_d(),v(ot(b,"network-request-failed"))},timeout:ps.get()})}if(null===(x=null===(I=In().gapi)||void 0===I?void 0:I.iframes)||void 0===x?void 0:x.Iframe)y(gapi.iframes.getContext());else{if(!(null===(F=In().gapi)||void 0===F?void 0:F.load)){const ve=Pu("iframefcb");return In()[ve]=()=>{gapi.load?K():v(ot(b,"network-request-failed"))},hs(`https://apis.google.com/js/api.js?onload=${ve}`)}K()}}).catch(y=>{throw Lo=null,y})}(b),Lo}const i_=new dt(5e3,15e3),gs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},yl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DT(b){const y=b.config;De(y.authDomain,b,"auth-domain-config-required");const v=y.emulator?bn(y,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,I={apiKey:y.apiKey,appName:b.name,v:Ee.SDK_VERSION},x=yl.get(b.config.apiHost);x&&(I.eid=x);const F=b._getFrameworks();return F.length&&(I.fw=F.join(",")),`${v}?${(0,G.xO)(I).slice(1)}`}function ep(){return(ep=(0,g.Z)(function*(b){const y=yield yd(b),v=In().gapi;return De(v,b,"internal-error"),y.open({where:document.body,url:DT(b),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gs,dontclear:!0},I=>new Promise(function(){var x=(0,g.Z)(function*(F,K){yield I.restyle({setHideOnLeave:!1});const ve=ot(b,"network-request-failed"),Pe=In().setTimeout(()=>{K(ve)},i_.get());function We(){In().clearTimeout(Pe),F(I)}I.ping(We).then(We,()=>{K(ve)})});return function(F,K){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const ST={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vl{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function o_(b,y,v,I,x,F){De(b.config.authDomain,b,"auth-domain-config-required"),De(b.config.apiKey,b,"invalid-api-key");const K={apiKey:b.config.apiKey,appName:b.name,authType:v,redirectUrl:I,v:Ee.SDK_VERSION,eventId:x};if(y instanceof as){y.setDefaultLanguage(b.languageCode),K.providerId=y.providerId||"",(0,G.xb)(y.getCustomParameters())||(K.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Pe,We]of Object.entries(F||{}))K[Pe]=We}if(y instanceof wu){const Pe=y.getScopes().filter(We=>""!==We);Pe.length>0&&(K.scopes=Pe.join(","))}b.tenantId&&(K.tid=b.tenantId);const ve=K;for(const Pe of Object.keys(ve))void 0===ve[Pe]&&delete ve[Pe];return`${function({config:b}){return b.emulator?bn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,G.xO)(ve).slice(1)}`}const wl="webStorageSupport";class ms extends class{constructor(y){this.factorId=y}_process(y,v,I){switch(v.type){case"enroll":return this._finalizeEnroll(y,v.credential,I);case"signin":return this._finalizeSignIn(y,v.credential);default:return oe("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new ms(y)}_finalizeEnroll(y,v,I){return function(b,y){return Pt(b,"POST","/v2/accounts/mfaEnrollment:finalize",cn(b,y))}(y,{idToken:v,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,v){return function(b,y){return Pt(b,"POST","/v2/accounts/mfaSignIn:finalize",cn(b,y))}(y,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rp=(()=>{class b{constructor(){}static assertion(v){return ms._fromCredential(v)}}return b.FACTOR_ID="phone",b})();var b;class GE{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var v=this;return(0,g.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const v=this.auth.onIdTokenChanged(I=>{var x;y((null===(x=I)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,v),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const v=this.internalListeners.get(y);!v||(this.internalListeners.delete(y),v(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Uo(){return window}function op(){return(op=(0,g.Z)(function*(b,y,v){var I;const{BuildInfo:x}=Uo();ce(y.sessionId,"AuthEvent did not contain a session ID");const F=yield zE(y.sessionId),K={};return mr()?K.ibi=x.packageName:Ja()?K.apn=x.packageName:He(b,"operation-not-supported-in-this-environment"),x.displayName&&(K.appDisplayName=x.displayName),K.sessionId=F,o_(b,v,y.type,void 0,null!==(I=y.eventId)&&void 0!==I?I:void 0,K)})).apply(this,arguments)}function ap(){return(ap=(0,g.Z)(function*(b){const{BuildInfo:y}=Uo(),v={};mr()?v.iosBundleId=y.packageName:Ja()?v.androidPackageName=y.packageName:He(b,"operation-not-supported-in-this-environment"),yield Ia(b,v)})).apply(this,arguments)}function Cl(){return(Cl=(0,g.Z)(function*(b,y,v){const{cordova:I}=Uo();let x=()=>{};try{yield new Promise((F,K)=>{let ve=null;function Pe(){var tt;F();const Rn=null===(tt=I.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Rn&&Rn(),"function"==typeof(null==v?void 0:v.close)&&v.close()}function We(){ve||(ve=window.setTimeout(()=>{K(ot(b,"redirect-cancelled-by-user"))},2e3))}function at(){"visible"===(null==document?void 0:document.visibilityState)&&We()}y.addPassiveListener(Pe),document.addEventListener("resume",We,!1),Ja()&&document.addEventListener("visibilitychange",at,!1),x=()=>{y.removePassiveListener(Pe),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",at,!1),ve&&window.clearTimeout(ve)}})}finally{x()}})).apply(this,arguments)}function zE(b){return up.apply(this,arguments)}function up(){return(up=(0,g.Z)(function*(b){const y=KE(b),v=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(v)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function KE(b){if(ce(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const y=new ArrayBuffer(b.length),v=new Uint8Array(y);for(let I=0;I<b.length;I++)v[I]=b.charCodeAt(I);return v}b="Browser",(0,Ee._registerComponent)(new de.wA("auth",(y,{options:v})=>{const I=y.getProvider("app").getImmediate(),{apiKey:x,authDomain:F}=I.options;return(K=>{De(x&&!x.includes(":"),"invalid-api-key",{appName:K.name}),De(!(null==F?void 0:F.includes(":")),"argument-error",{appName:K.name});const ve={apiKey:x,authDomain:F,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sn(b)},Pe=new ti(K,ve);return function(b,y){const v=(null==y?void 0:y.persistence)||[],I=(Array.isArray(v)?v:[v]).map(fe);(null==y?void 0:y.errorMap)&&b._updateErrorMap(y.errorMap),b._initializeWithPersistence(I,null==y?void 0:y.popupRedirectResolver)}(Pe,v),Pe})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,v,I)=>{y.getProvider("auth-internal").initialize()})),(0,Ee._registerComponent)(new de.wA("auth-internal",y=>{const v=pn(y.getProvider("auth").getImmediate());return new GE(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)("@firebase/auth","0.18.0",void 0);class wd extends _l{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(y)),super.onEvent(y)}initialized(){var y=this;return(0,g.Z)(function*(){yield y.initPromise})()}}function Cd(b){return bd.apply(this,arguments)}function bd(){return(bd=(0,g.Z)(function*(b){const y=yield dp()._get(h_(b));return y&&(yield dp()._remove(h_(b))),y})).apply(this,arguments)}function NT(){const b=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<20;v++){const I=Math.floor(Math.random()*y.length);b.push(y.charAt(I))}return b.join("")}function dp(){return fe(Hf)}function h_(b){return Wn("authEvent",b.config.apiKey,b.name)}function Ra(b){if(!(null==b?void 0:b.includes("?")))return{};const[y,...v]=b.split("?");return(0,G.zd)(v.join("?"))}function fp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ot("no-auth-event")}}function Tl(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function gp(b=(0,G.z$)()){return!("file:"!==Tl()&&"ionic:"!==Tl()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function mp(){try{const b=self.localStorage,y=No();if(b)return b.setItem(y,"1"),b.removeItem(y),!function(b=(0,G.z$)()){return(0,G.w1)()&&11===(null==document?void 0:document.documentMode)||function(b=(0,G.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,G.hl)()}catch(b){return _p()&&(0,G.hl)()}return!1}function _p(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Td(){return("http:"===Tl()||"https:"===Tl()||(0,G.ru)()||gp())&&!((0,G.b$)()||(0,G.UG)())&&mp()&&!_p()}function m_(){return gp()&&"undefined"!=typeof document}function yp(){return(yp=(0,g.Z)(function*(){return!!m_()&&new Promise(b=>{const y=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),b(!0)})})})).apply(this,arguments)}const Ur={LOCAL:"local",NONE:"none",SESSION:"session"},vp=De,__="persistence";function Hn(b){return Id.apply(this,arguments)}function Id(){return(Id=(0,g.Z)(function*(b){yield b._initializationPromise;const y=y_(),v=Wn(__,b.config.apiKey,b.name);(null==y?void 0:y.sessionStorage)&&y.sessionStorage.setItem(v,b._getPersistence())})).apply(this,arguments)}function y_(){return"undefined"!=typeof window?window:null}const Ir=De;class Gi{constructor(){this.browserResolver=fe(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=us,this._completeRedirectFn=ml}_openPopup(y,v,I,x){var F=this;return(0,g.Z)(function*(){var K;ce(null===(K=F.eventManagers[y._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ve=o_(y,v,I,ke(),x);return function(b,y,v,I=500,x=600){const F=Math.max((window.screen.availHeight-x)/2,0).toString(),K=Math.max((window.screen.availWidth-I)/2,0).toString();let ve="";const Pe=Object.assign(Object.assign({},ST),{width:I.toString(),height:x.toString(),top:F,left:K}),We=(0,G.z$)().toLowerCase();v&&(ve=yf(We)?"_blank":v),Bc(We)&&(y=y||"http://localhost",Pe.scrollbars="yes");const at=Object.entries(Pe).reduce((Rn,[Ti,Uu])=>`${Rn}${Ti}=${Uu},`,"");if(function(b=(0,G.z$)()){var y;return mr(b)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(We)&&"_self"!==ve)return function(b,y){const v=document.createElement("a");v.href=b,v.target=y;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(I)}(y||"",ve),new vl(null);const tt=window.open(y||"",ve,at);De(tt,b,"popup-blocked");try{tt.focus()}catch(Rn){}return new vl(tt)}(y,ve,No())})()}_openRedirect(y,v,I,x){var F=this;return(0,g.Z)(function*(){return yield F._originValidation(y),b=o_(y,v,I,ke(),x),In().location.href=b,new Promise(()=>{});var b})()}_initialize(y){const v=y._key();if(this.eventManagers[v]){const{manager:x,promise:F}=this.eventManagers[v];return x?Promise.resolve(x):(ce(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(y);return this.eventManagers[v]={promise:I},I}initAndGetManager(y){var v=this;return(0,g.Z)(function*(){const I=yield function(b){return ep.apply(this,arguments)}(y),x=new _l(y);return I.register("authEvent",F=>(De(null==F?void 0:F.authEvent,y,"invalid-auth-event"),{status:x.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[y._key()]={manager:x},v.iframes[y._key()]=I,x})()}_isIframeWebStorageSupported(y,v){this.iframes[y._key()].send(wl,{type:wl},x=>{var F;const K=null===(F=null==x?void 0:x[0])||void 0===F?void 0:F[wl];void 0!==K&&v(!!K),He(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const v=y._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(b){return si.apply(this,arguments)}(y)),this.originValidationPromises[v]}get _shouldInitProactively(){return Ue()||jc()||mr()}}),this.cordovaResolver=fe(class{constructor(){this._redirectPersistence=us,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ml}_initialize(y){var v=this;return(0,g.Z)(function*(){const I=y._key();let x=v.eventManagers.get(I);return x||(x=new wd(y),v.eventManagers.set(I,x),v.attachCallbackListeners(y,x)),x})()}_openPopup(y){He(y,"operation-not-supported-in-this-environment")}_openRedirect(y,v,I,x){var F=this;return(0,g.Z)(function*(){!function(b){var y,v,I,x,F,K,ve,Pe,We,at;const tt=Uo();De("function"==typeof(null===(y=null==tt?void 0:tt.universalLinks)||void 0===y?void 0:y.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(void 0!==(null===(v=null==tt?void 0:tt.BuildInfo)||void 0===v?void 0:v.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(F=null===(x=null===(I=null==tt?void 0:tt.cordova)||void 0===I?void 0:I.plugins)||void 0===x?void 0:x.browsertab)||void 0===F?void 0:F.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(Pe=null===(ve=null===(K=null==tt?void 0:tt.cordova)||void 0===K?void 0:K.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===Pe?void 0:Pe.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(at=null===(We=null==tt?void 0:tt.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===at?void 0:at.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const K=yield F._initialize(y);yield K.initialized(),K.resetRedirect(),Ca.clear(),yield F._originValidation(y);const ve=function(b,y,v=null){return{type:y,eventId:v,urlResponse:null,sessionId:NT(),postBody:null,tenantId:b.tenantId,error:ot(b,"no-auth-event")}}(y,I,x);yield function(b,y){return dp()._set(h_(b),y)}(y,ve);const Pe=yield function(b,y,v){return op.apply(this,arguments)}(y,ve,v),We=yield function(b){const{cordova:y}=Uo();return new Promise(v=>{y.plugins.browsertab.isAvailable(I=>{let x=null;I?y.plugins.browsertab.openUrl(b):x=y.InAppBrowser.open(b,function(b=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),v(x)})})}(Pe);return function(b,y,v){return Cl.apply(this,arguments)}(y,K,We)})()}_isIframeWebStorageSupported(y,v){throw new Error("Method not implemented.")}_originValidation(y){const v=y._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function(b){return ap.apply(this,arguments)}(y)),this.originValidationPromises[v]}attachCallbackListeners(y,v){const{universalLinks:I,handleOpenURL:x,BuildInfo:F}=Uo(),K=setTimeout((0,g.Z)(function*(){yield Cd(y),v.onEvent(fp())}),500),ve=function(){var at=(0,g.Z)(function*(tt){clearTimeout(K);const Rn=yield Cd(y);let Ti=null;Rn&&(null==tt?void 0:tt.url)&&(Ti=function(b,y){var v,I;const x=function(b){const y=Ra(b),v=y.link?decodeURIComponent(y.link):void 0,I=Ra(v).link,x=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Ra(x).link||x||I||v||b}(y);if(x.includes("/__/auth/callback")){const F=Ra(x),K=F.firebaseError?function(b){try{return JSON.parse(b)}catch(y){return null}}(decodeURIComponent(F.firebaseError)):null,ve=null===(I=null===(v=null==K?void 0:K.code)||void 0===v?void 0:v.split("auth/"))||void 0===I?void 0:I[1],Pe=ve?ot(ve):null;return Pe?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:x,postBody:null}}return null}(Rn,tt.url)),v.onEvent(Ti||fp())});return function(Rn){return at.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,ve);const Pe=x,We=`${F.packageName.toLowerCase()}://`;Uo().handleOpenURL=function(){var at=(0,g.Z)(function*(tt){if(tt.toLowerCase().startsWith(We)&&ve({url:tt}),"function"==typeof Pe)try{Pe(tt)}catch(Rn){console.error(Rn)}});return function(tt){return at.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=us,this._completeRedirectFn=ml}_initialize(y){var v=this;return(0,g.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,v,I,x){var F=this;return(0,g.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(y,v,I,x)})()}_openRedirect(y,v,I,x){var F=this;return(0,g.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(y,v,I,x)})()}_isIframeWebStorageSupported(y,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,v)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return m_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ir(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,g.Z)(function*(){if(y.underlyingResolver)return;const v=yield function(){return yp.apply(this,arguments)}();y.underlyingResolver=v?y.cordovaResolver:y.browserResolver})()}}function wp(b){return b.unwrap()}function v_(b){return Cp(b)}function Na(b,y){var v;const I=null===(v=y.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===y.code)y.resolver=new E_(b,function(b,y){var v;const I=(0,G.m9)(b),x=y;return De(y.operationType,I,"argument-error"),De(null===(v=x.serverResponse)||void 0===v?void 0:v.mfaPendingCredential,I,"argument-error"),ul._fromError(I,x)}(b,y));else if(I){const x=Cp(y),F=y;x&&(F.credential=x,F.tenantId=I.tenantId||void 0,F.email=I.email||void 0,F.phoneNumber=I.phoneNumber||void 0)}}function Cp(b){const{_tokenResponse:y}=b instanceof G.ZR?b.customData:b;if(!y)return null;if(!(b instanceof G.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return $i.credentialFromResult(b);const v=y.providerId;if(!v||"password"===v)return null;let I;switch(v){case"google.com":I=So;break;case"facebook.com":I=wf;break;case"github.com":I=xm;break;case"twitter.com":I=bf;break;default:const{oauthIdToken:x,oauthAccessToken:F,oauthTokenSecret:K,pendingToken:ve,nonce:Pe}=y;return F||K||x||ve?ve?v.startsWith("saml.")?Ao._create(v,ve):os._fromParams({providerId:v,signInMethod:v,pendingToken:ve,idToken:x,accessToken:F}):new da(v).credential({idToken:x,accessToken:F,rawNonce:Pe}):null}return b instanceof G.ZR?I.credentialFromError(b):I.credentialFromResult(b)}function hr(b,y){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,g.Z)(function*(b,y){let v;try{v=yield y}catch(F){throw F instanceof G.ZR&&Na(b,F),F}const{operationType:I,user:x}=v;return{operationType:I,credential:v_(v),additionalUserInfo:AE(v),user:Wi.getOrCreate(x)}})).apply(this,arguments)}function Il(b,y){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(b,y){const v=yield y;return{verificationId:v.verificationId,confirm:I=>hr(b,v.confirm(I))}})).apply(this,arguments)}class E_{constructor(y,v){this.resolver=v,this.auth=function(b){return b.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return hr(wp(this.auth),this.resolver.resolveSignIn(y))}}class Wi{constructor(y){this._delegate=y,this.multiFactor=function(b){const y=(0,G.m9)(b);return ls.has(y)||ls.set(y,Vf._fromUser(y)),ls.get(y)}(y)}static getOrCreate(y){return Wi.USER_MAP.has(y)||Wi.USER_MAP.set(y,new Wi(y)),Wi.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var v=this;return(0,g.Z)(function*(){return hr(v.auth,Zc(v._delegate,y))})()}linkWithPhoneNumber(y,v){var I=this;return(0,g.Z)(function*(){return Il(I.auth,function(b,y,v){return ld.apply(this,arguments)}(I._delegate,y,v))})()}linkWithPopup(y){var v=this;return(0,g.Z)(function*(){return hr(v.auth,function(b,y,v){return pl.apply(this,arguments)}(v._delegate,y,Gi))})()}linkWithRedirect(y){var v=this;return(0,g.Z)(function*(){return yield Hn(pn(v.auth)),function(b,y,v){return function(b,y,v){return gd.apply(this,arguments)}(b,y,v)}(v._delegate,y,Gi)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var v=this;return(0,g.Z)(function*(){return hr(v.auth,Vr(v._delegate,y))})()}reauthenticateWithPhoneNumber(y,v){return Il(this.auth,function(b,y,v){return ud.apply(this,arguments)}(this._delegate,y,v))}reauthenticateWithPopup(y){return hr(this.auth,function(b,y,v){return ku.apply(this,arguments)}(this._delegate,y,Gi))}reauthenticateWithRedirect(y){var v=this;return(0,g.Z)(function*(){return yield Hn(pn(v.auth)),function(b,y,v){return function(b,y,v){return Mo.apply(this,arguments)}(b,y,v)}(v._delegate,y,Gi)})()}sendEmailVerification(y){return function(b,y){return ri.apply(this,arguments)}(this._delegate,y)}unlink(y){var v=this;return(0,g.Z)(function*(){return yield function(b,y){return Tf.apply(this,arguments)}(v._delegate,y),v})()}updateEmail(y){return function(b,y){return kf((0,G.m9)(b),y,null)}(this._delegate,y)}updatePassword(y){return function(b,y){return kf((0,G.m9)(b),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function(b,y){return wn.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function(b,y){return Du.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,v){return function(b,y,v){return Jc.apply(this,arguments)}(this._delegate,y,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wi.USER_MAP=new WeakMap;const Bo=De;let Dl=(()=>{class b{constructor(v,I){if(this.app=v,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=v.options;Bo(x,"invalid-api-key",{appName:v.name});let F=[Mt];if("undefined"!=typeof window){F=function(b,y){const v=y_();if(!(null==v?void 0:v.sessionStorage))return[];const I=Wn(__,b,y);switch(v.sessionStorage.getItem(I)){case Ur.NONE:return[Mt];case Ur.LOCAL:return[xo,us];case Ur.SESSION:return[us];default:return[]}}(x,v.name);for(const ve of[xo,Hf,us])F.includes(ve)||F.push(ve)}Bo(x,"invalid-api-key",{appName:v.name});const K="undefined"!=typeof window?Gi:void 0;this._delegate=I.initialize({options:{persistence:F,popupRedirectResolver:K}}),this._delegate._updateErrorMap(ue),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,I){!function(b,y,v){const I=pn(b);De(I._canInitEmulator,I,"emulator-config-failed"),De(/^https?:\/\//.test(y),I,"invalid-emulator-scheme");const x=!!(null==v?void 0:v.disableWarnings),F=Tn(y),{host:K,port:ve}=function(b){const y=Tn(b),v=/(\/\/)?([^?#/]+)/.exec(b.substr(y.length));if(!v)return{host:"",port:null};const I=v[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const F=x[1];return{host:F,port:ca(I.substr(F.length+1))}}{const[F,K]=I.split(":");return{host:F,port:ca(K)}}}(y);I.config.emulator={url:`${F}//${K}${null===ve?"":`:${ve}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:K,port:ve,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:x})}),function(b){function y(){const v=document.createElement("p"),I=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!b&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}(x)}(this._delegate,v,I)}applyActionCode(v){return function(b,y){return pa.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Se(this._delegate,v)}confirmPasswordReset(v,I){return function(b,y,v){return Rf.apply(this,arguments)}(this._delegate,v,I)}createUserWithEmailAndPassword(v,I){var x=this;return(0,g.Z)(function*(){return hr(x._delegate,function(b,y,v){return Hs.apply(this,arguments)}(x._delegate,v,I))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function(b,y){return Pf.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function(b,y){const v=qc.parseLink(y);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}(0,v)}getRedirectResult(){var v=this;return(0,g.Z)(function*(){Bo(Td(),v._delegate,"operation-not-supported-in-this-environment");const I=yield function(b,y){return jE.apply(this,arguments)}(v._delegate,Gi);return I?hr(v._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function(b,y){pn(b)._logFramework(y)}(this._delegate,v)}onAuthStateChanged(v,I,x){const{next:F,error:K,complete:ve}=Dr(v,I,x);return this._delegate.onAuthStateChanged(F,K,ve)}onIdTokenChanged(v,I,x){const{next:F,error:K,complete:ve}=Dr(v,I,x);return this._delegate.onIdTokenChanged(F,K,ve)}sendSignInLinkToEmail(v,I){return function(b,y,v){return ol.apply(this,arguments)}(this._delegate,v,I)}sendPasswordResetEmail(v,I){return function(b,y,v){return Af.apply(this,arguments)}(this._delegate,v,I||void 0)}setPersistence(v){var I=this;return(0,g.Z)(function*(){let x;switch(function(b,y){vp(Object.values(Ur).includes(y),b,"invalid-persistence-type"),(0,G.b$)()?vp(y!==Ur.SESSION,b,"unsupported-persistence-type"):(0,G.UG)()?vp(y===Ur.NONE,b,"unsupported-persistence-type"):_p()?vp(y===Ur.NONE||y===Ur.LOCAL&&(0,G.hl)(),b,"unsupported-persistence-type"):vp(y===Ur.NONE||mp(),b,"unsupported-persistence-type")}(I._delegate,v),v){case Ur.SESSION:x=us;break;case Ur.LOCAL:x=(yield fe(xo)._isAvailable())?xo:Hf;break;case Ur.NONE:x=Mt;break;default:return He("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return hr(this._delegate,function(b){return Cu.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return hr(this._delegate,Cr(this._delegate,v))}signInWithCustomToken(v){return hr(this._delegate,function(b,y){return zc.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,I){return hr(this._delegate,function(b,y,v){return Cr((0,G.m9)(b),Eu.credential(y,v))}(this._delegate,v,I))}signInWithEmailLink(v,I){return hr(this._delegate,function(b,y,v){return al.apply(this,arguments)}(this._delegate,v,I))}signInWithPhoneNumber(v,I){return Il(this._delegate,function(b,y,v){return zf.apply(this,arguments)}(this._delegate,v,I))}signInWithPopup(v){var I=this;return(0,g.Z)(function*(){return Bo(Td(),I._delegate,"operation-not-supported-in-this-environment"),hr(I._delegate,function(b,y,v){return Mu.apply(this,arguments)}(I._delegate,v,Gi))})()}signInWithRedirect(v){var I=this;return(0,g.Z)(function*(){return Bo(Td(),I._delegate,"operation-not-supported-in-this-environment"),yield Hn(I._delegate),function(b,y,v){return function(b,y,v){return pd.apply(this,arguments)}(b,y,v)}(I._delegate,v,Gi)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function(b,y){return hn.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Ur,b})();function Dr(b,y,v){let I=b;"function"!=typeof b&&({next:I,error:y,complete:v}=b);const x=I;return{next:K=>x(K&&Wi.getOrCreate(K)),error:y,complete:v}}class Sd{constructor(){this.providerId="phone",this._delegate=new $i(wp(te.Z.auth()))}static credential(y,v){return $i.credential(y,v)}verifyPhoneNumber(y,v){return this._delegate.verifyPhoneNumber(y,v)}unwrap(){return this._delegate}}Sd.PHONE_SIGN_IN_METHOD=$i.PHONE_SIGN_IN_METHOD,Sd.PROVIDER_ID=$i.PROVIDER_ID;const w_=De;class tw{constructor(y,v,I=te.Z.app()){var x;w_(null===(x=I.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new Wf(y,v,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(b){b.INTERNAL.registerComponent(new de.wA("auth-compat",y=>{const v=y.getProvider("app-compat").getImmediate(),I=y.getProvider("auth");return new Dl(v,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Eu,FacebookAuthProvider:wf,GithubAuthProvider:xm,GoogleAuthProvider:So,OAuthProvider:da,PhoneAuthProvider:Sd,PhoneMultiFactorGenerator:rp,RecaptchaVerifier:tw,TwitterAuthProvider:bf,Auth:Dl,AuthCredential:vi,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.1.3")}(te.Z)},268:(Ze,Te,V)=>{"use strict";V.d(Te,{d:()=>te});var g=V(7393);class te extends g.L{constructor(Ee,ye,Q){super(),this.parent=Ee,this.outerValue=ye,this.outerIndex=Q,this.index=0}_next(Ee){this.parent.notifyNext(this.outerValue,Ee,this.outerIndex,this.index++,this)}_error(Ee){this.parent.notifyError(Ee,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},7574:(Ze,Te,V)=>{"use strict";V.d(Te,{y:()=>H});var g=V(7393),G=V(9181),Ee=V(6490),Q=V(6554),de=V(4487);var j=V(2494);let H=(()=>{class ie{constructor(ue){this._isScalar=!1,ue&&(this._subscribe=ue)}lift(ue){const ae=new ie;return ae.source=this,ae.operator=ue,ae}subscribe(ue,ae,Ae){const{operator:he}=this,we=function(ie,re,ue){if(ie){if(ie instanceof g.L)return ie;if(ie[G.b])return ie[G.b]()}return ie||re||ue?new g.L(ie,re,ue):new g.L(Ee.c)}(ue,ae,Ae);if(we.add(he?he.call(we,this.source):this.source||j.v.useDeprecatedSynchronousErrorHandling&&!we.syncErrorThrowable?this._subscribe(we):this._trySubscribe(we)),j.v.useDeprecatedSynchronousErrorHandling&&we.syncErrorThrowable&&(we.syncErrorThrowable=!1,we.syncErrorThrown))throw we.syncErrorValue;return we}_trySubscribe(ue){try{return this._subscribe(ue)}catch(ae){j.v.useDeprecatedSynchronousErrorHandling&&(ue.syncErrorThrown=!0,ue.syncErrorValue=ae),function(ie){for(;ie;){const{closed:re,destination:ue,isStopped:ae}=ie;if(re||ae)return!1;ie=ue&&ue instanceof g.L?ue:null}return!0}(ue)?ue.error(ae):console.warn(ae)}}forEach(ue,ae){return new(ae=$(ae))((Ae,he)=>{let we;we=this.subscribe(Ve=>{try{ue(Ve)}catch(He){he(He),we&&we.unsubscribe()}},he,Ae)})}_subscribe(ue){const{source:ae}=this;return ae&&ae.subscribe(ue)}[Q.L](){return this}pipe(...ue){return 0===ue.length?this:function(ie){return 0===ie.length?de.y:1===ie.length?ie[0]:function(ue){return ie.reduce((ae,Ae)=>Ae(ae),ue)}}(ue)(this)}toPromise(ue){return new(ue=$(ue))((ae,Ae)=>{let he;this.subscribe(we=>he=we,we=>Ae(we),()=>ae(he))})}}return ie.create=re=>new ie(re),ie})();function $(ie){if(ie||(ie=j.v.Promise||Promise),!ie)throw new Error("no Promise impl found");return ie}},6490:(Ze,Te,V)=>{"use strict";V.d(Te,{c:()=>G});var g=V(2494),te=V(4449);const G={closed:!0,next(Ee){},error(Ee){if(g.v.useDeprecatedSynchronousErrorHandling)throw Ee;(0,te.z)(Ee)},complete(){}}},5197:(Ze,Te,V)=>{"use strict";V.d(Te,{L:()=>te});var g=V(7393);class te extends g.L{notifyNext(Ee,ye,Q,de,X){this.destination.next(ye)}notifyError(Ee,ye){this.destination.error(Ee)}notifyComplete(Ee){this.destination.complete()}}},9765:(Ze,Te,V)=>{"use strict";V.d(Te,{Yc:()=>de,xQ:()=>X});var g=V(7574),te=V(7393),G=V(5319),Ee=V(7971),ye=V(8858),Q=V(9181);class de extends te.L{constructor(H){super(H),this.destination=H}}let X=(()=>{class j extends g.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q.b](){return new de(this)}lift($){const ie=new ne(this,this);return ie.operator=$,ie}next($){if(this.closed)throw new Ee.N;if(!this.isStopped){const{observers:ie}=this,re=ie.length,ue=ie.slice();for(let ae=0;ae<re;ae++)ue[ae].next($)}}error($){if(this.closed)throw new Ee.N;this.hasError=!0,this.thrownError=$,this.isStopped=!0;const{observers:ie}=this,re=ie.length,ue=ie.slice();for(let ae=0;ae<re;ae++)ue[ae].error($);this.observers.length=0}complete(){if(this.closed)throw new Ee.N;this.isStopped=!0;const{observers:$}=this,ie=$.length,re=$.slice();for(let ue=0;ue<ie;ue++)re[ue].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe($){if(this.closed)throw new Ee.N;return super._trySubscribe($)}_subscribe($){if(this.closed)throw new Ee.N;return this.hasError?($.error(this.thrownError),G.w.EMPTY):this.isStopped?($.complete(),G.w.EMPTY):(this.observers.push($),new ye.W(this,$))}asObservable(){const $=new g.y;return $.source=this,$}}return j.create=(H,$)=>new ne(H,$),j})();class ne extends X{constructor(H,$){super(),this.destination=H,this.source=$}next(H){const{destination:$}=this;$&&$.next&&$.next(H)}error(H){const{destination:$}=this;$&&$.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:$}=this;return $?this.source.subscribe(H):G.w.EMPTY}}},8858:(Ze,Te,V)=>{"use strict";V.d(Te,{W:()=>te});var g=V(5319);class te extends g.w{constructor(Ee,ye){super(),this.subject=Ee,this.subscriber=ye,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ee=this.subject,ye=Ee.observers;if(this.subject=null,!ye||0===ye.length||Ee.isStopped||Ee.closed)return;const Q=ye.indexOf(this.subscriber);-1!==Q&&ye.splice(Q,1)}}},7393:(Ze,Te,V)=>{"use strict";V.d(Te,{L:()=>de});var g=V(9105),te=V(6490),G=V(5319),Ee=V(9181),ye=V(2494),Q=V(4449);class de extends G.w{constructor(j,H,$){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=te.c;break;case 1:if(!j){this.destination=te.c;break}if("object"==typeof j){j instanceof de?(this.syncErrorThrowable=j.syncErrorThrowable,this.destination=j,j.add(this)):(this.syncErrorThrowable=!0,this.destination=new X(this,j));break}default:this.syncErrorThrowable=!0,this.destination=new X(this,j,H,$)}}[Ee.b](){return this}static create(j,H,$){const ie=new de(j,H,$);return ie.syncErrorThrowable=!1,ie}next(j){this.isStopped||this._next(j)}error(j){this.isStopped||(this.isStopped=!0,this._error(j))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(j){this.destination.next(j)}_error(j){this.destination.error(j),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:j}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=j,this}}class X extends de{constructor(j,H,$,ie){super(),this._parentSubscriber=j;let re,ue=this;(0,g.m)(H)?re=H:H&&(re=H.next,$=H.error,ie=H.complete,H!==te.c&&(ue=Object.create(H),(0,g.m)(ue.unsubscribe)&&this.add(ue.unsubscribe.bind(ue)),ue.unsubscribe=this.unsubscribe.bind(this))),this._context=ue,this._next=re,this._error=$,this._complete=ie}next(j){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;ye.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,j)&&this.unsubscribe():this.__tryOrUnsub(this._next,j)}}error(j){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:$}=ye.v;if(this._error)$&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,j),this.unsubscribe()):(this.__tryOrUnsub(this._error,j),this.unsubscribe());else if(H.syncErrorThrowable)$?(H.syncErrorValue=j,H.syncErrorThrown=!0):(0,Q.z)(j),this.unsubscribe();else{if(this.unsubscribe(),$)throw j;(0,Q.z)(j)}}}complete(){if(!this.isStopped){const{_parentSubscriber:j}=this;if(this._complete){const H=()=>this._complete.call(this._context);ye.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?(this.__tryOrSetError(j,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(j,H){try{j.call(this._context,H)}catch($){if(this.unsubscribe(),ye.v.useDeprecatedSynchronousErrorHandling)throw $;(0,Q.z)($)}}__tryOrSetError(j,H,$){if(!ye.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,$)}catch(ie){return ye.v.useDeprecatedSynchronousErrorHandling?(j.syncErrorValue=ie,j.syncErrorThrown=!0,!0):((0,Q.z)(ie),!0)}return!1}_unsubscribe(){const{_parentSubscriber:j}=this;this._context=null,this._parentSubscriber=null,j.unsubscribe()}}},5319:(Ze,Te,V)=>{"use strict";V.d(Te,{w:()=>Q});var g=V(9796),te=V(1555),G=V(9105);const ye=(()=>{function X(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((j,H)=>`${H+1}) ${j.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return X.prototype=Object.create(Error.prototype),X})();class Q{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:j,_unsubscribe:H,_subscriptions:$}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,j instanceof Q)j.remove(this);else if(null!==j)for(let ie=0;ie<j.length;++ie)j[ie].remove(this);if((0,G.m)(H))try{H.call(this)}catch(ie){ne=ie instanceof ye?de(ie.errors):[ie]}if((0,g.k)($)){let ie=-1,re=$.length;for(;++ie<re;){const ue=$[ie];if((0,te.K)(ue))try{ue.unsubscribe()}catch(ae){ne=ne||[],ae instanceof ye?ne=ne.concat(de(ae.errors)):ne.push(ae)}}}if(ne)throw new ye(ne)}add(ne){let j=ne;if(!ne)return Q.EMPTY;switch(typeof ne){case"function":j=new Q(ne);case"object":if(j===this||j.closed||"function"!=typeof j.unsubscribe)return j;if(this.closed)return j.unsubscribe(),j;if(!(j instanceof Q)){const ie=j;j=new Q,j._subscriptions=[ie]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:H}=j;if(null===H)j._parentOrParents=this;else if(H instanceof Q){if(H===this)return j;j._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return j;H.push(this)}const $=this._subscriptions;return null===$?this._subscriptions=[j]:$.push(j),j}remove(ne){const j=this._subscriptions;if(j){const H=j.indexOf(ne);-1!==H&&j.splice(H,1)}}}var X;function de(X){return X.reduce((ne,j)=>ne.concat(j instanceof ye?j.errors:j),[])}Q.EMPTY=((X=new Q).closed=!0,X)},2494:(Ze,Te,V)=>{"use strict";V.d(Te,{v:()=>te});let g=!1;const te={Promise:void 0,set useDeprecatedSynchronousErrorHandling(G){if(G){const Ee=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Ee.stack)}else g&&console.log("RxJS: Back to a better error behavior. Thank you. <3");g=G},get useDeprecatedSynchronousErrorHandling(){return g}}},2441:(Ze,Te,V)=>{"use strict";V.d(Te,{c:()=>ye,N:()=>Q});var g=V(9765),te=V(7574),G=V(5319),Ee=V(1307);class ye extends te.y{constructor(H,$){super(),this.source=H,this.subjectFactory=$,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new G.w,H.add(this.source.subscribe(new de(this.getSubject(),this))),H.closed&&(this._connection=null,H=G.w.EMPTY)),H}refCount(){return(0,Ee.x)()(this)}}const Q=(()=>{const j=ye.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:j._subscribe},_isComplete:{value:j._isComplete,writable:!0},getSubject:{value:j.getSubject},connect:{value:j.connect},refCount:{value:j.refCount}}})();class de extends g.Yc{constructor(H,$){super(H),this.connectable=$}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const $=H._connection;H._refCount=0,H._subject=null,H._connection=null,$&&$.unsubscribe()}}}},9193:(Ze,Te,V)=>{"use strict";V.d(Te,{E:()=>te,c:()=>G});var g=V(7574);const te=new g.y(ye=>ye.complete());function G(ye){return ye?function(ye){return new g.y(Q=>ye.schedule(()=>Q.complete()))}(ye):te}},4402:(Ze,Te,V)=>{"use strict";V.d(Te,{D:()=>ue});var g=V(7574),te=V(7444),G=V(5319),Ee=V(6554),de=V(4087),X=V(377),H=V(4072),$=V(9489);function ue(ae,Ae){return Ae?function(ae,Ae){if(null!=ae){if(function(ae){return ae&&"function"==typeof ae[Ee.L]}(ae))return function(ae,Ae){return new g.y(he=>{const we=new G.w;return we.add(Ae.schedule(()=>{const Ve=ae[Ee.L]();we.add(Ve.subscribe({next(He){we.add(Ae.schedule(()=>he.next(He)))},error(He){we.add(Ae.schedule(()=>he.error(He)))},complete(){we.add(Ae.schedule(()=>he.complete()))}}))})),we})}(ae,Ae);if((0,H.t)(ae))return function(ae,Ae){return new g.y(he=>{const we=new G.w;return we.add(Ae.schedule(()=>ae.then(Ve=>{we.add(Ae.schedule(()=>{he.next(Ve),we.add(Ae.schedule(()=>he.complete()))}))},Ve=>{we.add(Ae.schedule(()=>he.error(Ve)))}))),we})}(ae,Ae);if((0,$.z)(ae))return(0,de.r)(ae,Ae);if(function(ae){return ae&&"function"==typeof ae[X.hZ]}(ae)||"string"==typeof ae)return function(ae,Ae){if(!ae)throw new Error("Iterable cannot be null");return new g.y(he=>{const we=new G.w;let Ve;return we.add(()=>{Ve&&"function"==typeof Ve.return&&Ve.return()}),we.add(Ae.schedule(()=>{Ve=ae[X.hZ](),we.add(Ae.schedule(function(){if(he.closed)return;let He,ot;try{const Vt=Ve.next();He=Vt.value,ot=Vt.done}catch(Vt){return void he.error(Vt)}ot?he.complete():(he.next(He),this.schedule())}))})),we})}(ae,Ae)}throw new TypeError((null!==ae&&typeof ae||ae)+" is not observable")}(ae,Ae):ae instanceof g.y?ae:new g.y((0,te.s)(ae))}},6693:(Ze,Te,V)=>{"use strict";V.d(Te,{n:()=>Ee});var g=V(7574),te=V(5015),G=V(4087);function Ee(ye,Q){return Q?(0,G.r)(ye,Q):new g.y((0,te.V)(ye))}},6682:(Ze,Te,V)=>{"use strict";V.d(Te,{T:()=>ye});var g=V(7574),te=V(4869),G=V(3282),Ee=V(6693);function ye(...Q){let de=Number.POSITIVE_INFINITY,X=null,ne=Q[Q.length-1];return(0,te.K)(ne)?(X=Q.pop(),Q.length>1&&"number"==typeof Q[Q.length-1]&&(de=Q.pop())):"number"==typeof ne&&(de=Q.pop()),null===X&&1===Q.length&&Q[0]instanceof g.y?Q[0]:(0,G.J)(de)((0,Ee.n)(Q,X))}},5917:(Ze,Te,V)=>{"use strict";V.d(Te,{of:()=>Ee});var g=V(4869),te=V(6693),G=V(4087);function Ee(...ye){let Q=ye[ye.length-1];return(0,g.K)(Q)?(ye.pop(),(0,G.r)(ye,Q)):(0,te.n)(ye)}},8002:(Ze,Te,V)=>{"use strict";V.d(Te,{U:()=>te});var g=V(7393);function te(ye,Q){return function(X){if("function"!=typeof ye)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return X.lift(new G(ye,Q))}}class G{constructor(Q,de){this.project=Q,this.thisArg=de}call(Q,de){return de.subscribe(new Ee(Q,this.project,this.thisArg))}}class Ee extends g.L{constructor(Q,de,X){super(Q),this.project=de,this.count=0,this.thisArg=X||this}_next(Q){let de;try{de=this.project.call(this.thisArg,Q,this.count++)}catch(X){return void this.destination.error(X)}this.destination.next(de)}}},3282:(Ze,Te,V)=>{"use strict";V.d(Te,{J:()=>G});var g=V(9773),te=V(4487);function G(Ee=Number.POSITIVE_INFINITY){return(0,g.zg)(te.y,Ee)}},9773:(Ze,Te,V)=>{"use strict";V.d(Te,{zg:()=>Q});var g=V(5604),te=V(5197),G=V(268),Ee=V(8002),ye=V(4402);function Q(ne,j,H=Number.POSITIVE_INFINITY){return"function"==typeof j?$=>$.pipe(Q((ie,re)=>(0,ye.D)(ne(ie,re)).pipe((0,Ee.U)((ue,ae)=>j(ie,ue,re,ae))),H)):("number"==typeof j&&(H=j),$=>$.lift(new de(ne,H)))}class de{constructor(j,H=Number.POSITIVE_INFINITY){this.project=j,this.concurrent=H}call(j,H){return H.subscribe(new X(j,this.project,this.concurrent))}}class X extends te.L{constructor(j,H,$=Number.POSITIVE_INFINITY){super(j),this.project=H,this.concurrent=$,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(j){this.active<this.concurrent?this._tryNext(j):this.buffer.push(j)}_tryNext(j){let H;const $=this.index++;try{H=this.project(j,$)}catch(ie){return void this.destination.error(ie)}this.active++,this._innerSub(H,j,$)}_innerSub(j,H,$){const ie=new G.d(this,H,$),re=this.destination;re.add(ie);const ue=(0,g.D)(this,j,void 0,void 0,ie);ue!==ie&&re.add(ue)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(j,H,$,ie,re){this.destination.next(H)}notifyComplete(j){const H=this.buffer;this.remove(j),this.active--,H.length>0?this._next(H.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Ze,Te,V)=>{"use strict";V.d(Te,{ht:()=>H,QV:()=>ne});var g=V(7393),te=V(9193),G=V(5917),Ee=V(7574);class X{constructor(re,ue,ae){this.kind=re,this.value=ue,this.error=ae,this.hasValue="N"===re}observe(re){switch(this.kind){case"N":return re.next&&re.next(this.value);case"E":return re.error&&re.error(this.error);case"C":return re.complete&&re.complete()}}do(re,ue,ae){switch(this.kind){case"N":return re&&re(this.value);case"E":return ue&&ue(this.error);case"C":return ae&&ae()}}accept(re,ue,ae){return re&&"function"==typeof re.next?this.observe(re):this.do(re,ue,ae)}toObservable(){switch(this.kind){case"N":return(0,G.of)(this.value);case"E":return ie=this.error,new Ee.y(ue=>ue.error(ie));case"C":return(0,te.c)()}var ie;throw new Error("unexpected notification kind value")}static createNext(re){return void 0!==re?new X("N",re):X.undefinedValueNotification}static createError(re){return new X("E",void 0,re)}static createComplete(){return X.completeNotification}}function ne(ie,re=0){return function(ae){return ae.lift(new j(ie,re))}}X.completeNotification=new X("C"),X.undefinedValueNotification=new X("N",void 0);class j{constructor(re,ue=0){this.scheduler=re,this.delay=ue}call(re,ue){return ue.subscribe(new H(re,this.scheduler,this.delay))}}class H extends g.L{constructor(re,ue,ae=0){super(re),this.scheduler=ue,this.delay=ae}static dispatch(re){const{notification:ue,destination:ae}=re;ue.observe(ae),this.unsubscribe()}scheduleMessage(re){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new $(re,this.destination)))}_next(re){this.scheduleMessage(X.createNext(re))}_error(re){this.scheduleMessage(X.createError(re)),this.unsubscribe()}_complete(){this.scheduleMessage(X.createComplete()),this.unsubscribe()}}class ${constructor(re,ue){this.notification=re,this.destination=ue}}},1307:(Ze,Te,V)=>{"use strict";V.d(Te,{x:()=>te});var g=V(7393);function te(){return function(Q){return Q.lift(new G(Q))}}class G{constructor(Q){this.connectable=Q}call(Q,de){const{connectable:X}=this;X._refCount++;const ne=new Ee(Q,X),j=de.subscribe(ne);return ne.closed||(ne.connection=X.connect()),j}}class Ee extends g.L{constructor(Q,de){super(Q),this.connectable=de}_unsubscribe(){const{connectable:Q}=this;if(!Q)return void(this.connection=null);this.connectable=null;const de=Q._refCount;if(de<=0)return void(this.connection=null);if(Q._refCount=de-1,de>1)return void(this.connection=null);const{connection:X}=this,ne=Q._connection;this.connection=null,ne&&(!X||ne===X)&&ne.unsubscribe()}}},8819:(Ze,Te,V)=>{"use strict";V.d(Te,{B:()=>de});var g=V(2441);var Ee=V(1307),ye=V(9765);function Q(){return new ye.xQ}function de(){return X=>(0,Ee.x)()(function(X,ne){return function(H){let $;$="function"==typeof X?X:function(){return X};const ie=Object.create(H,g.N);return ie.source=H,ie.subjectFactory=$,ie}}(Q)(X))}},3101:(Ze,Te,V)=>{"use strict";V.d(Te,{R:()=>ae});var g=V(7574);let te=1;const G=Promise.resolve(),Ee={};function ye(he){return he in Ee&&(delete Ee[he],!0)}const Q={setImmediate(he){const we=te++;return Ee[we]=!0,G.then(()=>ye(we)&&he()),we},clearImmediate(he){ye(he)}};var X=V(6465),j=V(6102);const $=new class extends j.v{flush(we){this.active=!0,this.scheduled=void 0;const{actions:Ve}=this;let He,ot=-1,Vt=Ve.length;we=we||Ve.shift();do{if(He=we.execute(we.state,we.delay))break}while(++ot<Vt&&(we=Ve.shift()));if(this.active=!1,He){for(;++ot<Vt&&(we=Ve.shift());)we.unsubscribe();throw He}}}(class extends X.o{constructor(we,Ve){super(we,Ve),this.scheduler=we,this.work=Ve}requestAsyncId(we,Ve,He=0){return null!==He&&He>0?super.requestAsyncId(we,Ve,He):(we.actions.push(this),we.scheduled||(we.scheduled=Q.setImmediate(we.flush.bind(we,null))))}recycleAsyncId(we,Ve,He=0){if(null!==He&&He>0||null===He&&this.delay>0)return super.recycleAsyncId(we,Ve,He);0===we.actions.length&&(Q.clearImmediate(Ve),we.scheduled=void 0)}});var ie=V(9796);class ue extends g.y{constructor(we,Ve=0,He=$){var he;super(),this.source=we,this.delayTime=Ve,this.scheduler=He,(!(!(0,ie.k)(he=Ve)&&he-parseFloat(he)+1>=0)||Ve<0)&&(this.delayTime=0),(!He||"function"!=typeof He.schedule)&&(this.scheduler=$)}static create(we,Ve=0,He=$){return new ue(we,Ve,He)}static dispatch(we){const{source:Ve,subscriber:He}=we;return this.add(Ve.subscribe(He))}_subscribe(we){return this.scheduler.schedule(ue.dispatch,this.delayTime,{source:this.source,subscriber:we})}}function ae(he,we=0){return function(He){return He.lift(new Ae(he,we))}}class Ae{constructor(we,Ve){this.scheduler=we,this.delay=Ve}call(we,Ve){return new ue(Ve,this.delay,this.scheduler).subscribe(we)}}},3342:(Ze,Te,V)=>{"use strict";V.d(Te,{b:()=>Ee});var g=V(7393);function te(){}var G=V(9105);function Ee(de,X,ne){return function(H){return H.lift(new ye(de,X,ne))}}class ye{constructor(X,ne,j){this.nextOrObserver=X,this.error=ne,this.complete=j}call(X,ne){return ne.subscribe(new Q(X,this.nextOrObserver,this.error,this.complete))}}class Q extends g.L{constructor(X,ne,j,H){super(X),this._tapNext=te,this._tapError=te,this._tapComplete=te,this._tapError=j||te,this._tapComplete=H||te,(0,G.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||te,this._tapError=ne.error||te,this._tapComplete=ne.complete||te)}_next(X){try{this._tapNext.call(this._context,X)}catch(ne){return void this.destination.error(ne)}this.destination.next(X)}_error(X){try{this._tapError.call(this._context,X)}catch(ne){return void this.destination.error(ne)}this.destination.error(X)}_complete(){try{this._tapComplete.call(this._context)}catch(X){return void this.destination.error(X)}return this.destination.complete()}}},4087:(Ze,Te,V)=>{"use strict";V.d(Te,{r:()=>G});var g=V(7574),te=V(5319);function G(Ee,ye){return new g.y(Q=>{const de=new te.w;let X=0;return de.add(ye.schedule(function(){X!==Ee.length?(Q.next(Ee[X++]),Q.closed||de.add(this.schedule())):Q.complete()})),de})}},6465:(Ze,Te,V)=>{"use strict";V.d(Te,{o:()=>G});var g=V(5319);class te extends g.w{constructor(ye,Q){super()}schedule(ye,Q=0){return this}}class G extends te{constructor(ye,Q){super(ye,Q),this.scheduler=ye,this.work=Q,this.pending=!1}schedule(ye,Q=0){if(this.closed)return this;this.state=ye;const de=this.id,X=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(X,de,Q)),this.pending=!0,this.delay=Q,this.id=this.id||this.requestAsyncId(X,this.id,Q),this}requestAsyncId(ye,Q,de=0){return setInterval(ye.flush.bind(ye,this),de)}recycleAsyncId(ye,Q,de=0){if(null!==de&&this.delay===de&&!1===this.pending)return Q;clearInterval(Q)}execute(ye,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ye,Q);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,Q){let X,de=!1;try{this.work(ye)}catch(ne){de=!0,X=!!ne&&ne||new Error(ne)}if(de)return this.unsubscribe(),X}_unsubscribe(){const ye=this.id,Q=this.scheduler,de=Q.actions,X=de.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==X&&de.splice(X,1),null!=ye&&(this.id=this.recycleAsyncId(Q,ye,null)),this.delay=null}}},6102:(Ze,Te,V)=>{"use strict";V.d(Te,{v:()=>te});let g=(()=>{class G{constructor(ye,Q=G.now){this.SchedulerAction=ye,this.now=Q}schedule(ye,Q=0,de){return new this.SchedulerAction(this,ye).schedule(de,Q)}}return G.now=()=>Date.now(),G})();class te extends g{constructor(Ee,ye=g.now){super(Ee,()=>te.delegate&&te.delegate!==this?te.delegate.now():ye()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Ee,ye=0,Q){return te.delegate&&te.delegate!==this?te.delegate.schedule(Ee,ye,Q):super.schedule(Ee,ye,Q)}flush(Ee){const{actions:ye}=this;if(this.active)return void ye.push(Ee);let Q;this.active=!0;do{if(Q=Ee.execute(Ee.state,Ee.delay))break}while(Ee=ye.shift());if(this.active=!1,Q){for(;Ee=ye.shift();)Ee.unsubscribe();throw Q}}}},3637:(Ze,Te,V)=>{"use strict";V.d(Te,{P:()=>G});var g=V(6465);const G=new(V(6102).v)(g.o)},7771:(Ze,Te,V)=>{"use strict";V.d(Te,{c:()=>ye});var g=V(6465),G=V(6102);const ye=new class extends G.v{}(class extends g.o{constructor(de,X){super(de,X),this.scheduler=de,this.work=X}schedule(de,X=0){return X>0?super.schedule(de,X):(this.delay=X,this.state=de,this.scheduler.flush(this),this)}execute(de,X){return X>0||this.closed?super.execute(de,X):this._execute(de,X)}requestAsyncId(de,X,ne=0){return null!==ne&&ne>0||null===ne&&this.delay>0?super.requestAsyncId(de,X,ne):de.flush(this)}})},377:(Ze,Te,V)=>{"use strict";V.d(Te,{hZ:()=>te});const te="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ze,Te,V)=>{"use strict";V.d(Te,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ze,Te,V)=>{"use strict";V.d(Te,{b:()=>g});const g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ze,Te,V)=>{"use strict";V.d(Te,{N:()=>te});const te=(()=>{function G(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return G.prototype=Object.create(Error.prototype),G})()},4449:(Ze,Te,V)=>{"use strict";function g(te){setTimeout(()=>{throw te},0)}V.d(Te,{z:()=>g})},4487:(Ze,Te,V)=>{"use strict";function g(te){return te}V.d(Te,{y:()=>g})},9796:(Ze,Te,V)=>{"use strict";V.d(Te,{k:()=>g});const g=Array.isArray||(te=>te&&"number"==typeof te.length)},9489:(Ze,Te,V)=>{"use strict";V.d(Te,{z:()=>g});const g=te=>te&&"number"==typeof te.length&&"function"!=typeof te},9105:(Ze,Te,V)=>{"use strict";function g(te){return"function"==typeof te}V.d(Te,{m:()=>g})},1555:(Ze,Te,V)=>{"use strict";function g(te){return null!==te&&"object"==typeof te}V.d(Te,{K:()=>g})},4072:(Ze,Te,V)=>{"use strict";function g(te){return!!te&&"function"!=typeof te.subscribe&&"function"==typeof te.then}V.d(Te,{t:()=>g})},4869:(Ze,Te,V)=>{"use strict";function g(te){return te&&"function"==typeof te.schedule}V.d(Te,{K:()=>g})},7444:(Ze,Te,V)=>{"use strict";V.d(Te,{s:()=>H});var g=V(5015),te=V(4449),Ee=V(377),Q=V(6554),X=V(9489),ne=V(4072),j=V(1555);const H=$=>{if($&&"function"==typeof $[Q.L])return($=>ie=>{const re=$[Q.L]();if("function"!=typeof re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return re.subscribe(ie)})($);if((0,X.z)($))return(0,g.V)($);if((0,ne.t)($))return($=>ie=>($.then(re=>{ie.closed||(ie.next(re),ie.complete())},re=>ie.error(re)).then(null,te.z),ie))($);if($&&"function"==typeof $[Ee.hZ])return($=>ie=>{const re=$[Ee.hZ]();for(;;){const ue=re.next();if(ue.done){ie.complete();break}if(ie.next(ue.value),ie.closed)break}return"function"==typeof re.return&&ie.add(()=>{re.return&&re.return()}),ie})($);{const re=`You provided ${(0,j.K)($)?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(re)}}},5015:(Ze,Te,V)=>{"use strict";V.d(Te,{V:()=>g});const g=te=>G=>{for(let Ee=0,ye=te.length;Ee<ye&&!G.closed;Ee++)G.next(te[Ee]);G.complete()}},5604:(Ze,Te,V)=>{"use strict";V.d(Te,{D:()=>Ee});var g=V(268),te=V(7444),G=V(7574);function Ee(ye,Q,de,X,ne=new g.d(ye,de,X)){if(!ne.closed)return Q instanceof G.y?Q.subscribe(ne):(0,te.s)(Q)(ne)}},276:(Ze,Te,V)=>{"use strict";var g=V(7716);let te=null;function G(){return te}const de=new g.OlP("DocumentToken");let X=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,g.Yz7)({factory:ne,token:i,providedIn:"platform"}),i})();function ne(){return(0,g.LFG)(H)}const j=new g.OlP("Location Initialized");let H=(()=>{class i extends X{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(r){const s=G().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){const s=G().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,s,o){$()?this._history.pushState(r,s,o):this.location.hash=o}replaceState(r,s,o){$()?this._history.replaceState(r,s,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de))},i.\u0275prov=(0,g.Yz7)({factory:ie,token:i,providedIn:"platform"}),i})();function $(){return!!window.history.pushState}function ie(){return new H((0,g.LFG)(de))}function re(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function ue(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function ae(i){return i&&"?"!==i[0]?"?"+i:i}let Ae=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,g.Yz7)({factory:he,token:i,providedIn:"root"}),i})();function he(i){const n=(0,g.LFG)(de).location;return new Ve((0,g.LFG)(X),n&&n.origin||"")}const we=new g.OlP("appBaseHref");let Ve=(()=>{class i extends Ae{constructor(r,s){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return re(this._baseHref,r)}path(r=!1){const s=this._platformLocation.pathname+ae(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${s}${o}`:s}pushState(r,s,o,c){const h=this.prepareExternalUrl(o+ae(c));this._platformLocation.pushState(r,s,h)}replaceState(r,s,o,c){const h=this.prepareExternalUrl(o+ae(c));this._platformLocation.replaceState(r,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(X),g.LFG(we,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),He=(()=>{class i extends Ae{constructor(r,s){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(r){const s=re(this._baseHref,r);return s.length>0?"#"+s:s}pushState(r,s,o,c){let h=this.prepareExternalUrl(o+ae(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(r,s,h)}replaceState(r,s,o,c){let h=this.prepareExternalUrl(o+ae(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(r,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var s,o;null===(o=(s=this._platformLocation).historyGo)||void 0===o||o.call(s,r)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(X),g.LFG(we,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),ot=(()=>{class i{constructor(r,s){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const o=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=ue(Ut(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+ae(s))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,Ut(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,s="",o=null){this._platformStrategy.pushState(o,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ae(s)),o)}replaceState(r,s="",o=null){this._platformStrategy.replaceState(o,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ae(s)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var s,o;null===(o=(s=this._platformStrategy).historyGo)||void 0===o||o.call(s,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(o=>o(r,s))}subscribe(r,s,o){return this._subject.subscribe({next:r,error:s,complete:o})}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Ae),g.LFG(X))},i.normalizeQueryParams=ae,i.joinWithSlash=re,i.stripTrailingSlash=ue,i.\u0275prov=(0,g.Yz7)({factory:Vt,token:i,providedIn:"root"}),i})();function Vt(){return new ot((0,g.LFG)(Ae),(0,g.LFG)(X))}function Ut(i){return i.replace(/\/index.html$/,"")}var oe=(()=>((oe=oe||{})[oe.Decimal=0]="Decimal",oe[oe.Percent=1]="Percent",oe[oe.Currency=2]="Currency",oe[oe.Scientific=3]="Scientific",oe))(),ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))(),ee=(()=>((ee=ee||{})[ee.Decimal=0]="Decimal",ee[ee.Group=1]="Group",ee[ee.List=2]="List",ee[ee.PercentSign=3]="PercentSign",ee[ee.PlusSign=4]="PlusSign",ee[ee.MinusSign=5]="MinusSign",ee[ee.Exponential=6]="Exponential",ee[ee.SuperscriptingExponent=7]="SuperscriptingExponent",ee[ee.PerMille=8]="PerMille",ee[ee.Infinity=9]="Infinity",ee[ee.NaN=10]="NaN",ee[ee.TimeSeparator=11]="TimeSeparator",ee[ee.CurrencyDecimal=12]="CurrencyDecimal",ee[ee.CurrencyGroup=13]="CurrencyGroup",ee))();function Pt(i,n){const r=(0,g.cg1)(i),s=r[g.wAp.NumberSymbols][n];if(void 0===s){if(n===ee.CurrencyDecimal)return r[g.wAp.NumberSymbols][ee.Decimal];if(n===ee.CurrencyGroup)return r[g.wAp.NumberSymbols][ee.Group]}return s}const Ls=g.kL8,Ja=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function vt(i){const n=parseInt(i);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+i);return n}class vi{}let gu=(()=>{class i extends vi{constructor(r){super(),this.locale=r}getPluralCategory(r,s){switch(Ls(s||this.locale)(r)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(g.soG))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();function cr(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const s=r.indexOf("="),[o,c]=-1==s?[r,""]:[r.slice(0,s),r.slice(s+1)];if(o.trim()===n)return decodeURIComponent(c)}return null}class Vi{constructor(n,r,s,o){this.$implicit=n,this.ngForOf=r,this.index=s,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $t=(()=>{class i{constructor(r,s,o){this._viewContainer=r,this._template=s,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(i){return i.name||typeof i}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const s=[];r.forEachOperation((o,c,h)=>{if(null==o.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new Vi(null,this._ngForOf,-1,-1),null===h?void 0:h),w=new _u(o,_);s.push(w)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const _=this._viewContainer.get(c);this._viewContainer.move(_,h);const w=new _u(o,_);s.push(w)}});for(let o=0;o<s.length;o++)this._perViewChange(s[o].view,s[o].record);for(let o=0,c=this._viewContainer.length;o<c;o++){const h=this._viewContainer.get(o);h.context.index=o,h.context.count=c,h.context.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(r,s){r.context.$implicit=s.item}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},i.\u0275dir=g.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class _u{constructor(n,r){this.record=n,this.view=r}}let Ei=(()=>{class i{constructor(r,s){this._viewContainer=r,this._context=new yu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){el("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){el("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,s){return!0}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(g.s_b),g.Y36(g.Rgc))},i.\u0275dir=g.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class yu{constructor(){this.$implicit=null,this.ngIf=null}}function el(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,g.AaK)(n)}'.`)}function jn(i,n){return Error(`InvalidPipeArgument: '${n}' for pipe '${(0,g.AaK)(i)}'`)}class Sm{createSubscription(n,r){return n.subscribe({next:r,error:s=>{throw s}})}dispose(n){n.unsubscribe()}onDestroy(n){n.unsubscribe()}}class vE{createSubscription(n,r){return n.then(r,s=>{throw s})}dispose(n){}onDestroy(n){}}const os=new vE,cT=new Sm;let Ef=(()=>{class i{constructor(r){this._ref=r,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(r){return this._obj?r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue:(r&&this._subscribe(r),this._latestValue)}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,s=>this._updateLatestValue(r,s))}_selectStrategy(r){if((0,g.QGY)(r))return os;if((0,g.F4k)(r))return cT;throw jn(i,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,s){r===this._obj&&(this._latestValue=s,this._ref.markForCheck())}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(g.sBO,16))},i.\u0275pipe=g.Yjl({name:"async",type:i,pure:!1}),i})(),Eu=(()=>{class i{constructor(r){this._locale=r}transform(r,s,o){if(!function(i){return!(null==i||""===i||i!=i)}(r))return null;o=o||this._locale;try{return function(i,n,r){return function(i,n,r,s,o,c,h=!1){let _="",w=!1;if(isFinite(i)){let T=function(i){let s,o,c,h,_,n=Math.abs(i)+"",r=0;for((o=n.indexOf("."))>-1&&(n=n.replace(".","")),(c=n.search(/e/i))>0?(o<0&&(o=c),o+=+n.slice(c+1),n=n.substring(0,c)):o<0&&(o=n.length),c=0;"0"===n.charAt(c);c++);if(c===(_=n.length))s=[0],o=1;else{for(_--;"0"===n.charAt(_);)_--;for(o-=c,s=[],h=0;c<=_;c++,h++)s[h]=Number(n.charAt(c))}return o>22&&(s=s.splice(0,21),r=o-1,o=1),{digits:s,exponent:r,integerLen:o}}(i);h&&(T=function(i){if(0===i.digits[0])return i;const n=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===n?i.digits.push(0,0):1===n&&i.digits.push(0),i.integerLen+=2),i}(T));let S=n.minInt,R=n.minFrac,P=n.maxFrac;if(c){const je=c.match(Ja);if(null===je)throw new Error(`${c} is not a valid digit info`);const $e=je[1],Ge=je[3],un=je[5];null!=$e&&(S=vt($e)),null!=Ge&&(R=vt(Ge)),null!=un?P=vt(un):null!=Ge&&R>P&&(P=R)}!function(i,n,r){if(n>r)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${r}).`);let s=i.digits,o=s.length-i.integerLen;const c=Math.min(Math.max(n,o),r);let h=c+i.integerLen,_=s[h];if(h>0){s.splice(Math.max(i.integerLen,h));for(let R=h;R<s.length;R++)s[R]=0}else{o=Math.max(0,o),i.integerLen=1,s.length=Math.max(1,h=c+1),s[0]=0;for(let R=1;R<h;R++)s[R]=0}if(_>=5)if(h-1<0){for(let R=0;R>h;R--)s.unshift(0),i.integerLen++;s.unshift(1),i.integerLen++}else s[h-1]++;for(;o<Math.max(0,c);o++)s.push(0);let w=0!==c;const T=n+i.integerLen,S=s.reduceRight(function(R,P,k,U){return U[k]=(P+=R)<10?P:P-10,w&&(0===U[k]&&k>=T?U.pop():w=!1),P>=10?1:0},0);S&&(s.unshift(S),i.integerLen++)}(T,R,P);let k=T.digits,U=T.integerLen;const J=T.exponent;let me=[];for(w=k.every(je=>!je);U<S;U++)k.unshift(0);for(;U<0;U++)k.unshift(0);U>0?me=k.splice(U,k.length):(me=k,k=[0]);const Oe=[];for(k.length>=n.lgSize&&Oe.unshift(k.splice(-n.lgSize,k.length).join(""));k.length>n.gSize;)Oe.unshift(k.splice(-n.gSize,k.length).join(""));k.length&&Oe.unshift(k.join("")),_=Oe.join(Pt(r,s)),me.length&&(_+=Pt(r,o)+me.join("")),J&&(_+=Pt(r,ee.Exponential)+"+"+J)}else _=Pt(r,ee.Infinity);return _=i<0&&!w?n.negPre+_+n.negSuf:n.posPre+_+n.posSuf,_}(i,function(i,n="-"){const r={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},s=i.split(";"),o=s[0],c=s[1],h=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],_=h[0],w=h[1]||"";r.posPre=_.substr(0,_.indexOf("#"));for(let S=0;S<w.length;S++){const R=w.charAt(S);"0"===R?r.minFrac=r.maxFrac=S+1:"#"===R?r.maxFrac=S+1:r.posSuf+=R}const T=_.split(",");if(r.gSize=T[1]?T[1].length:0,r.lgSize=T[2]||T[1]?(T[2]||T[1]).length:0,c){const S=o.length-r.posPre.length-r.posSuf.length,R=c.indexOf("#");r.negPre=c.substr(0,R).replace(/'/g,""),r.negSuf=c.substr(R+S).replace(/'/g,"")}else r.negPre=n+r.posPre,r.negSuf=r.posSuf;return r}(function(i,n){return(0,g.cg1)(i)[g.wAp.NumberFormats][n]}(n,oe.Decimal),Pt(n,ee.MinusSign)),n,ee.Group,ee.Decimal,r)}(function(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(r),o,s)}catch(c){throw jn(i,c.message)}}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(g.soG,16))},i.\u0275pipe=g.Yjl({name:"number",type:i,pure:!0}),i})();let ha=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[{provide:vi,useClass:gu}]}),i})();function Gc(i){return"server"===i}let Cu=(()=>{class i{}return i.\u0275prov=(0,g.Yz7)({token:i,providedIn:"root",factory:()=>new bu((0,g.LFG)(de),window)}),i})();class bu{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const s=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let o=s.currentNode;for(;o;){const c=o.shadowRoot;if(c){const h=c.getElementById(n)||c.querySelector(`[name="${n}"]`);if(h)return h}o=s.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),s=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],o-c[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=Tu(this.window.history)||Tu(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function Tu(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class Tf{}class Wc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new Wc,te||(te=i)}onAndCancel(n,r,s){return n.addEventListener(r,s,!1),()=>{n.removeEventListener(r,s,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(js=js||document.querySelector("base"),js?js.getAttribute("href"):null);return null==r?null:function(i){mn=mn||document.createElement("a"),mn.setAttribute("href",i);const n=mn.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){js=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return cr(document.cookie,n)}}let mn,js=null;const km=new g.OlP("TRANSITION_ID"),Cr=[{provide:g.ip1,useFactory:function(i,n,r){return()=>{r.get(g.CZH).donePromise.then(()=>{const s=G(),o=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let c=0;c<o.length;c++)s.remove(o[c])})}},deps:[km,de,g.zs3],multi:!0}];class Iu{static init(){(0,g.VLi)(new Iu)}addToWindow(n){g.dqk.getAngularTestability=(s,o=!0)=>{const c=n.findTestabilityInTree(s,o);if(null==c)throw new Error("Could not find testability for element.");return c},g.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(s=>{const o=g.dqk.getAllAngularTestabilities();let c=o.length,h=!1;const _=function(w){h=h||w,c--,0==c&&s(h)};o.forEach(function(w){w.whenStable(_)})})}findTestabilityInTree(n,r,s){if(null==r)return null;const o=n.getTestability(r);return null!=o?o:s?G().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let Zc=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();const pa=new g.OlP("EventManagerPlugins");let Se=(()=>{class i{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(o=>o.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,s,o){return this._findPluginFor(s).addEventListener(r,s,o)}addGlobalEventListener(r,s,o){return this._findPluginFor(s).addGlobalEventListener(r,s,o)}getZone(){return this._zone}_findPluginFor(r){const s=this._eventNameToPlugin.get(r);if(s)return s;const o=this._plugins;for(let c=0;c<o.length;c++){const h=o[c];if(h.supports(r))return this._eventNameToPlugin.set(r,h),h}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(pa),g.LFG(g.R0b))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();class Rt{constructor(n){this._doc=n}addGlobalEventListener(n,r,s){const o=G().getGlobalEventTarget(this._doc,n);if(!o)throw new Error(`Unsupported event target ${o} for event ${r}`);return this.addEventListener(o,r,s)}}let Nf=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const s=new Set;r.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),s.add(o))}),this.onStylesAdded(s)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),hn=(()=>{class i extends Nf{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,s,o){r.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,o.push(s.appendChild(h))})}addHost(r){const s=[];this._addStylesToHost(this._stylesSet,r,s),this._hostNodes.set(r,s)}removeHost(r){const s=this._hostNodes.get(r);s&&s.forEach(xf),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((s,o)=>{this._addStylesToHost(r,o,s)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(xf))}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();function xf(i){G().remove(i)}const Hs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ci=/%COMP%/g;function Ln(i,n,r){for(let s=0;s<n.length;s++){let o=n[s];Array.isArray(o)?Ln(i,o,r):(o=o.replace(Ci,i),r.push(o))}return r}function ji(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let $s=(()=>{class i{constructor(r,s,o){this.eventManager=r,this.sharedStylesHost=s,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ri(r)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;switch(s.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(s.id);return o||(o=new Of(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,o)),o.applyToHost(r),o}case 1:case g.ifc.ShadowDom:return new Mf(this.eventManager,this.sharedStylesHost,r,s);default:if(!this.rendererByCompId.has(s.id)){const o=Ln(s.id,s.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Se),g.LFG(hn),g.LFG(g.AFp))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();class ri{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(Hs[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,s){n&&n.insertBefore(r,s)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let s="string"==typeof n?document.querySelector(n):n;if(!s)throw new Error(`The selector "${n}" did not match any elements`);return r||(s.textContent=""),s}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,s,o){if(o){r=o+":"+r;const c=Hs[o];c?n.setAttributeNS(c,r,s):n.setAttribute(r,s)}else n.setAttribute(r,s)}removeAttribute(n,r,s){if(s){const o=Hs[s];o?n.removeAttributeNS(o,r):n.removeAttribute(`${s}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,s,o){o&(g.JOm.DashCase|g.JOm.Important)?n.style.setProperty(r,s,o&g.JOm.Important?"important":""):n.style[r]=s}removeStyle(n,r,s){s&g.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,s){n[r]=s}setValue(n,r){n.nodeValue=r}listen(n,r,s){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,ji(s)):this.eventManager.addEventListener(n,r,ji(s))}}class Of extends ri{constructor(n,r,s,o){super(n),this.component=s;const c=Ln(o+"-"+s.id,s.styles,[]);r.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Ci,o+"-"+s.id),this.hostAttr="_nghost-%COMP%".replace(Ci,o+"-"+s.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const s=super.createElement(n,r);return super.setAttribute(s,this.contentAttr,""),s}}class Mf extends ri{constructor(n,r,s,o){super(n),this.sharedStylesHost=r,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Ln(o.id,o.styles,[]);for(let h=0;h<c.length;h++){const _=document.createElement("style");_.textContent=c[h],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,s){return super.insertBefore(this.nodeOrShadowRoot(n),r,s)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Du=(()=>{class i extends Rt{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,o){return r.addEventListener(s,o,!1),()=>this.removeEventListener(r,s,o)}removeEventListener(r,s,o){return r.removeEventListener(s,o)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();const Au=["alt","control","meta","shift"],AE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},br={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ET={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let wT=(()=>{class i extends Rt{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,s,o){const c=i.parseEventName(s),h=i.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>G().onAndCancel(r,c.domEventName,h))}static parseEventName(r){const s=r.toLowerCase().split("."),o=s.shift();if(0===s.length||"keydown"!==o&&"keyup"!==o)return null;const c=i._normalizeKey(s.pop());let h="";if(Au.forEach(w=>{const T=s.indexOf(w);T>-1&&(s.splice(T,1),h+=w+".")}),h+=c,0!=s.length||0===c.length)return null;const _={};return _.domEventName=o,_.fullKey=h,_}static getEventFullKey(r){let s="",o=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&br.hasOwnProperty(n)&&(n=br[n]))}return AE[n]||n}(r);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Au.forEach(c=>{c!=o&&ET[c](r)&&(s+=c+".")}),s+=o,s}static eventCallback(r,s,o){return c=>{i.getEventFullKey(c)===r&&o.runGuarded(()=>s(c))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),Hi=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,g.Yz7)({factory:function(){return(0,g.LFG)(cl)},token:i,providedIn:"root"}),i})(),cl=(()=>{class i extends Hi{constructor(r){super(),this._doc=r}sanitize(r,s){if(null==s)return null;switch(r){case g.q3G.NONE:return s;case g.q3G.HTML:return(0,g.qzn)(s,"HTML")?(0,g.z3N)(s):(0,g.EiD)(this._doc,String(s)).toString();case g.q3G.STYLE:return(0,g.qzn)(s,"Style")?(0,g.z3N)(s):s;case g.q3G.SCRIPT:if((0,g.qzn)(s,"Script"))return(0,g.z3N)(s);throw new Error("unsafe value used in a script context");case g.q3G.URL:return(0,g.yhl)(s),(0,g.qzn)(s,"URL")?(0,g.z3N)(s):(0,g.mCW)(String(s));case g.q3G.RESOURCE_URL:if((0,g.qzn)(s,"ResourceURL"))return(0,g.z3N)(s);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${r} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(r){return(0,g.JVY)(r)}bypassSecurityTrustStyle(r){return(0,g.L6k)(r)}bypassSecurityTrustScript(r){return(0,g.eBb)(r)}bypassSecurityTrustUrl(r){return(0,g.LAX)(r)}bypassSecurityTrustResourceUrl(r){return(0,g.pB0)(r)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de))},i.\u0275prov=(0,g.Yz7)({factory:function(){return function(i){return new cl(i.get(de))}((0,g.LFG)(g.gxx))},token:i,providedIn:"root"}),i})();const Ru=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function(){Wc.makeCurrent(),Iu.init()},multi:!0},{provide:de,useFactory:function(){return(0,g.RDi)(document),document},deps:[]}]),Bf=[[],{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function(){return new g.qLn},deps:[]},{provide:pa,useClass:Du,multi:!0,deps:[de,g.R0b,g.Lbi]},{provide:pa,useClass:wT,multi:!0,deps:[de]},[],{provide:$s,useClass:$s,deps:[Se,hn,g.AFp]},{provide:g.FYo,useExisting:$s},{provide:Nf,useExisting:hn},{provide:hn,useClass:hn,deps:[de]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Se,useClass:Se,deps:[pa,g.R0b]},{provide:Tf,useClass:Zc,deps:[]},[]];let jf=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:g.AFp,useValue:r.appId},{provide:km,useExisting:g.AFp},Cr]}}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(i,12))},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:Bf,imports:[ha,g.hGG]}),i})();"undefined"!=typeof window&&window;var on=V(4402),zn=V(7574),_a=V(9796),rt=V(8002),Wm=V(1555);function dl(i,n){return new zn.y(r=>{const s=i.length;if(0===s)return void r.complete();const o=new Array(s);let c=0,h=0;for(let _=0;_<s;_++){const w=(0,on.D)(i[_]);let T=!1;r.add(w.subscribe({next:S=>{T||(T=!0,h++),o[_]=S},error:S=>r.error(S),complete:()=>{c++,(c===s||!T)&&(h===s&&r.next(n?n.reduce((S,R,P)=>(S[R]=o[P],S),{}):o),r.complete())}}))}})}let Gf=(()=>{class i{constructor(r,s){this._renderer=r,this._elementRef=s,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,s){this._renderer.setProperty(this._elementRef.nativeElement,r,s)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(g.Qsj),g.Y36(g.SBq))},i.\u0275dir=g.lG2({type:i}),i})(),ya=(()=>{class i extends Gf{}return i.\u0275fac=function(){let n;return function(s){return(n||(n=g.n5z(i)))(s||i)}}(),i.\u0275dir=g.lG2({type:i,features:[g.qOj]}),i})();const Gs=new g.OlP("NgValueAccessor"),xE={provide:Gs,useExisting:(0,g.Gpc)(()=>ds),multi:!0},od=new g.OlP("CompositionEventMode");let ds=(()=>{class i extends Gf{constructor(r,s,o){super(r,s),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=G()?G().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(od,8))},i.\u0275dir=g.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&g.NdJ("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[g._Bn([xE]),g.qOj]}),i})();const Kn=new g.OlP("NgValidators"),ii=new g.OlP("NgAsyncValidators");function Ym(i){return null!=i}function Wf(i){const n=(0,g.QGY)(i)?(0,on.D)(i):i;return(0,g.CqO)(n),n}function kE(i){let n={};return i.forEach(r=>{n=null!=r?Object.assign(Object.assign({},n),r):n}),0===Object.keys(n).length?null:n}function Zf(i,n){return n.map(r=>r(i))}function zf(i){return i.map(n=>function(i){return!i.validate}(n)?n:r=>n.validate(r))}function ld(i){return null!=i?function(i){if(!i)return null;const n=i.filter(Ym);return 0==n.length?null:function(r){return kE(Zf(r,n))}}(zf(i)):null}function ud(i){return null!=i?function(i){if(!i)return null;const n=i.filter(Ym);return 0==n.length?null:function(r){return function(...i){if(1===i.length){const n=i[0];if((0,_a.k)(n))return dl(n,null);if((0,Wm.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const r=Object.keys(n);return dl(r.map(s=>n[s]),r)}}if("function"==typeof i[i.length-1]){const n=i.pop();return dl(i=1===i.length&&(0,_a.k)(i[0])?i[0]:i,null).pipe((0,rt.U)(r=>n(...r)))}return dl(i,null)}(Zf(r,n).map(Wf)).pipe((0,rt.U)(kE))}}(zf(i)):null}function cd(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function wn(i){return i?Array.isArray(i)?i:[i]:[]}function $i(i,n){return Array.isArray(i)?i.includes(n):i===n}function qi(i,n){const r=wn(n);return wn(i).forEach(o=>{$i(r,o)||r.push(o)}),r}function Kf(i,n){return wn(n).filter(r=>!$i(i,r))}let Qm=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=ld(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=ud(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,s){return!!this.control&&this.control.hasError(r,s)}getError(r,s){return this.control?this.control.getError(r,s):null}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=g.lG2({type:i}),i})(),ln=(()=>{class i extends Qm{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=g.n5z(i)))(s||i)}}(),i.\u0275dir=g.lG2({type:i,features:[g.qOj]}),i})();class dr extends Qm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class va{constructor(n){this._cd=n}is(n){var r,s,o;return"submitted"===n?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(o=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===o?void 0:o[n])}}let dd=(()=>{class i extends va{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(dr,2))},i.\u0275dir=g.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&g.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[g.qOj]}),i})(),Mu=(()=>{class i extends va{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(ln,10))},i.\u0275dir=g.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){2&r&&g.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))("ng-submitted",s.is("submitted"))},features:[g.qOj]}),i})();function ba(i,n){pd(i,n),n.valueAccessor.writeValue(i.value),function(i,n){n.valueAccessor.registerOnChange(r=>{i._pendingValue=r,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&t_(i,n)})}(i,n),function(i,n){const r=(s,o)=>{n.valueAccessor.writeValue(s),o&&n.viewToModelUpdate(s)};i.registerOnChange(r),n._registerOnDestroy(()=>{i._unregisterOnChange(r)})}(i,n),function(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&t_(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function(i,n){if(n.valueAccessor.setDisabledState){const r=s=>{n.valueAccessor.setDisabledState(s)};i.registerOnDisabledChange(r),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(r)})}}(i,n)}function gl(i,n){i.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function pd(i,n){const r=function(i){return i._rawValidators}(i);null!==n.validator?i.setValidators(cd(r,n.validator)):"function"==typeof r&&i.setValidators([r]);const s=function(i){return i._rawAsyncValidators}(i);null!==n.asyncValidator?i.setAsyncValidators(cd(s,n.asyncValidator)):"function"==typeof s&&i.setAsyncValidators([s]);const o=()=>i.updateValueAndValidity();gl(n._rawValidators,o),gl(n._rawAsyncValidators,o)}function t_(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function _l(i,n){const r=i.indexOf(n);r>-1&&i.splice(r,1)}const bi="VALID",ko="INVALID",Ia="PENDING",Fo="DISABLED";function r_(i){return(ps(i)?i.validators:i)||null}function Da(i){return Array.isArray(i)?ld(i):i||null}function si(i,n){return(ps(n)?n.asyncValidators:i)||null}function Fu(i){return Array.isArray(i)?ud(i):i||null}function ps(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class _d{constructor(n,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=r,this._composedValidatorFn=Da(this._rawValidators),this._composedAsyncValidatorFn=Fu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===bi}get invalid(){return this.status===ko}get pending(){return this.status==Ia}get disabled(){return this.status===Fo}get enabled(){return this.status!==Fo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=Da(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=Fu(n)}addValidators(n){this.setValidators(qi(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(qi(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Kf(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Kf(n,this._rawAsyncValidators))}hasValidator(n){return $i(this._rawValidators,n)}hasAsyncValidator(n){return $i(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Ia,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=Fo,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=bi,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bi||this.status===Ia)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fo:bi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Ia,this._hasOwnPendingAsyncValidator=!0;const r=Wf(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(!1!==r.emitEvent)}get(n){return function(i,n,r){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let s=i;return n.forEach(o=>{s=s instanceof Lo?s.controls.hasOwnProperty(o)?s.controls[o]:null:s instanceof yd&&s.at(o)||null}),s}(this,n)}getError(n,r){const s=r?this.get(r):this;return s&&s.errors?s.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Fo:this.errors?ko:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ia)?Ia:this._anyControlsHaveStatus(ko)?ko:bi}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){ps(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Lu extends _d{constructor(n=null,r,s){super(r_(r),si(s,r)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=null,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){_l(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){_l(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Lo extends _d{constructor(n,r,s){super(r_(r),si(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,r){return this.controls[n]?this.controls[n]:(this.controls[n]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(n,r,s={}){this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],r&&this.registerControl(n,r),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,r={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(Object.keys(n).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(n[s],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n={},r={}){this._forEachChild((s,o)=>{s.reset(n[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(n,r,s)=>(n[s]=r instanceof Lu?r.value:r.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(r,s)=>!!s._syncPendingControls()||r);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(r=>{const s=this.controls[r];s&&n(s,r)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const r of Object.keys(this.controls)){const s=this.controls[r];if(this.contains(r)&&n(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,r,s)=>((r.enabled||this.disabled)&&(n[s]=r.value),n))}_reduceChildren(n,r){let s=n;return this._forEachChild((o,c)=>{s=r(s,o,c)}),s}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class yd extends _d{constructor(n,r,s){super(r_(r),si(s,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,r={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(n,r,s={}){this.controls.splice(n,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(n,r,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,r={}){this._checkAllValuesPresent(n),n.forEach((s,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(n.forEach((s,o)=>{this.at(o)&&this.at(o).patchValue(s,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n=[],r={}){this._forEachChild((s,o)=>{s.reset(n[o],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(n=>n instanceof Lu?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((r,s)=>!!s._syncPendingControls()||r,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((r,s)=>{n(r,s)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(r=>r.enabled&&n(r))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((r,s)=>{if(void 0===n[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const i_={provide:ln,useExisting:(0,g.Gpc)(()=>gs)},Vu=(()=>Promise.resolve(null))();let gs=(()=>{class i extends ln{constructor(r,s){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new g.vpe,this.form=new Lo({},ld(r),ud(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Vu.then(()=>{const s=this._findContainer(r.path);r.control=s.registerControl(r.name,r.control),ba(r.control,r),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Vu.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name),_l(this._directives,r)})}addFormGroup(r){Vu.then(()=>{const s=this._findContainer(r.path),o=new Lo({});(function(i,n){pd(i,n)})(o,r),s.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Vu.then(()=>{const s=this._findContainer(r.path);s&&s.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,s){Vu.then(()=>{this.form.get(r.path).setValue(s)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,function(i,n){i._syncPendingControls(),n.forEach(r=>{const s=r.control;"submit"===s.updateOn&&s._pendingChange&&(r.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(Kn,10),g.Y36(ii,10))},i.\u0275dir=g.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){1&r&&g.NdJ("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([i_]),g.qOj]}),i})();const HE={provide:dr,useExisting:(0,g.Gpc)(()=>El)},vl=(()=>Promise.resolve(null))();let El=(()=>{class i extends dr{constructor(r,s,o,c){super(),this.control=new Lu,this._registered=!1,this.update=new g.vpe,this._parent=r,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=function(i,n){if(!n)return null;let r,s,o;return Array.isArray(n),n.forEach(c=>{c.constructor===ds?r=c:function(i){return Object.getPrototypeOf(i.constructor)===ya}(c)?s=c:o=c}),o||s||r||null}(0,c)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(i,n){if(!i.hasOwnProperty("model"))return!1;const r=i.model;return!!r.isFirstChange()||!Object.is(n,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(i,n){return[...n.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ba(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){vl.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const s=r.isDisabled.currentValue,o=""===s||s&&"false"!==s;vl.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(ln,9),g.Y36(Kn,10),g.Y36(ii,10),g.Y36(Gs,10))},i.\u0275dir=g.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([HE]),g.qOj,g.TTD]}),i})(),Vo=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=g.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const $E={provide:Gs,useExisting:(0,g.Gpc)(()=>tp),multi:!0};let tp=(()=>{class i extends ya{writeValue(r){this.setProperty("value",null==r?"":r)}registerOnChange(r){this.onChange=s=>{r(""==s?null:parseFloat(s))}}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=g.n5z(i)))(s||i)}}(),i.\u0275dir=g.lG2({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){1&r&&g.NdJ("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[g._Bn([$E]),g.qOj]}),i})(),wl=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({}),i})();const ap={provide:Gs,useExisting:(0,g.Gpc)(()=>Cl),multi:!0};let Cl=(()=>{class i extends ya{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;const s=this._getOptionId(r);null==s&&this.setProperty("selectedIndex",-1);const o=function(i,n){return null==i?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${i}: ${n}`.slice(0,50))}(s,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=s=>{this.value=this._getOptionValue(s),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(const s of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(s),r))return s;return null}_getOptionValue(r){const s=function(i){return i.split(":")[0]}(r);return this._optionMap.has(s)?this._optionMap.get(s):r}}return i.\u0275fac=function(){let n;return function(s){return(n||(n=g.n5z(i)))(s||i)}}(),i.\u0275dir=g.lG2({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){1&r&&g.NdJ("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([ap]),g.qOj]}),i})();const h_={provide:Kn,useExisting:(0,g.Gpc)(()=>Aa),multi:!0};let Aa=(()=>{class i{constructor(){this._required=!1}get required(){return this._required}set required(r){this._required=null!=r&&!1!==r&&"false"!=`${r}`,this._onChange&&this._onChange()}validate(r){return this.required?function(i){return function(i){return null==i||0===i.length}(i.value)?{required:!0}:null}(r):null}registerOnValidatorChange(r){this._onChange=r}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=g.lG2({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){2&r&&g.uIk("required",s.required?"":null)},inputs:{required:"required"},features:[g._Bn([h_])]}),i})(),g_=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({imports:[[wl]]}),i})(),Sn=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({imports:[g_]}),i})();class Td{}const Ys="*";function yp(i,n){return{type:7,name:i,definitions:n,options:{}}}function Ur(i,n=null){return{type:4,styles:n,timings:i}}function __(i,n=null){return{type:2,steps:i,options:n}}function Qs(i){return{type:6,styles:i,offset:null}}function Hn(i,n,r){return{type:0,name:i,styles:n,options:r}}function Ep(i,n,r=null){return{type:1,expr:i,animation:n,options:r}}function v_(i){Promise.resolve(null).then(i)}class Na{constructor(n=0,r=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+r}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){v_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class Cp{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let r=0,s=0,o=0;const c=this.players.length;0==c?v_(()=>this._onFinish()):this.players.forEach(h=>{h.onDone(()=>{++r==c&&this._onFinish()}),h.onDestroy(()=>{++s==c&&this._onDestroy()}),h.onStart(()=>{++o==c&&this._onStart()})}),this.totalTime=this.players.reduce((h,_)=>Math.max(h,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const r=n*this.totalTime;this.players.forEach(s=>{const o=s.totalTime?Math.min(1,r/s.totalTime):1;s.setPosition(o)})}getPosition(){const n=this.players.reduce((r,s)=>null===r||s.totalTime>r.totalTime?s:r,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}function Dd(){return"undefined"!=typeof window&&void 0!==window.document}function Il(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ys(i){switch(i.length){case 0:return new Na;case 1:return i[0];default:return new Cp(i)}}function E_(i,n,r,s,o={},c={}){const h=[],_=[];let w=-1,T=null;if(s.forEach(S=>{const R=S.offset,P=R==w,k=P&&T||{};Object.keys(S).forEach(U=>{let J=U,me=S[U];if("offset"!==U)switch(J=n.normalizePropertyName(J,h),me){case"!":me=o[U];break;case Ys:me=c[U];break;default:me=n.normalizeStyleValue(U,J,me,h)}k[J]=me}),P||_.push(k),T=k,w=R}),h.length){const S="\n - ";throw new Error(`Unable to animate due to the following errors:${S}${h.join(S)}`)}return _}function Wi(i,n,r,s){switch(n){case"start":i.onStart(()=>s(r&&Bo(r,"start",i)));break;case"done":i.onDone(()=>s(r&&Bo(r,"done",i)));break;case"destroy":i.onDestroy(()=>s(r&&Bo(r,"destroy",i)))}}function Bo(i,n,r){const s=r.totalTime,c=Dl(i.element,i.triggerName,i.fromState,i.toState,n||i.phaseName,null==s?i.totalTime:s,!!r.disabled),h=i._data;return null!=h&&(c._data=h),c}function Dl(i,n,r,s,o="",c=0,h){return{element:i,triggerName:n,fromState:r,toState:s,phaseName:o,totalTime:c,disabled:!!h}}function Dr(i,n,r){let s;return i instanceof Map?(s=i.get(n),s||i.set(n,s=r)):(s=i[n],s||(s=i[n]=r)),s}function Sd(i){const n=i.indexOf(":");return[i.substring(1,n),i.substr(n+1)]}let w_=(i,n)=>!1,Sl=(i,n)=>!1,b=(i,n,r)=>[];const v=Il();(v||"undefined"!=typeof Element)&&(w_=Dd()?(i,n)=>{for(;n&&n!==document.documentElement;){if(n===i)return!0;n=n.parentNode||n.host}return!1}:(i,n)=>i.contains(n),Sl=(()=>{if(v||Element.prototype.matches)return(i,n)=>i.matches(n);{const i=Element.prototype,n=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return n?(r,s)=>n.apply(r,[s]):Sl}})(),b=(i,n,r)=>{let s=[];if(r){const o=i.querySelectorAll(n);for(let c=0;c<o.length;c++)s.push(o[c])}else{const o=i.querySelector(n);o&&s.push(o)}return s});let x=null,F=!1;function K(i){x||(x=("undefined"!=typeof document?document.body:null)||{},F=!!x.style&&"WebkitAppearance"in x.style);let n=!0;return x.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&(n=i in x.style,!n&&F&&(n="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in x.style)),n}const Pe=Sl,We=w_,at=b;function tt(i){const n={};return Object.keys(i).forEach(r=>{const s=r.replace(/([a-z])([A-Z])/g,"$1-$2");n[s]=i[r]}),n}let Rn=(()=>{class i{validateStyleProperty(r){return K(r)}matchesElement(r,s){return Pe(r,s)}containsElement(r,s){return We(r,s)}query(r,s,o){return at(r,s,o)}computeStyle(r,s,o){return o||""}animate(r,s,o,c,h,_=[],w){return new Na(o,c)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),Ti=(()=>{class i{}return i.NOOP=new Rn,i})();const Ad="ng-enter",vs="ng-leave",Rd="ng-trigger",xa=".ng-trigger",C_="ng-animating",Ii=".ng-animating";function zi(i){if("number"==typeof i)return i;const n=i.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:Bu(parseFloat(n[1]),n[2])}function Bu(i,n){switch(n){case"s":return 1e3*i;default:return i}}function b_(i,n,r){return i.hasOwnProperty("duration")?i:function(i,n,r){let o,c=0,h="";if("string"==typeof i){const _=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return n.push(`The provided timing value "${i}" is invalid.`),{duration:0,delay:0,easing:""};o=Bu(parseFloat(_[1]),_[2]);const w=_[3];null!=w&&(c=Bu(parseFloat(w),_[4]));const T=_[5];T&&(h=T)}else o=i;if(!r){let _=!1,w=n.length;o<0&&(n.push("Duration values below 0 are not allowed for this animation step."),_=!0),c<0&&(n.push("Delay values below 0 are not allowed for this animation step."),_=!0),_&&n.splice(w,0,`The provided timing value "${i}" is invalid.`)}return{duration:o,delay:c,easing:h}}(i,n,r)}function jo(i,n={}){return Object.keys(i).forEach(r=>{n[r]=i[r]}),n}function Pa(i,n,r={}){if(n)for(let s in i)r[s]=i[s];else jo(i,r);return r}function T_(i,n,r){return r?n+":"+r+";":""}function I_(i){let n="";for(let r=0;r<i.style.length;r++){const s=i.style.item(r);n+=T_(0,s,i.style.getPropertyValue(s))}for(const r in i.style)i.style.hasOwnProperty(r)&&!r.startsWith("_")&&(n+=T_(0,mN(r),i.style[r]));i.setAttribute("style",n)}function Js(i,n,r){i.style&&(Object.keys(n).forEach(s=>{const o=iw(s);r&&!r.hasOwnProperty(s)&&(r[s]=i.style[o]),i.style[o]=n[s]}),Il()&&I_(i))}function Nd(i,n){i.style&&(Object.keys(n).forEach(r=>{const s=iw(r);i.style[s]=""}),Il()&&I_(i))}function Ho(i){return Array.isArray(i)?1==i.length?i[0]:__(i):i}const D_=new RegExp("{{\\s*(.+?)\\s*}}","g");function LT(i){let n=[];if("string"==typeof i){let r;for(;r=D_.exec(i);)n.push(r[1]);D_.lastIndex=0}return n}function xd(i,n,r){const s=i.toString(),o=s.replace(D_,(c,h)=>{let _=n[h];return n.hasOwnProperty(h)||(r.push(`Please provide a value for the animation param ${h}`),_=""),_.toString()});return o==s?i:o}function S_(i){const n=[];let r=i.next();for(;!r.done;)n.push(r.value),r=i.next();return n}const gN=/-+([a-z0-9])/g;function iw(i){return i.replace(gN,(...n)=>n[1].toUpperCase())}function mN(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function VT(i,n){return 0===i||0===n}function UT(i,n,r){const s=Object.keys(r);if(s.length&&n.length){let c=n[0],h=[];if(s.forEach(_=>{c.hasOwnProperty(_)||h.push(_),c[_]=r[_]}),h.length)for(var o=1;o<n.length;o++){let _=n[o];h.forEach(function(w){_[w]=Ip(i,w)})}}return n}function Di(i,n,r){switch(n.type){case 7:return i.visitTrigger(n,r);case 0:return i.visitState(n,r);case 1:return i.visitTransition(n,r);case 2:return i.visitSequence(n,r);case 3:return i.visitGroup(n,r);case 4:return i.visitAnimate(n,r);case 5:return i.visitKeyframes(n,r);case 6:return i.visitStyle(n,r);case 8:return i.visitReference(n,r);case 9:return i.visitAnimateChild(n,r);case 10:return i.visitAnimateRef(n,r);case 11:return i.visitQuery(n,r);case 12:return i.visitStagger(n,r);default:throw new Error(`Unable to resolve animation metadata node #${n.type}`)}}function Ip(i,n){return window.getComputedStyle(i)[n]}function sw(i,n){const r=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(s=>function(i,n,r){if(":"==i[0]){const w=function(i,n){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,s)=>parseFloat(s)>parseFloat(r);case":decrement":return(r,s)=>parseFloat(s)<parseFloat(r);default:return n.push(`The transition alias value "${i}" is not supported`),"* => *"}}(i,r);if("function"==typeof w)return void n.push(w);i=w}const s=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return r.push(`The provided transition expression "${i}" is not supported`),n;const o=s[1],c=s[2],h=s[3];n.push(Al(o,h));"<"==c[0]&&!("*"==o&&"*"==h)&&n.push(Al(h,o))}(s,r,n)):r.push(i),r}const Sp=new Set(["true","1"]),Ap=new Set(["false","0"]);function Al(i,n){const r=Sp.has(i)||Ap.has(i),s=Sp.has(n)||Ap.has(n);return(o,c)=>{let h="*"==i||i==o,_="*"==n||n==c;return!h&&r&&"boolean"==typeof o&&(h=o?Sp.has(i):Ap.has(i)),!_&&s&&"boolean"==typeof c&&(_=c?Sp.has(n):Ap.has(n)),h&&_}}const BT=new RegExp("s*:selfs*,?","g");function aw(i,n,r){return new vN(i).build(n,r)}class vN{constructor(n){this._driver=n}build(n,r){const s=new $T(r);return this._resetContextStyleTimingState(s),Di(this,Ho(n),s)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}visitTrigger(n,r){let s=r.queryCount=0,o=r.depCount=0;const c=[],h=[];return"@"==n.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(_=>{if(this._resetContextStyleTimingState(r),0==_.type){const w=_,T=w.name;T.toString().split(/\s*,\s*/).forEach(S=>{w.name=S,c.push(this.visitState(w,r))}),w.name=T}else if(1==_.type){const w=this.visitTransition(_,r);s+=w.queryCount,o+=w.depCount,h.push(w)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:c,transitions:h,queryCount:s,depCount:o,options:null}}visitState(n,r){const s=this.visitStyle(n.styles,r),o=n.options&&n.options.params||null;if(s.containsDynamicStyles){const c=new Set,h=o||{};if(s.styles.forEach(_=>{if(Np(_)){const w=_;Object.keys(w).forEach(T=>{LT(w[T]).forEach(S=>{h.hasOwnProperty(S)||c.add(S)})})}}),c.size){const _=S_(c.values());r.errors.push(`state("${n.name}", ...) must define default values for all the following style substitutions: ${_.join(", ")}`)}}return{type:0,name:n.name,style:s,options:o?{params:o}:null}}visitTransition(n,r){r.queryCount=0,r.depCount=0;const s=Di(this,Ho(n.animation),r);return{type:1,matchers:sw(n.expr,r.errors),animation:s,queryCount:r.queryCount,depCount:r.depCount,options:$o(n.options)}}visitSequence(n,r){return{type:2,steps:n.steps.map(s=>Di(this,s,r)),options:$o(n.options)}}visitGroup(n,r){const s=r.currentTime;let o=0;const c=n.steps.map(h=>{r.currentTime=s;const _=Di(this,h,r);return o=Math.max(o,r.currentTime),_});return r.currentTime=o,{type:3,steps:c,options:$o(n.options)}}visitAnimate(n,r){const s=function(i,n){let r=null;if(i.hasOwnProperty("duration"))r=i;else if("number"==typeof i)return R_(b_(i,n).duration,0,"");const s=i;if(s.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=R_(0,0,"");return c.dynamic=!0,c.strValue=s,c}return r=r||b_(s,n),R_(r.duration,r.delay,r.easing)}(n.timings,r.errors);r.currentAnimateTimings=s;let o,c=n.styles?n.styles:Qs({});if(5==c.type)o=this.visitKeyframes(c,r);else{let h=n.styles,_=!1;if(!h){_=!0;const T={};s.easing&&(T.easing=s.easing),h=Qs(T)}r.currentTime+=s.duration+s.delay;const w=this.visitStyle(h,r);w.isEmptyStep=_,o=w}return r.currentAnimateTimings=null,{type:4,timings:s,style:o,options:null}}visitStyle(n,r){const s=this._makeStyleAst(n,r);return this._validateStyleAst(s,r),s}_makeStyleAst(n,r){const s=[];Array.isArray(n.styles)?n.styles.forEach(h=>{"string"==typeof h?h==Ys?s.push(h):r.errors.push(`The provided style string value ${h} is not allowed.`):s.push(h)}):s.push(n.styles);let o=!1,c=null;return s.forEach(h=>{if(Np(h)){const _=h,w=_.easing;if(w&&(c=w,delete _.easing),!o)for(let T in _)if(_[T].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:s,easing:c,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,r){const s=r.currentAnimateTimings;let o=r.currentTime,c=r.currentTime;s&&c>0&&(c-=s.duration+s.delay),n.styles.forEach(h=>{"string"!=typeof h&&Object.keys(h).forEach(_=>{if(!this._driver.validateStyleProperty(_))return void r.errors.push(`The provided animation property "${_}" is not a supported CSS property for animations`);const w=r.collectedStyles[r.currentQuerySelector],T=w[_];let S=!0;T&&(c!=o&&c>=T.startTime&&o<=T.endTime&&(r.errors.push(`The CSS property "${_}" that exists between the times of "${T.startTime}ms" and "${T.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${o}ms"`),S=!1),c=T.startTime),S&&(w[_]={startTime:c,endTime:o}),r.options&&function(i,n,r){const s=n.params||{},o=LT(i);o.length&&o.forEach(c=>{s.hasOwnProperty(c)||r.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(h[_],r.options,r.errors)})})}visitKeyframes(n,r){const s={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),s;let c=0;const h=[];let _=!1,w=!1,T=0;const S=n.steps.map(Oe=>{const je=this._makeStyleAst(Oe,r);let $e=null!=je.offset?je.offset:function(i){if("string"==typeof i)return null;let n=null;if(Array.isArray(i))i.forEach(r=>{if(Np(r)&&r.hasOwnProperty("offset")){const s=r;n=parseFloat(s.offset),delete s.offset}});else if(Np(i)&&i.hasOwnProperty("offset")){const r=i;n=parseFloat(r.offset),delete r.offset}return n}(je.styles),Ge=0;return null!=$e&&(c++,Ge=je.offset=$e),w=w||Ge<0||Ge>1,_=_||Ge<T,T=Ge,h.push(Ge),je});w&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),_&&r.errors.push("Please ensure that all keyframe offsets are in order");const R=n.steps.length;let P=0;c>0&&c<R?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(P=1/(R-1));const k=R-1,U=r.currentTime,J=r.currentAnimateTimings,me=J.duration;return S.forEach((Oe,je)=>{const $e=P>0?je==k?1:P*je:h[je],Ge=$e*me;r.currentTime=U+J.delay+Ge,J.duration=Ge,this._validateStyleAst(Oe,r),Oe.offset=$e,s.styles.push(Oe)}),s}visitReference(n,r){return{type:8,animation:Di(this,Ho(n.animation),r),options:$o(n.options)}}visitAnimateChild(n,r){return r.depCount++,{type:9,options:$o(n.options)}}visitAnimateRef(n,r){return{type:10,animation:this.visitReference(n.animation,r),options:$o(n.options)}}visitQuery(n,r){const s=r.currentQuerySelector,o=n.options||{};r.queryCount++,r.currentQuery=n;const[c,h]=function(i){const n=!!i.split(/\s*,\s*/).find(r=>":self"==r);return n&&(i=i.replace(BT,"")),[i=i.replace(/@\*/g,xa).replace(/@\w+/g,r=>xa+"-"+r.substr(1)).replace(/:animating/g,Ii),n]}(n.selector);r.currentQuerySelector=s.length?s+" "+c:c,Dr(r.collectedStyles,r.currentQuerySelector,{});const _=Di(this,Ho(n.animation),r);return r.currentQuery=null,r.currentQuerySelector=s,{type:11,selector:c,limit:o.limit||0,optional:!!o.optional,includeSelf:h,animation:_,originalSelector:n.selector,options:$o(n.options)}}visitStagger(n,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");const s="full"===n.timings?{duration:0,delay:0,easing:"full"}:b_(n.timings,r.errors,!0);return{type:12,animation:Di(this,Ho(n.animation),r),timings:s,options:null}}}class $T{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Np(i){return!Array.isArray(i)&&"object"==typeof i}function $o(i){return i?(i=jo(i)).params&&(i.params=function(i){return i?jo(i):null}(i.params)):i={},i}function R_(i,n,r){return{duration:i,delay:n,easing:r}}function xp(i,n,r,s,o,c,h=null,_=!1){return{type:1,element:i,keyframes:n,preStyleProps:r,postStyleProps:s,duration:o,delay:c,totalTime:o+c,easing:h,subTimeline:_}}class Pp{constructor(){this._map=new Map}consume(n){let r=this._map.get(n);return r?this._map.delete(n):r=[],r}append(n,r){let s=this._map.get(n);s||this._map.set(n,s=[]),s.push(...r)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const EN=new RegExp(":enter","g"),wN=new RegExp(":leave","g");function cw(i,n,r,s,o,c={},h={},_,w,T=[]){return(new GT).buildKeyframes(i,n,r,s,o,c,h,_,w,T)}class GT{buildKeyframes(n,r,s,o,c,h,_,w,T,S=[]){T=T||new Pp;const R=new N_(n,r,T,o,c,S,[]);R.options=w,R.currentTimeline.setStyles([h],null,R.errors,w),Di(this,s,R);const P=R.timelines.filter(k=>k.containsAnimation());if(P.length&&Object.keys(_).length){const k=P[P.length-1];k.allowOnlyTimelineStyles()||k.setStyles([_],null,R.errors,w)}return P.length?P.map(k=>k.buildKeyframes()):[xp(r,[],[],[],0,0,"",!1)]}visitTrigger(n,r){}visitState(n,r){}visitTransition(n,r){}visitAnimateChild(n,r){const s=r.subInstructions.consume(r.element);if(s){const o=r.createSubContext(n.options),c=r.currentTimeline.currentTime,h=this._visitSubInstructions(s,o,o.options);c!=h&&r.transformIntoNewTimeline(h)}r.previousNode=n}visitAnimateRef(n,r){const s=r.createSubContext(n.options);s.transformIntoNewTimeline(),this.visitReference(n.animation,s),r.transformIntoNewTimeline(s.currentTimeline.currentTime),r.previousNode=n}_visitSubInstructions(n,r,s){let c=r.currentTimeline.currentTime;const h=null!=s.duration?zi(s.duration):null,_=null!=s.delay?zi(s.delay):null;return 0!==h&&n.forEach(w=>{const T=r.appendInstructionToTimeline(w,h,_);c=Math.max(c,T.duration+T.delay)}),c}visitReference(n,r){r.updateOptions(n.options,!0),Di(this,n.animation,r),r.previousNode=n}visitSequence(n,r){const s=r.subContextCount;let o=r;const c=n.options;if(c&&(c.params||c.delay)&&(o=r.createSubContext(c),o.transformIntoNewTimeline(),null!=c.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Pd);const h=zi(c.delay);o.delayNextStep(h)}n.steps.length&&(n.steps.forEach(h=>Di(this,h,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>s&&o.transformIntoNewTimeline()),r.previousNode=n}visitGroup(n,r){const s=[];let o=r.currentTimeline.currentTime;const c=n.options&&n.options.delay?zi(n.options.delay):0;n.steps.forEach(h=>{const _=r.createSubContext(n.options);c&&_.delayNextStep(c),Di(this,h,_),o=Math.max(o,_.currentTimeline.currentTime),s.push(_.currentTimeline)}),s.forEach(h=>r.currentTimeline.mergeTimelineCollectedStyles(h)),r.transformIntoNewTimeline(o),r.previousNode=n}_visitTiming(n,r){if(n.dynamic){const s=n.strValue;return b_(r.params?xd(s,r.params,r.errors):s,r.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,r){const s=r.currentAnimateTimings=this._visitTiming(n.timings,r),o=r.currentTimeline;s.delay&&(r.incrementTime(s.delay),o.snapshotCurrentStyles());const c=n.style;5==c.type?this.visitKeyframes(c,r):(r.incrementTime(s.duration),this.visitStyle(c,r),o.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=n}visitStyle(n,r){const s=r.currentTimeline,o=r.currentAnimateTimings;!o&&s.getCurrentStyleProperties().length&&s.forwardFrame();const c=o&&o.easing||n.easing;n.isEmptyStep?s.applyEmptyStep(c):s.setStyles(n.styles,c,r.errors,r.options),r.previousNode=n}visitKeyframes(n,r){const s=r.currentAnimateTimings,o=r.currentTimeline.duration,c=s.duration,_=r.createSubContext().currentTimeline;_.easing=s.easing,n.styles.forEach(w=>{_.forwardTime((w.offset||0)*c),_.setStyles(w.styles,w.easing,r.errors,r.options),_.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(_),r.transformIntoNewTimeline(o+c),r.previousNode=n}visitQuery(n,r){const s=r.currentTimeline.currentTime,o=n.options||{},c=o.delay?zi(o.delay):0;c&&(6===r.previousNode.type||0==s&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Pd);let h=s;const _=r.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,r.errors);r.currentQueryTotal=_.length;let w=null;_.forEach((T,S)=>{r.currentQueryIndex=S;const R=r.createSubContext(n.options,T);c&&R.delayNextStep(c),T===r.element&&(w=R.currentTimeline),Di(this,n.animation,R),R.currentTimeline.applyStylesToKeyframe(),h=Math.max(h,R.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(h),w&&(r.currentTimeline.mergeTimelineCollectedStyles(w),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=n}visitStagger(n,r){const s=r.parentContext,o=r.currentTimeline,c=n.timings,h=Math.abs(c.duration),_=h*(r.currentQueryTotal-1);let w=h*r.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":w=_-w;break;case"full":w=s.currentStaggerTime}const S=r.currentTimeline;w&&S.delayNextStep(w);const R=S.currentTime;Di(this,n.animation,r),r.previousNode=n,s.currentStaggerTime=o.currentTime-R+(o.startTime-s.currentTimeline.startTime)}}const Pd={};class N_{constructor(n,r,s,o,c,h,_,w){this._driver=n,this.element=r,this.subInstructions=s,this._enterClassName=o,this._leaveClassName=c,this.errors=h,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=w||new dw(this._driver,r,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,r){if(!n)return;const s=n;let o=this.options;null!=s.duration&&(o.duration=zi(s.duration)),null!=s.delay&&(o.delay=zi(s.delay));const c=s.params;if(c){let h=o.params;h||(h=this.options.params={}),Object.keys(c).forEach(_=>{(!r||!h.hasOwnProperty(_))&&(h[_]=xd(c[_],h,this.errors))})}}_copyOptions(){const n={};if(this.options){const r=this.options.params;if(r){const s=n.params={};Object.keys(r).forEach(o=>{s[o]=r[o]})}}return n}createSubContext(n=null,r,s){const o=r||this.element,c=new N_(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,s||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(n),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(n){return this.previousNode=Pd,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,r,s){const o={duration:null!=r?r:n.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+n.delay,easing:""},c=new WT(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(c),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,r,s,o,c,h){let _=[];if(o&&_.push(this.element),n.length>0){n=(n=n.replace(EN,"."+this._enterClassName)).replace(wN,"."+this._leaveClassName);let T=this._driver.query(this.element,n,1!=s);0!==s&&(T=s<0?T.slice(T.length+s,T.length):T.slice(0,s)),_.push(...T)}return!c&&0==_.length&&h.push(`\`query("${r}")\` returned zero elements. (Use \`query("${r}", { optional: true })\` if you wish to allow this.)`),_}}class dw{constructor(n,r,s,o){this._driver=n,this.element=r,this.startTime=s,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+n),r&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,r){return this.applyStylesToKeyframe(),new dw(this._driver,n,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,r){this._localTimelineStyles[n]=r,this._globalTimelineStyles[n]=r,this._styleSummary[n]={time:this.currentTime,value:r}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(r=>{this._backFill[r]=this._globalTimelineStyles[r]||Ys,this._currentKeyframe[r]=Ys}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,r,s,o){r&&(this._previousKeyframe.easing=r);const c=o&&o.params||{},h=function(i,n){const r={};let s;return i.forEach(o=>{"*"===o?(s=s||Object.keys(n),s.forEach(c=>{r[c]=Ys})):Pa(o,!1,r)}),r}(n,this._globalTimelineStyles);Object.keys(h).forEach(_=>{const w=xd(h[_],c,s);this._pendingStyles[_]=w,this._localTimelineStyles.hasOwnProperty(_)||(this._backFill[_]=this._globalTimelineStyles.hasOwnProperty(_)?this._globalTimelineStyles[_]:Ys),this._updateStyle(_,w)})}applyStylesToKeyframe(){const n=this._pendingStyles,r=Object.keys(n);0!=r.length&&(this._pendingStyles={},r.forEach(s=>{this._currentKeyframe[s]=n[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(n=>{const r=this._localTimelineStyles[n];this._pendingStyles[n]=r,this._updateStyle(n,r)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let r in this._currentKeyframe)n.push(r);return n}mergeTimelineCollectedStyles(n){Object.keys(n._styleSummary).forEach(r=>{const s=this._styleSummary[r],o=n._styleSummary[r];(!s||o.time>s.time)&&this._updateStyle(r,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,r=new Set,s=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((_,w)=>{const T=Pa(_,!0);Object.keys(T).forEach(S=>{const R=T[S];"!"==R?n.add(S):R==Ys&&r.add(S)}),s||(T.offset=w/this.duration),o.push(T)});const c=n.size?S_(n.values()):[],h=r.size?S_(r.values()):[];if(s){const _=o[0],w=jo(_);_.offset=0,w.offset=1,o=[_,w]}return xp(this.element,o,c,h,this.duration,this.startTime,this.easing,!1)}}class WT extends dw{constructor(n,r,s,o,c,h,_=!1){super(n,r,h.delay),this.keyframes=s,this.preStyleProps=o,this.postStyleProps=c,this._stretchStartingKeyframe=_,this.timings={duration:h.duration,delay:h.delay,easing:h.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:r,duration:s,easing:o}=this.timings;if(this._stretchStartingKeyframe&&r){const c=[],h=s+r,_=r/h,w=Pa(n[0],!1);w.offset=0,c.push(w);const T=Pa(n[0],!1);T.offset=ZT(_),c.push(T);const S=n.length-1;for(let R=1;R<=S;R++){let P=Pa(n[R],!1);P.offset=ZT((r+P.offset*s)/h),c.push(P)}s=h,r=0,o="",n=c}return xp(this.element,n,this.preStyleProps,this.postStyleProps,s,r,o,!0)}}function ZT(i,n=3){const r=Math.pow(10,n-1);return Math.round(i*r)/r}class hw{}class CN extends hw{normalizePropertyName(n,r){return iw(n)}normalizeStyleValue(n,r,s,o){let c="";const h=s.toString().trim();if(TN[r]&&0!==s&&"0"!==s)if("number"==typeof s)c="px";else{const _=s.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&o.push(`Please provide a CSS unit value for ${n}:${s}`)}return h+c}}const TN=(()=>function(i){const n={};return i.forEach(r=>n[r]=!0),n}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function KT(i,n,r,s,o,c,h,_,w,T,S,R,P){return{type:0,element:i,triggerName:n,isRemovalTransition:o,fromState:r,fromStyles:c,toState:s,toStyles:h,timelines:_,queriedElements:w,preStyleProps:T,postStyleProps:S,totalTime:R,errors:P}}const fw={};class pw{constructor(n,r,s){this._triggerName=n,this.ast=r,this._stateStyles=s}match(n,r,s,o){return function(i,n,r,s,o){return i.some(c=>c(n,r,s,o))}(this.ast.matchers,n,r,s,o)}buildStyles(n,r,s){const o=this._stateStyles["*"],c=this._stateStyles[n],h=o?o.buildStyles(r,s):{};return c?c.buildStyles(r,s):h}build(n,r,s,o,c,h,_,w,T,S){const R=[],P=this.ast.options&&this.ast.options.params||fw,U=this.buildStyles(s,_&&_.params||fw,R),J=w&&w.params||fw,me=this.buildStyles(o,J,R),Oe=new Set,je=new Map,$e=new Map,Ge="void"===o,un={params:Object.assign(Object.assign({},P),J)},or=S?[]:cw(n,r,this.ast.animation,c,h,U,me,un,T,R);let Mr=0;if(or.forEach(vo=>{Mr=Math.max(vo.duration+vo.delay,Mr)}),R.length)return KT(r,this._triggerName,s,o,Ge,U,me,[],[],je,$e,Mr,R);or.forEach(vo=>{const Uc=vo.element,EB=Dr(je,Uc,{});vo.preStyleProps.forEach(Im=>EB[Im]=!0);const lT=Dr($e,Uc,{});vo.postStyleProps.forEach(Im=>lT[Im]=!0),Uc!==r&&Oe.add(Uc)});const is=S_(Oe.values());return KT(r,this._triggerName,s,o,Ge,U,me,or,is,je,$e,Mr)}}class SN{constructor(n,r,s){this.styles=n,this.defaultParams=r,this.normalizer=s}buildStyles(n,r){const s={},o=jo(this.defaultParams);return Object.keys(n).forEach(c=>{const h=n[c];null!=h&&(o[c]=h)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const h=c;Object.keys(h).forEach(_=>{let w=h[_];w.length>1&&(w=xd(w,o,r));const T=this.normalizer.normalizePropertyName(_,r);w=this.normalizer.normalizeStyleValue(_,T,w,r),s[T]=w})}}),s}}class Et{constructor(n,r,s){this.name=n,this.ast=r,this._normalizer=s,this.transitionFactories=[],this.states={},r.states.forEach(o=>{this.states[o.name]=new SN(o.style,o.options&&o.options.params||{},s)}),gw(this.states,"true","1"),gw(this.states,"false","0"),r.transitions.forEach(o=>{this.transitionFactories.push(new pw(n,o,this.states))}),this.fallbackTransition=function(i,n,r){return new pw(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(h,_)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,r,s,o){return this.transitionFactories.find(h=>h.match(n,r,s,o))||null}matchStyles(n,r,s){return this.fallbackTransition.buildStyles(n,r,s)}}function gw(i,n,r){i.hasOwnProperty(n)?i.hasOwnProperty(r)||(i[r]=i[n]):i.hasOwnProperty(r)&&(i[n]=i[r])}const x_=new Pp;class Xs{constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(n,r){const s=[],o=aw(this._driver,r,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[n]=o}_buildPlayer(n,r,s){const o=n.element,c=E_(0,this._normalizer,0,n.keyframes,r,s);return this._driver.animate(o,c,n.duration,n.delay,n.easing,[],!0)}create(n,r,s={}){const o=[],c=this._animations[n];let h;const _=new Map;if(c?(h=cw(this._driver,r,c,Ad,vs,{},{},s,x_,o),h.forEach(S=>{const R=Dr(_,S.element,{});S.postStyleProps.forEach(P=>R[P]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),h=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);_.forEach((S,R)=>{Object.keys(S).forEach(P=>{S[P]=this._driver.computeStyle(R,P,Ys)})});const T=ys(h.map(S=>{const R=_.get(S.element);return this._buildPlayer(S,{},R)}));return this._playersById[n]=T,T.onDestroy(()=>this.destroy(n)),this.players.push(T),T}destroy(n){const r=this._getPlayer(n);r.destroy(),delete this._playersById[n];const s=this.players.indexOf(r);s>=0&&this.players.splice(s,1)}_getPlayer(n){const r=this._playersById[n];if(!r)throw new Error(`Unable to find the timeline player referenced by ${n}`);return r}listen(n,r,s,o){const c=Dl(r,"","","");return Wi(this._getPlayer(n),s,c,o),()=>{}}command(n,r,s,o){if("register"==s)return void this.register(n,o[0]);if("create"==s)return void this.create(n,r,o[0]||{});const c=this._getPlayer(n);switch(s){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}}const mw="ng-animate-queued",P_="ng-animate-disabled",Go=".ng-animate-disabled",yw=[],NN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},JT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},eo="__ng_removed";class to{constructor(n,r=""){this.namespaceId=r;const s=n&&n.hasOwnProperty("value");if(this.value=null!=(i=s?n.value:n)?i:null,s){const c=jo(n);delete c.value,this.options=c}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const r=n.params;if(r){const s=this.options.params;Object.keys(r).forEach(o=>{null==s[o]&&(s[o]=r[o])})}}}const Rl="void",Od=new to(Rl);class vw{constructor(n,r,s){this.id=n,this.hostElement=r,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,no(r,this._hostClassName)}listen(n,r,s,o){if(!this._triggers.hasOwnProperty(r))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${r}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${r}" because the provided event is undefined!`);if("start"!=(i=s)&&"done"!=i)throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${r}" is not supported!`);var i;const c=Dr(this._elementListeners,n,[]),h={name:r,phase:s,callback:o};c.push(h);const _=Dr(this._engine.statesByElement,n,{});return _.hasOwnProperty(r)||(no(n,Rd),no(n,Rd+"-"+r),_[r]=Od),()=>{this._engine.afterFlush(()=>{const w=c.indexOf(h);w>=0&&c.splice(w,1),this._triggers[r]||delete _[r]})}}register(n,r){return!this._triggers[n]&&(this._triggers[n]=r,!0)}_getTrigger(n){const r=this._triggers[n];if(!r)throw new Error(`The provided animation trigger "${n}" has not been registered!`);return r}trigger(n,r,s,o=!0){const c=this._getTrigger(r),h=new Ew(this.id,r,n);let _=this._engine.statesByElement.get(n);_||(no(n,Rd),no(n,Rd+"-"+r),this._engine.statesByElement.set(n,_={}));let w=_[r];const T=new to(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&w&&T.absorbOptions(w.options),_[r]=T,w||(w=Od),T.value!==Rl&&w.value===T.value){if(!function(i,n){const r=Object.keys(i),s=Object.keys(n);if(r.length!=s.length)return!1;for(let o=0;o<r.length;o++){const c=r[o];if(!n.hasOwnProperty(c)||i[c]!==n[c])return!1}return!0}(w.params,T.params)){const J=[],me=c.matchStyles(w.value,w.params,J),Oe=c.matchStyles(T.value,T.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{Nd(n,me),Js(n,Oe)})}return}const P=Dr(this._engine.playersByElement,n,[]);P.forEach(J=>{J.namespaceId==this.id&&J.triggerName==r&&J.queued&&J.destroy()});let k=c.matchTransition(w.value,T.value,n,T.params),U=!1;if(!k){if(!o)return;k=c.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:r,transition:k,fromState:w,toState:T,player:h,isFallbackTransition:U}),U||(no(n,mw),h.onStart(()=>{Mp(n,mw)})),h.onDone(()=>{let J=this.players.indexOf(h);J>=0&&this.players.splice(J,1);const me=this._engine.playersByElement.get(n);if(me){let Oe=me.indexOf(h);Oe>=0&&me.splice(Oe,1)}}),this.players.push(h),P.push(h),h}deregister(n){delete this._triggers[n],this._engine.statesByElement.forEach((r,s)=>{delete r[n]}),this._elementListeners.forEach((r,s)=>{this._elementListeners.set(s,r.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const r=this._engine.playersByElement.get(n);r&&(r.forEach(s=>s.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,r){const s=this._engine.driver.query(n,xa,!0);s.forEach(o=>{if(o[eo])return;const c=this._engine.fetchNamespacesByElement(o);c.size?c.forEach(h=>h.triggerLeaveAnimation(o,r,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,r,s,o){const c=this._engine.statesByElement.get(n);if(c){const h=[];if(Object.keys(c).forEach(_=>{if(this._triggers[_]){const w=this.trigger(n,_,Rl,o);w&&h.push(w)}}),h.length)return this._engine.markElementAsRemoved(this.id,n,!0,r),s&&ys(h).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const r=this._elementListeners.get(n),s=this._engine.statesByElement.get(n);if(r&&s){const o=new Set;r.forEach(c=>{const h=c.name;if(o.has(h))return;o.add(h);const w=this._triggers[h].fallbackTransition,T=s[h]||Od,S=new to(Rl),R=new Ew(this.id,h,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:h,transition:w,fromState:T,toState:S,player:R,isFallbackTransition:!0})})}}removeNode(n,r){const s=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,r),this.triggerLeaveAnimation(n,r,!0))return;let o=!1;if(s.totalAnimations){const c=s.players.length?s.playersByQueriedElement.get(n):[];if(c&&c.length)o=!0;else{let h=n;for(;h=h.parentNode;)if(s.statesByElement.get(h)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)s.markElementAsRemoved(this.id,n,!1,r);else{const c=n[eo];(!c||c===NN)&&(s.afterFlush(()=>this.clearElementCache(n)),s.destroyInnerAnimations(n),s._onRemovalComplete(n,r))}}insertNode(n,r){no(n,this._hostClassName)}drainQueuedTransitions(n){const r=[];return this._queue.forEach(s=>{const o=s.player;if(o.destroyed)return;const c=s.element,h=this._elementListeners.get(c);h&&h.forEach(_=>{if(_.name==s.triggerName){const w=Dl(c,s.triggerName,s.fromState.value,s.toState.value);w._data=n,Wi(s.player,_.phase,w,_.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):r.push(s)}),this._queue=[],r.sort((s,o)=>{const c=s.transition.ast.depCount,h=o.transition.ast.depCount;return 0==c||0==h?c-h:this._engine.driver.containsElement(s.element,o.element)?1:-1})}destroy(n){this.players.forEach(r=>r.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let r=!1;return this._elementListeners.has(n)&&(r=!0),r=!!this._queue.find(s=>s.element===n)||r,r}}class Jk{constructor(n,r,s){this.bodyNode=n,this.driver=r,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,c)=>{}}_onRemovalComplete(n,r){this.onRemovalComplete(n,r)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(r=>{r.players.forEach(s=>{s.queued&&n.push(s)})}),n}createNamespace(n,r){const s=new vw(n,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(s,r):(this.newHostElements.set(r,s),this.collectEnterElement(r)),this._namespaceLookup[n]=s}_balanceNamespaceList(n,r){const s=this._namespaceList.length-1;if(s>=0){let o=!1;for(let c=s;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,r)){this._namespaceList.splice(c+1,0,n),o=!0;break}o||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(r,n),n}register(n,r){let s=this._namespaceLookup[n];return s||(s=this.createNamespace(n,r)),s}registerTrigger(n,r,s){let o=this._namespaceLookup[n];o&&o.register(r,s)&&this.totalAnimations++}destroy(n,r){if(!n)return;const s=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[n];const o=this._namespaceList.indexOf(s);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>s.destroy(r))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const r=new Set,s=this.statesByElement.get(n);if(s){const o=Object.keys(s);for(let c=0;c<o.length;c++){const h=s[o[c]].namespaceId;if(h){const _=this._fetchNamespace(h);_&&r.add(_)}}}return r}trigger(n,r,s,o){if(O_(r)){const c=this._fetchNamespace(n);if(c)return c.trigger(r,s,o),!0}return!1}insertNode(n,r,s,o){if(!O_(r))return;const c=r[eo];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const h=this.collectedLeaveElements.indexOf(r);h>=0&&this.collectedLeaveElements.splice(h,1)}if(n){const h=this._fetchNamespace(n);h&&h.insertNode(r,s)}o&&this.collectEnterElement(r)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,r){r?this.disabledNodes.has(n)||(this.disabledNodes.add(n),no(n,P_)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Mp(n,P_))}removeNode(n,r,s,o){if(O_(r)){const c=n?this._fetchNamespace(n):null;if(c?c.removeNode(r,o):this.markElementAsRemoved(n,r,!1,o),s){const h=this.namespacesByHostElement.get(r);h&&h.id!==n&&h.removeNode(r,o)}}else this._onRemovalComplete(r,o)}markElementAsRemoved(n,r,s,o){this.collectedLeaveElements.push(r),r[eo]={namespaceId:n,setForRemoval:o,hasAnimation:s,removedBeforeQueried:!1}}listen(n,r,s,o,c){return O_(r)?this._fetchNamespace(n).listen(r,s,o,c):()=>{}}_buildInstruction(n,r,s,o,c){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,s,o,n.fromState.options,n.toState.options,r,c)}destroyInnerAnimations(n){let r=this.driver.query(n,xa,!0);r.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(r=this.driver.query(n,Ii,!0),r.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(n){const r=this.playersByElement.get(n);r&&r.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(n){const r=this.playersByQueriedElement.get(n);r&&r.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return ys(this.players).onDone(()=>n());n()})}processLeaveNode(n){const r=n[eo];if(r&&r.setForRemoval){if(n[eo]=NN,r.namespaceId){this.destroyInnerAnimations(n);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(n)}this._onRemovalComplete(n,r.setForRemoval)}this.driver.matchesElement(n,Go)&&this.markElementAsDisabled(n,!1),this.driver.query(n,Go,!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(n=-1){let r=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,o)=>this._balanceNamespaceList(s,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)no(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{r=this._flushAnimations(s,n)}finally{for(let o=0;o<s.length;o++)s[o]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],r.length?ys(r).onDone(()=>{s.forEach(o=>o())}):s.forEach(o=>o())}}reportError(n){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${n.join("\n")}`)}_flushAnimations(n,r){const s=new Pp,o=[],c=new Map,h=[],_=new Map,w=new Map,T=new Map,S=new Set;this.disabledNodes.forEach(Qe=>{S.add(Qe);const ct=this.driver.query(Qe,".ng-animate-queued",!0);for(let It=0;It<ct.length;It++)S.add(ct[It])});const R=this.bodyNode,P=Array.from(this.statesByElement.keys()),k=eI(P,this.collectedEnterElements),U=new Map;let J=0;k.forEach((Qe,ct)=>{const It=Ad+J++;U.set(ct,It),Qe.forEach(Jt=>no(Jt,It))});const me=[],Oe=new Set,je=new Set;for(let Qe=0;Qe<this.collectedLeaveElements.length;Qe++){const ct=this.collectedLeaveElements[Qe],It=ct[eo];It&&It.setForRemoval&&(me.push(ct),Oe.add(ct),It.hasAnimation?this.driver.query(ct,".ng-star-inserted",!0).forEach(Jt=>Oe.add(Jt)):je.add(ct))}const $e=new Map,Ge=eI(P,Array.from(Oe));Ge.forEach((Qe,ct)=>{const It=vs+J++;$e.set(ct,It),Qe.forEach(Jt=>no(Jt,It))}),n.push(()=>{k.forEach((Qe,ct)=>{const It=U.get(ct);Qe.forEach(Jt=>Mp(Jt,It))}),Ge.forEach((Qe,ct)=>{const It=$e.get(ct);Qe.forEach(Jt=>Mp(Jt,It))}),me.forEach(Qe=>{this.processLeaveNode(Qe)})});const un=[],or=[];for(let Qe=this._namespaceList.length-1;Qe>=0;Qe--)this._namespaceList[Qe].drainQueuedTransitions(r).forEach(It=>{const Jt=It.player,Qr=It.element;if(un.push(Jt),this.collectedEnterElements.length){const hu=Qr[eo];if(hu&&hu.setForMove)return void Jt.destroy()}const du=!R||!this.driver.containsElement(R,Qr),Eo=$e.get(Qr),_f=U.get(Qr),ar=this._buildInstruction(It,s,_f,Eo,du);if(ar.errors&&ar.errors.length)or.push(ar);else{if(du)return Jt.onStart(()=>Nd(Qr,ar.fromStyles)),Jt.onDestroy(()=>Js(Qr,ar.toStyles)),void o.push(Jt);if(It.isFallbackTransition)return Jt.onStart(()=>Nd(Qr,ar.fromStyles)),Jt.onDestroy(()=>Js(Qr,ar.toStyles)),void o.push(Jt);ar.timelines.forEach(hu=>hu.stretchStartingKeyframe=!0),s.append(Qr,ar.timelines),h.push({instruction:ar,player:Jt,element:Qr}),ar.queriedElements.forEach(hu=>Dr(_,hu,[]).push(Jt)),ar.preStyleProps.forEach((hu,uT)=>{const lN=Object.keys(hu);if(lN.length){let Dm=w.get(uT);Dm||w.set(uT,Dm=new Set),lN.forEach(Kk=>Dm.add(Kk))}}),ar.postStyleProps.forEach((hu,uT)=>{const lN=Object.keys(hu);let Dm=T.get(uT);Dm||T.set(uT,Dm=new Set),lN.forEach(Kk=>Dm.add(Kk))})}});if(or.length){const Qe=[];or.forEach(ct=>{Qe.push(`@${ct.triggerName} has failed due to:\n`),ct.errors.forEach(It=>Qe.push(`- ${It}\n`))}),un.forEach(ct=>ct.destroy()),this.reportError(Qe)}const Mr=new Map,is=new Map;h.forEach(Qe=>{const ct=Qe.element;s.has(ct)&&(is.set(ct,ct),this._beforeAnimationBuild(Qe.player.namespaceId,Qe.instruction,Mr))}),o.forEach(Qe=>{const ct=Qe.element;this._getPreviousPlayers(ct,!1,Qe.namespaceId,Qe.triggerName,null).forEach(Jt=>{Dr(Mr,ct,[]).push(Jt),Jt.destroy()})});const vo=me.filter(Qe=>PN(Qe,w,T)),Uc=new Map;Cw(Uc,this.driver,je,T,Ys).forEach(Qe=>{PN(Qe,w,T)&&vo.push(Qe)});const lT=new Map;k.forEach((Qe,ct)=>{Cw(lT,this.driver,new Set(Qe),w,"!")}),vo.forEach(Qe=>{const ct=Uc.get(Qe),It=lT.get(Qe);Uc.set(Qe,Object.assign(Object.assign({},ct),It))});const Im=[],wB=[],CB={};h.forEach(Qe=>{const{element:ct,player:It,instruction:Jt}=Qe;if(s.has(ct)){if(S.has(ct))return It.onDestroy(()=>Js(ct,Jt.toStyles)),It.disabled=!0,It.overrideTotalTime(Jt.totalTime),void o.push(It);let Qr=CB;if(is.size>1){let Eo=ct;const _f=[];for(;Eo=Eo.parentNode;){const ar=is.get(Eo);if(ar){Qr=ar;break}_f.push(Eo)}_f.forEach(ar=>is.set(ar,Qr))}const du=this._buildAnimation(It.namespaceId,Jt,Mr,c,lT,Uc);if(It.setRealPlayer(du),Qr===CB)Im.push(It);else{const Eo=this.playersByElement.get(Qr);Eo&&Eo.length&&(It.parentPlayer=ys(Eo)),o.push(It)}}else Nd(ct,Jt.fromStyles),It.onDestroy(()=>Js(ct,Jt.toStyles)),wB.push(It),S.has(ct)&&o.push(It)}),wB.forEach(Qe=>{const ct=c.get(Qe.element);if(ct&&ct.length){const It=ys(ct);Qe.setRealPlayer(It)}}),o.forEach(Qe=>{Qe.parentPlayer?Qe.syncPlayerEvents(Qe.parentPlayer):Qe.destroy()});for(let Qe=0;Qe<me.length;Qe++){const ct=me[Qe],It=ct[eo];if(Mp(ct,vs),It&&It.hasAnimation)continue;let Jt=[];if(_.size){let du=_.get(ct);du&&du.length&&Jt.push(...du);let Eo=this.driver.query(ct,Ii,!0);for(let _f=0;_f<Eo.length;_f++){let ar=_.get(Eo[_f]);ar&&ar.length&&Jt.push(...ar)}}const Qr=Jt.filter(du=>!du.destroyed);Qr.length?tF(this,ct,Qr):this.processLeaveNode(ct)}return me.length=0,Im.forEach(Qe=>{this.players.push(Qe),Qe.onDone(()=>{Qe.destroy();const ct=this.players.indexOf(Qe);this.players.splice(ct,1)}),Qe.play()}),Im}elementContainsData(n,r){let s=!1;const o=r[eo];return o&&o.setForRemoval&&(s=!0),this.playersByElement.has(r)&&(s=!0),this.playersByQueriedElement.has(r)&&(s=!0),this.statesByElement.has(r)&&(s=!0),this._fetchNamespace(n).elementContainsData(r)||s}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,r,s,o,c){let h=[];if(r){const _=this.playersByQueriedElement.get(n);_&&(h=_)}else{const _=this.playersByElement.get(n);if(_){const w=!c||c==Rl;_.forEach(T=>{T.queued||!w&&T.triggerName!=o||h.push(T)})}}return(s||o)&&(h=h.filter(_=>!(s&&s!=_.namespaceId||o&&o!=_.triggerName))),h}_beforeAnimationBuild(n,r,s){const c=r.element,h=r.isRemovalTransition?void 0:n,_=r.isRemovalTransition?void 0:r.triggerName;for(const w of r.timelines){const T=w.element,S=T!==c,R=Dr(s,T,[]);this._getPreviousPlayers(T,S,h,_,r.toState).forEach(k=>{const U=k.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),k.destroy(),R.push(k)})}Nd(c,r.fromStyles)}_buildAnimation(n,r,s,o,c,h){const _=r.triggerName,w=r.element,T=[],S=new Set,R=new Set,P=r.timelines.map(U=>{const J=U.element;S.add(J);const me=J[eo];if(me&&me.removedBeforeQueried)return new Na(U.duration,U.delay);const Oe=J!==w,je=function(i){const n=[];return xN(i,n),n}((s.get(J)||yw).map(Mr=>Mr.getRealPlayer())).filter(Mr=>!!Mr.element&&Mr.element===J),$e=c.get(J),Ge=h.get(J),un=E_(0,this._normalizer,0,U.keyframes,$e,Ge),or=this._buildPlayer(U,un,je);if(U.subTimeline&&o&&R.add(J),Oe){const Mr=new Ew(n,_,J);Mr.setRealPlayer(or),T.push(Mr)}return or});T.forEach(U=>{Dr(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function(i,n,r){let s;if(i instanceof Map){if(s=i.get(n),s){if(s.length){const o=s.indexOf(r);s.splice(o,1)}0==s.length&&i.delete(n)}}else if(s=i[n],s){if(s.length){const o=s.indexOf(r);s.splice(o,1)}0==s.length&&delete i[n]}return s}(this.playersByQueriedElement,U.element,U))}),S.forEach(U=>no(U,C_));const k=ys(P);return k.onDestroy(()=>{S.forEach(U=>Mp(U,C_)),Js(w,r.toStyles)}),R.forEach(U=>{Dr(o,U,[]).push(k)}),k}_buildPlayer(n,r,s){return r.length>0?this.driver.animate(n.element,r,n.duration,n.delay,n.easing,s):new Na(n.duration,n.delay)}}class Ew{constructor(n,r,s){this.namespaceId=n,this.triggerName=r,this.element=s,this._player=new Na,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(r=>{this._queuedCallbacks[r].forEach(s=>Wi(n,r,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const r=this._player;r.triggerCallback&&n.onStart(()=>r.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,r){Dr(this._queuedCallbacks,n,[]).push(r)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const r=this._player;r.triggerCallback&&r.triggerCallback(n)}}function O_(i){return i&&1===i.nodeType}function ww(i,n){const r=i.style.display;return i.style.display=null!=n?n:"none",r}function Cw(i,n,r,s,o){const c=[];r.forEach(w=>c.push(ww(w)));const h=[];s.forEach((w,T)=>{const S={};w.forEach(R=>{const P=S[R]=n.computeStyle(T,R,o);(!P||0==P.length)&&(T[eo]=JT,h.push(T))}),i.set(T,S)});let _=0;return r.forEach(w=>ww(w,c[_++])),h}function eI(i,n){const r=new Map;if(i.forEach(_=>r.set(_,[])),0==n.length)return r;const o=new Set(n),c=new Map;function h(_){if(!_)return 1;let w=c.get(_);if(w)return w;const T=_.parentNode;return w=r.has(T)?T:o.has(T)?1:h(T),c.set(_,w),w}return n.forEach(_=>{const w=h(_);1!==w&&r.get(w).push(_)}),r}const Md="$$classes";function no(i,n){if(i.classList)i.classList.add(n);else{let r=i[Md];r||(r=i[Md]={}),r[n]=!0}}function Mp(i,n){if(i.classList)i.classList.remove(n);else{let r=i[Md];r&&delete r[n]}}function tF(i,n,r){ys(r).onDone(()=>i.processLeaveNode(n))}function xN(i,n){for(let r=0;r<i.length;r++){const s=i[r];s instanceof Cp?xN(s.players,n):n.push(s)}}function PN(i,n,r){const s=r.get(i);if(!s)return!1;let o=n.get(i);return o?s.forEach(c=>o.add(c)):n.set(i,s),r.delete(i),!0}class bw{constructor(n,r,s){this.bodyNode=n,this._driver=r,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(o,c)=>{},this._transitionEngine=new Jk(n,r,s),this._timelineEngine=new Xs(n,r,s),this._transitionEngine.onRemovalComplete=(o,c)=>this.onRemovalComplete(o,c)}registerTrigger(n,r,s,o,c){const h=n+"-"+o;let _=this._triggerCache[h];if(!_){const w=[],T=aw(this._driver,c,w);if(w.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${w.join("\n - ")}`);_=function(i,n,r){return new Et(i,n,r)}(o,T,this._normalizer),this._triggerCache[h]=_}this._transitionEngine.registerTrigger(r,o,_)}register(n,r){this._transitionEngine.register(n,r)}destroy(n,r){this._transitionEngine.destroy(n,r)}onInsert(n,r,s,o){this._transitionEngine.insertNode(n,r,s,o)}onRemove(n,r,s,o){this._transitionEngine.removeNode(n,r,o||!1,s)}disableAnimations(n,r){this._transitionEngine.markElementAsDisabled(n,r)}process(n,r,s,o){if("@"==s.charAt(0)){const[c,h]=Sd(s);this._timelineEngine.command(c,r,h,o)}else this._transitionEngine.trigger(n,r,s,o)}listen(n,r,s,o,c){if("@"==s.charAt(0)){const[h,_]=Sd(s);return this._timelineEngine.listen(h,r,_,c)}return this._transitionEngine.listen(n,r,s,o,c)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ON(i,n){let r=null,s=null;return Array.isArray(n)&&n.length?(r=Wo(n[0]),n.length>1&&(s=Wo(n[n.length-1]))):n&&(r=Wo(n)),r||s?new iF(i,r,s):null}let iF=(()=>{class i{constructor(r,s,o){this._element=r,this._startStyles=s,this._endStyles=o,this._state=0;let c=i.initialStylesByElement.get(r);c||i.initialStylesByElement.set(r,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&Js(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Js(this._element,this._initialStyles),this._endStyles&&(Js(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Nd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nd(this._element,this._endStyles),this._endStyles=null),Js(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function Wo(i){let n=null;const r=Object.keys(i);for(let s=0;s<r.length;s++){const o=r[s];Tw(o)&&(n=n||{},n[o]=i[o])}return n}function Tw(i){return"display"===i||"position"===i}const Iw="animation",M_="animationend";class Dw{constructor(n,r,s,o,c,h,_){this._element=n,this._name=r,this._duration=s,this._delay=o,this._easing=c,this._fillMode=h,this._onDoneFn=_,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=w=>this._handleCallback(w)}apply(){(function(i,n){const r=L_(i,"").trim();let s=0;r.length&&(function(i,n){let r=0;for(let s=0;s<i.length;s++)","===i.charAt(s)&&r++;return r}(r)+1,n=`${r}, ${n}`),F_(i,"",n)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),k_(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){nI(this._element,this._name,"paused")}resume(){nI(this._element,this._name,"running")}setPosition(n){const r=iI(this._element,this._name);this._position=n*this._duration,F_(this._element,"Delay",`-${this._position}ms`,r)}getPosition(){return this._position}_handleCallback(n){const r=n._ngTestManualTimestamp||Date.now(),s=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(r-this._startTime,0)>=this._delay&&s>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),k_(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,n){const s=L_(i,"").split(","),o=sI(s,n);o>=0&&(s.splice(o,1),F_(i,"",s.join(",")))}(this._element,this._name))}}function nI(i,n,r){F_(i,"PlayState",r,iI(i,n))}function iI(i,n){const r=L_(i,"");return r.indexOf(",")>0?sI(r.split(","),n):sI([r],n)}function sI(i,n){for(let r=0;r<i.length;r++)if(i[r].indexOf(n)>=0)return r;return-1}function k_(i,n,r){r?i.removeEventListener(M_,n):i.addEventListener(M_,n)}function F_(i,n,r,s){const o=Iw+n;if(null!=s){const c=i.style[o];if(c.length){const h=c.split(",");h[s]=r,r=h.join(",")}}i.style[o]=r}function L_(i,n){return i.style[Iw+n]||""}class ju{constructor(n,r,s,o,c,h,_,w){this.element=n,this.keyframes=r,this.animationName=s,this._duration=o,this._delay=c,this._finalStyles=_,this._specialStyles=w,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=h||"linear",this.totalTime=o+c,this._buildStyler()}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(n=>n()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(n){this._styler.setPosition(n)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Dw(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}beforeDestroy(){this.init();const n={};if(this.hasStarted()){const r=this._state>=3;Object.keys(this._finalStyles).forEach(s=>{"offset"!=s&&(n[s]=r?this._finalStyles[s]:Ip(this.element,s))})}this.currentSnapshot=n}}class Sw extends Na{constructor(n,r){super(),this.element=n,this._startingStyles={},this.__initialized=!1,this._styles=tt(r)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(n=>{this._startingStyles[n]=this.element.style[n]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(n=>this.element.style.setProperty(n,this._styles[n])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(n=>{const r=this._startingStyles[n];r?this.element.style.setProperty(n,r):this.element.style.removeProperty(n)}),this._startingStyles=null,super.destroy())}}class Hu{constructor(){this._count=0}validateStyleProperty(n){return K(n)}matchesElement(n,r){return Pe(n,r)}containsElement(n,r){return We(n,r)}query(n,r,s){return at(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}buildKeyframeElement(n,r,s){s=s.map(_=>tt(_));let o=`@keyframes ${r} {\n`,c="";s.forEach(_=>{c=" ";const w=parseFloat(_.offset);o+=`${c}${100*w}% {\n`,c+=" ",Object.keys(_).forEach(T=>{const S=_[T];switch(T){case"offset":return;case"easing":return void(S&&(o+=`${c}animation-timing-function: ${S};\n`));default:return void(o+=`${c}${T}: ${S};\n`)}}),o+=`${c}}\n`}),o+="}\n";const h=document.createElement("style");return h.textContent=o,h}animate(n,r,s,o,c,h=[],_){const w=h.filter(me=>me instanceof ju),T={};VT(s,o)&&w.forEach(me=>{let Oe=me.currentSnapshot;Object.keys(Oe).forEach(je=>T[je]=Oe[je])});const S=function(i){let n={};return i&&(Array.isArray(i)?i:[i]).forEach(s=>{Object.keys(s).forEach(o=>{"offset"==o||"easing"==o||(n[o]=s[o])})}),n}(r=UT(n,r,T));if(0==s)return new Sw(n,S);const R="gen_css_kf_"+this._count++,P=this.buildKeyframeElement(n,R,r);(function(i){var n;const r=null===(n=i.getRootNode)||void 0===n?void 0:n.call(i);return"undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot?r:document.head})(n).appendChild(P);const U=ON(n,r),J=new ju(n,r,R,s,o,c,S,U);return J.onDestroy(()=>{var i;(i=P).parentNode.removeChild(i)}),J}}class Aw{constructor(n,r,s,o){this.element=n,this.keyframes=r,this.options=s,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(n,r,s){return n.animate(r,s)}onStart(n){this._onStartFns.push(n)}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(r=>{"offset"!=r&&(n[r]=this._finished?this._finalKeyframe[r]:Ip(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(s=>s()),r.length=0}}class U_{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Rw().toString()),this._cssKeyframesDriver=new Hu}validateStyleProperty(n){return K(n)}matchesElement(n,r){return Pe(n,r)}containsElement(n,r){return We(n,r)}query(n,r,s){return at(n,r,s)}computeStyle(n,r,s){return window.getComputedStyle(n)[r]}overrideWebAnimationsSupport(n){this._isNativeImpl=n}animate(n,r,s,o,c,h=[],_){if(!_&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(n,r,s,o,c,h);const S={duration:s,delay:o,fill:0==o?"both":"forwards"};c&&(S.easing=c);const R={},P=h.filter(U=>U instanceof Aw);VT(s,o)&&P.forEach(U=>{let J=U.currentSnapshot;Object.keys(J).forEach(me=>R[me]=J[me])});const k=ON(n,r=UT(n,r=r.map(U=>Pa(U,!1)),R));return new Aw(n,r,S,k)}}function Rw(){return Dd()&&Element.prototype.animate||{}}let sF=(()=>{class i extends Td{constructor(r,s){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(s.body,{id:"0",encapsulation:g.ifc.None,styles:[],data:{animation:[]}})}build(r){const s=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(r)?__(r):r;return dI(this._renderer,null,s,"register",[o]),new uI(s,this._renderer)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(g.FYo),g.LFG(de))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();class uI extends class{}{constructor(n,r){super(),this._id=n,this._renderer=r}create(n,r){return new cI(this._id,n,r||{},this._renderer)}}class cI{constructor(n,r,s,o){this.id=n,this.element=r,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(n,r){return this._renderer.listen(this.element,`@@${this.id}:${n}`,r)}_command(n,...r){return dI(this._renderer,this.element,this.id,n,r)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){var n,r;return null!==(r=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==r?r:0}}function dI(i,n,r,s,o){return i.setProperty(n,`@@${r}:${s}`,o)}const hI="@.disabled";let UN=(()=>{class i{constructor(r,s,o){this.delegate=r,this.engine=s,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(c,h)=>{h&&h.parentNode(c)&&h.removeChild(c.parentNode,c)}}createRenderer(r,s){const c=this.delegate.createRenderer(r,s);if(!(r&&s&&s.data&&s.data.animation)){let S=this._rendererCache.get(c);return S||(S=new Si("",c,this.engine),this._rendererCache.set(c,S)),S}const h=s.id,_=s.id+"-"+this._currentId;this._currentId++,this.engine.register(_,r);const w=S=>{Array.isArray(S)?S.forEach(w):this.engine.registerTrigger(h,_,r,S.name,S)};return s.data.animation.forEach(w),new BN(this,_,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(r,s,o){r>=0&&r<this._microtaskId?this._zone.run(()=>s(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[h,_]=c;h(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(g.FYo),g.LFG(bw),g.LFG(g.R0b))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();class Si{constructor(n,r,s){this.namespaceId=n,this.delegate=r,this.engine=s,this.destroyNode=this.delegate.destroyNode?o=>r.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,r){return this.delegate.createElement(n,r)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,r){this.delegate.appendChild(n,r),this.engine.onInsert(this.namespaceId,r,n,!1)}insertBefore(n,r,s,o=!0){this.delegate.insertBefore(n,r,s),this.engine.onInsert(this.namespaceId,r,n,o)}removeChild(n,r,s){this.engine.onRemove(this.namespaceId,r,this.delegate,s)}selectRootElement(n,r){return this.delegate.selectRootElement(n,r)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,r,s,o){this.delegate.setAttribute(n,r,s,o)}removeAttribute(n,r,s){this.delegate.removeAttribute(n,r,s)}addClass(n,r){this.delegate.addClass(n,r)}removeClass(n,r){this.delegate.removeClass(n,r)}setStyle(n,r,s,o){this.delegate.setStyle(n,r,s,o)}removeStyle(n,r,s){this.delegate.removeStyle(n,r,s)}setProperty(n,r,s){"@"==r.charAt(0)&&r==hI?this.disableAnimations(n,!!s):this.delegate.setProperty(n,r,s)}setValue(n,r){this.delegate.setValue(n,r)}listen(n,r,s){return this.delegate.listen(n,r,s)}disableAnimations(n,r){this.engine.disableAnimations(n,r)}}class BN extends Si{constructor(n,r,s,o){super(r,s,o),this.factory=n,this.namespaceId=r}setProperty(n,r,s){"@"==r.charAt(0)?"."==r.charAt(1)&&r==hI?this.disableAnimations(n,s=void 0===s||!!s):this.engine.process(this.namespaceId,n,r.substr(1),s):this.delegate.setProperty(n,r,s)}listen(n,r,s){if("@"==r.charAt(0)){const o=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(n);let c=r.substr(1),h="";return"@"!=c.charAt(0)&&([c,h]=function(i){const n=i.indexOf(".");return[i.substring(0,n),i.substr(n+1)]}(c)),this.engine.listen(this.namespaceId,o,c,h,_=>{this.factory.scheduleListenerCallback(_._data||-1,s,_)})}return this.delegate.listen(n,r,s)}}let aF=(()=>{class i extends bw{constructor(r,s,o){super(r.body,s,o)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de),g.LFG(Ti),g.LFG(hw))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();const B_=new g.OlP("AnimationModuleType"),Nw=[{provide:Td,useClass:sF},{provide:hw,useFactory:function(){return new CN}},{provide:bw,useClass:aF},{provide:g.FYo,useFactory:function(i,n,r){return new UN(i,n,r)},deps:[$s,bw,g.R0b]}],pI=[{provide:Ti,useFactory:function(){return"function"==typeof Rw()?new U_:new Hu}},{provide:B_,useValue:"BrowserAnimations"},...Nw],gI=[{provide:Ti,useClass:Rn},{provide:B_,useValue:"NoopAnimations"},...Nw];let $N=(()=>{class i{static withConfig(r){return{ngModule:i,providers:r.disableAnimations?gI:pI}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:pI,imports:[jf]}),i})();var oi=V(9765);const xw=["toast-component",""];function GN(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(r),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA(),g.qZA()}}function WN(i,n){if(1&i&&(g.ynx(0),g._uU(1),g.BQk()),2&i){const r=g.oxw(2);g.xp6(1),g.hij("[",r.duplicatesCount+1,"]")}}function mI(i,n){if(1&i&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,WN,2,1,"ng-container",4),g.qZA()),2&i){const r=g.oxw();g.Tol(r.options.titleClass),g.uIk("aria-label",r.title),g.xp6(1),g.hij(" ",r.title," "),g.xp6(1),g.Q6J("ngIf",r.duplicatesCount)}}function _I(i,n){if(1&i&&g._UZ(0,"div",7),2&i){const r=g.oxw();g.Tol(r.options.messageClass),g.Q6J("innerHTML",r.message,g.oJD)}}function ZN(i,n){if(1&i&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&i){const r=g.oxw();g.Tol(r.options.messageClass),g.uIk("aria-label",r.message),g.xp6(1),g.hij(" ",r.message," ")}}function Zo(i,n){if(1&i&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&i){const r=g.oxw();g.xp6(1),g.Udp("width",r.width+"%")}}function Pw(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"button",5),g.NdJ("click",function(){return g.CHM(r),g.oxw().remove()}),g.TgZ(1,"span",6),g._uU(2,"\xd7"),g.qZA(),g.qZA()}}function zN(i,n){if(1&i&&(g.ynx(0),g._uU(1),g.BQk()),2&i){const r=g.oxw(2);g.xp6(1),g.hij("[",r.duplicatesCount+1,"]")}}function KN(i,n){if(1&i&&(g.TgZ(0,"div"),g._uU(1),g.YNc(2,zN,2,1,"ng-container",4),g.qZA()),2&i){const r=g.oxw();g.Tol(r.options.titleClass),g.uIk("aria-label",r.title),g.xp6(1),g.hij(" ",r.title," "),g.xp6(1),g.Q6J("ngIf",r.duplicatesCount)}}function uF(i,n){if(1&i&&g._UZ(0,"div",7),2&i){const r=g.oxw();g.Tol(r.options.messageClass),g.Q6J("innerHTML",r.message,g.oJD)}}function yI(i,n){if(1&i&&(g.TgZ(0,"div",8),g._uU(1),g.qZA()),2&i){const r=g.oxw();g.Tol(r.options.messageClass),g.uIk("aria-label",r.message),g.xp6(1),g.hij(" ",r.message," ")}}function YN(i,n){if(1&i&&(g.TgZ(0,"div"),g._UZ(1,"div",9),g.qZA()),2&i){const r=g.oxw();g.xp6(1),g.Udp("width",r.width+"%")}}class Ld{constructor(n,r,s,o,c,h){this.toastId=n,this.config=r,this.message=s,this.title=o,this.toastType=c,this.toastRef=h,this._onTap=new oi.xQ,this._onAction=new oi.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(n){this._onAction.next(n)}onAction(){return this._onAction.asObservable()}}const Ow={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Lp=new g.OlP("ToastConfig");class j_{constructor(n,r){this.component=n,this.injector=r}attach(n,r){return this._attachedHost=n,n.attach(this,r)}detach(){const n=this._attachedHost;if(n)return this._attachedHost=void 0,n.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class QN extends class{attach(n,r){return this._attachedPortal=n,this.attachComponentPortal(n,r)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(n){this._disposeFn=n}}{constructor(n,r,s){super(),this._hostDomElement=n,this._componentFactoryResolver=r,this._appRef=s}attachComponentPortal(n,r){const s=this._componentFactoryResolver.resolveComponentFactory(n.component);let o;return o=s.create(n.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),r?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let H_=(()=>{class i{constructor(r){this._document=r}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const r=this._document.createElement("div");r.classList.add("overlay-container"),this._document.body.appendChild(r),this._containerElement=r}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de))},i.\u0275prov=g.Yz7({factory:function(){return new i(g.LFG(de))},token:i,providedIn:"root"}),i})();class kw{constructor(n){this._portalHost=n}attach(n,r=!0){return this._portalHost.attach(n,r)}detach(){return this._portalHost.detach()}}let Fw=(()=>{class i{constructor(r,s,o,c){this._overlayContainer=r,this._componentFactoryResolver=s,this._appRef=o,this._document=c,this._paneElements=new Map}create(r,s){return this._createOverlayRef(this.getPaneElement(r,s))}getPaneElement(r="",s){return this._paneElements.get(s)||this._paneElements.set(s,{}),this._paneElements.get(s)[r]||(this._paneElements.get(s)[r]=this._createPaneElement(r,s)),this._paneElements.get(s)[r]}_createPaneElement(r,s){const o=this._document.createElement("div");return o.id="toast-container",o.classList.add(r),o.classList.add("toast-container"),s?s.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(r){return new QN(r,this._componentFactoryResolver,this._appRef)}_createOverlayRef(r){return new kw(this._createPortalHost(r))}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(H_),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(de))},i.\u0275prov=g.Yz7({factory:function(){return new i(g.LFG(H_),g.LFG(g._Vd),g.LFG(g.z2F),g.LFG(de))},token:i,providedIn:"root"}),i})();class JN{constructor(n){this._overlayRef=n,this.duplicatesCount=0,this._afterClosed=new oi.xQ,this._activate=new oi.xQ,this._manualClose=new oi.xQ,this._resetTimeout=new oi.xQ,this._countDuplicate=new oi.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(n,r){n&&this._resetTimeout.next(),r&&this._countDuplicate.next(++this.duplicatesCount)}}class XN{constructor(n,r){this._toastPackage=n,this._parentInjector=r}get(n,r,s){return n===Ld?this._toastPackage:this._parentInjector.get(n,r,s)}}let Vd=(()=>{class i{constructor(r,s,o,c,h){this.overlay=s,this._injector=o,this.sanitizer=c,this.ngZone=h,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},r.default),r.config),r.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},r.default.iconClasses),r.config.iconClasses))}show(r,s,o={},c=""){return this._preBuildNotification(c,r,s,this.applyConfig(o))}success(r,s,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",r,s,this.applyConfig(o))}error(r,s,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",r,s,this.applyConfig(o))}info(r,s,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",r,s,this.applyConfig(o))}warning(r,s,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",r,s,this.applyConfig(o))}clear(r){for(const s of this.toasts)if(void 0!==r){if(s.toastId===r)return void s.toastRef.manualClose()}else s.toastRef.manualClose()}remove(r){const s=this._findToast(r);if(!s||(s.activeToast.toastRef.close(),this.toasts.splice(s.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(r="",s="",o,c){const{includeTitleDuplicates:h}=this.toastrConfig;for(const _ of this.toasts){const w=h&&_.title===r;if((!h||w)&&_.message===s)return _.toastRef.onDuplicate(o,c),_}return null}applyConfig(r={}){return Object.assign(Object.assign({},this.toastrConfig),r)}_findToast(r){for(let s=0;s<this.toasts.length;s++)if(this.toasts[s].toastId===r)return{index:s,activeToast:this.toasts[s]};return null}_preBuildNotification(r,s,o,c){return c.onActivateTick?this.ngZone.run(()=>this._buildNotification(r,s,o,c)):this._buildNotification(r,s,o,c)}_buildNotification(r,s,o,c){if(!c.toastComponent)throw new Error("toastComponent required");const h=this.findDuplicate(o,s,this.toastrConfig.resetTimeoutOnDuplicate&&c.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||s)&&this.toastrConfig.preventDuplicates&&null!==h)return h;this.previousToastMessage=s;let _=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(_=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const w=this.overlay.create(c.positionClass,this.overlayContainer);this.index=this.index+1;let T=s;s&&c.enableHtml&&(T=this.sanitizer.sanitize(g.q3G.HTML,s));const S=new JN(w),R=new Ld(this.index,c,T,o,r,S),P=new XN(R,this._injector),k=new j_(c.toastComponent,P),U=w.attach(k,this.toastrConfig.newestOnTop);S.componentInstance=U.instance;const J={toastId:this.index,title:o||"",message:s||"",toastRef:S,onShown:S.afterActivate(),onHidden:S.afterClosed(),onTap:R.onTap(),onAction:R.onAction(),portal:U};return _||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{J.toastRef.activate()})),this.toasts.push(J),J}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Lp),g.LFG(Fw),g.LFG(g.zs3),g.LFG(Hi),g.LFG(g.R0b))},i.\u0275prov=g.Yz7({factory:function(){return new i(g.LFG(Lp),g.LFG(Fw),g.LFG(g.gxx),g.LFG(Hi),g.LFG(g.R0b))},token:i,providedIn:"root"}),i})(),hF=(()=>{class i{constructor(r,s,o){this.toastrService=r,this.toastPackage=s,this.ngZone=o,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=s.message,this.title=s.title,this.options=s.config,this.originalTimeout=s.config.timeOut,this.toastClasses=`${s.toastType} ${s.config.toastClass}`,this.sub=s.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=s.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=s.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=s.toastRef.countDuplicate().subscribe(c=>{this.duplicatesCount=c})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const r=(new Date).getTime();this.width=(this.hideTime-r)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(r,s){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(r),s)):this.timeout=setTimeout(()=>r(),s)}outsideInterval(r,s){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(r),s)):this.intervalId=setInterval(()=>r(),s)}runInsideAngular(r){this.ngZone?this.ngZone.run(()=>r()):r()}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(Vd),g.Y36(Ld),g.Y36(g.R0b))},i.\u0275cmp=g.Xpm({type:i,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,s){1&r&&g.NdJ("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),2&r&&(g.d8E("@flyInOut",s.state),g.Tol(s.toastClasses),g.Udp("display",s.displayStyle))},attrs:xw,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(r,s){1&r&&(g.YNc(0,GN,3,0,"button",0),g.YNc(1,mI,3,5,"div",1),g.YNc(2,_I,1,3,"div",2),g.YNc(3,ZN,2,4,"div",3),g.YNc(4,Zo,2,2,"div",4)),2&r&&(g.Q6J("ngIf",s.options.closeButton),g.xp6(1),g.Q6J("ngIf",s.title),g.xp6(1),g.Q6J("ngIf",s.message&&s.options.enableHtml),g.xp6(1),g.Q6J("ngIf",s.message&&!s.options.enableHtml),g.xp6(1),g.Q6J("ngIf",s.options.progressBar))},directives:[Ei],encapsulation:2,data:{animation:[yp("flyInOut",[Hn("inactive",Qs({opacity:0})),Hn("active",Qs({opacity:1})),Hn("removed",Qs({opacity:0})),Ep("inactive => active",Ur("{{ easeTime }}ms {{ easing }}")),Ep("active => removed",Ur("{{ easeTime }}ms {{ easing }}"))])]}}),i})();const ex=Object.assign(Object.assign({},Ow),{toastComponent:hF});let Lw=(()=>{class i{static forRoot(r={}){return{ngModule:i,providers:[{provide:Lp,useValue:{default:ex,config:r}}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({imports:[[ha]]}),i})(),vI=(()=>{class i{constructor(r,s,o){this.toastrService=r,this.toastPackage=s,this.appRef=o,this.width=-1,this.toastClasses="",this.state="inactive",this.message=s.message,this.title=s.title,this.options=s.config,this.originalTimeout=s.config.timeOut,this.toastClasses=`${s.toastType} ${s.config.toastClass}`,this.sub=s.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=s.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=s.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=s.toastRef.countDuplicate().subscribe(c=>{this.duplicatesCount=c})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const r=(new Date).getTime();this.width=(this.hideTime-r)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(Vd),g.Y36(Ld),g.Y36(g.z2F))},i.\u0275cmp=g.Xpm({type:i,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,s){1&r&&g.NdJ("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),2&r&&(g.Tol(s.toastClasses),g.Udp("display",s.displayStyle))},attrs:xw,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(r,s){1&r&&(g.YNc(0,Pw,3,0,"button",0),g.YNc(1,KN,3,5,"div",1),g.YNc(2,uF,1,3,"div",2),g.YNc(3,yI,2,4,"div",3),g.YNc(4,YN,2,2,"div",4)),2&r&&(g.Q6J("ngIf",s.options.closeButton),g.xp6(1),g.Q6J("ngIf",s.title),g.xp6(1),g.Q6J("ngIf",s.message&&s.options.enableHtml),g.xp6(1),g.Q6J("ngIf",s.message&&!s.options.enableHtml),g.xp6(1),g.Q6J("ngIf",s.options.progressBar))},directives:[Ei],encapsulation:2}),i})();Object.assign(Object.assign({},Ow),{toastComponent:vI});var Nn=V(8939),Ud=V(3637),lt=V(5917),Vw=V(6682),fF=V(8819),Oa=V(5197),Uw=V(268),xl=V(5604);function xn(i,n){return"function"==typeof n?r=>r.pipe(xn((s,o)=>(0,on.D)(i(s,o)).pipe((0,rt.U)((c,h)=>n(s,c,o,h))))):r=>r.lift(new rx(i))}class rx{constructor(n){this.project=n}call(n,r){return r.subscribe(new Bw(n,this.project))}}class Bw extends Oa.L{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const s=this.index++;try{r=this.project(n,s)}catch(o){return void this.destination.error(o)}this._innerSub(r,n,s)}_innerSub(n,r,s){const o=this.innerSubscription;o&&o.unsubscribe();const c=new Uw.d(this,r,s),h=this.destination;h.add(c),this.innerSubscription=(0,xl.D)(this,n,void 0,void 0,c),this.innerSubscription!==c&&h.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(n){this.destination.remove(n),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(n,r,s,o,c){this.destination.next(r)}}var Es=V(7393);function $u(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(o){return o.lift(new wI(i,n,r))}}class wI{constructor(n,r,s=!1){this.accumulator=n,this.seed=r,this.hasSeed=s}call(n,r){return r.subscribe(new ix(n,this.accumulator,this.seed,this.hasSeed))}}class ix extends Es.L{constructor(n,r,s,o){super(n),this.accumulator=r,this._seed=s,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let s;try{s=this.accumulator(this.seed,n,r)}catch(o){this.destination.error(o)}this.seed=s,this.destination.next(s)}}function $_(i,n){return r=>r.lift(new sx(i,n))}class sx{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new ox(n,this.compare,this.keySelector))}}class ox extends Es.L{constructor(n,r,s){super(n),this.keySelector=s,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:o}=this;r=o?o(n):n}catch(o){return this.destination.error(o)}let s=!1;if(this.hasKey)try{const{compare:o}=this;s=o(this.key,r)}catch(o){return this.destination.error(o)}else this.hasKey=!0;s||(this.key=r,this.destination.next(n))}}class Bd{constructor(n,r){this.observables=n,this.project=r}call(n,r){return r.subscribe(new bI(n,this.observables,this.project))}}class bI extends Oa.L{constructor(n,r,s){super(n),this.observables=r,this.project=s,this.toRespond=[];const o=r.length;this.values=new Array(o);for(let c=0;c<o;c++)this.toRespond.push(c);for(let c=0;c<o;c++){let h=r[c];this.add((0,xl.D)(this,h,h,c))}}notifyNext(n,r,s,o,c){this.values[s]=r;const h=this.toRespond;if(h.length>0){const _=h.indexOf(s);-1!==_&&h.splice(_,1)}}notifyComplete(){}_next(n){if(0===this.toRespond.length){const r=[n,...this.values];this.project?this._tryProject(r):this.destination.next(r)}}_tryProject(n){let r;try{r=this.project.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}class lx{constructor(n){this.predicate=n}call(n,r){return r.subscribe(new jd(n,this.predicate))}}class jd extends Es.L{constructor(n,r){super(n),this.predicate=r,this.skipping=!0,this.index=0}_next(n){const r=this.destination;this.skipping&&this.tryCallPredicate(n),this.skipping||r.next(n)}tryCallPredicate(n){try{const r=this.predicate(n,this.index++);this.skipping=Boolean(r)}catch(r){this.destination.error(r)}}}var Wt=V(9126),jw=(V(670),V(4486)),Ma=V(6034),Ce=V(8239),ka=V(5452),L=V(3854),Zt=V(5601);let ro="";function q_(i){ro=i}class $w{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,r){null==r?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,L.Pz)(r))}get(n){const r=this.domStorage_.getItem(this.prefixedName_(n));return null==r?null:(0,L.cI)(r)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class mF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,r){null==r?delete this.cache_[n]:this.cache_[n]=r}get(n){return(0,L.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const TI=function(i){try{if("undefined"!=typeof window&&void 0!==window[i]){const n=window[i];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new $w(n)}}catch(n){}return new mF},qu=TI("localStorage"),G_=TI("sessionStorage"),Gu=new Zt.Yd("@firebase/database"),qw=function(){let i=1;return function(){return i++}}(),Gw=function(i){const n=(0,L.dS)(i),r=new L.gQ;r.update(n);const s=r.digest();return L.US.encodeByteArray(s)},Vp=function(...i){let n="";for(let r=0;r<i.length;r++){const s=i[r];Array.isArray(s)||s&&"object"==typeof s&&"number"==typeof s.length?n+=Vp.apply(null,s):n+="object"==typeof s?(0,L.Pz)(s):s,n+=" "}return n};let Wu=null,Hd=!0;const W_=function(i,n){(0,L.hu)(!n||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(Gu.logLevel=Zt.in.VERBOSE,Wu=Gu.log.bind(Gu),n&&G_.set("logging_enabled",!0)):"function"==typeof i?Wu=i:(Wu=null,G_.remove("logging_enabled"))},fr=function(...i){if(!0===Hd&&(Hd=!1,null===Wu&&!0===G_.get("logging_enabled")&&W_(!0)),Wu){const n=Vp.apply(null,i);Wu(n)}},$d=function(i){return function(...n){fr(i,...n)}},Z_=function(...i){const n="FIREBASE INTERNAL ERROR: "+Vp(...i);Gu.error(n)},io=function(...i){const n=`FIREBASE FATAL ERROR: ${Vp(...i)}`;throw Gu.error(n),new Error(n)},ai=function(...i){const n="FIREBASE WARNING: "+Vp(...i);Gu.warn(n)},z_=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},zo="[MIN_NAME]",Fa="[MAX_NAME]",Pl=function(i,n){if(i===n)return 0;if(i===zo||n===Fa)return-1;if(n===zo||i===Fa)return 1;{const r=Ww(i),s=Ww(n);return null!==r?null!==s?r-s==0?i.length-n.length:r-s:-1:null!==s?1:i<n?-1:1}},dx=function(i,n){return i===n?0:i<n?-1:1},Up=function(i,n){if(n&&i in n)return n[i];throw new Error("Missing required key ("+i+") in object: "+(0,L.Pz)(n))},II=function(i){if("object"!=typeof i||null===i)return(0,L.Pz)(i);const n=[];for(const s in i)n.push(s);n.sort();let r="{";for(let s=0;s<n.length;s++)0!==s&&(r+=","),r+=(0,L.Pz)(n[s]),r+=":",r+=II(i[n[s]]);return r+="}",r},hx=function(i,n){const r=i.length;if(r<=n)return[i];const s=[];for(let o=0;o<r;o+=n)s.push(i.substring(o,o+n>r?r:o+n));return s};function Yn(i,n){for(const r in i)i.hasOwnProperty(r)&&n(r,i[r])}const DI=function(i){(0,L.hu)(!z_(i),"Invalid JSON number");const s=1023;let o,c,h,_,w;0===i?(c=0,h=0,o=1/i==-1/0?1:0):(o=i<0,(i=Math.abs(i))>=Math.pow(2,1-s)?(_=Math.min(Math.floor(Math.log(i)/Math.LN2),s),c=_+s,h=Math.round(i*Math.pow(2,52-_)-Math.pow(2,52))):(c=0,h=Math.round(i/Math.pow(2,-1074))));const T=[];for(w=52;w;w-=1)T.push(h%2?1:0),h=Math.floor(h/2);for(w=11;w;w-=1)T.push(c%2?1:0),c=Math.floor(c/2);T.push(o?1:0),T.reverse();const S=T.join("");let R="";for(w=0;w<64;w+=8){let P=parseInt(S.substr(w,8),2).toString(16);1===P.length&&(P="0"+P),R+=P}return R.toLowerCase()},so=new RegExp("^-?(0*)\\d{1,10}$"),fx=-2147483648,RI=2147483647,Ww=function(i){if(so.test(i)){const n=Number(i);if(n>=fx&&n<=RI)return n}return null},Zu=function(i){try{i()}catch(n){setTimeout(()=>{throw ai("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},qd=function(i,n){const r=setTimeout(i,n);return"object"==typeof r&&r.unref&&r.unref(),r};class px{constructor(n,r){this.appName_=n,this.appCheckProvider=r,this.appCheck=null==r?void 0:r.getImmediate({optional:!0}),this.appCheck||null==r||r.get().then(s=>this.appCheck=s)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((r,s)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(s=>s.addTokenListener(n))}notifyForInvalidToken(){ai(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class yF{constructor(n,r,s){this.appName_=n,this.firebaseOptions_=r,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(r=>r&&"auth/token-not-initialized"===r.code?(fr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,s)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(r,s):r(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(r=>r.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(r=>r.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ai(n)}}let Gd=(()=>{class i{constructor(r){this.accessToken=r}getToken(r){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(r){r(this.accessToken)}removeTokenChangeListener(r){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const MI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Bp="websocket",zu="long_polling";class Y_{constructor(n,r,s,o,c=!1,h="",_=!1){this.secure=r,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=_,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qu.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&qu.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Zd(i,n,r){let s;if((0,L.hu)("string"==typeof n,"typeof type must == string"),(0,L.hu)("object"==typeof r,"typeof params must == object"),n===Bp)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(n!==zu)throw new Error("Unknown connection type: "+n);s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(r.ns=i.namespace);const o=[];return Yn(r,(c,h)=>{o.push(c+"="+h)}),s+o.join("&")}class mx{constructor(){this.counters_={}}incrementCounter(n,r=1){(0,L.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}get(){return(0,L.p$)(this.counters_)}}const zw={},jp={};function ws(i){const n=i.toString();return zw[n]||(zw[n]=new mx),zw[n]}class Br{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,r){for(this.pendingResponses[n]=r;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Zu(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Xu{constructor(n,r,s,o,c,h,_){this.connId=n,this.repoInfo=r,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.transportSessionId=h,this.lastSessionId=_,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$d(n),this.stats_=ws(r),this.urlFn=w=>(this.appCheckToken&&(w.ac=this.appCheckToken),Zd(r,zu,w))}open(n,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Br(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,L.Yr)()||"complete"===document.readyState)i();else{let n=!1;const r=function(){document.body?n||(n=!0,i()):setTimeout(r,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new J_((...c)=>{const[h,_,w,T,S]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=_,this.password=w;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);_?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(_,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[h,_]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,_)},()=>{this.onClosed_()},this.urlFn);const s={start:"t"};s.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(s.cb=this.scriptTagHolder.uniqueCallbackIdentifier),s.v="5",this.transportSessionId&&(s.s=this.transportSessionId),this.lastSessionId&&(s.ls=this.lastSessionId),this.applicationId&&(s.p=this.applicationId),this.appCheckToken&&(s.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&MI.test(location.hostname)&&(s.r="f");const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xu.forceAllow_=!0}static forceDisallow(){Xu.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Xu.forceAllow_&&(Xu.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const r=(0,L.Pz)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=(0,L.h$)(r),o=hx(s,1840);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(n,r){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=n,s.pw=r,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const r=(0,L.Pz)(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class J_{constructor(n,r,s,o){if(this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=n,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=qw(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=J_.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(_){fr("frame writing exception"),_.stack&&fr(_.stack),fr(_)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||fr("No IE domain setting required")}catch(r){const s=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let r=this.urlFn(n),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const h=this.pendingSegs.shift();s=s+"&seg"+o+"="+h.seg+"&ts"+o+"="+h.ts+"&d"+o+"="+h.d,o++}return r+=s,this.addLongPollTag_(r,this.currentSerial),!0}return!1}enqueueSegment(n,r,s){this.pendingSegs.push({seg:n,ts:r,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(n,r){this.outstandingRequests.add(r);const s=()=>{this.outstandingRequests.delete(r),this.newRequest_()},o=setTimeout(s,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(o),s()})}addTag(n,r){(0,L.Yr)()?this.doNodeLongPoll(n,r):setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=n,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||"loaded"===o||"complete"===o)&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),r())},s.onerror=()=>{fr("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(s){}},Math.floor(1))}}let Xd=null;"undefined"!=typeof MozWebSocket?Xd=MozWebSocket:"undefined"!=typeof WebSocket&&(Xd=WebSocket);let $p=(()=>{class i{constructor(r,s,o,c,h,_,w){this.connId=r,this.applicationId=o,this.appCheckToken=c,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$d(this.connId),this.stats_=ws(s),this.connURL=i.connectionURL_(s,_,w,c),this.nodeAdmin=s.nodeAdmin}static connectionURL_(r,s,o,c){const h={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&MI.test(location.hostname)&&(h.r="f"),s&&(h.s=s),o&&(h.ls=o),c&&(h.ac=c),Zd(r,Bp,h)}open(r,s){this.onDisconnect=s,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qu.set("previous_websocket_failure",!0);try{if((0,L.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${ro}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,_=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;_&&(c.proxy={origin:_}),this.mySock=new Xd(this.connURL,[],c)}else this.mySock=new Xd(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const c=o.message||o.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(r=!0)}return!r&&null!==Xd&&!i.forceDisallow_}static previouslyFailed(){return qu.isInMemoryStorage||!0===qu.get("previous_websocket_failure")}markConnectionHealthy(){qu.remove("previous_websocket_failure")}appendFrame_(r){if(this.frames.push(r),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const o=(0,L.cI)(s);this.onMessage(o)}}handleNewFrameCount_(r){this.totalFrames=r,this.frames=[]}extractFrameCount_(r){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){const s=Number(r);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),r}handleIncomingFrame(r){if(null===this.mySock)return;const s=r.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(s);else{const o=this.extractFrameCount_(s);null!==o&&this.appendFrame_(o)}}send(r){this.resetKeepAlive();const s=(0,L.Pz)(r);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const o=hx(s,16384);o.length>1&&this.sendString_(String(o.length));for(let c=0;c<o.length;c++)this.sendString_(o[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(r){try{this.mySock.send(r)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})();class X_{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Xu,$p]}initTransports_(n){const r=$p&&$p.isAvailable();let s=r&&!$p.previouslyFailed();if(n.webSocketOnly&&(r||ai("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[$p];else{const o=this.transports_=[];for(const c of X_.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class wx{constructor(n,r,s,o,c,h,_,w,T,S){this.id=n,this.repoInfo_=r,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=h,this.onReady_=_,this.onDisconnect_=w,this.onKill_=T,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$d("c:"+this.id+":"),this.transportManager_=new X_(r),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,s)},Math.floor(0));const o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=qd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return r=>{n===this.conn_?this.onConnectionLost_(r):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return r=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(r):n===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const r=n.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const r=Up("t",n),s=Up("d",n);if("c"===r)this.onSecondaryControl_(s);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const r=Up("t",n),s=Up("d",n);"c"===r?this.onControl_(s):"d"===r&&this.onDataMessage_(s)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const r=Up("t",n);if("d"in n){const s=n.d;if("h"===r)this.onHandshake_(s);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(s):"r"===r?this.onReset_(s):"e"===r?Z_("Server Error: "+s):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Z_("Unknown control packet command: "+r)}}onHandshake_(n){const r=n.ts,s=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==s&&ai("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,s),qd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,r){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Cx{put(n,r,s,o){}merge(n,r,s,o){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,r,s){}onDisconnectMerge(n,r,s){}onDisconnectCancel(n,r){}reportStats(n){}}class bx{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,L.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...r){if(Array.isArray(this.listeners_[n])){const s=[...this.listeners_[n]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,r)}}on(n,r,s){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:s});const o=this.getInitialEvent(n);o&&r.apply(s,o)}off(n,r,s){this.validateEventType_(n);const o=this.listeners_[n]||[];for(let c=0;c<o.length;c++)if(o[c].callback===r&&(!s||s===o[c].context))return void o.splice(c,1)}validateEventType_(n){(0,L.hu)(this.allowedEvents_.find(r=>r===n),"Unknown event: "+n)}}class ey extends bx{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ey}getInitialEvent(n){return(0,L.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}class Xt{constructor(n,r){if(void 0===r){this.pieces_=n.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=r}toString(){let n="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(n+="/"+this.pieces_[r]);return n||"/"}}function qt(){return new Xt("")}function Dt(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Ml(i){return i.pieces_.length-i.pieceNum_}function _n(i){let n=i.pieceNum_;return n<i.pieces_.length&&n++,new Xt(i.pieces_,n)}function JI(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function qp(i,n=0){return i.pieces_.slice(i.pieceNum_+n)}function Qw(i){if(i.pieceNum_>=i.pieces_.length)return null;const n=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)n.push(i.pieces_[r]);return new Xt(n,0)}function Pn(i,n){const r=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)r.push(i.pieces_[s]);if(n instanceof Xt)for(let s=n.pieceNum_;s<n.pieces_.length;s++)r.push(n.pieces_[s]);else{const s=n.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&r.push(s[o])}return new Xt(r,0)}function Ot(i){return i.pieceNum_>=i.pieces_.length}function Qn(i,n){const r=Dt(i),s=Dt(n);if(null===r)return n;if(r===s)return Qn(_n(i),_n(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+i+")")}function Ix(i,n){const r=qp(i,0),s=qp(n,0);for(let o=0;o<r.length&&o<s.length;o++){const c=Pl(r[o],s[o]);if(0!==c)return c}return r.length===s.length?0:r.length<s.length?-1:1}function ty(i,n){if(Ml(i)!==Ml(n))return!1;for(let r=i.pieceNum_,s=n.pieceNum_;r<=i.pieces_.length;r++,s++)if(i.pieces_[r]!==n.pieces_[s])return!1;return!0}function bs(i,n){let r=i.pieceNum_,s=n.pieceNum_;if(Ml(i)>Ml(n))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==n.pieces_[s])return!1;++r,++s}return!0}class XI{constructor(n,r){this.errorPrefix_=r,this.parts_=qp(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=(0,L.ug)(this.parts_[s]);Jw(this)}}function Jw(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ec(i))}function ec(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class Xw extends bx{constructor(){let n,r;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(r="visibilitychange",n="hidden"):void 0!==document.mozHidden?(r="mozvisibilitychange",n="mozHidden"):void 0!==document.msHidden?(r="msvisibilitychange",n="msHidden"):void 0!==document.webkitHidden&&(r="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const s=!document[n];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Xw}getInitialEvent(n){return(0,L.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const Gp=1e3;let tC,eh=(()=>{class i extends Cx{constructor(r,s,o,c,h,_,w,T){if(super(),this.repoInfo_=r,this.applicationId_=s,this.onDataUpdate_=o,this.onConnectStatus_=c,this.onServerInfoUpdate_=h,this.authTokenProvider_=_,this.appCheckTokenProvider_=w,this.authOverride_=T,this.id=i.nextPersistentConnectionId_++,this.log_=$d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,T&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xw.getInstance().on("visible",this.onVisible_,this),-1===r.host.indexOf("fblocal")&&ey.getInstance().on("online",this.onOnline_,this)}sendRequest(r,s,o){const c=++this.requestNumber_,h={r:c,a:r,b:s};this.log_((0,L.Pz)(h)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),o&&(this.requestCBHash_[c]=o)}get(r){this.initConnection_();const s=new L.BH,o={p:r._path.toString(),q:r._queryObject},c={action:"g",request:o,onComplete:_=>{const w=_.d;"ok"===_.s?(this.onDataUpdate_(o.p,w,!1,null),s.resolve(w)):s.reject(w)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const _=this.outstandingGets_[h];void 0===_||c!==_||(delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+h+" timed out on connection"),s.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(h),s.promise}listen(r,s,o,c){this.initConnection_();const h=r._queryIdentifier,_=r._path.toString();this.log_("Listen called for "+_+" "+h),this.listens.has(_)||this.listens.set(_,new Map),(0,L.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(_).has(h),"listen() called twice for same path/queryId.");const w={onComplete:c,hashFn:s,query:r,tag:o};this.listens.get(_).set(h,w),this.connected_&&this.sendListen_(w)}sendGet_(r){const s=this.outstandingGets_[r];this.sendRequest("g",s.request,o=>{delete this.outstandingGets_[r],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(o)})}sendListen_(r){const s=r.query,o=s._path.toString(),c=s._queryIdentifier;this.log_("Listen on "+o+" for "+c);const h={p:o};r.tag&&(h.q=s._queryObject,h.t=r.tag),h.h=r.hashFn(),this.sendRequest("q",h,w=>{const T=w.d,S=w.s;i.warnOnListenWarnings_(T,s),(this.listens.get(o)&&this.listens.get(o).get(c))===r&&(this.log_("listen response",w),"ok"!==S&&this.removeListen_(o,c),r.onComplete&&r.onComplete(S,T))})}static warnOnListenWarnings_(r,s){if(r&&"object"==typeof r&&(0,L.r3)(r,"w")){const o=(0,L.DV)(r,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const c='".indexOn": "'+s._queryParams.getIndex().toString()+'"',h=s._path.toString();ai(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(r){this.authToken_=r,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(r)}reduceReconnectDelayIfAdminCredential_(r){(r&&40===r.length||(0,L.GJ)(r))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(r){this.appCheckToken_=r,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const r=this.authToken_,s=(0,L.w9)(r)?"auth":"gauth",o={cred:r};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(s,o,c=>{const h=c.s,_=c.d||"error";this.authToken_===r&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,_))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},r=>{const s=r.s,o=r.d||"error";"ok"===s?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,o)})}unlisten(r,s){const o=r._path.toString(),c=r._queryIdentifier;this.log_("Unlisten called for "+o+" "+c),(0,L.hu)(r._queryParams.isDefault()||!r._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,c)&&this.connected_&&this.sendUnlisten_(o,c,r._queryObject,s)}sendUnlisten_(r,s,o,c){this.log_("Unlisten on "+r+" for "+s);const h={p:r};c&&(h.q=o,h.t=c),this.sendRequest("n",h)}onDisconnectPut(r,s,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",r,s,o):this.onDisconnectRequestQueue_.push({pathString:r,action:"o",data:s,onComplete:o})}onDisconnectMerge(r,s,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",r,s,o):this.onDisconnectRequestQueue_.push({pathString:r,action:"om",data:s,onComplete:o})}onDisconnectCancel(r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",r,null,s):this.onDisconnectRequestQueue_.push({pathString:r,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(r,s,o,c){const h={p:s,d:o};this.log_("onDisconnect "+r,h),this.sendRequest(r,h,_=>{c&&setTimeout(()=>{c(_.s,_.d)},Math.floor(0))})}put(r,s,o,c){this.putInternal("p",r,s,o,c)}merge(r,s,o,c){this.putInternal("m",r,s,o,c)}putInternal(r,s,o,c,h){this.initConnection_();const _={p:s,d:o};void 0!==h&&(_.h=h),this.outstandingPuts_.push({action:r,request:_,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+s)}sendPut_(r){const s=this.outstandingPuts_[r].action,o=this.outstandingPuts_[r].request,c=this.outstandingPuts_[r].onComplete;this.outstandingPuts_[r].queued=this.connected_,this.sendRequest(s,o,h=>{this.log_(s+" response",h),delete this.outstandingPuts_[r],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(h.s,h.d)})}reportStats(r){if(this.connected_){const s={c:r};this.log_("reportStats",s),this.sendRequest("s",s,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(r){if("r"in r){this.log_("from server: "+(0,L.Pz)(r));const s=r.r,o=this.requestCBHash_[s];o&&(delete this.requestCBHash_[s],o(r.b))}else{if("error"in r)throw"A server-side error has occurred: "+r.error;"a"in r&&this.onDataPush_(r.a,r.b)}}onDataPush_(r,s){this.log_("handleServerMessage",r,s),"d"===r?this.onDataUpdate_(s.p,s.d,!1,s.t):"m"===r?this.onDataUpdate_(s.p,s.d,!0,s.t):"c"===r?this.onListenRevoked_(s.p,s.q):"ac"===r?this.onAuthRevoked_(s.s,s.d):"apc"===r?this.onAppCheckRevoked_(s.s,s.d):"sd"===r?this.onSecurityDebugPacket_(s):Z_("Unrecognized action received from server: "+(0,L.Pz)(r)+"\nAre you using the latest client?")}onReady_(r,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(r),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(r){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(r))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(r){r&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gp,this.realtime_||this.scheduleConnect_(0)),this.visible_=r}onOnline_(r){r?(this.log_("Browser went online."),this.reconnectDelay_=Gp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const r=(new Date).getTime()-this.lastConnectionAttemptTime_;let s=Math.max(0,this.reconnectDelay_-r);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var r=this;return(0,Ce.Z)(function*(){if(r.shouldReconnect_()){r.log_("Making a connection attempt"),r.lastConnectionAttemptTime_=(new Date).getTime(),r.lastConnectionEstablishedTime_=null;const s=r.onDataMessage_.bind(r),o=r.onReady_.bind(r),c=r.onRealtimeDisconnect_.bind(r),h=r.id+":"+i.nextConnectionId_++,_=r.lastSessionId;let w=!1,T=null;const S=function(){T?T.close():(w=!0,c())};r.realtime_={close:S,sendRequest:function(k){(0,L.hu)(T,"sendRequest call when we're not connected not allowed."),T.sendRequest(k)}};const P=r.forceTokenRefresh_;r.forceTokenRefresh_=!1;try{const[k,U]=yield Promise.all([r.authTokenProvider_.getToken(P),r.appCheckTokenProvider_.getToken(P)]);w?fr("getToken() completed but was canceled"):(fr("getToken() completed. Creating connection."),r.authToken_=k&&k.accessToken,r.appCheckToken_=U&&U.token,T=new wx(h,r.repoInfo_,r.applicationId_,r.appCheckToken_,r.authToken_,s,o,c,J=>{ai(J+" ("+r.repoInfo_.toString()+")"),r.interrupt("server_kill")},_))}catch(k){r.log_("Failed to get token: "+k),w||(r.repoInfo_.nodeAdmin&&ai(k),S())}}})()}interrupt(r){fr("Interrupting connection for reason: "+r),this.interruptReasons_[r]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(r){fr("Resuming connection for reason: "+r),delete this.interruptReasons_[r],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Gp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(r){const s=r-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let r=0;r<this.outstandingPuts_.length;r++){const s=this.outstandingPuts_[r];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[r],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(r,s){let o;o=s?s.map(h=>II(h)).join("$"):"default";const c=this.removeListen_(r,o);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(r,s){const o=new Xt(r).toString();let c;if(this.listens.has(o)){const h=this.listens.get(o);c=h.get(s),h.delete(s),0===h.size&&this.listens.delete(o)}else c=void 0;return c}onAuthRevoked_(r,s){fr("Auth token revoked: "+r+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===r||"permission_denied"===r)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(r,s){fr("App check token revoked: "+r+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===r||"permission_denied"===r)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(r){this.securityDebugCallback_?this.securityDebugCallback_(r):"msg"in r&&console.log("FIREBASE: "+r.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const r of this.listens.values())for(const s of r.values())this.sendListen_(s);for(let r=0;r<this.outstandingPuts_.length;r++)this.outstandingPuts_[r]&&this.sendPut_(r);for(;this.onDisconnectRequestQueue_.length;){const r=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(r.action,r.pathString,r.data,r.onComplete)}for(let r=0;r<this.outstandingGets_.length;r++)this.outstandingGets_[r]&&this.sendGet_(r)}sendConnectStats_(){const r={};let s="js";(0,L.Yr)()&&(s=this.repoInfo_.nodeAdmin?"admin_node":"node"),r["sdk."+s+"."+ro.replace(/\./g,"-")]=1,(0,L.uI)()?r["framework.cordova"]=1:(0,L.b$)()&&(r["framework.reactnative"]=1),this.reportStats(r)}shouldReconnect_(){const r=ey.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&r}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Nt{constructor(n,r){this.name=n,this.node=r}static Wrap(n,r){return new Nt(n,r)}}class iy{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,r){const s=new Nt(zo,n),o=new Nt(zo,r);return 0!==this.compare(s,o)}minPost(){return Nt.MIN}}class th extends iy{static get __EMPTY_NODE(){return tC}static set __EMPTY_NODE(n){tC=n}compare(n,r){return Pl(n.name,r.name)}isDefinedOn(n){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,r){return!1}minPost(){return Nt.MIN}maxPost(){return new Nt(Fa,tC)}makePost(n,r){return(0,L.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new Nt(n,tC)}toString(){return".key"}}const Ko=new th;class nh{constructor(n,r,s,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!n.isEmpty();)if(n=n,h=r?s(n.key,r):1,o&&(h*=-1),h<0)n=this.isReverse_?n.left:n.right;else{if(0===h){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let r,n=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let nD,Ki=(()=>{class i{constructor(r,s,o,c,h){this.key=r,this.value=s,this.color=null!=o?o:i.RED,this.left=null!=c?c:jr.EMPTY_NODE,this.right=null!=h?h:jr.EMPTY_NODE}copy(r,s,o,c,h){return new i(null!=r?r:this.key,null!=s?s:this.value,null!=o?o:this.color,null!=c?c:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,s,o){let c=this;const h=o(r,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(r,s,o),null):0===h?c.copy(null,s,null,null,null):c.copy(null,null,null,null,c.right.insert(r,s,o)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return jr.EMPTY_NODE;let r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.removeMin_(),null),r.fixUp_()}remove(r,s){let o,c;if(o=this,s(r,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(r,s),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===s(r,o.key)){if(o.right.isEmpty())return jr.EMPTY_NODE;c=o.right.min_(),o=o.copy(c.key,c.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(r,s))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}moveRedLeft_(){let r=this.colorFlip_();return r.right.left.isRed_()&&(r=r.copy(null,null,null,null,r.right.rotateRight_()),r=r.rotateLeft_(),r=r.colorFlip_()),r}moveRedRight_(){let r=this.colorFlip_();return r.left.left.isRed_()&&(r=r.rotateRight_(),r=r.colorFlip_()),r}rotateLeft_(){const r=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight_(){const r=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip_(){const r=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,s)}checkMaxDepth_(){const r=this.check_();return Math.pow(2,r)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class jr{constructor(n,r=jr.EMPTY_NODE){this.comparator_=n,this.root_=r}insert(n,r){return new jr(this.comparator_,this.root_.insert(n,r,this.comparator_).copy(null,null,Ki.BLACK,null,null))}remove(n){return new jr(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Ki.BLACK,null,null))}get(n){let r,s=this.root_;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}getPredecessorKey(n){let r,s=this.root_,o=null;for(;!s.isEmpty();){if(r=this.comparator_(n,s.key),0===r){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}r<0?s=s.left:r>0&&(o=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new nh(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,r){return new nh(this.root_,n,this.comparator_,!1,r)}getReverseIteratorFrom(n,r){return new nh(this.root_,n,this.comparator_,!0,r)}getReverseIterator(n){return new nh(this.root_,null,this.comparator_,!0,n)}}function nC(i,n){return Pl(i.name,n.name)}function sy(i,n){return Pl(i,n)}jr.EMPTY_NODE=new class{copy(n,r,s,o,c){return this}insert(n,r,s){return new Ki(n,r,null)}remove(n,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oy=function(i){return"number"==typeof i?"number:"+DI(i):"string:"+i},ay=function(i){if(i.isLeafNode()){const n=i.val();(0,L.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,L.r3)(n,".sv"),"Priority must be a string or number.")}else(0,L.hu)(i===nD||i.isEmpty(),"priority of unexpected type.");(0,L.hu)(i===nD||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rD,ly,rC,tc=(()=>{class i{constructor(r,s=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=r,this.priorityNode_=s,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ay(this.priorityNode_)}static set __childrenNodeConstructor(r){rD=r}static get __childrenNodeConstructor(){return rD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(r){return new i(this.value_,r)}getImmediateChild(r){return".priority"===r?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(r){return Ot(r)?this:".priority"===Dt(r)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(r,s){return null}updateImmediateChild(r,s){return".priority"===r?this.updatePriority(s):s.isEmpty()&&".priority"!==r?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,s).updatePriority(this.priorityNode_)}updateChild(r,s){const o=Dt(r);return null===o?s:s.isEmpty()&&".priority"!==o?this:((0,L.hu)(".priority"!==o||1===Ml(r),".priority must be the last token in a path"),this.updateImmediateChild(o,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(_n(r),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(r,s){return!1}val(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let r="";this.priorityNode_.isEmpty()||(r+="priority:"+oy(this.priorityNode_.val())+":");const s=typeof this.value_;r+=s+":",r+="number"===s?DI(this.value_):this.value_,this.lazyHash_=Gw(r)}return this.lazyHash_}getValue(){return this.value_}compareTo(r){return r===i.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof i.__childrenNodeConstructor?-1:((0,L.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}compareToLeafNode_(r){const s=typeof r.value_,o=typeof this.value_,c=i.VALUE_TYPE_ORDER.indexOf(s),h=i.VALUE_TYPE_ORDER.indexOf(o);return(0,L.hu)(c>=0,"Unknown leaf type: "+s),(0,L.hu)(h>=0,"Unknown leaf type: "+o),c===h?"object"===o?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:h-c}withIndex(){return this}isIndexed(){return!0}equals(r){if(r===this)return!0;if(r.isLeafNode()){const s=r;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}return!1}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const yn=new class extends iy{compare(n,r){const s=n.node.getPriority(),o=r.node.getPriority(),c=s.compareTo(o);return 0===c?Pl(n.name,r.name):c}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,r){return!n.getPriority().equals(r.getPriority())}minPost(){return Nt.MIN}maxPost(){return new Nt(Fa,new tc("[PRIORITY-POST]",rC))}makePost(n,r){const s=ly(n);return new Nt(r,new tc("[PRIORITY-POST]",s))}toString(){return".priority"}},sD=Math.log(2);class oD{constructor(n){this.count=parseInt(Math.log(n+1)/sD,10),this.current_=this.count-1;const o=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&o}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const rh=function(i,n,r,s){i.sort(n);const o=function(w,T){const S=T-w;let R,P;if(0===S)return null;if(1===S)return R=i[w],P=r?r(R):R,new Ki(P,R.node,Ki.BLACK,null,null);{const k=parseInt(S/2,10)+w,U=o(w,k),J=o(k+1,T);return R=i[k],P=r?r(R):R,new Ki(P,R.node,Ki.BLACK,U,J)}},_=function(w){let T=null,S=null,R=i.length;const P=function(U,J){const me=R-U,Oe=R;R-=U;const je=o(me+1,Oe),$e=i[me],Ge=r?r($e):$e;k(new Ki(Ge,$e.node,J,null,je))},k=function(U){T?(T.left=U,T=U):(S=U,T=U)};for(let U=0;U<w.count;++U){const J=w.nextBitIsOne(),me=Math.pow(2,w.count-(U+1));J?P(me,Ki.BLACK):(P(me,Ki.BLACK),P(me,Ki.RED))}return S}(new oD(i.length));return new jr(s||n,_)};let uy;const ih={};class La{constructor(n,r){this.indexes_=n,this.indexSet_=r}static get Default(){return(0,L.hu)(ih&&yn,"ChildrenNode.ts has not been loaded"),uy=uy||new La({".priority":ih},{".priority":yn}),uy}get(n){const r=(0,L.DV)(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof jr?r:null}hasIndex(n){return(0,L.r3)(this.indexSet_,n.toString())}addIndex(n,r){(0,L.hu)(n!==Ko,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const c=r.getIterator(Nt.Wrap);let _,h=c.getNext();for(;h;)o=o||n.isDefinedOn(h.node),s.push(h),h=c.getNext();_=o?rh(s,n.getCompare()):ih;const w=n.toString(),T=Object.assign({},this.indexSet_);T[w]=n;const S=Object.assign({},this.indexes_);return S[w]=_,new La(S,T)}addToIndexes(n,r){const s=(0,L.UI)(this.indexes_,(o,c)=>{const h=(0,L.DV)(this.indexSet_,c);if((0,L.hu)(h,"Missing index implementation for "+c),o===ih){if(h.isDefinedOn(n.node)){const _=[],w=r.getIterator(Nt.Wrap);let T=w.getNext();for(;T;)T.name!==n.name&&_.push(T),T=w.getNext();return _.push(n),rh(_,h.getCompare())}return ih}{const _=r.get(n.name);let w=o;return _&&(w=w.remove(new Nt(n.name,_))),w.insert(n,n.node)}});return new La(s,this.indexSet_)}removeFromIndexes(n,r){const s=(0,L.UI)(this.indexes_,o=>{if(o===ih)return o;{const c=r.get(n.name);return c?o.remove(new Nt(n.name,c)):o}});return new La(s,this.indexSet_)}}let Wp,Ct=(()=>{class i{constructor(r,s,o){this.children_=r,this.priorityNode_=s,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&ay(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wp||(Wp=new i(new jr(sy),null,La.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wp}updatePriority(r){return this.children_.isEmpty()?this:new i(this.children_,r,this.indexMap_)}getImmediateChild(r){if(".priority"===r)return this.getPriority();{const s=this.children_.get(r);return null===s?Wp:s}}getChild(r){const s=Dt(r);return null===s?this:this.getImmediateChild(s).getChild(_n(r))}hasChild(r){return null!==this.children_.get(r)}updateImmediateChild(r,s){if((0,L.hu)(s,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(s);{const o=new Nt(r,s);let c,h;s.isEmpty()?(c=this.children_.remove(r),h=this.indexMap_.removeFromIndexes(o,this.children_)):(c=this.children_.insert(r,s),h=this.indexMap_.addToIndexes(o,this.children_));const _=c.isEmpty()?Wp:this.priorityNode_;return new i(c,_,h)}}updateChild(r,s){const o=Dt(r);if(null===o)return s;{(0,L.hu)(".priority"!==Dt(r)||1===Ml(r),".priority must be the last token in a path");const c=this.getImmediateChild(o).updateChild(_n(r),s);return this.updateImmediateChild(o,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(r){if(this.isEmpty())return null;const s={};let o=0,c=0,h=!0;if(this.forEachChild(yn,(_,w)=>{s[_]=w.val(r),o++,h&&i.INTEGER_REGEXP_.test(_)?c=Math.max(c,Number(_)):h=!1}),!r&&h&&c<2*o){const _=[];for(const w in s)_[w]=s[w];return _}return r&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(null===this.lazyHash_){let r="";this.getPriority().isEmpty()||(r+="priority:"+oy(this.getPriority().val())+":"),this.forEachChild(yn,(s,o)=>{const c=o.hash();""!==c&&(r+=":"+s+":"+c)}),this.lazyHash_=""===r?"":Gw(r)}return this.lazyHash_}getPredecessorChildName(r,s,o){const c=this.resolveIndex_(o);if(c){const h=c.getPredecessorKey(new Nt(r,s));return h?h.name:null}return this.children_.getPredecessorKey(r)}getFirstChildName(r){const s=this.resolveIndex_(r);if(s){const o=s.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(r){const s=this.getFirstChildName(r);return s?new Nt(s,this.children_.get(s)):null}getLastChildName(r){const s=this.resolveIndex_(r);if(s){const o=s.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(r){const s=this.getLastChildName(r);return s?new Nt(s,this.children_.get(s)):null}forEachChild(r,s){const o=this.resolveIndex_(r);return o?o.inorderTraversal(c=>s(c.name,c.node)):this.children_.inorderTraversal(s)}getIterator(r){return this.getIteratorFrom(r.minPost(),r)}getIteratorFrom(r,s){const o=this.resolveIndex_(s);if(o)return o.getIteratorFrom(r,c=>c);{const c=this.children_.getIteratorFrom(r.name,Nt.Wrap);let h=c.peek();for(;null!=h&&s.compare(h,r)<0;)c.getNext(),h=c.peek();return c}}getReverseIterator(r){return this.getReverseIteratorFrom(r.maxPost(),r)}getReverseIteratorFrom(r,s){const o=this.resolveIndex_(s);if(o)return o.getReverseIteratorFrom(r,c=>c);{const c=this.children_.getReverseIteratorFrom(r.name,Nt.Wrap);let h=c.peek();for(;null!=h&&s.compare(h,r)>0;)c.getNext(),h=c.peek();return c}}compareTo(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===sh?-1:0}withIndex(r){if(r===Ko||this.indexMap_.hasIndex(r))return this;{const s=this.indexMap_.addIndex(r,this.children_);return new i(this.children_,this.priorityNode_,s)}}isIndexed(r){return r===Ko||this.indexMap_.hasIndex(r)}equals(r){if(r===this)return!0;if(r.isLeafNode())return!1;{const s=r;if(this.getPriority().equals(s.getPriority())){if(this.children_.count()===s.children_.count()){const o=this.getIterator(yn),c=s.getIterator(yn);let h=o.getNext(),_=c.getNext();for(;h&&_;){if(h.name!==_.name||!h.node.equals(_.node))return!1;h=o.getNext(),_=c.getNext()}return null===h&&null===_}return!1}return!1}}resolveIndex_(r){return r===Ko?null:this.indexMap_.get(r.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const sh=new class extends Ct{constructor(){super(new jr(sy),Ct.EMPTY_NODE,La.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Ct.EMPTY_NODE}isEmpty(){return!1}};function An(i,n=null){if(null===i)return Ct.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(n=i[".priority"]),(0,L.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new tc(i,An(n));if(i instanceof Array){let r=Ct.EMPTY_NODE;return Yn(i,(s,o)=>{if((0,L.r3)(i,s)&&"."!==s.substring(0,1)){const c=An(o);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(s,c))}}),r.updatePriority(An(n))}{const r=[];let s=!1;if(Yn(i,(h,_)=>{if("."!==h.substring(0,1)){const w=An(_);w.isEmpty()||(s=s||!w.getPriority().isEmpty(),r.push(new Nt(h,w)))}}),0===r.length)return Ct.EMPTY_NODE;const c=rh(r,nC,h=>h.name,sy);if(s){const h=rh(r,yn.getCompare());return new Ct(c,An(n),new La({".priority":h},{".priority":yn}))}return new Ct(c,An(n),La.Default)}}Object.defineProperties(Nt,{MIN:{value:new Nt(zo,Ct.EMPTY_NODE)},MAX:{value:new Nt(Fa,sh)}}),th.__EMPTY_NODE=Ct.EMPTY_NODE,tc.__childrenNodeConstructor=Ct,nD=sh,rC=sh,function(i){ly=i}(An);class cy extends iy{constructor(n){super(),this.indexPath_=n,(0,L.hu)(!Ot(n)&&".priority"!==Dt(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,r){const s=this.extractChild(n.node),o=this.extractChild(r.node),c=s.compareTo(o);return 0===c?Pl(n.name,r.name):c}makePost(n,r){const s=An(n),o=Ct.EMPTY_NODE.updateChild(this.indexPath_,s);return new Nt(r,o)}maxPost(){const n=Ct.EMPTY_NODE.updateChild(this.indexPath_,sh);return new Nt(Fa,n)}toString(){return qp(this.indexPath_,0).join("/")}}const dy=new class extends iy{compare(n,r){const s=n.node.compareTo(r.node);return 0===s?Pl(n.name,r.name):s}isDefinedOn(n){return!0}indexedValueChanged(n,r){return!n.equals(r)}minPost(){return Nt.MIN}maxPost(){return Nt.MAX}makePost(n,r){const s=An(n);return new Nt(r,s)}toString(){return".value"}},nc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ox=function(){let i=0;const n=[];return function(r){const s=r===i;let o;i=r;const c=new Array(8);for(o=7;o>=0;o--)c[o]=nc.charAt(r%64),r=Math.floor(r/64);(0,L.hu)(0===r,"Cannot push at time == 0");let h=c.join("");if(s){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)h+=nc.charAt(n[o]);return(0,L.hu)(20===h.length,"nextPushId: Length should be 20."),h}}(),aC=function(i){if(i===""+RI)return"-";const n=Ww(i);if(null!=n)return""+(n+1);const r=new Array(i.length);for(let h=0;h<r.length;h++)r[h]=i.charAt(h);if(r.length<786)return r.push("-"),r.join("");let s=r.length-1;for(;s>=0&&"z"===r[s];)s--;if(-1===s)return Fa;const c=nc.charAt(nc.indexOf(r[s])+1);return r[s]=c,r.slice(0,s+1).join("")},cD=function(i){if(i===""+fx)return zo;const n=Ww(i);if(null!=n)return""+(n-1);const r=new Array(i.length);for(let s=0;s<r.length;s++)r[s]=i.charAt(s);return"-"===r[r.length-1]?1===r.length?""+RI:(delete r[r.length-1],r.join("")):(r[r.length-1]=nc.charAt(nc.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function Jn(i){return{type:"value",snapshotNode:i}}function rc(i,n){return{type:"child_added",snapshotNode:n,childName:i}}function Zp(i,n){return{type:"child_removed",snapshotNode:n,childName:i}}function zp(i,n,r){return{type:"child_changed",snapshotNode:n,childName:i,oldSnap:r}}class lC{constructor(n){this.index_=n}updateChild(n,r,s,o,c,h){(0,L.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const _=n.getImmediateChild(r);return _.getChild(o).equals(s.getChild(o))&&_.isEmpty()===s.isEmpty()||(null!=h&&(s.isEmpty()?n.hasChild(r)?h.trackChildChange(Zp(r,_)):(0,L.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):_.isEmpty()?h.trackChildChange(rc(r,s)):h.trackChildChange(zp(r,s,_))),n.isLeafNode()&&s.isEmpty())?n:n.updateImmediateChild(r,s).withIndex(this.index_)}updateFullNode(n,r,s){return null!=s&&(n.isLeafNode()||n.forEachChild(yn,(o,c)=>{r.hasChild(o)||s.trackChildChange(Zp(o,c))}),r.isLeafNode()||r.forEachChild(yn,(o,c)=>{if(n.hasChild(o)){const h=n.getImmediateChild(o);h.equals(c)||s.trackChildChange(zp(o,c,h))}else s.trackChildChange(rc(o,c))})),r.withIndex(this.index_)}updatePriority(n,r){return n.isEmpty()?Ct.EMPTY_NODE:n.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class oh{constructor(n){this.indexedFilter_=new lC(n.getIndex()),this.index_=n.getIndex(),this.startPost_=oh.getStartPost_(n),this.endPost_=oh.getEndPost_(n)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){return this.index_.compare(this.getStartPost(),n)<=0&&this.index_.compare(n,this.getEndPost())<=0}updateChild(n,r,s,o,c,h){return this.matches(new Nt(r,s))||(s=Ct.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,s,o,c,h)}updateFullNode(n,r,s){r.isLeafNode()&&(r=Ct.EMPTY_NODE);let o=r.withIndex(this.index_);o=o.updatePriority(Ct.EMPTY_NODE);const c=this;return r.forEachChild(yn,(h,_)=>{c.matches(new Nt(h,_))||(o=o.updateImmediateChild(h,Ct.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}return n.getIndex().maxPost()}}class hD{constructor(n){this.rangedFilter_=new oh(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft()}updateChild(n,r,s,o,c,h){return this.rangedFilter_.matches(new Nt(r,s))||(s=Ct.EMPTY_NODE),n.getImmediateChild(r).equals(s)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,s,o,c,h):this.fullLimitUpdateChild_(n,r,s,c,h)}updateFullNode(n,r,s){let o;if(r.isLeafNode()||r.isEmpty())o=Ct.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){let c;o=Ct.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;c.hasNext()&&h<this.limit_;){const _=c.getNext();let w;if(w=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),_)<=0:this.index_.compare(_,this.rangedFilter_.getEndPost())<=0,!w)break;o=o.updateImmediateChild(_.name,_.node),h++}}else{let c,h,_,w;if(o=r.withIndex(this.index_),o=o.updatePriority(Ct.EMPTY_NODE),this.reverse_){w=o.getReverseIterator(this.index_),c=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();const R=this.index_.getCompare();_=(P,k)=>R(k,P)}else w=o.getIterator(this.index_),c=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),_=this.index_.getCompare();let T=0,S=!1;for(;w.hasNext();){const R=w.getNext();!S&&_(c,R)<=0&&(S=!0),S&&T<this.limit_&&_(R,h)<=0?T++:o=o.updateImmediateChild(R.name,Ct.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,s)}updatePriority(n,r){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,r,s,o,c){let h;if(this.reverse_){const R=this.index_.getCompare();h=(P,k)=>R(k,P)}else h=this.index_.getCompare();const _=n;(0,L.hu)(_.numChildren()===this.limit_,"");const w=new Nt(r,s),T=this.reverse_?_.getFirstChild(this.index_):_.getLastChild(this.index_),S=this.rangedFilter_.matches(w);if(_.hasChild(r)){const R=_.getImmediateChild(r);let P=o.getChildAfterChild(this.index_,T,this.reverse_);for(;null!=P&&(P.name===r||_.hasChild(P.name));)P=o.getChildAfterChild(this.index_,P,this.reverse_);const k=null==P?1:h(P,w);if(S&&!s.isEmpty()&&k>=0)return null!=c&&c.trackChildChange(zp(r,s,R)),_.updateImmediateChild(r,s);{null!=c&&c.trackChildChange(Zp(r,R));const J=_.updateImmediateChild(r,Ct.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=c&&c.trackChildChange(rc(P.name,P.node)),J.updateImmediateChild(P.name,P.node)):J}}return s.isEmpty()?n:S&&h(T,w)>=0?(null!=c&&(c.trackChildChange(Zp(T.name,T.node)),c.trackChildChange(rc(r,s))),_.updateImmediateChild(r,s).updateImmediateChild(T.name,Ct.EMPTY_NODE)):n}}class Va{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yn}copy(){const n=new Va;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function uC(i,n,r){const s=i.copy();return s.startSet_=!0,void 0===n&&(n=null),s.indexStartValue_=n,null!=r?(s.startNameSet_=!0,s.indexStartName_=r):(s.startNameSet_=!1,s.indexStartName_=""),s}function gD(i,n,r){const s=i.copy();return s.endSet_=!0,void 0===n&&(n=null),s.indexEndValue_=n,void 0!==r?(s.endNameSet_=!0,s.indexEndName_=r):(s.endNameSet_=!1,s.indexEndName_=""),s}function ah(i,n){const r=i.copy();return r.index_=n,r}function ao(i){const n={};if(i.isDefault())return n;let r;return i.index_===yn?r="$priority":i.index_===dy?r="$value":i.index_===Ko?r="$key":((0,L.hu)(i.index_ instanceof cy,"Unrecognized index type!"),r=i.index_.toString()),n.orderBy=(0,L.Pz)(r),i.startSet_&&(n.startAt=(0,L.Pz)(i.indexStartValue_),i.startNameSet_&&(n.startAt+=","+(0,L.Pz)(i.indexStartName_))),i.endSet_&&(n.endAt=(0,L.Pz)(i.indexEndValue_),i.endNameSet_&&(n.endAt+=","+(0,L.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?n.limitToFirst=i.limit_:n.limitToLast=i.limit_),n}function mD(i){const n={};if(i.startSet_&&(n.sp=i.indexStartValue_,i.startNameSet_&&(n.sn=i.indexStartName_)),i.endSet_&&(n.ep=i.indexEndValue_,i.endNameSet_&&(n.en=i.indexEndName_)),i.limitSet_){n.l=i.limit_;let r=i.viewFrom_;""===r&&(r=i.isViewFromLeft()?"l":"r"),n.vf=r}return i.index_!==yn&&(n.i=i.index_.toString()),n}class Kp extends Cx{constructor(n,r,s,o){super(),this.repoInfo_=n,this.onDataUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=$d("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,r){return void 0!==r?"tag$"+r:((0,L.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,r,s,o){const c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);const h=Kp.getListenId_(n,s),_={};this.listens_[h]=_;const w=ao(n._queryParams);this.restRequest_(c+".json",w,(T,S)=>{let R=S;if(404===T&&(R=null,T=null),null===T&&this.onDataUpdate_(c,R,!1,s),(0,L.DV)(this.listens_,h)===_){let P;P=T?401===T?"permission_denied":"rest_error:"+T:"ok",o(P,null)}})}unlisten(n,r){const s=Kp.getListenId_(n,r);delete this.listens_[s]}get(n){const r=ao(n._queryParams),s=n._path.toString(),o=new L.BH;return this.restRequest_(s+".json",r,(c,h)=>{let _=h;404===c&&(_=null,c=null),null===c?(this.onDataUpdate_(s,_,!1,null),o.resolve(_)):o.reject(new Error(_))}),o.promise}refreshAuthToken(n){}restRequest_(n,r={},s){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(r.auth=o.accessToken),c&&c.token&&(r.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,L.xO)(r);this.log_("Sending REST request for "+h);const _=new XMLHttpRequest;_.onreadystatechange=()=>{if(s&&4===_.readyState){this.log_("REST Response for "+h+" received. status:",_.status,"response:",_.responseText);let w=null;if(_.status>=200&&_.status<300){try{w=(0,L.cI)(_.responseText)}catch(T){ai("Failed to parse JSON response for "+h+": "+_.responseText)}s(null,w)}else 401!==_.status&&404!==_.status&&ai("Got unsuccessful REST response for "+h+" Status: "+_.status),s(_.status);s=null}},_.open("GET",h,!0),_.send()})}}class Yo{constructor(){this.rootNode_=Ct.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}function Ai(){return{value:null,children:new Map}}function Hr(i,n,r){if(Ot(n))i.value=r,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(n,r);else{const s=Dt(n);i.children.has(s)||i.children.set(s,Ai()),Hr(i.children.get(s),n=_n(n),r)}}function fy(i,n){if(Ot(n))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const r=i.value;return i.value=null,r.forEachChild(yn,(s,o)=>{Hr(i,new Xt(s),o)}),fy(i,n)}}if(i.children.size>0){const r=Dt(n);return n=_n(n),i.children.has(r)&&fy(i.children.get(r),n)&&i.children.delete(r),0===i.children.size}return!0}function py(i,n,r){null!==i.value?r(n,i.value):function(i,n){i.children.forEach((r,s)=>{n(s,r)})}(i,(s,o)=>{py(o,new Xt(n.toString()+"/"+s),r)})}class Lx{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),r=Object.assign({},n);return this.last_&&Yn(this.last_,(s,o)=>{r[s]=r[s]-o}),this.last_=n,r}}class Yp{constructor(n,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Lx(n);const s=1e4+2e4*Math.random();qd(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const n=this.statsListener_.get(),r={};let s=!1;Yn(n,(o,c)=>{c>0&&(0,L.r3)(this.statsToReport_,o)&&(r[o]=c,s=!0)}),s&&this.server_.reportStats(r),qd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ts=(()=>(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ts||(Ts={})),Ts))();function my(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class Qp{constructor(n,r,s){this.path=n,this.affectedTree=r,this.revert=s,this.type=Ts.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(Ot(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Xt(n));return new Qp(qt(),r,this.revert)}}return(0,L.hu)(Dt(this.path)===n,"operationForChild called for unrelated child."),new Qp(_n(this.path),this.affectedTree,this.revert)}}class kl{constructor(n,r){this.source=n,this.path=r,this.type=Ts.LISTEN_COMPLETE}operationForChild(n){return Ot(this.path)?new kl(this.source,qt()):new kl(this.source,_n(this.path))}}class ic{constructor(n,r,s){this.source=n,this.path=r,this.snap=s,this.type=Ts.OVERWRITE}operationForChild(n){return Ot(this.path)?new ic(this.source,qt(),this.snap.getImmediateChild(n)):new ic(this.source,_n(this.path),this.snap)}}class sc{constructor(n,r,s){this.source=n,this.path=r,this.children=s,this.type=Ts.MERGE}operationForChild(n){if(Ot(this.path)){const r=this.children.subtree(new Xt(n));return r.isEmpty()?null:r.value?new ic(this.source,qt(),r.value):new sc(this.source,qt(),r)}return(0,L.hu)(Dt(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new sc(this.source,_n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ua{constructor(n,r,s){this.node_=n,this.fullyInitialized_=r,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Ot(n))return this.isFullyInitialized()&&!this.filtered_;const r=Dt(n);return this.isCompleteForChild(r)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class fC{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function lh(i,n,r,s,o,c){const h=s.filter(_=>_.type===r);h.sort((_,w)=>function(i,n,r){if(null==n.childName||null==r.childName)throw(0,L.g5)("Should only compare child_ events.");const s=new Nt(n.childName,n.snapshotNode),o=new Nt(r.childName,r.snapshotNode);return i.index_.compare(s,o)}(i,_,w)),h.forEach(_=>{const w=function(i,n,r){return"value"===n.type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,i.index_)),n}(i,_,c);o.forEach(T=>{T.respondsTo(_.type)&&n.push(T.createEvent(w,i.query_))})})}function Jp(i,n){return{eventCache:i,serverCache:n}}function uh(i,n,r,s){return Jp(new Ua(n,r,s),i.serverCache)}function pC(i,n,r,s){return Jp(i.eventCache,new Ua(n,r,s))}function Xp(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Fl(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let gC;class vn{constructor(n,r=(()=>(gC||(gC=new jr(dx)),gC))()){this.value=n,this.children=r}static fromObject(n){let r=new vn(null);return Yn(n,(s,o)=>{r=r.set(new Xt(s),o)}),r}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,r){if(null!=this.value&&r(this.value))return{path:qt(),value:this.value};if(Ot(n))return null;{const s=Dt(n),o=this.children.get(s);if(null!==o){const c=o.findRootMostMatchingPathAndValue(_n(n),r);return null!=c?{path:Pn(new Xt(s),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Ot(n))return this;{const r=Dt(n),s=this.children.get(r);return null!==s?s.subtree(_n(n)):new vn(null)}}set(n,r){if(Ot(n))return new vn(r,this.children);{const s=Dt(n),c=(this.children.get(s)||new vn(null)).set(_n(n),r),h=this.children.insert(s,c);return new vn(this.value,h)}}remove(n){if(Ot(n))return this.children.isEmpty()?new vn(null):new vn(null,this.children);{const r=Dt(n),s=this.children.get(r);if(s){const o=s.remove(_n(n));let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),null===this.value&&c.isEmpty()?new vn(null):new vn(this.value,c)}return this}}get(n){if(Ot(n))return this.value;{const r=Dt(n),s=this.children.get(r);return s?s.get(_n(n)):null}}setTree(n,r){if(Ot(n))return r;{const s=Dt(n),c=(this.children.get(s)||new vn(null)).setTree(_n(n),r);let h;return h=c.isEmpty()?this.children.remove(s):this.children.insert(s,c),new vn(this.value,h)}}fold(n){return this.fold_(qt(),n)}fold_(n,r){const s={};return this.children.inorderTraversal((o,c)=>{s[o]=c.fold_(Pn(n,o),r)}),r(n,this.value,s)}findOnPath(n,r){return this.findOnPath_(n,qt(),r)}findOnPath_(n,r,s){const o=!!this.value&&s(r,this.value);if(o)return o;if(Ot(n))return null;{const c=Dt(n),h=this.children.get(c);return h?h.findOnPath_(_n(n),Pn(r,c),s):null}}foreachOnPath(n,r){return this.foreachOnPath_(n,qt(),r)}foreachOnPath_(n,r,s){if(Ot(n))return this;{this.value&&s(r,this.value);const o=Dt(n),c=this.children.get(o);return c?c.foreachOnPath_(_n(n),Pn(r,o),s):new vn(null)}}foreach(n){this.foreach_(qt(),n)}foreach_(n,r){this.children.inorderTraversal((s,o)=>{o.foreach_(Pn(n,s),r)}),this.value&&r(n,this.value)}foreachChild(n){this.children.inorderTraversal((r,s)=>{s.value&&n(r,s.value)})}}class lo{constructor(n){this.writeTree_=n}static empty(){return new lo(new vn(null))}}function eg(i,n,r){if(Ot(n))return new lo(new vn(r));{const s=i.writeTree_.findRootMostValueAndPath(n);if(null!=s){const o=s.path;let c=s.value;const h=Qn(o,n);return c=c.updateChild(h,r),new lo(i.writeTree_.set(o,c))}{const o=new vn(r),c=i.writeTree_.setTree(n,o);return new lo(c)}}}function mC(i,n,r){let s=i;return Yn(r,(o,c)=>{s=eg(s,Pn(n,o),c)}),s}function ED(i,n){if(Ot(n))return lo.empty();{const r=i.writeTree_.setTree(n,new vn(null));return new lo(r)}}function _C(i,n){return null!=oc(i,n)}function oc(i,n){const r=i.writeTree_.findRootMostValueAndPath(n);return null!=r?i.writeTree_.get(r.path).getChild(Qn(r.path,n)):null}function wD(i){const n=[],r=i.writeTree_.value;return null!=r?r.isLeafNode()||r.forEachChild(yn,(s,o)=>{n.push(new Nt(s,o))}):i.writeTree_.children.inorderTraversal((s,o)=>{null!=o.value&&n.push(new Nt(s,o.value))}),n}function Ll(i,n){if(Ot(n))return i;{const r=oc(i,n);return new lo(null!=r?new vn(r):i.writeTree_.subtree(n))}}function yC(i){return i.writeTree_.isEmpty()}function ch(i,n){return CD(qt(),i.writeTree_,n)}function CD(i,n,r){if(null!=n.value)return r.updateChild(i,n.value);{let s=null;return n.children.inorderTraversal((o,c)=>{".priority"===o?((0,L.hu)(null!==c.value,"Priority writes must always be leaf nodes"),s=c.value):r=CD(Pn(i,o),c,r)}),!r.getChild(i).isEmpty()&&null!==s&&(r=r.updateChild(Pn(i,".priority"),s)),r}}function yy(i,n){return SC(n,i)}function TD(i,n){if(i.snap)return bs(i.path,n);for(const r in i.children)if(i.children.hasOwnProperty(r)&&bs(Pn(i.path,r),n))return!0;return!1}function DD(i){return i.visible}function vC(i,n,r){let s=lo.empty();for(let o=0;o<i.length;++o){const c=i[o];if(n(c)){const h=c.path;let _;if(c.snap)bs(r,h)?(_=Qn(r,h),s=eg(s,_,c.snap)):bs(h,r)&&(_=Qn(h,r),s=eg(s,qt(),c.snap.getChild(_)));else{if(!c.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(bs(r,h))_=Qn(r,h),s=mC(s,_,c.children);else if(bs(h,r))if(_=Qn(h,r),Ot(_))s=mC(s,qt(),c.children);else{const w=(0,L.DV)(c.children,Dt(_));if(w){const T=w.getChild(_n(_));s=eg(s,qt(),T)}}}}}return s}function EC(i,n,r,s,o){if(s||o){const c=Ll(i.visibleWrites,n);return!o&&yC(c)?r:o||null!=r||_C(c,qt())?ch(vC(i.allWrites,function(T){return(T.visible||o)&&(!s||!~s.indexOf(T.writeId))&&(bs(T.path,n)||bs(n,T.path))},n),r||Ct.EMPTY_NODE):null}{const c=oc(i.visibleWrites,n);if(null!=c)return c;{const h=Ll(i.visibleWrites,n);return yC(h)?r:null!=r||_C(h,qt())?ch(h,r||Ct.EMPTY_NODE):null}}}function vy(i,n,r,s){return EC(i.writeTree,i.treePath,n,r,s)}function bC(i,n){return function(i,n,r){let s=Ct.EMPTY_NODE;const o=oc(i.visibleWrites,n);if(o)return o.isLeafNode()||o.forEachChild(yn,(c,h)=>{s=s.updateImmediateChild(c,h)}),s;if(r){const c=Ll(i.visibleWrites,n);return r.forEachChild(yn,(h,_)=>{const w=ch(Ll(c,new Xt(h)),_);s=s.updateImmediateChild(h,w)}),wD(c).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}return wD(Ll(i.visibleWrites,n)).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}(i.writeTree,i.treePath,n)}function lc(i,n,r,s){return function(i,n,r,s,o){(0,L.hu)(s||o,"Either existingEventSnap or existingServerSnap must exist");const c=Pn(n,r);if(_C(i.visibleWrites,c))return null;{const h=Ll(i.visibleWrites,c);return yC(h)?o.getChild(r):ch(h,o.getChild(r))}}(i.writeTree,i.treePath,n,r,s)}function TC(i,n){return function(i,n){return oc(i.visibleWrites,n)}(i.writeTree,Pn(i.treePath,n))}function ND(i,n,r){return function(i,n,r,s){const o=Pn(n,r),c=oc(i.visibleWrites,o);return null!=c?c:s.isCompleteForChild(r)?ch(Ll(i.visibleWrites,o),s.getNode().getImmediateChild(r)):null}(i.writeTree,i.treePath,n,r)}function DC(i,n){return SC(Pn(i.treePath,n),i.writeTree)}function SC(i,n){return{treePath:i,writeTree:n}}class EF{constructor(){this.changeMap=new Map}trackChildChange(n){const r=n.type,s=n.childName;(0,L.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==s,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const c=o.type;if("child_added"===r&&"child_removed"===c)this.changeMap.set(s,zp(s,n.snapshotNode,o.snapshotNode));else if("child_removed"===r&&"child_added"===c)this.changeMap.delete(s);else if("child_removed"===r&&"child_changed"===c)this.changeMap.set(s,Zp(s,o.oldSnap));else if("child_changed"===r&&"child_added"===c)this.changeMap.set(s,rc(s,n.snapshotNode));else{if("child_changed"!==r||"child_changed"!==c)throw(0,L.g5)("Illegal combination of changes: "+n+" occurred after "+o);this.changeMap.set(s,zp(s,n.snapshotNode,o.oldSnap))}}else this.changeMap.set(s,n)}getChanges(){return Array.from(this.changeMap.values())}}const xD=new class{getCompleteChild(n){return null}getChildAfterChild(n,r,s){return null}};class AC{constructor(n,r,s=null){this.writes_=n,this.viewCache_=r,this.optCompleteServerCache_=s}getCompleteChild(n){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);{const s=null!=this.optCompleteServerCache_?new Ua(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ND(this.writes_,n,s)}}getChildAfterChild(n,r,s){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fl(this.viewCache_),c=function(i,n,r,s,o,c){return function(i,n,r,s,o,c,h){let _;const w=Ll(i.visibleWrites,n),T=oc(w,qt());if(null!=T)_=T;else{if(null==r)return[];_=ch(w,r)}if(_=_.withIndex(h),_.isEmpty()||_.isLeafNode())return[];{const S=[],R=h.getCompare(),P=c?_.getReverseIteratorFrom(s,h):_.getIteratorFrom(s,h);let k=P.getNext();for(;k&&S.length<o;)0!==R(k,s)&&S.push(k),k=P.getNext();return S}}(i.writeTree,i.treePath,n,r,s,o,c)}(this.writes_,o,r,1,s,n);return 0===c.length?null:c[0]}}function tg(i,n,r,s,o,c){const h=n.eventCache;if(null!=TC(s,r))return n;{let _,w;if(Ot(r))if((0,L.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const T=Fl(n),R=bC(s,T instanceof Ct?T:Ct.EMPTY_NODE);_=i.filter.updateFullNode(n.eventCache.getNode(),R,c)}else{const T=vy(s,Fl(n));_=i.filter.updateFullNode(n.eventCache.getNode(),T,c)}else{const T=Dt(r);if(".priority"===T){(0,L.hu)(1===Ml(r),"Can't have a priority with additional path components");const S=h.getNode();w=n.serverCache.getNode();const R=lc(s,r,S,w);_=null!=R?i.filter.updatePriority(S,R):h.getNode()}else{const S=_n(r);let R;if(h.isCompleteForChild(T)){w=n.serverCache.getNode();const P=lc(s,r,h.getNode(),w);R=null!=P?h.getNode().getImmediateChild(T).updateChild(S,P):h.getNode().getImmediateChild(T)}else R=ND(s,T,n.serverCache);_=null!=R?i.filter.updateChild(h.getNode(),T,R,S,o,c):h.getNode()}}return uh(n,_,h.isFullyInitialized()||Ot(r),i.filter.filtersNodes())}}function Cn(i,n,r,s,o,c,h,_){const w=n.serverCache;let T;const S=h?i.filter:i.filter.getIndexedFilter();if(Ot(r))T=S.updateFullNode(w.getNode(),s,null);else if(S.filtersNodes()&&!w.isFiltered()){const k=w.getNode().updateChild(r,s);T=S.updateFullNode(w.getNode(),k,null)}else{const k=Dt(r);if(!w.isCompleteForPath(r)&&Ml(r)>1)return n;const U=_n(r),me=w.getNode().getImmediateChild(k).updateChild(U,s);T=".priority"===k?S.updatePriority(w.getNode(),me):S.updateChild(w.getNode(),k,me,U,xD,null)}const R=pC(n,T,w.isFullyInitialized()||Ot(r),S.filtersNodes());return tg(i,R,r,o,new AC(o,R,c),_)}function PD(i,n,r,s,o,c,h){const _=n.eventCache;let w,T;const S=new AC(o,n,c);if(Ot(r))T=i.filter.updateFullNode(n.eventCache.getNode(),s,h),w=uh(n,T,!0,i.filter.filtersNodes());else{const R=Dt(r);if(".priority"===R)T=i.filter.updatePriority(n.eventCache.getNode(),s),w=uh(n,T,_.isFullyInitialized(),_.isFiltered());else{const P=_n(r),k=_.getNode().getImmediateChild(R);let U;if(Ot(P))U=s;else{const J=S.getCompleteChild(R);U=null!=J?".priority"===JI(P)&&J.getChild(Qw(P)).isEmpty()?J:J.updateChild(P,s):Ct.EMPTY_NODE}w=k.equals(U)?n:uh(n,i.filter.updateChild(_.getNode(),R,U,P,S,h),_.isFullyInitialized(),i.filter.filtersNodes())}}return w}function RC(i,n){return i.eventCache.isCompleteForChild(n)}function OD(i,n,r){return r.foreach((s,o)=>{n=n.updateChild(s,o)}),n}function Cy(i,n,r,s,o,c,h,_){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let T,w=n;T=Ot(r)?s:new vn(null).setTree(r,s);const S=n.serverCache.getNode();return T.children.inorderTraversal((R,P)=>{if(S.hasChild(R)){const U=OD(0,n.serverCache.getNode().getImmediateChild(R),P);w=Cn(i,w,new Xt(R),U,o,c,h,_)}}),T.children.inorderTraversal((R,P)=>{const k=!n.serverCache.isCompleteForChild(R)&&void 0===P.value;if(!S.hasChild(R)&&!k){const J=OD(0,n.serverCache.getNode().getImmediateChild(R),P);w=Cn(i,w,new Xt(R),J,o,c,h,_)}}),w}class Gx{constructor(n,r){this.query_=n,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new lC(s.getIndex()),c=function(i){return i.loadsAllData()?new lC(i.getIndex()):i.hasLimit()?new hD(i):new oh(i)}(s);this.processor_=function(i){return{filter:i}}(c);const h=r.serverCache,_=r.eventCache,w=o.updateFullNode(Ct.EMPTY_NODE,h.getNode(),null),T=c.updateFullNode(Ct.EMPTY_NODE,_.getNode(),null),S=new Ua(w,h.isFullyInitialized(),o.filtersNodes()),R=new Ua(T,_.isFullyInitialized(),c.filtersNodes());this.viewCache_=Jp(R,S),this.eventGenerator_=new fC(this.query_)}get query(){return this.query_}}function ng(i,n){const r=Fl(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!Ot(n)&&!r.getImmediateChild(Dt(n)).isEmpty())?r.getChild(n):null}function LD(i){return 0===i.eventRegistrations_.length}function VD(i,n,r){const s=[];if(r){(0,L.hu)(null==n,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(c=>{const h=c.createCancelEvent(r,o);h&&s.push(h)})}if(n){let o=[];for(let c=0;c<i.eventRegistrations_.length;++c){const h=i.eventRegistrations_[c];if(h.matches(n)){if(n.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(c+1));break}}else o.push(h)}i.eventRegistrations_=o}else i.eventRegistrations_=[];return s}function rg(i,n,r,s){n.type===Ts.MERGE&&null!==n.source.queryId&&((0,L.hu)(Fl(i.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(Xp(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,c=function(i,n,r,s,o){const c=new EF;let h,_;if(r.type===Ts.OVERWRITE){const T=r;T.source.fromUser?h=PD(i,n,T.path,T.snap,s,o,c):((0,L.hu)(T.source.fromServer,"Unknown source."),_=T.source.tagged||n.serverCache.isFiltered()&&!Ot(T.path),h=Cn(i,n,T.path,T.snap,s,o,_,c))}else if(r.type===Ts.MERGE){const T=r;T.source.fromUser?h=function(i,n,r,s,o,c,h){let _=n;return s.foreach((w,T)=>{const S=Pn(r,w);RC(n,Dt(S))&&(_=PD(i,_,S,T,o,c,h))}),s.foreach((w,T)=>{const S=Pn(r,w);RC(n,Dt(S))||(_=PD(i,_,S,T,o,c,h))}),_}(i,n,T.path,T.children,s,o,c):((0,L.hu)(T.source.fromServer,"Unknown source."),_=T.source.tagged||n.serverCache.isFiltered(),h=Cy(i,n,T.path,T.children,s,o,_,c))}else if(r.type===Ts.ACK_USER_WRITE){const T=r;h=T.revert?function(i,n,r,s,o,c){let h;if(null!=TC(s,r))return n;{const _=new AC(s,n,o),w=n.eventCache.getNode();let T;if(Ot(r)||".priority"===Dt(r)){let S;if(n.serverCache.isFullyInitialized())S=vy(s,Fl(n));else{const R=n.serverCache.getNode();(0,L.hu)(R instanceof Ct,"serverChildren would be complete if leaf node"),S=bC(s,R)}S=S,T=i.filter.updateFullNode(w,S,c)}else{const S=Dt(r);let R=ND(s,S,n.serverCache);null==R&&n.serverCache.isCompleteForChild(S)&&(R=w.getImmediateChild(S)),T=null!=R?i.filter.updateChild(w,S,R,_n(r),_,c):n.eventCache.getNode().hasChild(S)?i.filter.updateChild(w,S,Ct.EMPTY_NODE,_n(r),_,c):w,T.isEmpty()&&n.serverCache.isFullyInitialized()&&(h=vy(s,Fl(n)),h.isLeafNode()&&(T=i.filter.updateFullNode(T,h,c)))}return h=n.serverCache.isFullyInitialized()||null!=TC(s,qt()),uh(n,T,h,i.filter.filtersNodes())}}(i,n,T.path,s,o,c):function(i,n,r,s,o,c,h){if(null!=TC(o,r))return n;const _=n.serverCache.isFiltered(),w=n.serverCache;if(null!=s.value){if(Ot(r)&&w.isFullyInitialized()||w.isCompleteForPath(r))return Cn(i,n,r,w.getNode().getChild(r),o,c,_,h);if(Ot(r)){let T=new vn(null);return w.getNode().forEachChild(Ko,(S,R)=>{T=T.set(new Xt(S),R)}),Cy(i,n,r,T,o,c,_,h)}return n}{let T=new vn(null);return s.foreach((S,R)=>{const P=Pn(r,S);w.isCompleteForPath(P)&&(T=T.set(S,w.getNode().getChild(P)))}),Cy(i,n,r,T,o,c,_,h)}}(i,n,T.path,T.affectedTree,s,o,c)}else{if(r.type!==Ts.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+r.type);h=function(i,n,r,s,o){const c=n.serverCache;return tg(i,pC(n,c.getNode(),c.isFullyInitialized()||Ot(r),c.isFiltered()),r,s,xD,o)}(i,n,r.path,s,c)}const w=c.getChanges();return function(i,n,r){const s=n.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=Xp(i);(r.length>0||!i.eventCache.isFullyInitialized()||o&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&r.push(Jn(Xp(n)))}}(n,h,w),{viewCache:h,changes:w}}(i.processor_,o,n,r,s);return function(i,n){(0,L.hu)(n.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(n.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,c.viewCache),(0,L.hu)(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,xC(i,c.changes,c.viewCache.eventCache.getNode(),null)}function xC(i,n,r,s){return function(i,n,r,s){const o=[],c=[];return n.forEach(h=>{"child_changed"===h.type&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(function(i,n){return{type:"child_moved",snapshotNode:n,childName:i}}(h.childName,h.snapshotNode))}),lh(i,o,"child_removed",n,s,r),lh(i,o,"child_added",n,s,r),lh(i,o,"child_moved",c,s,r),lh(i,o,"child_changed",n,s,r),lh(i,o,"value",n,s,r),o}(i.eventGenerator_,n,r,s?[s]:i.eventRegistrations_)}let ig,FC;class BD{constructor(){this.views=new Map}}function PC(i,n,r,s){const o=n.source.queryId;if(null!==o){const c=i.views.get(o);return(0,L.hu)(null!=c,"SyncTree gave us an op for an invalid query."),rg(c,n,r,s)}{let c=[];for(const h of i.views.values())c=c.concat(rg(h,n,r,s));return c}}function jD(i,n,r,s,o){const h=i.views.get(n._queryIdentifier);if(!h){let _=vy(r,o?s:null),w=!1;_?w=!0:s instanceof Ct?(_=bC(r,s),w=!1):(_=Ct.EMPTY_NODE,w=!1);const T=Jp(new Ua(_,w,!1),new Ua(s,o,!1));return new Gx(n,T)}return h}function OC(i){const n=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||n.push(r);return n}function Vl(i,n){let r=null;for(const s of i.views.values())r=r||ng(s,n);return r}function MC(i,n){return n._queryParams.loadsAllData()?kC(i):i.views.get(n._queryIdentifier)}function qD(i,n){return null!=MC(i,n)}function Ul(i){return null!=kC(i)}function kC(i){for(const n of i.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let GD=1;class ag{constructor(n){this.listenProvider_=n,this.syncPointTree_=new vn(null),this.pendingWriteTree_={visibleWrites:lo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function LC(i,n,r,s,o){return function(i,n,r,s,o){(0,L.hu)(s>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),i.allWrites.push({path:n,snap:r,writeId:s,visible:o}),o&&(i.visibleWrites=eg(i.visibleWrites,n,r)),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s,o),o?hh(i,new ic({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,r)):[]}function Ba(i,n,r=!1){const s=function(i,n){for(let r=0;r<i.allWrites.length;r++){const s=i.allWrites[r];if(s.writeId===n)return s}return null}(i.pendingWriteTree_,n);if(function(i,n){const r=i.allWrites.findIndex(_=>_.writeId===n);(0,L.hu)(r>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[r];i.allWrites.splice(r,1);let o=s.visible,c=!1,h=i.allWrites.length-1;for(;o&&h>=0;){const _=i.allWrites[h];_.visible&&(h>=r&&TD(_,s.path)?o=!1:bs(s.path,_.path)&&(c=!0)),h--}return!!o&&(c?(function(i){i.visibleWrites=vC(i.allWrites,DD,qt()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(s.snap?i.visibleWrites=ED(i.visibleWrites,s.path):Yn(s.children,w=>{i.visibleWrites=ED(i.visibleWrites,Pn(s.path,w))}),!0))}(i.pendingWriteTree_,n)){let c=new vn(null);return null!=s.snap?c=c.set(qt(),!0):Yn(s.children,h=>{c=c.set(new Xt(h),!0)}),hh(i,new Qp(s.path,c,r))}return[]}function ja(i,n,r){return hh(i,new ic({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}function VC(i,n,r,s){const o=n._path,c=i.syncPointTree_.get(o);let h=[];if(c&&("default"===n._queryIdentifier||qD(c,n))){const _=function(i,n,r,s){const o=n._queryIdentifier,c=[];let h=[];const _=Ul(i);if("default"===o)for(const[w,T]of i.views.entries())h=h.concat(VD(T,r,s)),LD(T)&&(i.views.delete(w),T.query._queryParams.loadsAllData()||c.push(T.query));else{const w=i.views.get(o);w&&(h=h.concat(VD(w,r,s)),LD(w)&&(i.views.delete(o),w.query._queryParams.loadsAllData()||c.push(w.query)))}return _&&!Ul(i)&&c.push(new((0,L.hu)(ig,"Reference.ts has not been loaded"),ig)(n._repo,n._path)),{removed:c,events:h}}(c,n,r,s);(function(i){return 0===i.views.size})(c)&&(i.syncPointTree_=i.syncPointTree_.remove(o));const w=_.removed;h=_.events;const T=-1!==w.findIndex(R=>R._queryParams.loadsAllData()),S=i.syncPointTree_.findOnPath(o,(R,P)=>Ul(P));if(T&&!S){const R=i.syncPointTree_.subtree(o);if(!R.isEmpty()){const P=function(i){return i.fold((n,r,s)=>{if(r&&Ul(r))return[kC(r)];{let o=[];return r&&(o=OC(r)),Yn(s,(c,h)=>{o=o.concat(h)}),o}})}(R);for(let k=0;k<P.length;++k){const U=P[k],J=U.query,me=BC(i,U);i.listenProvider_.startListening(fh(J),Ty(i,J),me.hashFn,me.onComplete)}}}if(!S&&w.length>0&&!s)if(T){const R=null;i.listenProvider_.stopListening(fh(n),R)}else w.forEach(R=>{const P=i.queryToTagMap.get(lg(R));i.listenProvider_.stopListening(fh(R),P)});!function(i,n){for(let r=0;r<n.length;++r){const s=n[r];if(!s._queryParams.loadsAllData()){const o=lg(s),c=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(c)}}}(i,w)}return h}function ZD(i,n,r){const s=n._path;let o=null,c=!1;i.syncPointTree_.foreachOnPath(s,(R,P)=>{const k=Qn(R,s);o=o||Vl(P,k),c=c||Ul(P)});let _,h=i.syncPointTree_.get(s);h?(c=c||Ul(h),o=o||Vl(h,qt())):(h=new BD,i.syncPointTree_=i.syncPointTree_.set(s,h)),null!=o?_=!0:(_=!1,o=Ct.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((P,k)=>{const U=Vl(k,qt());U&&(o=o.updateImmediateChild(P,U))}));const w=qD(h,n);if(!w&&!n._queryParams.loadsAllData()){const R=lg(n);(0,L.hu)(!i.queryToTagMap.has(R),"View does not exist, but we have a tag");const P=GD++;i.queryToTagMap.set(R,P),i.tagToQueryMap.set(P,R)}let S=function(i,n,r,s,o,c){const h=jD(i,n,s,o,c);return i.views.has(n._queryIdentifier)||i.views.set(n._queryIdentifier,h),function(i,n){i.eventRegistrations_.push(n)}(h,r),function(i,n){const r=i.viewCache_.eventCache,s=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(yn,(c,h)=>{s.push(rc(c,h))}),r.isFullyInitialized()&&s.push(Jn(r.getNode())),xC(i,s,r.getNode(),n)}(h,r)}(h,n,r,yy(i.pendingWriteTree_,s),o,_);if(!w&&!c){const R=MC(h,n);S=S.concat(function(i,n,r){const s=n._path,o=Ty(i,n),c=BC(i,r),h=i.listenProvider_.startListening(fh(n),o,c.hashFn,c.onComplete),_=i.syncPointTree_.subtree(s);if(o)(0,L.hu)(!Ul(_.value),"If we're adding a query, it shouldn't be shadowed");else{const w=_.fold((T,S,R)=>{if(!Ot(T)&&S&&Ul(S))return[kC(S).query];{let P=[];return S&&(P=P.concat(OC(S).map(k=>k.query))),Yn(R,(k,U)=>{P=P.concat(U)}),P}});for(let T=0;T<w.length;++T){const S=w[T];i.listenProvider_.stopListening(fh(S),Ty(i,S))}}return h}(i,n,R))}return S}function by(i,n,r){const o=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(n,(h,_)=>{const T=Vl(_,Qn(h,n));if(T)return T});return EC(o,n,c,r,!0)}function hh(i,n){return UC(n,i.syncPointTree_,null,yy(i.pendingWriteTree_,qt()))}function UC(i,n,r,s){if(Ot(i.path))return zD(i,n,r,s);{const o=n.get(qt());null==r&&null!=o&&(r=Vl(o,qt()));let c=[];const h=Dt(i.path),_=i.operationForChild(h),w=n.children.get(h);if(w&&_){const T=r?r.getImmediateChild(h):null,S=DC(s,h);c=c.concat(UC(_,w,T,S))}return o&&(c=c.concat(PC(o,i,s,r))),c}}function zD(i,n,r,s){const o=n.get(qt());null==r&&null!=o&&(r=Vl(o,qt()));let c=[];return n.children.inorderTraversal((h,_)=>{const w=r?r.getImmediateChild(h):null,T=DC(s,h),S=i.operationForChild(h);S&&(c=c.concat(zD(S,_,w,T)))}),o&&(c=c.concat(PC(o,i,s,r))),c}function BC(i,n){const r=n.query,s=Ty(i,r);return{hashFn:()=>(function(i){return i.viewCache_.serverCache.getNode()}(n)||Ct.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return s?function(i,n,r){const s=jC(i,r);if(s){const o=ug(s),c=o.path,h=o.queryId,_=Qn(c,n);return HC(i,c,new kl(my(h),_))}return[]}(i,r._path,s):function(i,n){return hh(i,new kl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(i,r._path);{const c=function(i,n){let r="Unknown Error";"too_big"===i?r="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?r="Client doesn't have permission to access the desired data.":"unavailable"===i&&(r="The service is unavailable");const s=new Error(i+" at "+n._path.toString()+": "+r);return s.code=i.toUpperCase(),s}(o,r);return VC(i,r,null,c)}}}}function Ty(i,n){const r=lg(n);return i.queryToTagMap.get(r)}function lg(i){return i._path.toString()+"$"+i._queryIdentifier}function jC(i,n){return i.tagToQueryMap.get(n)}function ug(i){const n=i.indexOf("$");return(0,L.hu)(-1!==n&&n<i.length-1,"Bad queryKey."),{queryId:i.substr(n+1),path:new Xt(i.substr(0,n))}}function HC(i,n,r){const s=i.syncPointTree_.get(n);return(0,L.hu)(s,"Missing sync point for query tag that we're tracking"),PC(s,r,yy(i.pendingWriteTree_,n),null)}function fh(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new((0,L.hu)(FC,"Reference.ts has not been loaded"),FC)(i._repo,i._path):i}class cg{constructor(n){this.node_=n}getImmediateChild(n){const r=this.node_.getImmediateChild(n);return new cg(r)}node(){return this.node_}}class $C{constructor(n,r){this.syncTree_=n,this.path_=r}getImmediateChild(n){const r=Pn(this.path_,n);return new $C(this.syncTree_,r)}node(){return by(this.syncTree_,this.path_)}}const QD=function(i,n,r){return i&&"object"==typeof i?((0,L.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?iP(i[".sv"],n,r):"object"==typeof i[".sv"]?sP(i[".sv"],n):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},iP=function(i,n,r){switch(i){case"timestamp":return r.timestamp;default:(0,L.hu)(!1,"Unexpected server value: "+i)}},sP=function(i,n,r){i.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;"number"!=typeof s&&(0,L.hu)(!1,"Unexpected increment value: "+s);const o=n.node();if((0,L.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const h=o.getValue();return"number"!=typeof h?s:h+s},JD=function(i,n,r,s){return GC(n,new $C(r,i),s)},qC=function(i,n,r){return GC(i,new cg(n),r)};function GC(i,n,r){const s=i.getPriority().val(),o=QD(s,n.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const h=i,_=QD(h.getValue(),n,r);return _!==h.getValue()||o!==h.getPriority().val()?new tc(_,An(o)):i}{const h=i;return c=h,o!==h.getPriority().val()&&(c=c.updatePriority(new tc(o))),h.forEachChild(yn,(_,w)=>{const T=GC(w,n.getImmediateChild(_),r);T!==w&&(c=c.updateImmediateChild(_,T))}),c}}class WC{constructor(n="",r=null,s={children:{},childCount:0}){this.name=n,this.parent=r,this.node=s}}function Iy(i,n){let r=n instanceof Xt?n:new Xt(n),s=i,o=Dt(r);for(;null!==o;){const c=(0,L.DV)(s.node.children,o)||{children:{},childCount:0};s=new WC(o,s,c),r=_n(r),o=Dt(r)}return s}function Bl(i){return i.node.value}function Dy(i,n){i.node.value=n,fg(i)}function XD(i){return i.node.childCount>0}function dg(i,n){Yn(i.node.children,(r,s)=>{n(new WC(r,i,s))})}function eS(i,n,r,s){r&&!s&&n(i),dg(i,o=>{eS(o,n,!0,s)}),r&&s&&n(i)}function hg(i){return new Xt(null===i.parent?i.name:hg(i.parent)+"/"+i.name)}function fg(i){null!==i.parent&&function(i,n,r){const s=function(i){return void 0===Bl(i)&&!XD(i)}(r),o=(0,L.r3)(i.node.children,n);s&&o?(delete i.node.children[n],i.node.childCount--,fg(i)):!s&&!o&&(i.node.children[n]=r.node,i.node.childCount++,fg(i))}(i.parent,i.name,i)}const tS=/[\[\].#$\/\u0000-\u001F\u007F]/,zC=/[\[\].#$\u0000-\u001F\u007F]/,KC=10485760,Sy=function(i){return"string"==typeof i&&0!==i.length&&!tS.test(i)},Ay=function(i){return"string"==typeof i&&0!==i.length&&!zC.test(i)},ph=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!z_(i)||i&&"object"==typeof i&&(0,L.r3)(i,".sv")},Qo=function(i,n,r,s){s&&void 0===n||gh((0,L.gK)(i,"value"),n,r)},gh=function(i,n,r){const s=r instanceof Xt?new XI(r,i):r;if(void 0===n)throw new Error(i+"contains undefined "+ec(s));if("function"==typeof n)throw new Error(i+"contains a function "+ec(s)+" with contents = "+n.toString());if(z_(n))throw new Error(i+"contains "+n.toString()+" "+ec(s));if("string"==typeof n&&n.length>KC/3&&(0,L.ug)(n)>KC)throw new Error(i+"contains a string greater than "+KC+" utf8 bytes "+ec(s)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let o=!1,c=!1;if(Yn(n,(h,_)=>{if(".value"===h)o=!0;else if(".priority"!==h&&".sv"!==h&&(c=!0,!Sy(h)))throw new Error(i+" contains an invalid key ("+h+") "+ec(s)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(i,n){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(n),i.byteLength_+=(0,L.ug)(n),Jw(i)})(s,h),gh(i,_,s),function(i){const n=i.parts_.pop();i.byteLength_-=(0,L.ug)(n),i.parts_.length>0&&(i.byteLength_-=1)}(s)}),o&&c)throw new Error(i+' contains ".value" child '+ec(s)+" in addition to actual children.")}},YC=function(i,n,r,s){if(s&&void 0===n)return;const o=(0,L.gK)(i,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");const c=[];Yn(n,(h,_)=>{const w=new Xt(h);if(gh(o,_,Pn(r,w)),".priority"===JI(w)&&!ph(_))throw new Error(o+"contains an invalid value for '"+w.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(w)}),function(i,n){let r,s;for(r=0;r<n.length;r++){s=n[r];const c=qp(s);for(let h=0;h<c.length;h++)if((".priority"!==c[h]||h!==c.length-1)&&!Sy(c[h]))throw new Error(i+"contains an invalid key ("+c[h]+") in path "+s.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(Ix);let o=null;for(r=0;r<n.length;r++){if(s=n[r],null!==o&&bs(o,s))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+s.toString());o=s}}(o,c)},rS=function(i,n,r){if(!r||void 0!==n){if(z_(n))throw new Error((0,L.gK)(i,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ph(n))throw new Error((0,L.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pg=function(i,n,r,s){if(!(s&&void 0===r||Sy(r)))throw new Error((0,L.gK)(i,n)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Jo=function(i,n,r,s){if(!(s&&void 0===r||Ay(r)))throw new Error((0,L.gK)(i,n)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ri=function(i,n){if(".info"===Dt(n))throw new Error(i+" failed = Can't modify data under /.info/")},gg=function(i,n){const r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Sy(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ay(i)}(r))throw new Error((0,L.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class uP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ha(i,n){let r=null;for(let s=0;s<n.length;s++){const o=n[s],c=o.getPath();null!==r&&!ty(c,r.path)&&(i.eventLists_.push(r),r=null),null===r&&(r={events:[],path:c}),r.events.push(o)}r&&i.eventLists_.push(r)}function QC(i,n,r){Ha(i,r),iS(i,s=>ty(s,n))}function uo(i,n,r){Ha(i,r),iS(i,s=>bs(s,n)||bs(n,s))}function iS(i,n){i.recursionDepth_++;let r=!0;for(let s=0;s<i.eventLists_.length;s++){const o=i.eventLists_[s];o&&(n(o.path)?(Xo(i.eventLists_[s]),i.eventLists_[s]=null):r=!1)}r&&(i.eventLists_=[]),i.recursionDepth_--}function Xo(i){for(let n=0;n<i.events.length;n++){const r=i.events[n];if(null!==r){i.events[n]=null;const s=r.getEventRunner();Wu&&fr("event: "+r.toString()),Zu(s)}}}const JC="repo_interrupt";class Ry{constructor(n,r,s,o){this.repoInfo_=n,this.forceRestClient_=r,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ai(),this.transactionQueueTree_=new WC,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sS(i){const r=i.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+r}function Ny(i){return function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i}({timestamp:sS(i)})}function oS(i,n,r,s,o){i.dataUpdateCount++;const c=new Xt(n);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(n,r):r;let h=[];if(o)if(s){const w=(0,L.UI)(r,T=>An(T));h=function(i,n,r,s){const o=jC(i,s);if(o){const c=ug(o),h=c.path,_=c.queryId,w=Qn(h,n),T=vn.fromObject(r);return HC(i,h,new sc(my(_),w,T))}return[]}(i.serverSyncTree_,c,w,o)}else{const w=An(r);h=function(i,n,r,s){const o=jC(i,s);if(null!=o){const c=ug(o),h=c.path,_=c.queryId,w=Qn(h,n);return HC(i,h,new ic(my(_),w,r))}return[]}(i.serverSyncTree_,c,w,o)}else if(s){const w=(0,L.UI)(r,T=>An(T));h=function(i,n,r){const s=vn.fromObject(r);return hh(i,new sc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,s))}(i.serverSyncTree_,c,w)}else{const w=An(r);h=ja(i.serverSyncTree_,c,w)}let _=c;h.length>0&&(_=ea(i,c)),uo(i.eventQueue_,_,h)}function aS(i,n){mg(i,"connected",n),!1===n&&function(i){uc(i,"onDisconnectEvents");const n=Ny(i),r=Ai();py(i.onDisconnect_,qt(),(o,c)=>{const h=JD(o,c,i.serverSyncTree_,n);Hr(r,o,h)});let s=[];py(r,qt(),(o,c)=>{s=s.concat(ja(i.serverSyncTree_,o,c));const h=e0(i,o);ea(i,h)}),i.onDisconnect_=Ai(),uo(i.eventQueue_,qt(),s)}(i)}function mg(i,n,r){const s=new Xt("/.info/"+n),o=An(r);i.infoData_.updateSnapshot(s,o);const c=ja(i.infoSyncTree_,s,o);uo(i.eventQueue_,s,c)}function _g(i){return i.nextWriteId_++}function xy(i,n,r,s,o){uc(i,"set",{path:n.toString(),value:r,priority:s});const c=Ny(i),h=An(r,s),_=by(i.serverSyncTree_,n),w=qC(h,_,c),T=_g(i),S=LC(i.serverSyncTree_,n,w,T,!0);Ha(i.eventQueue_,S),i.server_.put(n.toString(),h.val(!0),(P,k)=>{const U="ok"===P;U||ai("set at "+n+" failed: "+P);const J=Ba(i.serverSyncTree_,T,!U);uo(i.eventQueue_,n,J),co(0,o,P,k)});const R=e0(i,n);ea(i,R),uo(i.eventQueue_,R,[])}function fP(i,n,r){i.server_.onDisconnectCancel(n.toString(),(s,o)=>{"ok"===s&&fy(i.onDisconnect_,n),co(0,r,s,o)})}function lS(i,n,r,s){const o=An(r);i.server_.onDisconnectPut(n.toString(),o.val(!0),(c,h)=>{"ok"===c&&Hr(i.onDisconnect_,n,o),co(0,s,c,h)})}function Py(i,n,r){let s;s=".info"===Dt(n._path)?VC(i.infoSyncTree_,n,r):VC(i.serverSyncTree_,n,r),QC(i.eventQueue_,n._path,s)}function dS(i){i.persistentConnection_&&i.persistentConnection_.interrupt(JC)}function uc(i,...n){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),fr(r,...n)}function co(i,n,r,s){n&&Zu(()=>{if("ok"===r)n(null);else{const o=(r||"error").toUpperCase();let c=o;s&&(c+=": "+s);const h=new Error(c);h.code=o,n(h)}})}function Oy(i,n,r){return by(i.serverSyncTree_,n,r)||Ct.EMPTY_NODE}function cc(i,n=i.transactionQueueTree_){if(n||ky(i,n),Bl(n)){const r=yP(i,n);(0,L.hu)(r.length>0,"Sending zero length transaction queue"),r.every(o=>0===o.status)&&function(i,n,r){const s=r.map(T=>T.currentWriteId),o=Oy(i,n,s);let c=o;const h=o.hash();for(let T=0;T<r.length;T++){const S=r[T];(0,L.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const R=Qn(n,S.path);c=c.updateChild(R,S.currentOutputSnapshotRaw)}const _=c.val(!0),w=n;i.server_.put(w.toString(),_,T=>{uc(i,"transaction put response",{path:w.toString(),status:T});let S=[];if("ok"===T){const R=[];for(let P=0;P<r.length;P++)r[P].status=2,S=S.concat(Ba(i.serverSyncTree_,r[P].currentWriteId)),r[P].onComplete&&R.push(()=>r[P].onComplete(null,!0,r[P].currentOutputSnapshotResolved)),r[P].unwatcher();ky(i,Iy(i.transactionQueueTree_,n)),cc(i,i.transactionQueueTree_),uo(i.eventQueue_,n,S);for(let P=0;P<R.length;P++)Zu(R[P])}else{if("datastale"===T)for(let R=0;R<r.length;R++)r[R].status=3===r[R].status?4:0;else{ai("transaction at "+w.toString()+" failed: "+T);for(let R=0;R<r.length;R++)r[R].status=4,r[R].abortReason=T}ea(i,n)}},h)}(i,hg(n),r)}else XD(n)&&dg(n,r=>{cc(i,r)})}function ea(i,n){const r=hS(i,n),s=hg(r);return function(i,n,r){if(0===n.length)return;const s=[];let o=[];const h=n.filter(_=>0===_.status).map(_=>_.currentWriteId);for(let _=0;_<n.length;_++){const w=n[_],T=Qn(r,w.path);let R,S=!1;if((0,L.hu)(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===w.status)S=!0,R=w.abortReason,o=o.concat(Ba(i.serverSyncTree_,w.currentWriteId,!0));else if(0===w.status)if(w.retryCount>=25)S=!0,R="maxretry",o=o.concat(Ba(i.serverSyncTree_,w.currentWriteId,!0));else{const P=Oy(i,w.path,h);w.currentInputSnapshot=P;const k=n[_].update(P.val());if(void 0!==k){gh("transaction failed: Data returned ",k,w.path);let U=An(k);"object"==typeof k&&null!=k&&(0,L.r3)(k,".priority")||(U=U.updatePriority(P.getPriority()));const me=w.currentWriteId,Oe=Ny(i),je=qC(U,P,Oe);w.currentOutputSnapshotRaw=U,w.currentOutputSnapshotResolved=je,w.currentWriteId=_g(i),h.splice(h.indexOf(me),1),o=o.concat(LC(i.serverSyncTree_,w.path,je,w.currentWriteId,w.applyLocally)),o=o.concat(Ba(i.serverSyncTree_,me,!0))}else S=!0,R="nodata",o=o.concat(Ba(i.serverSyncTree_,w.currentWriteId,!0))}uo(i.eventQueue_,r,o),o=[],S&&(n[_].status=2,setTimeout(n[_].unwatcher,Math.floor(0)),n[_].onComplete&&s.push("nodata"===R?()=>n[_].onComplete(null,!1,n[_].currentInputSnapshot):()=>n[_].onComplete(new Error(R),!1,null)))}ky(i,i.transactionQueueTree_);for(let _=0;_<s.length;_++)Zu(s[_]);cc(i,i.transactionQueueTree_)}(i,yP(i,r),s),s}function hS(i,n){let r,s=i.transactionQueueTree_;for(r=Dt(n);null!==r&&void 0===Bl(s);)s=Iy(s,r),r=Dt(n=_n(n));return s}function yP(i,n){const r=[];return fS(i,n,r),r.sort((s,o)=>s.order-o.order),r}function fS(i,n,r){const s=Bl(n);if(s)for(let o=0;o<s.length;o++)r.push(s[o]);dg(n,o=>{fS(i,o,r)})}function ky(i,n){const r=Bl(n);if(r){let s=0;for(let o=0;o<r.length;o++)2!==r[o].status&&(r[s]=r[o],s++);r.length=s,Dy(n,r.length>0?r:void 0)}dg(n,s=>{ky(i,s)})}function e0(i,n){const r=hg(hS(i,n)),s=Iy(i.transactionQueueTree_,n);return function(i,n,r){let s=i.parent;for(;null!==s;){if(n(s))return!0;s=s.parent}}(s,o=>{t0(i,o)}),t0(i,s),eS(s,o=>{t0(i,o)}),r}function t0(i,n){const r=Bl(n);if(r){const s=[];let o=[],c=-1;for(let h=0;h<r.length;h++)3===r[h].status||(1===r[h].status?((0,L.hu)(c===h-1,"All SENT items should be at beginning of queue."),c=h,r[h].status=3,r[h].abortReason="set"):((0,L.hu)(0===r[h].status,"Unexpected transaction status in abort"),r[h].unwatcher(),o=o.concat(Ba(i.serverSyncTree_,r[h].currentWriteId,!0)),r[h].onComplete&&s.push(r[h].onComplete.bind(null,new Error("set"),!1,null))));-1===c?Dy(n,void 0):r.length=c+1,uo(i.eventQueue_,hg(n),o);for(let h=0;h<s.length;h++)Zu(s[h])}}const n0=function(i,n){const r=wP(i),s=r.namespace;return"firebase.com"===r.domain&&io(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||"undefined"===s)&&"localhost"!==r.domain&&io("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ai("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Y_(r.host,r.secure,s,n,"ws"===r.scheme||"wss"===r.scheme,"",s!==r.subdomain),path:new Xt(r.pathString)}},wP=function(i){let n="",r="",s="",o="",c="",h=!0,_="https",w=443;if("string"==typeof i){let T=i.indexOf("//");T>=0&&(_=i.substring(0,T-1),i=i.substring(T+2));let S=i.indexOf("/");-1===S&&(S=i.length);let R=i.indexOf("?");-1===R&&(R=i.length),n=i.substring(0,Math.min(S,R)),S<R&&(o=function(i){let n="";const r=i.split("/");for(let s=0;s<r.length;s++)if(r[s].length>0){let o=r[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(c){}n+="/"+o}return n}(i.substring(S,R)));const P=function(i){const n={};"?"===i.charAt(0)&&(i=i.substring(1));for(const r of i.split("&")){if(0===r.length)continue;const s=r.split("=");2===s.length?n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ai(`Invalid query segment '${r}' in query '${i}'`)}return n}(i.substring(Math.min(i.length,R)));T=n.indexOf(":"),T>=0?(h="https"===_||"wss"===_,w=parseInt(n.substring(T+1),10)):T=n.length;const k=n.slice(0,T);if("localhost"===k.toLowerCase())r="localhost";else if(k.split(".").length<=2)r=k;else{const U=n.indexOf(".");s=n.substring(0,U).toLowerCase(),r=n.substring(U+1),c=s}"ns"in P&&(c=P.ns)}return{host:n,port:w,domain:r,subdomain:s,secure:h,scheme:_,pathString:o,namespace:c}};class pS{constructor(n,r,s,o){this.eventType=n,this.eventRegistration=r,this.snapshot=s,this.prevName=o}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class CP{constructor(n,r,s){this.eventRegistration=n,this.error=r,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class gS{constructor(n,r){this.snapshotCallback=n,this.cancelCallback=r}onValue(n,r){this.snapshotCallback.call(null,n,r)}onCancel(n){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class mh{constructor(n,r){this._repo=n,this._path=r}cancel(){const n=new L.BH;return fP(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){Ri("OnDisconnect.remove",this._path);const n=new L.BH;return lS(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){Ri("OnDisconnect.set",this._path),Qo("OnDisconnect.set",n,this._path,!1);const r=new L.BH;return lS(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}setWithPriority(n,r){Ri("OnDisconnect.setWithPriority",this._path),Qo("OnDisconnect.setWithPriority",n,this._path,!1),rS("OnDisconnect.setWithPriority",r,!1);const s=new L.BH;return function(i,n,r,s,o){const c=An(r,s);i.server_.onDisconnectPut(n.toString(),c.val(!0),(h,_)=>{"ok"===h&&Hr(i.onDisconnect_,n,c),co(0,o,h,_)})}(this._repo,this._path,n,r,s.wrapCallback(()=>{})),s.promise}update(n){Ri("OnDisconnect.update",this._path),YC("OnDisconnect.update",n,this._path,!1);const r=new L.BH;return function(i,n,r,s){if((0,L.xb)(r))return fr("onDisconnect().update() called with empty data.  Don't do anything."),void co(0,s,"ok",void 0);i.server_.onDisconnectMerge(n.toString(),r,(o,c)=>{"ok"===o&&Yn(r,(h,_)=>{const w=An(_);Hr(i.onDisconnect_,Pn(n,h),w)}),co(0,s,o,c)})}(this._repo,this._path,n,r.wrapCallback(()=>{})),r.promise}}class Ni{constructor(n,r,s,o){this._repo=n,this._path=r,this._queryParams=s,this._orderByCalled=o}get key(){return Ot(this._path)?null:JI(this._path)}get ref(){return new _r(this._repo,this._path)}get _queryIdentifier(){const n=mD(this._queryParams),r=II(n);return"{}"===r?"default":r}get _queryObject(){return mD(this._queryParams)}isEqual(n){if(!((n=(0,L.m9)(n))instanceof Ni))return!1;const r=this._repo===n._repo,s=ty(this._path,n._path);return r&&s&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(i){let n="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)""!==i.pieces_[r]&&(n+="/"+encodeURIComponent(String(i.pieces_[r])));return n||"/"}(this._path)}}function Fy(i,n){if(!0===i._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function jl(i){let n=null,r=null;if(i.hasStart()&&(n=i.getIndexStartValue()),i.hasEnd()&&(r=i.getIndexEndValue()),i.getIndex()===Ko){const s="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==zo)throw new Error(s);if("string"!=typeof n)throw new Error(o)}if(i.hasEnd()){if(i.getIndexEndName()!==Fa)throw new Error(s);if("string"!=typeof r)throw new Error(o)}}else if(i.getIndex()===yn){if(null!=n&&!ph(n)||null!=r&&!ph(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(i.getIndex()instanceof cy||i.getIndex()===dy,"unknown index type."),null!=n&&"object"==typeof n||null!=r&&"object"==typeof r)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dc(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class _r extends Ni{constructor(n,r){super(n,r,new Va,!1)}get parent(){const n=Qw(this._path);return null===n?null:new _r(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class Hl{constructor(n,r,s){this._node=n,this.ref=r,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const r=new Xt(n),s=hc(this.ref,n);return new Hl(this._node.getChild(r),s,yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(s,o)=>n(new Hl(o,hc(this.ref,s),yn)))}hasChild(n){const r=new Xt(n);return!this._node.getChild(r).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function mS(i,n){return(i=(0,L.m9)(i))._checkNotDeleted("ref"),void 0!==n?hc(i._root,n):i._root}function bP(i,n){(i=(0,L.m9)(i))._checkNotDeleted("refFromURL");const r=n0(n,i._repo.repoInfo_.nodeAdmin);gg("refFromURL",r);const s=r.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&s.host!==i._repo.repoInfo_.host&&io("refFromURL: Host name does not match the current database: (found "+s.host+" but expected "+i._repo.repoInfo_.host+")"),mS(i,r.path.toString())}function hc(i,n){return null===Dt((i=(0,L.m9)(i))._path)?((r=n)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Jo("child","path",r,!1)):Jo("child","path",n,!1),new _r(i._repo,Pn(i._path,n));var r}function Ly(i,n){i=(0,L.m9)(i),Ri("set",i._path),Qo("set",n,i._path,!1);const r=new L.BH;return xy(i._repo,i._path,n,null,r.wrapCallback(()=>{})),r.promise}function yS(i,n){YC("update",n,i._path,!1);const r=new L.BH;return function(i,n,r,s){uc(i,"update",{path:n.toString(),value:r});let o=!0;const c=Ny(i),h={};if(Yn(r,(_,w)=>{o=!1,h[_]=JD(Pn(n,_),An(w),i.serverSyncTree_,c)}),o)fr("update() called with empty data.  Don't do anything."),co(0,s,"ok",void 0);else{const _=_g(i),w=function(i,n,r,s){!function(i,n,r,s){(0,L.hu)(s>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:n,children:r,writeId:s,visible:!0}),i.visibleWrites=mC(i.visibleWrites,n,r),i.lastWriteId=s}(i.pendingWriteTree_,n,r,s);const o=vn.fromObject(r);return hh(i,new sc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,o))}(i.serverSyncTree_,n,h,_);Ha(i.eventQueue_,w),i.server_.merge(n.toString(),r,(T,S)=>{const R="ok"===T;R||ai("update at "+n+" failed: "+T);const P=Ba(i.serverSyncTree_,_,!R),k=P.length>0?ea(i,n):n;uo(i.eventQueue_,k,P),co(0,s,T,S)}),Yn(r,T=>{const S=e0(i,Pn(n,T));ea(i,S)}),uo(i.eventQueue_,n,[])}}(i._repo,i._path,n,r.wrapCallback(()=>{})),r.promise}function vS(i){return function(i,n){const r=function(i,n){const r=n._path;let s=null;i.syncPointTree_.foreachOnPath(r,(T,S)=>{const R=Qn(T,r);s=s||Vl(S,R)});let o=i.syncPointTree_.get(r);o?s=s||Vl(o,qt()):(o=new BD,i.syncPointTree_=i.syncPointTree_.set(r,o));const c=null!=s,h=c?new Ua(s,!0,!1):null;return function(i){return Xp(i.viewCache_)}(jD(o,n,yy(i.pendingWriteTree_,n._path),c?h.getNode():Ct.EMPTY_NODE,c))}(i.serverSyncTree_,n);return null!=r?Promise.resolve(r):i.server_.get(n).then(s=>{const o=An(s).withIndex(n._queryParams.getIndex()),c=ja(i.serverSyncTree_,n._path,o);return QC(i.eventQueue_,n._path,c),Promise.resolve(o)},s=>(uc(i,"get for query "+(0,L.Pz)(n)+" failed: "+s),Promise.reject(new Error(s))))}((i=(0,L.m9)(i))._repo,i).then(n=>new Hl(n,new _r(i._repo,i._path),i._queryParams.getIndex()))}class Vy{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,r){const s=r._queryParams.getIndex();return new pS("value",this,new Hl(n.snapshotNode,new _r(r._repo,r._path),s))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new CP(this,n,r):null}matches(n){return n instanceof Vy&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Uy{constructor(n,r){this.eventType=n,this.callbackContext=r}respondsTo(n){let r="children_added"===n?"child_added":n;return r="children_removed"===r?"child_removed":r,this.eventType===r}createCancelEvent(n,r){return this.callbackContext.hasCancelCallback?new CP(this,n,r):null}createEvent(n,r){(0,L.hu)(null!=n.childName,"Child events should have a childName.");const s=hc(new _r(r._repo,r._path),n.childName),o=r._queryParams.getIndex();return new pS(n.type,this,new Hl(n.snapshotNode,s,o),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof Uy&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _h(i,n,r,s,o){let c;if("object"==typeof s&&(c=void 0,o=s),"function"==typeof s&&(c=s),o&&o.onlyOnce){const w=r,T=(S,R)=>{Py(i._repo,i,_),w(S,R)};T.userCallback=r.userCallback,T.context=r.context,r=T}const h=new gS(r,c||void 0),_="value"===n?new Vy(h):new Uy(n,h);return function(i,n,r){let s;s=".info"===Dt(n._path)?ZD(i.infoSyncTree_,n,r):ZD(i.serverSyncTree_,n,r),QC(i.eventQueue_,n._path,s)}(i._repo,i,_),()=>Py(i._repo,i,_)}function o0(i,n,r,s){return _h(i,"value",n,r,s)}function a0(i,n,r,s){return _h(i,"child_added",n,r,s)}function yg(i,n,r,s){return _h(i,"child_changed",n,r,s)}function vg(i,n,r,s){return _h(i,"child_moved",n,r,s)}function DP(i,n,r,s){return _h(i,"child_removed",n,r,s)}function yh(i,n,r){let s=null;const o=r?new gS(r):null;"value"===n?s=new Vy(o):n&&(s=new Uy(n,o)),Py(i._repo,i,s)}class xt{}class $a extends xt{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){Qo("endAt",this._value,n._path,!0);const r=gD(n._queryParams,this._value,this._key);if(dc(r),jl(r),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ni(n._repo,n._path,r,n._orderByCalled)}}class Eg extends xt{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){Qo("endBefore",this._value,n._path,!1);const r=function(i,n,r){let s,o;return i.index_===Ko?("string"==typeof n&&(n=cD(n)),o=gD(i,n,r)):(s=null==r?zo:cD(r),o=gD(i,n,s)),o.endBeforeSet_=!0,o}(n._queryParams,this._value,this._key);if(dc(r),jl(r),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ni(n._repo,n._path,r,n._orderByCalled)}}class _t extends xt{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){Qo("startAt",this._value,n._path,!0);const r=uC(n._queryParams,this._value,this._key);if(dc(r),jl(r),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ni(n._repo,n._path,r,n._orderByCalled)}}class l0 extends xt{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){Qo("startAfter",this._value,n._path,!1);const r=function(i,n,r){let s;if(i.index_===Ko)"string"==typeof n&&(n=aC(n)),s=uC(i,n,r);else{let o;o=null==r?Fa:aC(r),s=uC(i,n,o)}return s.startAfterSet_=!0,s}(n._queryParams,this._value,this._key);if(dc(r),jl(r),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ni(n._repo,n._path,r,n._orderByCalled)}}class SF extends xt{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ni(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="l",r}(n._queryParams,this._limit),n._orderByCalled)}}class wS extends xt{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ni(n._repo,n._path,function(i,n){const r=i.copy();return r.limitSet_=!0,r.limit_=n,r.viewFrom_="r",r}(n._queryParams,this._limit),n._orderByCalled)}}class SP extends xt{constructor(n){super(),this._path=n}_apply(n){Fy(n,"orderByChild");const r=new Xt(this._path);if(Ot(r))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const s=new cy(r),o=ah(n._queryParams,s);return jl(o),new Ni(n._repo,n._path,o,!0)}}class Ds extends xt{_apply(n){Fy(n,"orderByKey");const r=ah(n._queryParams,Ko);return jl(r),new Ni(n._repo,n._path,r,!0)}}class ho extends xt{_apply(n){Fy(n,"orderByPriority");const r=ah(n._queryParams,yn);return jl(r),new Ni(n._repo,n._path,r,!0)}}class RP extends xt{_apply(n){Fy(n,"orderByValue");const r=ah(n._queryParams,dy);return jl(r),new Ni(n._repo,n._path,r,!0)}}class u0 extends xt{constructor(n,r){super(),this._value=n,this._key=r}_apply(n){if(Qo("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new $a(this._value,this._key)._apply(new _t(this._value,this._key)._apply(n))}}function li(i,...n){let r=(0,L.m9)(i);for(const s of n)r=s._apply(r);return r}(function(i){(0,L.hu)(!ig,"__referenceConstructor has already been defined"),ig=i})(_r),function(i){(0,L.hu)(!FC,"__referenceConstructor has already been defined"),FC=i}(_r);const qa={};function By(i,n,r,s,o){let c=s||i.options.databaseURL;void 0===c&&(i.options.projectId||io("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fr("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let w,T,h=n0(c,o),_=h.repoInfo;"undefined"!=typeof process&&(T=process.env.FIREBASE_DATABASE_EMULATOR_HOST),T?(w=!0,c=`http://${T}?ns=${_.namespace}`,h=n0(c,o),_=h.repoInfo):w=!h.repoInfo.secure;const S=o&&w?new Gd(Gd.OWNER):new yF(i.name,i.options,n);gg("Invalid Firebase Database URL",h),Ot(h.path)||io("Database URL must point to the root of a Firebase Database (not including a child path).");const R=function(i,n,r,s){let o=qa[n.name];o||(o={},qa[n.name]=o);let c=o[i.toURLString()];return c&&io("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new Ry(i,false,r,s),o[i.toURLString()]=c,c}(_,i,S,new px(i.name,r));return new wh(R,i)}class wh{constructor(n,r){this._repoInternal=n,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(i,n,r){if(i.stats_=ws(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new Kp(i.repoInfo_,(s,o,c,h)=>{oS(i,s,o,c,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>aS(i,!0),0);else{if(null!=r){if("object"!=typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(r)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new eh(i.repoInfo_,n,(s,o,c,h)=>{oS(i,s,o,c,h)},s=>{aS(i,s)},s=>{!function(i,n){Yn(n,(r,s)=>{mg(i,r,s)})}(i,s)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=function(i,n){const r=i.toString();return jp[r]||(jp[r]=n()),jp[r]}(i.repoInfo_,()=>new Yp(i.stats_,i.server_)),i.infoData_=new Yo,i.infoSyncTree_=new ag({startListening:(s,o,c,h)=>{let _=[];const w=i.infoData_.getNode(s._path);return w.isEmpty()||(_=ja(i.infoSyncTree_,s._path,w),setTimeout(()=>{h("ok")},0)),_},stopListening:()=>{}}),mg(i,"connected",!1),i.serverSyncTree_=new ag({startListening:(s,o,c,h)=>(i.server_.listen(s,c,o,(_,w)=>{const T=h(_,w);uo(i.eventQueue_,s._path,T)}),[]),stopListening:(s,o)=>{i.server_.unlisten(s,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _r(this._repo,qt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(i,n){const r=qa[n];(!r||r[i.key]!==i)&&io(`Database ${n}(${i.repoInfo_}) has already been deleted.`),dS(i),delete r[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&io("Cannot call "+n+" on a deleted database.")}}function RS(i,n){W_(i,n)}class NF{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}eh.prototype.simpleListen=function(i,n){this.sendRequest("q",{p:i},n)},eh.prototype.echo=function(i,n){this.sendRequest("echo",{d:i},n)},q_(ka.SDK_VERSION),(0,ka._registerComponent)(new Ma.wA("database",(n,{instanceIdentifier:r})=>By(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),r),"PUBLIC").setMultipleInstances(!0)),(0,ka.registerVersion)("@firebase/database","0.12.1",void 0);const OP=new Zt.Yd("@firebase/database-compat"),NS=function(i){OP.warn("FIREBASE WARNING: "+i)};class MP{constructor(n){this._delegate=n}cancel(n){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",n,!0);const r=this._delegate.cancel();return n&&r.then(()=>n(null),s=>n(s)),r}remove(n){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",n,!0);const r=this._delegate.remove();return n&&r.then(()=>n(null),s=>n(s)),r}set(n,r){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",r,!0);const s=this._delegate.set(n);return r&&s.then(()=>r(null),o=>r(o)),s}setWithPriority(n,r,s){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",s,!0);const o=this._delegate.setWithPriority(n,r);return s&&o.then(()=>s(null),c=>s(c)),o}update(n,r){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let c=0;c<n.length;++c)o[""+c]=n[c];n=o,NS("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",r,!0);const s=this._delegate.update(n);return r&&s.then(()=>r(null),o=>r(o)),s}}class $r{constructor(n,r){this.committed=n,this.snapshot=r}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class $l{constructor(n,r){this._database=n,this._delegate=r}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),Jo("DataSnapshot.child","path",n,!1),new $l(this._database,this._delegate.child(n))}hasChild(n){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Jo("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(r=>n(new $l(this._database,r)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ui(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Sr{constructor(n,r){this.database=n,this._delegate=r}on(n,r,s,o){var c;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",r,!1);const h=Sr.getCancelAndContextArgs_("Query.on",s,o),_=(T,S)=>{r.call(h.context,new $l(this.database,T),S)};_.userCallback=r,_.context=h.context;const w=null===(c=h.cancel)||void 0===c?void 0:c.bind(h.context);switch(n){case"value":return o0(this._delegate,_,w),r;case"child_added":return a0(this._delegate,_,w),r;case"child_removed":return DP(this._delegate,_,w),r;case"child_changed":return yg(this._delegate,_,w),r;case"child_moved":return vg(this._delegate,_,w),r;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,r,s){if((0,L.Dv)("Query.off",0,3,arguments.length),function(i,n,r){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,L.Wj)("Query.off","callback",r,!0),(0,L.lb)("Query.off","context",s,!0),r){const o=()=>{};o.userCallback=r,o.context=s,yh(this._delegate,n,o)}else yh(this._delegate,n)}get(){return vS(this._delegate).then(n=>new $l(this.database,n))}once(n,r,s,o){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",r,!0);const c=Sr.getCancelAndContextArgs_("Query.once",s,o),h=new L.BH,_=(T,S)=>{const R=new $l(this.database,T);r&&r.call(c.context,R,S),h.resolve(R)};_.userCallback=r,_.context=c.context;const w=T=>{c.cancel&&c.cancel.call(c.context,T),h.reject(T)};switch(n){case"value":o0(this._delegate,_,w,{onlyOnce:!0});break;case"child_added":a0(this._delegate,_,w,{onlyOnce:!0});break;case"child_removed":DP(this._delegate,_,w,{onlyOnce:!0});break;case"child_changed":yg(this._delegate,_,w,{onlyOnce:!0});break;case"child_moved":vg(this._delegate,_,w,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}limitToFirst(n){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Sr(this.database,li(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new SF(i)}(n)))}limitToLast(n){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Sr(this.database,li(this._delegate,function(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wS(i)}(n)))}orderByChild(n){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Sr(this.database,li(this._delegate,function(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Jo("orderByChild","path",i,!1),new SP(i)}(n)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Sr(this.database,li(this._delegate,new Ds))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Sr(this.database,li(this._delegate,new ho))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Sr(this.database,li(this._delegate,new RP))}startAt(n=null,r){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Sr(this.database,li(this._delegate,function(i=null,n){return pg("startAt","key",n,!0),new _t(i,n)}(n,r)))}startAfter(n=null,r){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Sr(this.database,li(this._delegate,function(i,n){return pg("startAfter","key",n,!0),new l0(i,n)}(n,r)))}endAt(n=null,r){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Sr(this.database,li(this._delegate,function(i,n){return pg("endAt","key",n,!0),new $a(i,n)}(n,r)))}endBefore(n=null,r){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Sr(this.database,li(this._delegate,function(i,n){return pg("endBefore","key",n,!0),new Eg(i,n)}(n,r)))}equalTo(n,r){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Sr(this.database,li(this._delegate,function(i,n){return pg("equalTo","key",n,!0),new u0(i,n)}(n,r)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof Sr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,r,s){const o={cancel:void 0,context:void 0};if(r&&s)o.cancel=r,(0,L.Wj)(n,"cancel",o.cancel,!0),o.context=s,(0,L.lb)(n,"context",o.context,!0);else if(r)if("object"==typeof r&&null!==r)o.context=r;else{if("function"!=typeof r)throw new Error((0,L.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=r}return o}get ref(){return new ui(this.database,new _r(this._delegate._repo,this._delegate._path))}}class ui extends Sr{constructor(n,r){super(n,new Ni(r._repo,r._path,new Va,!1)),this.database=n,this._delegate=r}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new ui(this.database,hc(this._delegate,n))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new ui(this.database,n):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ui(this.database,this._delegate.root)}set(n,r){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",r,!0);const s=Ly(this._delegate,n);return r&&s.then(()=>r(null),o=>r(o)),s}update(n,r){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const o={};for(let c=0;c<n.length;++c)o[""+c]=n[c];n=o,NS("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ri("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",r,!0);const s=yS(this._delegate,n);return r&&s.then(()=>r(null),o=>r(o)),s}setWithPriority(n,r,s){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",s,!0);const o=function(i,n,r){if(Ri("setWithPriority",i._path),Qo("setWithPriority",n,i._path,!1),rS("setWithPriority",r,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const s=new L.BH;return xy(i._repo,i._path,n,r,s.wrapCallback(()=>{})),s.promise}(this._delegate,n,r);return s&&o.then(()=>s(null),c=>s(c)),o}remove(n){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",n,!0);const r=function(i){return Ri("remove",i._path),Ly(i,null)}(this._delegate);return n&&r.then(()=>n(null),s=>n(s)),r}transaction(n,r,s){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,L.Wj)("Reference.transaction","onComplete",r,!0),function(i,n,r,s){if(void 0!==r&&"boolean"!=typeof r)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,s);const o=function(i,n,r){var s;if(i=(0,L.m9)(i),Ri("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const o=null===(s=null==r?void 0:r.applyLocally)||void 0===s||s,c=new L.BH,_=o0(i,()=>{});return function(i,n,r,s,o,c){uc(i,"transaction on "+n);const h={path:n,update:r,onComplete:s,status:null,order:qw(),applyLocally:c,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},_=Oy(i,n,void 0);h.currentInputSnapshot=_;const w=h.update(_.val());if(void 0===w)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{gh("transaction failed: Data returned ",w,h.path),h.status=0;const T=Iy(i.transactionQueueTree_,n),S=Bl(T)||[];let R;S.push(h),Dy(T,S),"object"==typeof w&&null!==w&&(0,L.r3)(w,".priority")?(R=(0,L.DV)(w,".priority"),(0,L.hu)(ph(R),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):R=(by(i.serverSyncTree_,n)||Ct.EMPTY_NODE).getPriority().val();const P=Ny(i),k=An(w,R),U=qC(k,_,P);h.currentOutputSnapshotRaw=k,h.currentOutputSnapshotResolved=U,h.currentWriteId=_g(i);const J=LC(i.serverSyncTree_,n,U,h.currentWriteId,h.applyLocally);uo(i.eventQueue_,n,J),cc(i,i.transactionQueueTree_)}}(i._repo,i._path,n,(w,T,S)=>{let R=null;w?c.reject(w):(R=new Hl(S,new _r(i._repo,i._path),yn),c.resolve(new NF(T,R)))},_,o),c.promise}(this._delegate,n,{applyLocally:s}).then(c=>new $r(c.committed,new $l(this.database,c.snapshot)));return r&&o.then(c=>r(null,c.committed,c.snapshot),c=>r(c,!1,null)),o}setPriority(n,r){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",r,!0);const s=function(i,n){i=(0,L.m9)(i),Ri("setPriority",i._path),rS("setPriority",n,!1);const r=new L.BH;return xy(i._repo,Pn(i._path,".priority"),n,null,r.wrapCallback(()=>{})),r.promise}(this._delegate,n);return r&&s.then(()=>r(null),o=>r(o)),s}push(n,r){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",r,!0);const s=function(i,n){i=(0,L.m9)(i),Ri("push",i._path),Qo("push",n,i._path,!0);const r=sS(i._repo),s=Ox(r),o=hc(i,s),c=hc(i,s);let h;return h=null!=n?Ly(c,n).then(()=>c):Promise.resolve(c),o.then=h.then.bind(h),o.catch=h.then.bind(h,void 0),o}(this._delegate,n),o=s.then(h=>new ui(this.database,h));r&&o.then(()=>r(null),h=>r(h));const c=new ui(this.database,s);return c.then=o.then.bind(o),c.catch=o.catch.bind(o,void 0),c}onDisconnect(){return Ri("Reference.onDisconnect",this._delegate._path),new MP(new mh(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class bg{constructor(n,r){this._delegate=n,this.app=r,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(n,r,s={}){!function(i,n,r,s={}){(i=(0,L.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&io("Cannot call useEmulator() after instance has already been initialized.");const o=i._repoInternal;let c;if(o.repoInfo_.nodeAdmin)s.mockUserToken&&io('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Gd(Gd.OWNER);else if(s.mockUserToken){const h="string"==typeof s.mockUserToken?s.mockUserToken:(0,L.Sg)(s.mockUserToken,i.app.options.projectId);c=new Gd(h)}!function(i,n,r,s){i.repoInfo_=new Y_(`${n}:${r}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),s&&(i.authTokenProvider_=s)}(o,n,r,c)}(this._delegate,n,r,s)}ref(n){if((0,L.Dv)("database.ref",0,1,arguments.length),n instanceof ui){const r=bP(this._delegate,n.toString());return new ui(this,r)}{const r=mS(this._delegate,n);return new ui(this,r)}}refFromURL(n){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const s=bP(this._delegate,n);return new ui(this,s)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function(i){(i=(0,L.m9)(i))._checkNotDeleted("goOffline"),dS(i._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function(i){(i=(0,L.m9)(i))._checkNotDeleted("goOnline"),function(i){i.persistentConnection_&&i.persistentConnection_.resume(JC)}(i._repo)}(this._delegate)}}bg.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:i=>function(i){return{".sv":{increment:i}}}(i)};var FP=Object.freeze({__proto__:null,initStandalone:function({app:i,url:n,version:r,customAuthImpl:s,namespace:o,nodeAdmin:c=!1}){q_(r);const h=new Ma.zt("auth-internal",new Ma.H0("database-standalone"));return h.setComponent(new Ma.wA("auth-internal",()=>s,"PRIVATE")),{instance:new bg(By(i,h,void 0,n,c),i),namespace:o}}});const LP=bg.ServerValue;!function(i){i.INTERNAL.registerComponent(new Ma.wA("database-compat",(n,{instanceIdentifier:r})=>{const s=n.getProvider("app-compat").getImmediate(),o=n.getProvider("database").getImmediate({identifier:r});return new bg(o,s)},"PUBLIC").setServiceProps({Reference:ui,Query:Sr,Database:bg,DataSnapshot:$l,enableLogging:RS,INTERNAL:FP,ServerValue:LP}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.1")}(jw.Z);var Tg=V(309),f0=V(7771),xS=V(5319),PS=V(7971),OS=V(8858);class p0 extends oi.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift(),super.next(n)}nextTimeWindow(n){this._events.push(new UP(this._getNow(),n)),this._trimBufferThenGetEvents(),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,s=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,c=s.length;let h;if(this.closed)throw new PS.N;if(this.isStopped||this.hasError?h=xS.w.EMPTY:(this.observers.push(n),h=new OS.W(this,n)),o&&n.add(n=new Tg.ht(n,o)),r)for(let _=0;_<c&&!n.closed;_++)n.next(s[_]);else for(let _=0;_<c&&!n.closed;_++)n.next(s[_].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),h}_getNow(){return(this.scheduler||f0.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,s=this._windowTime,o=this._events,c=o.length;let h=0;for(;h<c&&!(n-o[h].time<s);)h++;return c>r&&(h=Math.max(h,c-r)),h>0&&o.splice(0,h),o}}class UP{constructor(n,r){this.time=n,this.value=r}}function BP(i,n,r){let s;return s=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},o=>o.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:s}){let o,h,c=0,_=!1,w=!1;return function(S){c++,(!o||_)&&(_=!1,o=new p0(i,n,s),h=S.subscribe({next(P){o.next(P)},error(P){_=!0,o.error(P)},complete(){w=!0,h=void 0,o.complete()}}));const R=o.subscribe(this);this.add(()=>{c--,R.unsubscribe(),h&&!w&&r&&0===c&&(h.unsubscribe(),h=void 0,o=void 0)})}}(s))}const $y=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})();function ta(i,n){return function(s){return s.lift(new HP(i,n))}}class HP{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new $P(n,this.predicate,this.thisArg))}}class $P extends Es.L{constructor(n,r,s){super(n),this.predicate=r,this.thisArg=s,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(s){return void this.destination.error(s)}r&&this.destination.next(n)}}const MS=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();var ql=V(9193);function Gy(i){return n=>0===i?(0,ql.c)():n.lift(new Ig(i))}class Ig{constructor(n){if(this.total=n,this.total<0)throw new MS}call(n,r){return r.subscribe(new kF(n,this.total))}}class kF extends Es.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,s=++this.count;s<=r&&(this.destination.next(n),s===r&&(this.destination.complete(),this.unsubscribe()))}}function g0(i=null){return n=>n.lift(new qP(i))}class qP{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new GP(n,this.defaultValue))}}class GP extends Es.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function kS(i=FS){return n=>n.lift(new WP(i))}class WP{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new ZP(n,this.errorFactory))}}class ZP extends Es.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function FS(){return new $y}var LS=V(4487);function pc(i,n){const r=arguments.length>=2;return s=>s.pipe(i?ta((o,c)=>i(o,c,s)):LS.y,Gy(1),r?g0(n):kS(()=>new $y))}function zP(i,n){return n?xn(()=>i,n):xn(()=>i)}var VS=V(3101),US=V(7841);const _0=new g.OlP("angularfire2.auth.use-emulator"),y0=new g.OlP("angularfire2.auth.settings"),v0=new g.OlP("angularfire2.auth.tenant-id"),E0=new g.OlP("angularfire2.auth.langugage-code"),w0=new g.OlP("angularfire2.auth.use-device-language"),C0=new g.OlP("angularfire.auth.persistence"),Wy=(i,n,r,s,o,c,h,_)=>(0,Wt.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const w=n.runOutsideAngular(()=>i.auth());if(r&&w.useEmulator(...r),s&&(w.tenantId=s),w.languageCode=o,c&&w.useDeviceLanguage(),h)for(const[T,S]of Object.entries(h))w.settings[T]=S;return _&&w.setPersistence(_),w},[r,s,o,c,h,_]);let Dg=(()=>{class i{constructor(r,s,o,c,h,_,w,T,S,R,P){const k=new oi.xQ,U=(0,lt.of)(void 0).pipe((0,Tg.QV)(h.outsideAngular),xn(()=>c.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,670)))),(0,rt.U)(()=>(0,Nn.on)(r,c,s)),(0,rt.U)(J=>Wy(J,c,_,T,S,R,w,P)),BP({bufferSize:1,refCount:!1}));if(Gc(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,lt.of)(null);else{U.pipe(pc()).subscribe();const me=U.pipe(xn($e=>$e.getRedirectResult().then(Ge=>Ge,()=>null)),Wt.iC,BP({bufferSize:1,refCount:!1})),Oe=U.pipe(xn($e=>new zn.y(Ge=>({unsubscribe:c.runOutsideAngular(()=>$e.onAuthStateChanged(un=>Ge.next(un),un=>Ge.error(un),()=>Ge.complete()))})))),je=U.pipe(xn($e=>new zn.y(Ge=>({unsubscribe:c.runOutsideAngular(()=>$e.onIdTokenChanged(un=>Ge.next(un),un=>Ge.error(un),()=>Ge.complete()))}))));this.authState=me.pipe(zP(Oe),(0,VS.R)(h.outsideAngular),(0,Tg.QV)(h.insideAngular)),this.user=me.pipe(zP(je),(0,VS.R)(h.outsideAngular),(0,Tg.QV)(h.insideAngular)),this.idToken=this.user.pipe(xn($e=>$e?(0,on.D)($e.getIdToken()):(0,lt.of)(null))),this.idTokenResult=this.user.pipe(xn($e=>$e?(0,on.D)($e.getIdTokenResult()):(0,lt.of)(null))),this.credential=(0,Vw.T)(me,k,this.authState.pipe(ta($e=>!$e))).pipe((0,rt.U)($e=>(null==$e?void 0:$e.user)?$e:null),(0,VS.R)(h.outsideAngular),(0,Tg.QV)(h.insideAngular))}return(0,Nn.pX)(this,U,c,{spy:{apply:(J,me,Oe)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&Oe.then(je=>k.next(je))}}})}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Nn.Dh),g.LFG(Nn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Wt.HU),g.LFG(_0,8),g.LFG(y0,8),g.LFG(v0,8),g.LFG(E0,8),g.LFG(w0,8),g.LFG(C0,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();function b0(i){return null==i}function Ss(i){return"function"==typeof i.set}function Zy(i,n){return Ss(n)?n:i.ref(n)}function BS(i,n){if(function(i){return"string"==typeof i}(i))return n.stringCase();if(Ss(i))return n.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function bh(i,n,r="on",s=Ud.P){return new zn.y(o=>{let c=null;return c=i[r](n,(h,_)=>{s.schedule(()=>{o.next({snapshot:h,prevKey:_})}),"once"===r&&s.schedule(()=>o.complete())},h=>{s.schedule(()=>o.error(h))}),"on"===r?{unsubscribe(){null!=c&&i.off(n,c)}}:{unsubscribe(){}}}).pipe((0,rt.U)(o=>{const{snapshot:c,prevKey:h}=o;let _=null;return c.exists()&&(_=c.key),{type:n,payload:c,prevKey:h,key:_}}),(0,fF.B)())}function T0(i,n){const r=i.length;for(let s=0;s<r;s++)if(i[s].payload.key===n)return s;return-1}function YP(i,n){const{payload:r,prevKey:s,key:o}=n,c=T0(i,o),h=function(i,n){if(b0(n))return 0;{const r=T0(i,n);return-1===r?i.length:r+1}}(i,s);switch(n.type){case"value":if(n.payload&&n.payload.exists()){let _=null;n.payload.forEach(w=>{const T={payload:w,type:"value",prevKey:_,key:w.key};return _=w.key,i=[...i,T],!1})}return i;case"child_added":if(c>-1){const _=i[c-1];(_&&_.key||null)!==s&&(i=i.filter(w=>w.payload.key!==r.key)).splice(h,0,n)}else{if(null==s)return[n,...i];(i=i.slice()).splice(h,0,n)}return i;case"child_removed":return i.filter(_=>_.payload.key!==r.key);case"child_changed":return i.map(_=>_.payload.key===o?n:_);case"child_moved":if(c>-1){const _=i.splice(c,1)[0];return(i=i.slice()).splice(h,0,_),i}return i;default:return i}}function HS(i){return(b0(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function I0(i,n,r){return function(i,n,r){return bh(i,"value","once",r).pipe(xn(s=>{const o=[(0,lt.of)(s)];return n.forEach(c=>o.push(bh(i,c,"on",r))),(0,Vw.T)(...o).pipe($u(YP,[]))}),$_())}(i,n=HS(n),r)}function $S(i,n,r){const s=(n=HS(n)).map(o=>bh(i,o,"on",r));return(0,Vw.T)(...s)}function gc(i,n){return function(s,o){return BS(s,{stringCase:()=>i.child(s)[n](o),firebaseCase:()=>s[n](o),snapshotCase:()=>s.ref[n](o)})}}function VF(i){return function(r){return r?BS(r,{stringCase:()=>i.child(r).remove(),firebaseCase:()=>r.remove(),snapshotCase:()=>r.ref.remove()}):i.remove()}}function GS(i,n){return function(){return bh(i,"value","on",n)}}const WS=new g.OlP("angularfire2.realtimeDatabaseURL"),XP=new g.OlP("angularfire2.database.use-emulator");let D0=(()=>{class i{constructor(r,s,o,c,h,_,w,T,S,R,P,k,U,J){this.schedulers=_;const me=w,Oe=(0,Nn.on)(r,h,s);T&&Wy(Oe,h,S,P,k,U,R,J),this.database=(0,Wt.cc)(`${Oe.name}.database.${o}`,"AngularFireDatabase",Oe.name,()=>{const je=h.runOutsideAngular(()=>Oe.database(o||void 0));return me&&je.useEmulator(...me),je},[me])}list(r,s){const o=this.schedulers.ngZone.runOutsideAngular(()=>Zy(this.database,r));let c=o;return s&&(c=s(o)),function(i,n){const r=n.schedulers.outsideAngular,s=n.schedulers.ngZone.run(()=>i.ref);return{query:i,update:gc(s,"update"),set:gc(s,"set"),push:o=>s.push(o),remove:VF(s),snapshotChanges:o=>I0(i,o,r).pipe(Wt.iC),stateChanges:o=>$S(i,o,r).pipe(Wt.iC),auditTrail:o=>function(i,n,r){return function(i,n,r){return function(i,n){return bh(i,"value","on",n).pipe((0,rt.U)(r=>{let s;return r.payload.forEach(o=>(s=o.key,!1)),{data:r,lastKeyToLoad:s}}))}(i,r).pipe(function(...i){return n=>{let r;return"function"==typeof i[i.length-1]&&(r=i.pop()),n.lift(new Bd(i,r))}}(n),(0,rt.U)(([o,c])=>{const h=o.lastKeyToLoad,_=c.map(w=>w.key);return{actions:c,lastKeyToLoad:h,loadedKeys:_}}),function(i){return n=>n.lift(new lx(i))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,rt.U)(o=>o.actions))}(i,$S(i,n).pipe($u((o,c)=>[...o,c],[])),r)}(i,o,r).pipe(Wt.iC),valueChanges:(o,c)=>I0(i,o,r).pipe((0,rt.U)(_=>_.map(w=>c&&c.idField?Object.assign(Object.assign({},w.payload.val()),{[c.idField]:w.key}):w.payload.val())),Wt.iC)}}(c,this)}object(r){return function(i,n){return{query:i,snapshotChanges:()=>GS(i,n.schedulers.outsideAngular)().pipe(Wt.iC),update:r=>i.ref.update(r),set:r=>i.ref.set(r),remove:()=>i.ref.remove(),valueChanges:()=>GS(i,n.schedulers.outsideAngular)().pipe(Wt.iC,(0,rt.U)(s=>s.payload.exists()?s.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Zy(this.database,r)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Nn.Dh),g.LFG(Nn.xv,8),g.LFG(WS,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Wt.HU),g.LFG(XP,8),g.LFG(Dg,8),g.LFG(_0,8),g.LFG(y0,8),g.LFG(v0,8),g.LFG(E0,8),g.LFG(w0,8),g.LFG(C0,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ZS=(()=>{class i{constructor(){US.Z.registerVersion("angularfire",Wt.q4.full,"rtdb-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[D0]}),i})();var zy=V(3282);function S0(...i){return(0,zy.J)(1)((0,lt.of)(...i))}var zS=V(4869);function Ky(...i){const n=i[i.length-1];return(0,zS.K)(n)?(i.pop(),r=>S0(i,r,n)):r=>S0(i,r)}function A0(){return i=>i.lift(new tO)}class tO{call(n,r){return r.subscribe(new nO(n))}}class nO extends Es.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}var qe,rO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yi={},Yy=Yy||{},yt=rO||self;function Sg(){}function Qy(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function Th(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var Jy="closure_uid_"+(1e9*Math.random()>>>0),sO=0;function oO(i,n,r){return i.call.apply(i.bind,arguments)}function aO(i,n,r){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,s),i.apply(n,o)}}return function(){return i.apply(n,arguments)}}function Ar(i,n,r){return(Ar=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oO:aO).apply(null,arguments)}function Gl(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var s=r.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function $n(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(s,o,c){for(var h=Array(arguments.length-2),_=2;_<arguments.length;_++)h[_-2]=arguments[_];return n.prototype[o].apply(s,h)}}function Wl(){this.s=this.s,this.o=this.o}var na={};Wl.prototype.s=!1,Wl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,Jy)&&i[Jy]||(i[Jy]=++sO)}(this);delete na[i]}},Wl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const KS=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},Ag=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const s=i.length,o="string"==typeof i?i.split(""):i;for(let c=0;c<s;c++)c in o&&n.call(r,o[c],c,i)};function YS(i){return Array.prototype.concat.apply([],arguments)}function QS(i){const n=i.length;if(0<n){const r=Array(n);for(let s=0;s<n;s++)r[s]=i[s];return r}return[]}function Ih(i){return/^[\s\xa0]*$/.test(i)}var Rr,Xy=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Gr(i,n){return-1!=i.indexOf(n)}function Rg(i,n){return i<n?-1:i>n?1:0}e:{var JS=yt.navigator;if(JS){var XS=JS.userAgent;if(XS){Rr=XS;break e}}Rr=""}function N0(i,n,r){for(const s in i)n.call(r,i[s],s,i)}function eA(i){const n={};for(const r in i)n[r]=i[r];return n}var x0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ev(i,n){let r,s;for(let o=1;o<arguments.length;o++){for(r in s=arguments[o],s)i[r]=s[r];for(let c=0;c<x0.length;c++)r=x0[c],Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}}function tv(i){return tv[" "](i),i}tv[" "]=Sg;var rv,tA=Gr(Rr,"Opera"),mc=Gr(Rr,"Trident")||Gr(Rr,"MSIE"),nA=Gr(Rr,"Edge"),nv=nA||mc,P0=Gr(Rr,"Gecko")&&!(Gr(Rr.toLowerCase(),"webkit")&&!Gr(Rr,"Edge"))&&!(Gr(Rr,"Trident")||Gr(Rr,"MSIE"))&&!Gr(Rr,"Edge"),cO=Gr(Rr.toLowerCase(),"webkit")&&!Gr(Rr,"Edge");function O0(){var i=yt.document;return i?i.documentMode:void 0}e:{var rA="",Nr=function(){var i=Rr;return P0?/rv:([^\);]+)(\)|;)/.exec(i):nA?/Edge\/([\d\.]+)/.exec(i):mc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):cO?/WebKit\/(\S+)/.exec(i):tA?/(?:Version)[ \/]?(\S+)/.exec(i):void 0}();if(Nr&&(rA=Nr?Nr[1]:""),mc){var Zl=O0();if(null!=Zl&&Zl>parseFloat(rA)){rv=String(Zl);break e}}rv=rA}var dO={};function hO(){return n=dO,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=Xy(String(rv)).split("."),r=Xy("9").split("."),s=Math.max(n.length,r.length);for(let h=0;0==i&&h<s;h++){var o=n[h]||"",c=r[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;i=Rg(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||Rg(0==o[2].length,0==c[2].length)||Rg(o[2],c[2]),o=o[3],c=c[3]}while(0==i)}return 0<=i}();var n}var fO=yt.document&&mc&&(O0()||parseInt(rv,10))||void 0,M0=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{yt.addEventListener("test",Sg,n),yt.removeEventListener("test",Sg,n)}catch(r){}return i}();function Wr(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function Sh(i,n){if(Wr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(P0){e:{try{tv(n.nodeName);var o=!0;break e}catch(c){}o=!1}o||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:pO[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Sh.Z.h.call(this)}}Wr.prototype.h=function(){this.defaultPrevented=!0},$n(Sh,Wr);var pO={2:"touch",3:"pen",4:"mouse"};Sh.prototype.h=function(){Sh.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ng="closure_listenable_"+(1e6*Math.random()|0),k0=0;function sA(i,n,r,s,o){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!s,this.ia=o,this.key=++k0,this.ca=this.fa=!1}function xg(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function _c(i){this.src=i,this.g={},this.h=0}function Pg(i,n){var r=n.type;if(r in i.g){var c,s=i.g[r],o=KS(s,n);(c=0<=o)&&Array.prototype.splice.call(s,o,1),c&&(xg(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function oA(i,n,r,s){for(var o=0;o<i.length;++o){var c=i[o];if(!c.ca&&c.listener==n&&c.capture==!!r&&c.ia==s)return o}return-1}_c.prototype.add=function(i,n,r,s,o){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var h=oA(i,n,s,o);return-1<h?(n=i[h],r||(n.fa=!1)):((n=new sA(n,this.src,c,!!s,o)).fa=r,i.push(n)),n};var iv="closure_lm_"+(1e6*Math.random()|0),F0={};function L0(i,n,r,s,o){if(s&&s.once)return lA(i,n,r,s,o);if(Array.isArray(n)){for(var c=0;c<n.length;c++)L0(i,n[c],r,s,o);return null}return r=lv(r),i&&i[Ng]?i.N(n,r,Th(s)?!!s.capture:!!s,o):Og(i,n,r,!1,s,o)}function Og(i,n,r,s,o,c){if(!n)throw Error("Invalid event type");var h=Th(o)?!!o.capture:!!o,_=ov(i);if(_||(i[iv]=_=new _c(i)),(r=_.add(n,r,s,h,c)).proxy)return r;if(s=function(){var n=gO;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=s,s.src=i,s.listener=r,i.addEventListener)M0||(o=h),void 0===o&&(o=!1),i.addEventListener(n.toString(),s,o);else if(i.attachEvent)i.attachEvent(uA(n.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return r}function lA(i,n,r,s,o){if(Array.isArray(n)){for(var c=0;c<n.length;c++)lA(i,n[c],r,s,o);return null}return r=lv(r),i&&i[Ng]?i.O(n,r,Th(s)?!!s.capture:!!s,o):Og(i,n,r,!0,s,o)}function sv(i,n,r,s,o){if(Array.isArray(n))for(var c=0;c<n.length;c++)sv(i,n[c],r,s,o);else s=Th(s)?!!s.capture:!!s,r=lv(r),i&&i[Ng]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=oA(c=i.g[n],r,s,o))&&(xg(c[r]),Array.prototype.splice.call(c,r,1),0==c.length&&(delete i.g[n],i.h--))):i&&(i=ov(i))&&(n=i.g[n.toString()],i=-1,n&&(i=oA(n,r,s,o)),(r=-1<i?n[i]:null)&&Mg(r))}function Mg(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[Ng])Pg(n.i,i);else{var r=i.type,s=i.proxy;n.removeEventListener?n.removeEventListener(r,s,i.capture):n.detachEvent?n.detachEvent(uA(r),s):n.addListener&&n.removeListener&&n.removeListener(s),(r=ov(n))?(Pg(r,i),0==r.h&&(r.src=null,n[iv]=null)):xg(i)}}}function uA(i){return i in F0?F0[i]:F0[i]="on"+i}function gO(i,n){if(i.ca)i=!0;else{n=new Sh(n,this);var r=i.listener,s=i.ia||i.src;i.fa&&Mg(i),i=r.call(s,n)}return i}function ov(i){return(i=i[iv])instanceof _c?i:null}var av="__closure_events_fn_"+(1e9*Math.random()>>>0);function lv(i){return"function"==typeof i?i:(i[av]||(i[av]=function(n){return i.handleEvent(n)}),i[av])}function yr(){Wl.call(this),this.i=new _c(this),this.P=this,this.I=null}function vr(i,n){var r,s=i.I;if(s)for(r=[];s;s=s.I)r.push(s);if(i=i.P,s=n.type||n,"string"==typeof n)n=new Wr(n,i);else if(n instanceof Wr)n.target=n.target||i;else{var o=n;ev(n=new Wr(s,i),o)}if(o=!0,r)for(var c=r.length-1;0<=c;c--){var h=n.g=r[c];o=kg(h,s,!0,n)&&o}if(o=kg(h=n.g=i,s,!0,n)&&o,o=kg(h,s,!1,n)&&o,r)for(c=0;c<r.length;c++)o=kg(h=n.g=r[c],s,!1,n)&&o}function kg(i,n,r,s){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var o=!0,c=0;c<n.length;++c){var h=n[c];if(h&&!h.ca&&h.capture==r){var _=h.listener,w=h.ia||h.src;h.fa&&Pg(i.i,h),o=!1!==_.call(w,s)&&o}}return o&&!s.defaultPrevented}$n(yr,Wl),yr.prototype[Ng]=!0,yr.prototype.removeEventListener=function(i,n,r,s){sv(this,i,n,r,s)},yr.prototype.M=function(){if(yr.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],s=0;s<r.length;s++)xg(r[s]);delete i.g[n],i.h--}}this.I=null},yr.prototype.N=function(i,n,r,s){return this.i.add(String(i),n,!1,r,s)},yr.prototype.O=function(i,n,r,s){return this.i.add(String(i),n,!0,r,s)};var V0=yt.JSON.stringify;function mO(){var i=pA;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var cv,dA=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new hA,i=>i.reset());class hA{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function fA(i){yt.setTimeout(()=>{throw i},0)}function uv(i,n){cv||function(){var i=yt.Promise.resolve(void 0);cv=function(){i.then(gA)}}(),U0||(cv(),U0=!0),pA.add(i,n)}var U0=!1,pA=new class{constructor(){this.h=this.g=null}add(n,r){const s=dA.get();s.set(n,r),this.h?this.h.next=s:this.g=s,this.h=s}};function gA(){for(var i;i=mO();){try{i.h.call(i.g)}catch(r){fA(r)}var n=dA;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}U0=!1}function B0(i,n){yr.call(this),this.h=i||1,this.g=n||yt,this.j=Ar(this.kb,this),this.l=Date.now()}function mA(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function _A(i,n,r){if("function"==typeof i)r&&(i=Ar(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ar(i.handleEvent,i)}return 2147483647<Number(n)?-1:yt.setTimeout(i,n||0)}function yO(i){i.g=_A(()=>{i.g=null,i.i&&(i.i=!1,yO(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}$n(B0,yr),(qe=B0.prototype).da=!1,qe.S=null,qe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vr(this,"tick"),this.da&&(mA(this),this.start()))}},qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qe.M=function(){B0.Z.M.call(this),mA(this),delete this.g};class BF extends Wl{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:yO(this)}M(){super.M(),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dv(i){Wl.call(this),this.h=i,this.g={}}$n(dv,Wl);var vO=[];function EO(i,n,r,s){Array.isArray(r)||(r&&(vO[0]=r.toString()),r=vO);for(var o=0;o<r.length;o++){var c=L0(n,r[o],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function wO(i){N0(i.g,function(n,r){this.g.hasOwnProperty(r)&&Mg(n)},i),i.g={}}function j0(){this.g=!0}function Fg(i,n,r,s){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var s=r[i];if(!(2>s.length)){var o=s[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<o.length;h++)o[h]=""}}}return V0(r)}catch(_){return n}}(i,r)+(s?" "+s:"")})}dv.prototype.M=function(){dv.Z.M.call(this),wO(this)},dv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},j0.prototype.Aa=function(){this.g=!1},j0.prototype.info=function(){};var Ah={},CO=null;function hv(){return CO=CO||new yr}function yA(i){Wr.call(this,Ah.Ma,i)}function Lg(i){const n=hv();vr(n,new yA(n,i))}function bO(i,n){Wr.call(this,Ah.STAT_EVENT,i),this.stat=n}function xi(i){const n=hv();vr(n,new bO(n,i))}function TO(i,n){Wr.call(this,Ah.Na,i),this.size=n}function Vg(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return yt.setTimeout(function(){i()},n)}Ah.Ma="serverreachability",$n(yA,Wr),Ah.STAT_EVENT="statevent",$n(bO,Wr),Ah.Na="timingevent",$n(TO,Wr);var fv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vA={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function EA(){}function DO(){}EA.prototype.h=null;var $0,pv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function H0(){Wr.call(this,"d")}function wA(){Wr.call(this,"c")}function Rh(){}function ra(i,n,r,s){this.l=i,this.j=n,this.m=r,this.X=s||1,this.V=new dv(this),this.P=SO,this.W=new B0(i=nv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new q0}function q0(){this.i=null,this.g="",this.h=!1}$n(H0,Wr),$n(wA,Wr),$n(Rh,EA),Rh.prototype.g=function(){return new XMLHttpRequest},Rh.prototype.i=function(){return{}},$0=new Rh;var SO=45e3,G0={},Nh={};function gv(i,n,r){i.K=1,i.v=J0(Kl(n)),i.s=r,i.U=!0,W0(i,null)}function W0(i,n){i.F=Date.now(),zl(i),i.A=Kl(i.v);var r=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),tb(r.h,"t",s),i.C=0,r=i.l.H,i.h=new q0,i.g=Ql(i.l,r?n:null,!i.s),0<i.O&&(i.L=new BF(Ar(i.Ia,i,i.g),i.O)),EO(i.V,i.g,"readystatechange",i.gb),n=i.H?eA(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),Lg(1),function(i,n,r,s,o,c){i.info(function(){if(i.g)if(c)for(var h="",_=c.split("&"),w=0;w<_.length;w++){var T=_[w].split("=");if(1<T.length){var S=T[0];T=T[1];var R=S.split("_");h=2<=R.length&&"type"==R[1]?h+(S+"=")+T+"&":h+(S+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+n+"\n"+r+"\n"+h})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Z0(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function AO(i,n,r){let o,s=!0;for(;!i.I&&i.C<r.length;){if(o=CA(i,r),o==Nh){4==n&&(i.o=4,xi(14),s=!1),Fg(i.j,i.m,null,"[Incomplete Response]");break}if(o==G0){i.o=4,xi(15),Fg(i.j,i.m,r,"[Invalid Chunk]"),s=!1;break}Fg(i.j,i.m,o,null),Y0(i,o)}Z0(i)&&o!=Nh&&o!=G0&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,xi(16),s=!1),i.i=i.i&&s,s?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),BA(n),n.L=!0,xi(11))):(Fg(i.j,i.m,r,"[Invalid Chunked Response]"),xh(i),mv(i))}function CA(i,n){var r=i.C,s=n.indexOf("\n",r);return-1==s?Nh:(r=Number(n.substring(r,s)),isNaN(r)?G0:(s+=1)+r>n.length?Nh:(n=n.substr(s,r),i.C=s+r,n))}function zl(i){i.Y=Date.now()+i.P,z0(i,i.P)}function z0(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Vg(Ar(i.eb,i),n)}function K0(i){i.B&&(yt.clearTimeout(i.B),i.B=null)}function mv(i){0==i.l.G||i.I||jA(i.l,i)}function xh(i){K0(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,mA(i.W),wO(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function Y0(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||Cv(r.i,i)))if(r.I=i.N,!i.J&&Cv(r.i,i)&&3==r.G){try{var s=r.Ca.g.parse(n)}catch(T){s=null}if(Array.isArray(s)&&3==s.length){var o=s;if(0==o[0])e:if(r.u)r.ta=o[1],0<r.ta-r.U&&37500>o[2]&&r.N&&0==r.A&&!r.v&&(r.v=Vg(Ar(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;Zg(r),Sv(r)}Xn(r),xi(18)}if(1>=nb(r.i)&&r.ka){try{r.ka()}catch(T){}r.ka=void 0}}else yc(r,11)}else if((i.J||r.g==i)&&Zg(r),!Ih(n))for(o=r.Ca.g.parse(n),n=0;n<o.length;n++){let T=o[n];if(r.U=T[0],T=T[1],2==r.G)if("c"==T[0]){r.J=T[1],r.la=T[2];const S=T[3];null!=S&&(r.ma=S,r.h.info("VER="+r.ma));const R=T[4];null!=R&&(r.za=R,r.h.info("SVER="+r.za));const P=T[5];null!=P&&"number"==typeof P&&0<P&&(r.K=s=1.5*P,r.h.info("backChannelRequestTimeoutMs_="+s)),s=r;const k=i.g;if(k){const U=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var c=s.i;!c.g&&(Gr(U,"spdy")||Gr(U,"quic")||Gr(U,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(qg(c,c.h),c.h=null))}if(s.D){const J=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(s.sa=J,Mn(s.F,s.D,J))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var h=i;if((s=r).oa=ub(s,s.H?s.la:null,s.W),h.J){AA(s.i,h);var _=h,w=s.K;w&&_.setTimeout(w),_.B&&(K0(_),zl(_)),s.g=h}else Nv(s);0<r.l.length&&Av(r)}else"stop"!=T[0]&&"close"!=T[0]||yc(r,7);else 3==r.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?yc(r,7):Dv(r):"noop"!=T[0]&&r.j&&r.j.wa(T),r.A=0)}Lg(4)}catch(T){}}function Ph(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(Qy(i)||"string"==typeof i)Ag(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(Qy(i)||"string"==typeof i){r=[];for(var s=i.length,o=0;o<s;o++)r.push(o)}else for(o in r=[],s=0,i)r[s++]=o;o=(s=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Qy(i)){for(var n=[],r=i.length,s=0;s<r;s++)n.push(i[s]);return n}for(s in n=[],r=0,i)n[r++]=i[s];return n}(i)).length;for(var c=0;c<o;c++)n.call(void 0,s[c],r&&r[c],i)}}function Oh(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var s=0;s<r;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Oh)for(r=i.T(),s=0;s<r.length;s++)this.set(r[s],i.get(r[s]));else for(s in i)this.set(s,i[s])}function bA(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var s=i.g[n];Mh(i.h,s)&&(i.g[r++]=s),n++}i.g.length=r}if(i.i!=i.g.length){var o={};for(r=n=0;n<i.g.length;)Mh(o,s=i.g[n])||(i.g[r++]=s,o[s]=1),n++;i.g.length=r}}function Mh(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(qe=ra.prototype).setTimeout=function(i){this.P=i},qe.gb=function(i){i=i.target;const n=this.L;n&&3==Ga(i)?n.l():this.Ia(i)},qe.Ia=function(i){try{if(i==this.g)e:{const S=Ga(this.g);var n=this.g.Da();const R=this.g.ba();if(!(3>S)&&(3!=S||nv||this.g&&(this.h.h||this.g.ga()||kA(this.g)))){this.I||4!=S||7==n||Lg(8==n||0>=R?3:2),K0(this);var r=this.g.ba();this.N=r;t:if(Z0(this)){var s=kA(this.g);i="";var o=s.length,c=4==Ga(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){xh(this),mv(this);var h="";break t}this.h.i=new yt.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,i+=this.h.i.decode(s[n],{stream:c&&n==o-1});s.splice(0,o),this.h.g+=i,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==r,function(i,n,r,s,o,c,h){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+o+"]: "+n+"\n"+r+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,S,r),this.i){if(this.$&&!this.J){t:{if(this.g){var _,w=this.g;if((_=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ih(_)){var T=_;break t}}T=null}if(!(r=T)){this.i=!1,this.o=3,xi(12),xh(this),mv(this);break e}Fg(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Y0(this,r)}this.U?(AO(this,S,h),nv&&this.i&&3==S&&(EO(this.V,this.W,"tick",this.fb),this.W.start())):(Fg(this.j,this.m,h,null),Y0(this,h)),4==S&&xh(this),this.i&&!this.I&&(4==S?jA(this.l,this):(this.i=!1,zl(this)))}else 400==r&&0<h.indexOf("Unknown SID")?(this.o=3,xi(12)):(this.o=0,xi(13)),xh(this),mv(this)}}}catch(S){}},qe.fb=function(){if(this.g){var i=Ga(this.g),n=this.g.ga();this.C<n.length&&(K0(this),AO(this,i,n),this.i&&4!=i&&zl(this))}},qe.cancel=function(){this.I=!0,xh(this)},qe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(Lg(3),xi(17)),xh(this),this.o=2,mv(this)):z0(this,this.Y-i)},(qe=Oh.prototype).R=function(){bA(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},qe.T=function(){return bA(this),this.g.concat()},qe.get=function(i,n){return Mh(this.h,i)?this.h[i]:n},qe.set=function(i,n){Mh(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},qe.forEach=function(i,n){for(var r=this.T(),s=0;s<r.length;s++){var o=r[s],c=this.get(o);i.call(n,c,o,this)}};var _v=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kh(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof kh){this.g=void 0!==n?n:i.g,yv(this,i.j),this.s=i.s,Q0(this,i.i),Ug(this,i.m),this.l=i.l,n=i.h;var r=new $g;r.i=n.i,n.g&&(r.g=new Oh(n.g),r.h=n.h),TA(this,r),this.o=i.o}else i&&(r=String(i).match(_v))?(this.g=!!n,yv(this,r[1]||"",!0),this.s=jg(r[2]||""),Q0(this,r[3]||"",!0),Ug(this,r[4]),this.l=jg(r[5]||"",!0),TA(this,r[6]||"",!0),this.o=jg(r[7]||"")):(this.g=!!n,this.h=new $g(null,this.g))}function Kl(i){return new kh(i)}function yv(i,n,r){i.j=r?jg(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function Q0(i,n,r){i.i=r?jg(n,!0):n}function Ug(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function TA(i,n,r){n instanceof $g?(i.h=n,function(i,n){n&&!i.j&&(Yl(i),i.i=null,i.g.forEach(function(r,s){var o=s.toLowerCase();s!=o&&(Ev(this,s),tb(this,o,r))},i)),i.j=n}(i.h,i.g)):(r||(n=Hg(n,OO)),i.h=new $g(n,i.g))}function Mn(i,n,r){i.h.set(n,r)}function J0(i){return Mn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function jg(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Hg(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,xO),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function xO(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}kh.prototype.toString=function(){var i=[],n=this.j;n&&i.push(Hg(n,vv,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(Hg(n,vv,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(Hg(r,"/"==r.charAt(0)?Qi:PO,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",Hg(r,X0)),i.join("")};var vv=/[#\/\?@]/g,PO=/[#\?:]/g,Qi=/[#\?]/g,OO=/[#\?@]/g,X0=/#/g;function $g(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function Yl(i){i.g||(i.g=new Oh,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var s=i[r].indexOf("="),o=null;if(0<=s){var c=i[r].substring(0,s);o=i[r].substring(s+1)}else c=i[r];n(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function Ev(i,n){Yl(i),n=Fh(i,n),Mh(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,Mh((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&bA(i)))}function eb(i,n){return Yl(i),n=Fh(i,n),Mh(i.g.h,n)}function tb(i,n,r){Ev(i,n),0<r.length&&(i.i=null,i.g.set(Fh(i,n),QS(r)),i.h+=r.length)}function Fh(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function SA(i){this.l=i||MO,i=yt.PerformanceNavigationTiming?0<(i=yt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(yt.g&&yt.g.Ea&&yt.g.Ea()&&yt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qe=$g.prototype).add=function(i,n){Yl(this),this.i=null,i=Fh(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},qe.forEach=function(i,n){Yl(this),this.g.forEach(function(r,s){Ag(r,function(o){i.call(n,o,s,this)},this)},this)},qe.T=function(){Yl(this);for(var i=this.g.R(),n=this.g.T(),r=[],s=0;s<n.length;s++)for(var o=i[s],c=0;c<o.length;c++)r.push(n[s]);return r},qe.R=function(i){Yl(this);var n=[];if("string"==typeof i)eb(this,i)&&(n=YS(n,this.g.get(Fh(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=YS(n,i[r])}return n},qe.set=function(i,n){return Yl(this),this.i=null,eb(this,i=Fh(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},qe.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var s=n[r],o=encodeURIComponent(String(s));s=this.R(s);for(var c=0;c<s.length;c++){var h=o;""!==s[c]&&(h+="="+encodeURIComponent(String(s[c]))),i.push(h)}}return this.i=i.join("&")};var MO=10;function wv(i){return!!i.h||!!i.g&&i.g.size>=i.j}function nb(i){return i.h?1:i.g?i.g.size:0}function Cv(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function qg(i,n){i.g?i.g.add(n):i.h=n}function AA(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function As(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return QS(i.i)}function rb(){}function WF(){this.g=new rb}function kO(i,n,r){const s=r||"";try{Ph(i,function(o,c){let h=o;Th(o)&&(h=V0(o)),n.push(s+c+"="+encodeURIComponent(h))})}catch(o){throw n.push(s+"type="+encodeURIComponent("_badmap")),o}}function bv(i,n,r,s,o){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,o(s)}catch(c){}}function Gg(i){this.l=i.$b||null,this.j=i.ib||!1}function Tv(i,n){yr.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=RA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SA.prototype.cancel=function(){if(this.i=As(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},rb.prototype.stringify=function(i){return yt.JSON.stringify(i,void 0)},rb.prototype.parse=function(i){return yt.JSON.parse(i,void 0)},$n(Gg,EA),Gg.prototype.g=function(){return new Tv(this.l,this.j)},Gg.prototype.i=function(i){return function(){return i}}({}),$n(Tv,yr);var RA=0;function NA(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Lh(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Wg(i)}function Wg(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(qe=Tv.prototype).open=function(i,n){if(this.readyState!=RA)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,Wg(this)},qe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||yt).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lh(this)),this.readyState=RA},qe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Wg(this)),this.g&&(this.readyState=3,Wg(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==yt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NA(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},qe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?Lh(this):Wg(this),3==this.readyState&&NA(this)}},qe.Ua=function(i){this.g&&(this.response=this.responseText=i,Lh(this))},qe.Ta=function(i){this.g&&(this.response=i,Lh(this))},qe.ha=function(){this.g&&Lh(this)},qe.setRequestHeader=function(i,n){this.v.append(i,n)},qe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},qe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(Tv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var FO=yt.JSON.parse;function qn(i){yr.call(this),this.headers=new Oh,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=xA,this.K=this.L=!1}$n(qn,yr);var xA="",zF=/^https?$/i,PA=["POST","PUT"];function LO(i){return"content-type"==i.toLowerCase()}function MA(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,ib(i),Uh(i)}function ib(i){i.D||(i.D=!0,vr(i,"complete"),vr(i,"error"))}function Vh(i){if(i.h&&void 0!==Yy&&(!i.C[1]||4!=Ga(i)||2!=i.ba()))if(i.v&&4==Ga(i))_A(i.Fa,0,i);else if(vr(i,"readystatechange"),4==Ga(i)){i.h=!1;try{const _=i.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var s;if(s=0===_){var o=String(i.H).match(_v)[1]||null;if(!o&&yt.self&&yt.self.location){var c=yt.self.location.protocol;o=c.substr(0,c.length-1)}s=!zF.test(o?o.toLowerCase():"")}r=s}if(r)vr(i,"complete"),vr(i,"success");else{i.m=6;try{var h=2<Ga(i)?i.g.statusText:""}catch(w){h=""}i.j=h+" ["+i.ba()+"]",ib(i)}}finally{Uh(i)}}}function Uh(i,n){if(i.g){sb(i);const r=i.g,s=i.C[0]?Sg:null;i.g=null,i.C=null,n||vr(i,"ready");try{r.onreadystatechange=s}catch(o){}}}function sb(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(yt.clearTimeout(i.A),i.A=null)}function Ga(i){return i.g?i.g.readyState:0}function kA(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case xA:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function FA(i,n,r){e:{for(s in r){var s=!1;break e}s=!0}s||(r=function(i){let n="";return N0(i,function(r,s){n+=s,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):Mn(i,n,r))}function Iv(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function ob(i){this.za=0,this.l=[],this.h=new j0,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Iv("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Iv("baseRetryDelayMs",5e3,i),this.$a=Iv("retryDelaySeedMs",1e4,i),this.Ya=Iv("forwardChannelMaxRetries",2,i),this.ra=Iv("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new SA(i&&i.concurrentRequestLimit),this.Ca=new WF,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Dv(i){if(LA(i),3==i.G){var n=i.V++,r=Kl(i.F);Mn(r,"SID",i.J),Mn(r,"RID",n),Mn(r,"TYPE","terminate"),Rv(i,r),(n=new ra(i,i.h,n,void 0)).K=2,n.v=J0(Kl(r)),r=!1,yt.navigator&&yt.navigator.sendBeacon&&(r=yt.navigator.sendBeacon(n.v.toString(),"")),!r&&yt.Image&&((new Image).src=n.v,r=!0),r||(n.g=Ql(n.l,null),n.g.ea(n.v)),n.F=Date.now(),zl(n)}HA(i)}function Sv(i){i.g&&(BA(i),i.g.cancel(),i.g=null)}function LA(i){Sv(i),i.u&&(yt.clearTimeout(i.u),i.u=null),Zg(i),i.i.cancel(),i.m&&("number"==typeof i.m&&yt.clearTimeout(i.m),i.m=null)}function ab(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&Av(i)}function Av(i){wv(i.i)||i.m||(i.m=!0,uv(i.Ha,i),i.C=0)}function VO(i,n){var r;r=n?n.m:i.V++;const s=Kl(i.F);Mn(s,"SID",i.J),Mn(s,"RID",r),Mn(s,"AID",i.U),Rv(i,s),i.o&&i.s&&FA(s,i.o,i.s),r=new ra(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=UA(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),qg(i.i,r),gv(r,s,n)}function Rv(i,n){i.j&&Ph({},function(r,s){Mn(n,s,r)})}function UA(i,n,r){r=Math.min(i.l.length,r);var s=i.j?Ar(i.j.Oa,i.j,i):null;e:{var o=i.l;let c=-1;for(;;){const h=["count="+r];-1==c?0<r?(c=o[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let _=!0;for(let w=0;w<r;w++){let T=o[w].h;const S=o[w].g;if(T-=c,0>T)c=Math.max(0,o[w].h-100),_=!1;else try{kO(S,h,"req"+T+"_")}catch(R){s&&s(S)}}if(_){s=h.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,s}function Nv(i){i.g||i.u||(i.Y=1,uv(i.Ga,i),i.A=0)}function Xn(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Vg(Ar(i.Ga,i),zg(i,i.A)),i.A++,0))}function BA(i){null!=i.B&&(yt.clearTimeout(i.B),i.B=null)}function lb(i){i.g=new ra(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=Kl(i.oa);Mn(n,"RID","rpc"),Mn(n,"SID",i.J),Mn(n,"CI",i.N?"0":"1"),Mn(n,"AID",i.U),Rv(i,n),Mn(n,"TYPE","xmlhttp"),i.o&&i.s&&FA(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=J0(Kl(n)),r.s=null,r.U=!0,W0(r,i)}function Zg(i){null!=i.v&&(yt.clearTimeout(i.v),i.v=null)}function jA(i,n){var r=null;if(i.g==n){Zg(i),BA(i),i.g=null;var s=2}else{if(!Cv(i.i,n))return;r=n.D,AA(i.i,n),s=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==s){r=n.s?n.s.length:0,n=Date.now()-n.F;var o=i.C;vr(s=hv(),new TO(s,r,n,o)),Av(i)}else Nv(i);else if(3==(o=n.o)||0==o&&0<i.I||!(1==s&&function(i,n){return!(nb(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Vg(Ar(i.Ha,i,n),zg(i,i.C)),i.C++,0)))}(i,n)||2==s&&Xn(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),o){case 1:yc(i,5);break;case 4:yc(i,10);break;case 3:yc(i,6);break;default:yc(i,2)}}function zg(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function yc(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var s=Ar(i.jb,i);r||(r=new kh("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||yv(r,"https"),J0(r)),function(i,n){const r=new j0;if(yt.Image){const s=new Image;s.onload=Gl(bv,r,s,"TestLoadImage: loaded",!0,n),s.onerror=Gl(bv,r,s,"TestLoadImage: error",!1,n),s.onabort=Gl(bv,r,s,"TestLoadImage: abort",!1,n),s.ontimeout=Gl(bv,r,s,"TestLoadImage: timeout",!1,n),yt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else n(!1)}(r.toString(),s)}else xi(2);i.G=0,i.j&&i.j.va(n),HA(i),LA(i)}function HA(i){i.G=0,i.I=-1,i.j&&((0!=As(i.i).length||0!=i.l.length)&&(i.i.i.length=0,QS(i.l),i.l.length=0),i.j.ua())}function ub(i,n,r){let s=function(i){return i instanceof kh?Kl(i):new kh(i,void 0)}(r);if(""!=s.i)n&&Q0(s,n+"."+s.i),Ug(s,s.m);else{const o=yt.location;s=function(i,n,r,s){var o=new kh(null,void 0);return i&&yv(o,i),n&&Q0(o,n),r&&Ug(o,r),s&&(o.l=s),o}(o.protocol,n?n+"."+o.hostname:o.hostname,+o.port,r)}return i.aa&&N0(i.aa,function(o,c){Mn(s,c,o)}),r=i.sa,(n=i.D)&&r&&Mn(s,n,r),Mn(s,"VER",i.ma),Rv(i,s),s}function Ql(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new qn(r&&i.Ba&&!i.qa?new Gg({ib:!0}):i.qa)).L=i.H,n}function cb(){}function Bh(){if(mc&&!(10<=Number(fO)))throw Error("Environmental error: no available transport.")}function ci(i,n){yr.call(this),this.g=new ob(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!Ih(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Ih(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new jh(this)}function $A(i){H0.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function Kg(){wA.call(this),this.status=1}function jh(i){this.g=i}(qe=qn.prototype).ea=function(i,n,r,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$0.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:$0),this.g.onreadystatechange=Ar(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(c){return void MA(this,c)}i=r||"";const o=new Oh(this.headers);s&&Ph(s,function(c,h){o.set(h,c)}),s=function(i){e:{var n=LO;const r=i.length,s="string"==typeof i?i.split(""):i;for(let o=0;o<r;o++)if(o in s&&n.call(void 0,s[o],o,i)){n=o;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(o.T()),r=yt.FormData&&i instanceof yt.FormData,!(0<=KS(PA,n))||s||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sb(this),0<this.B&&((this.K=function(i){return mc&&hO()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ar(this.pa,this)):this.A=_A(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){MA(this,c)}},qe.pa=function(){void 0!==Yy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vr(this,"timeout"),this.abort(8))},qe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,vr(this,"complete"),vr(this,"abort"),Uh(this))},qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Uh(this,!0)),qn.Z.M.call(this)},qe.Fa=function(){this.s||(this.F||this.v||this.l?Vh(this):this.cb())},qe.cb=function(){Vh(this)},qe.ba=function(){try{return 2<Ga(this)?this.g.status:-1}catch(i){return-1}},qe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},qe.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),FO(n)}},qe.Da=function(){return this.m},qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(qe=ob.prototype).ma=8,qe.G=1,qe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},qe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const o=new ra(this,this.h,i,void 0);let c=this.s;if(this.P&&(c?(c=eA(c),ev(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var s=this.l[r];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(n+=s)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=UA(this,o,n),Mn(r=Kl(this.F),"RID",i),Mn(r,"CVER",22),this.D&&Mn(r,"X-HTTP-Session-Id",this.D),Rv(this,r),this.o&&c&&FA(r,this.o,c),qg(this.i,o),this.Ra&&Mn(r,"TYPE","init"),this.ja?(Mn(r,"$req",n),Mn(r,"SID","null"),o.$=!0,gv(o,r,null)):gv(o,r,n),this.G=2}}else 3==this.G&&(i?VO(this,i):0==this.l.length||wv(this.i)||VO(this))},qe.Ga=function(){if(this.u=null,lb(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Vg(Ar(this.bb,this),i)}},qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xi(10),Sv(this),lb(this))},qe.ab=function(){null!=this.v&&(this.v=null,Sv(this),Xn(this),xi(19))},qe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),xi(2)):(this.h.info("Failed to ping google.com"),xi(1))},(qe=cb.prototype).xa=function(){},qe.wa=function(){},qe.va=function(){},qe.ua=function(){},qe.Oa=function(){},Bh.prototype.g=function(i,n){return new ci(i,n)},$n(ci,yr),ci.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),uv(Ar(i.hb,i,n))),xi(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=ub(i,null,i.W),Av(i)},ci.prototype.close=function(){Dv(this.g)},ci.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,ab(this.g,n)}else this.v?((n={}).__data__=V0(i),ab(this.g,n)):ab(this.g,i)},ci.prototype.M=function(){this.g.j=null,delete this.j,Dv(this.g),delete this.g,ci.Z.M.call(this)},$n($A,H0),$n(Kg,wA),$n(jh,cb),jh.prototype.xa=function(){vr(this.g,"a")},jh.prototype.wa=function(i){vr(this.g,new $A(i))},jh.prototype.va=function(i){vr(this.g,new Kg(i))},jh.prototype.ua=function(){vr(this.g,"b")},Bh.prototype.createWebChannel=Bh.prototype.g,ci.prototype.send=ci.prototype.u,ci.prototype.open=ci.prototype.m,ci.prototype.close=ci.prototype.close,fv.NO_ERROR=0,fv.TIMEOUT=8,fv.HTTP_ERROR=6,vA.COMPLETE="complete",DO.EventType=pv,pv.OPEN="a",pv.CLOSE="b",pv.ERROR="c",pv.MESSAGE="d",yr.prototype.listen=yr.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var db=Yi.createWebChannelTransport=function(){return new Bh},qA=Yi.getStatEventTarget=function(){return hv()},er=Yi.ErrorCode=fv,YF=Yi.EventType=vA,UO=Yi.Event=Ah,GA=Yi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},QF=Yi.FetchXmlHttpFactory=Gg,vc=Yi.WebChannel=DO,BO=Yi.XhrIo=qn;class Zr{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let Yg="9.1.0";const Ec=new Zt.Yd("@firebase/firestore");function hb(){return Ec.logLevel}function Me(i,...n){if(Ec.logLevel<=Zt.in.DEBUG){const r=n.map(WA);Ec.debug(`Firestore (${Yg}): ${i}`,...r)}}function tr(i,...n){if(Ec.logLevel<=Zt.in.ERROR){const r=n.map(WA);Ec.error(`Firestore (${Yg}): ${i}`,...r)}}function Qg(i,...n){if(Ec.logLevel<=Zt.in.WARN){const r=n.map(WA);Ec.warn(`Firestore (${Yg}): ${i}`,...r)}}function WA(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function Xe(i="Unexpected state"){const n=`FIRESTORE (${Yg}) INTERNAL ASSERTION FAILED: `+i;throw tr(n),new Error(n)}function gt(i,n){i||Xe()}function Be(i,n){return i}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class ZA{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class $O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(Zr.UNAUTHENTICATED))}shutdown(){}}class qO{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class fo{constructor(n){this.t=n,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var s=this;let o=this.i;const c=T=>this.i!==o?(o=this.i,r(T)):Promise.resolve();let h=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Er,n.enqueueRetryable(()=>c(this.currentUser))};const _=()=>{const T=h;n.enqueueRetryable((0,Ce.Z)(function*(){yield T.promise,yield c(s.currentUser)}))},w=T=>{Me("FirebaseCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(T=>w(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?w(T):(Me("FirebaseCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Er)}},0),_()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==n?(Me("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt("string"==typeof s.accessToken),new ZA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return gt(null===n||"string"==typeof n),new Zr(n)}}class GO{constructor(n,r,s){this.h=n,this.l=r,this.m=s,this.type="FirstParty",this.user=Zr.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class WO{constructor(n,r,s){this.h=n,this.l=r,this.m=s}getToken(){return Promise.resolve(new GO(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ji{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=s=>this.g(s),this.p=s=>r.writeSequenceNumber(s))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function ZO(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}Ji.T=-1;class zO{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let s="";for(;s.length<20;){const o=ZO(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<r&&(s+=n.charAt(o[c]%n.length))}return s}}function Bt(i,n){return i<n?-1:i>n?1:0}function Hh(i,n,r){return i.length===n.length&&i.every((s,o)=>r(s,n[o]))}function zA(i){return i+"\0"}class Un{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Ne(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Un.fromMillis(Date.now())}static fromDate(n){return Un.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),s=Math.floor(1e6*(n-1e3*r));return new Un(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Bt(this.nanoseconds,n.nanoseconds):Bt(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(n){this.timestamp=n}static fromTimestamp(n){return new Tt(n)}static min(){return new Tt(new Un(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function KO(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function wc(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function YO(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class xv{constructor(n,r,s){void 0===r?r=0:r>n.length&&Xe(),void 0===s?s=n.length-r:s>n.length-r&&Xe(),this.segments=n,this.offset=r,this.len=s}get length(){return this.len}isEqual(n){return 0===xv.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof xv?n.forEach(s=>{r.push(s)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,s=this.limit();r<s;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const s=Math.min(n.length,r.length);for(let o=0;o<s;o++){const c=n.get(o),h=r.get(o);if(c<h)return-1;if(c>h)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class en extends xv{construct(n,r,s){return new en(n,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const s of n){if(s.indexOf("//")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(o=>o.length>0))}return new en(r)}static emptyPath(){return new en([])}}const fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends xv{construct(n,r,s){return new xr(n,r,s)}static isValidIdentifier(n){return fb.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(n){const r=[];let s="",o=0;const c=()=>{if(0===s.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let h=!1;for(;o<n.length;){const _=n[o];if("\\"===_){if(o+1===n.length)throw new Ne(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const w=n[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ne(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);s+=w,o+=2}else"`"===_?(h=!h,o++):"."!==_||h?(s+=_,o++):(c(),o++)}if(c(),h)throw new Ne(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new xr(r)}static emptyPath(){return new xr([])}}class $h{constructor(n){this.fields=n,n.sort(xr.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return Hh(this.fields,n.fields,(r,s)=>r.isEqual(s))}}class Pr{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new Pr(r)}static fromUint8Array(n){const r=function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o}(n);return new Pr(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Bt(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const JO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jl(i){if(gt(!!i),"string"==typeof i){let n=0;const r=JO.exec(i);if(gt(!!r),r[1]){let o=r[1];o=(o+"000000000").substr(0,9),n=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:n}}return{seconds:nr(i.seconds),nanos:nr(i.nanos)}}function nr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function zr(i){return"string"==typeof i?Pr.fromBase64String(i):Pr.fromUint8Array(i)}function KA(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function pb(i){const n=i.mapValue.fields.__previous_value__;return KA(n)?pb(n):n}function Jg(i){const n=Jl(i.mapValue.fields.__local_write_time__.timestampValue);return new Un(n.seconds,n.nanos)}function Xl(i){return null==i}function Xg(i){return 0===i&&1/i==-1/0}function gb(i){return"number"==typeof i&&Number.isInteger(i)&&!Xg(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Ke{constructor(n){this.path=n}static fromPath(n){return new Ke(en.fromString(n))}static fromName(n){return new Ke(en.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===en.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return en.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new Ke(new en(n.slice()))}}function Wa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?KA(i)?4:10:Xe()}function Rs(i,n){const r=Wa(i);if(r!==Wa(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return Jg(i).isEqual(Jg(n));case 3:return function(s,o){if("string"==typeof s.timestampValue&&"string"==typeof o.timestampValue&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Jl(s.timestampValue),h=Jl(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return o=n,zr(i.bytesValue).isEqual(zr(o.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(s,o){return nr(s.geoPointValue.latitude)===nr(o.geoPointValue.latitude)&&nr(s.geoPointValue.longitude)===nr(o.geoPointValue.longitude)}(i,n);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return nr(s.integerValue)===nr(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=nr(s.doubleValue),h=nr(o.doubleValue);return c===h?Xg(c)===Xg(h):isNaN(c)&&isNaN(h)}return!1}(i,n);case 9:return Hh(i.arrayValue.values||[],n.arrayValue.values||[],Rs);case 10:return function(s,o){const c=s.mapValue.fields||{},h=o.mapValue.fields||{};if(KO(c)!==KO(h))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===h[_]||!Rs(c[_],h[_])))return!1;return!0}(i,n);default:return Xe()}var o}function eu(i,n){return void 0!==(i.values||[]).find(r=>Rs(r,n))}function Za(i,n){const r=Wa(i),s=Wa(n);if(r!==s)return Bt(r,s);switch(r){case 0:return 0;case 1:return Bt(i.booleanValue,n.booleanValue);case 2:return function(o,c){const h=nr(o.integerValue||o.doubleValue),_=nr(c.integerValue||c.doubleValue);return h<_?-1:h>_?1:h===_?0:isNaN(h)?isNaN(_)?0:-1:1}(i,n);case 3:return mb(i.timestampValue,n.timestampValue);case 4:return mb(Jg(i),Jg(n));case 5:return Bt(i.stringValue,n.stringValue);case 6:return function(o,c){const h=zr(o),_=zr(c);return h.compareTo(_)}(i.bytesValue,n.bytesValue);case 7:return function(o,c){const h=o.split("/"),_=c.split("/");for(let w=0;w<h.length&&w<_.length;w++){const T=Bt(h[w],_[w]);if(0!==T)return T}return Bt(h.length,_.length)}(i.referenceValue,n.referenceValue);case 8:return function(o,c){const h=Bt(nr(o.latitude),nr(c.latitude));return 0!==h?h:Bt(nr(o.longitude),nr(c.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(o,c){const h=o.values||[],_=c.values||[];for(let w=0;w<h.length&&w<_.length;++w){const T=Za(h[w],_[w]);if(T)return T}return Bt(h.length,_.length)}(i.arrayValue,n.arrayValue);case 10:return function(o,c){const h=o.fields||{},_=Object.keys(h),w=c.fields||{},T=Object.keys(w);_.sort(),T.sort();for(let S=0;S<_.length&&S<T.length;++S){const R=Bt(_[S],T[S]);if(0!==R)return R;const P=Za(h[_[S]],w[T[S]]);if(0!==P)return P}return Bt(_.length,T.length)}(i.mapValue,n.mapValue);default:throw Xe()}}function mb(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return Bt(i,n);const r=Jl(i),s=Jl(n),o=Bt(r.seconds,s.seconds);return 0!==o?o:Bt(r.nanos,s.nanos)}function Pv(i){return _b(i)}function _b(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const o=Jl(s);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?zr(i.bytesValue).toBase64():"referenceValue"in i?Ke.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(s){let o="[",c=!0;for(const h of s.values||[])c?c=!1:o+=",",o+=_b(h);return o+"]"}(i.arrayValue):"mapValue"in i?function(s){const o=Object.keys(s.fields||{}).sort();let c="{",h=!0;for(const _ of o)h?h=!1:c+=",",c+=`${_}:${_b(s.fields[_])}`;return c+"}"}(i.mapValue):Xe();var n}function Ov(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function Mv(i){return!!i&&"integerValue"in i}function yb(i){return!!i&&"arrayValue"in i}function YA(i){return!!i&&"nullValue"in i}function QA(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function qh(i){return!!i&&"mapValue"in i}function em(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return wc(i.mapValue.fields,(r,s)=>n.mapValue.fields[r]=em(s)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=em(i.arrayValue.values[r]);return n}return Object.assign({},i)}class tn{constructor(n){this.value=n}static empty(){return new tn({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let s=0;s<n.length-1;++s)if(r=(r.mapValue.fields||{})[n.get(s)],!qh(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=em(r)}setAll(n){let r=xr.emptyPath(),s={},o=[];n.forEach((h,_)=>{if(!r.isImmediateParentOf(_)){const w=this.getFieldsMap(r);this.applyChanges(w,s,o),s={},o=[],r=_.popLast()}h?s[_.lastSegment()]=em(h):o.push(_.lastSegment())});const c=this.getFieldsMap(r);this.applyChanges(c,s,o)}delete(n){const r=this.field(n.popLast());qh(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return Rs(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<n.length;++s){let o=r.mapValue.fields[n.get(s)];qh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},r.mapValue.fields[n.get(s)]=o),r=o}return r.mapValue.fields}applyChanges(n,r,s){wc(r,(o,c)=>n[o]=c);for(const o of s)delete n[o]}clone(){return new tn(em(this.value))}}function Gh(i){const n=[];return wc(i.fields,(r,s)=>{const o=new xr([r]);if(qh(s)){const c=Gh(s.mapValue).fields;if(0===c.length)n.push(o);else for(const h of c)n.push(o.child(h))}else n.push(o)}),new $h(n)}class fn{constructor(n,r,s,o,c){this.key=n,this.documentType=r,this.version=s,this.data=o,this.documentState=c}static newInvalidDocument(n){return new fn(n,0,Tt.min(),tn.empty(),0)}static newFoundDocument(n,r,s){return new fn(n,1,r,s,0)}static newNoDocument(n,r){return new fn(n,2,r,tn.empty(),0)}static newUnknownDocument(n,r){return new fn(n,3,r,tn.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof fn&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new fn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class JA{constructor(n,r=null,s=[],o=[],c=null,h=null,_=null){this.path=n,this.collectionGroup=r,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=_,this.A=null}}function tm(i,n=null,r=[],s=[],o=null,c=null,h=null){return new JA(i,n,r,s,o,c,h)}function Cc(i){const n=Be(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(s=>function(i){return i.field.canonicalString()+i.op.toString()+Pv(i.value)}(s)).join(","),r+="|ob:",r+=n.orderBy.map(s=>{return(o=s).field.canonicalString()+o.dir;var o}).join(","),Xl(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=Fv(n.startAt)),n.endAt&&(r+="|ub:",r+=Fv(n.endAt)),n.A=r}return n.A}function bc(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let o=0;o<i.orderBy.length;o++)if(!Eb(i.orderBy[o],n.orderBy[o]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let o=0;o<i.filters.length;o++)if((r=i.filters[o]).op!==(s=n.filters[o]).op||!r.field.isEqual(s.field)||!Rs(r.value,s.value))return!1;var r,s;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!wb(i.startAt,n.startAt)&&wb(i.endAt,n.endAt)}function kv(i){return Ke.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class di extends class{}{constructor(n,r,s){super(),this.field=n,this.op=r,this.value=s}static create(n,r,s){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,s):new eM(n,r,s):"array-contains"===r?new nM(n,s):"in"===r?new tu(n,s):"not-in"===r?new nm(n,s):"array-contains-any"===r?new vb(n,s):new di(n,r,s)}static R(n,r,s){return"in"===r?new eR(n,s):new tM(n,s)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(Za(r,this.value)):null!==r&&Wa(this.value)===Wa(r)&&this.P(Za(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return Xe()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class eM extends di{constructor(n,r,s){super(n,r,s),this.key=Ke.fromName(s.referenceValue)}matches(n){const r=Ke.comparator(n.key,this.key);return this.P(r)}}class eR extends di{constructor(n,r){super(n,"in",r),this.keys=tR(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class tM extends di{constructor(n,r){super(n,"not-in",r),this.keys=tR(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function tR(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>Ke.fromName(s.referenceValue))}class nM extends di{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return yb(r)&&eu(r.arrayValue,this.value)}}class tu extends di{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&eu(this.value.arrayValue,r)}}class nm extends di{constructor(n,r){super(n,"not-in",r)}matches(n){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!eu(this.value.arrayValue,r)}}class vb extends di{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!yb(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>eu(this.value.arrayValue,s))}}class rm{constructor(n,r){this.position=n,this.before=r}}function Fv(i){return`${i.before?"b":"a"}:${i.position.map(n=>Pv(n)).join(",")}`}class Wh{constructor(n,r="asc"){this.field=n,this.dir=r}}function Eb(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function nR(i,n,r){let s=0;for(let o=0;o<i.position.length;o++){const c=n[o],h=i.position[o];if(s=c.field.isKeyField()?Ke.comparator(Ke.fromName(h.referenceValue),r.key):Za(h,r.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function wb(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Rs(i.position[r],n.position[r]))return!1;return!0}class ia{constructor(n,r=null,s=[],o=[],c=null,h="F",_=null,w=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=_,this.endAt=w,this.V=null,this.S=null}}function rR(i,n,r,s,o,c,h,_){return new ia(i,n,r,s,o,c,h,_)}function Zh(i){return new ia(i)}function Lv(i){return!Xl(i.limit)&&"F"===i.limitType}function Ns(i){return!Xl(i.limit)&&"L"===i.limitType}function Tc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function nu(i){for(const n of i.filters)if(n.v())return n.field;return null}function zh(i){return null!==i.collectionGroup}function po(i){const n=Be(i);if(null===n.V){n.V=[];const r=nu(n),s=Tc(n);if(null!==r&&null===s)r.isKeyField()||n.V.push(new Wh(r)),n.V.push(new Wh(xr.keyField(),"asc"));else{let o=!1;for(const c of n.explicitOrderBy)n.V.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new Wh(xr.keyField(),c))}}}return n.V}function xs(i){const n=Be(i);if(!n.S)if("F"===n.limitType)n.S=tm(n.path,n.collectionGroup,po(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const c of po(n))r.push(new Wh(c.field,"desc"===c.dir?"asc":"desc"));const s=n.endAt?new rm(n.endAt.position,!n.endAt.before):null,o=n.startAt?new rm(n.startAt.position,!n.startAt.before):null;n.S=tm(n.path,n.collectionGroup,r,n.filters,n.limit,s,o)}return n.S}function iR(i,n,r){return new ia(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function im(i,n){return bc(xs(i),xs(n))&&i.limitType===n.limitType}function Cb(i){return`${Cc(xs(i))}|lt:${i.limitType}`}function Vv(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(s=r).field.canonicalString()} ${s.op} ${Pv(s.value)}`;var s}).join(", ")}]`),Xl(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(n+=", startAt: "+Fv(i.startAt)),i.endAt&&(n+=", endAt: "+Fv(i.endAt)),`Target(${n})`}(xs(i))}; limitType=${i.limitType})`}function Kh(i,n){return n.isFoundDocument()&&function(r,s){const o=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(i,n)&&function(r,s){for(const o of r.explicitOrderBy)if(!o.field.isKeyField()&&null===s.data.field(o.field))return!1;return!0}(i,n)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(i,n)&&(s=n,!((r=i).startAt&&!nR(r.startAt,po(r),s)||r.endAt&&nR(r.endAt,po(r),s)));var r,s}function bb(i){return(n,r)=>{let s=!1;for(const o of po(i)){const c=Tb(o,n,r);if(0!==c)return c;s=s||o.field.isKeyField()}return 0}}function Tb(i,n,r){const s=i.field.isKeyField()?Ke.comparator(n.key,r.key):function(o,c,h){const _=c.data.field(o),w=h.data.field(o);return null!==_&&null!==w?Za(_,w):Xe()}(i.field,n,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Xe()}}function sR(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xg(n)?"-0":n}}function oR(i){return{integerValue:""+i}}function Ib(i,n){return gb(n)?oR(n):sR(i,n)}class sa{constructor(){this._=void 0}}function Db(i,n,r){return i instanceof sm?function(s,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(r,n):i instanceof Yh?iM(i,n):i instanceof Qh?lR(i,n):function(s,o){const c=aR(s,o),h=sM(c)+sM(s.C);return Mv(c)&&Mv(s.C)?oR(h):sR(s.N,h)}(i,n)}function rM(i,n,r){return i instanceof Yh?iM(i,n):i instanceof Qh?lR(i,n):r}function aR(i,n){return i instanceof Jh?Mv(r=n)||(s=r)&&"doubleValue"in s?n:{integerValue:0}:null;var s,r}class sm extends sa{}class Yh extends sa{constructor(n){super(),this.elements=n}}function iM(i,n){const r=oM(n);for(const s of i.elements)r.some(o=>Rs(o,s))||r.push(s);return{arrayValue:{values:r}}}class Qh extends sa{constructor(n){super(),this.elements=n}}function lR(i,n){let r=oM(n);for(const s of i.elements)r=r.filter(o=>!Rs(o,s));return{arrayValue:{values:r}}}class Jh extends sa{constructor(n,r){super(),this.N=n,this.C=r}}function sM(i){return nr(i.integerValue||i.doubleValue)}function oM(i){return yb(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Uv{constructor(n,r){this.field=n,this.transform=r}}class aM{constructor(n,r){this.version=n,this.transformResults=r}}class pr{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new pr}static exists(n){return new pr(void 0,n)}static updateTime(n){return new pr(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Sb(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class Ab{}function XF(i,n,r){i instanceof f?function(s,o,c){const h=s.value.clone(),_=C(s.fieldTransforms,o,c.transformResults);h.setAll(_),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(i,n,r):i instanceof m?function(s,o,c){if(!Sb(s.precondition,o))return void o.convertToUnknownDocument(c.version);const h=C(s.fieldTransforms,o,c.transformResults),_=o.data;_.setAll(E(s)),_.setAll(h),o.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function a(i,n,r){var o;i instanceof f?function(s,o,c){if(!Sb(s.precondition,o))return;const h=s.value.clone(),_=D(s.fieldTransforms,c,o);h.setAll(_),o.convertToFoundDocument(d(o),h).setHasLocalMutations()}(i,n,r):i instanceof m?function(s,o,c){if(!Sb(s.precondition,o))return;const h=D(s.fieldTransforms,c,o),_=o.data;_.setAll(E(s)),_.setAll(h),o.convertToFoundDocument(d(o),_).setHasLocalMutations()}(i,n,r):Sb(i.precondition,o=n)&&o.convertToNoDocument(Tt.min())}function l(i,n){let r=null;for(const s of i.fieldTransforms){const o=n.data.field(s.field),c=aR(s.transform,o||null);null!=c&&(null==r&&(r=tn.empty()),r.set(s.field,c))}return r||null}function u(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(s=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===s||r&&s&&Hh(r,s,(o,c)=>function(i,n){return i.field.isEqual(n.field)&&(s=n.transform,(r=i.transform)instanceof Yh&&s instanceof Yh||r instanceof Qh&&s instanceof Qh?Hh(r.elements,s.elements,Rs):r instanceof Jh&&s instanceof Jh?Rs(r.C,s.C):r instanceof sm&&s instanceof sm);var r,s}(o,c))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,s}function d(i){return i.isFoundDocument()?i.version:Tt.min()}class f extends Ab{constructor(n,r,s,o=[]){super(),this.key=n,this.value=r,this.precondition=s,this.fieldTransforms=o,this.type=0}}class m extends Ab{constructor(n,r,s,o,c=[]){super(),this.key=n,this.data=r,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}}function E(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=i.data.field(r);n.set(r,s)}}),n}function C(i,n,r){const s=new Map;gt(i.length===r.length);for(let o=0;o<r.length;o++){const c=i[o],h=c.transform,_=n.data.field(c.field);s.set(c.field,rM(h,_,r[o]))}return s}function D(i,n,r){const s=new Map;for(const o of i){const c=o.transform,h=r.data.field(o.field);s.set(o.field,Db(c,h,n))}return s}class A extends Ab{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class N extends Ab{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class O{constructor(n){this.count=n}}var M,B;function Z(i){switch(i){case _e.OK:return Xe();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Xe()}}function le(i){if(void 0===i)return tr("GRPC error has no .code"),_e.UNKNOWN;switch(i){case M.OK:return _e.OK;case M.CANCELLED:return _e.CANCELLED;case M.UNKNOWN:return _e.UNKNOWN;case M.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case M.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case M.INTERNAL:return _e.INTERNAL;case M.UNAVAILABLE:return _e.UNAVAILABLE;case M.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case M.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case M.NOT_FOUND:return _e.NOT_FOUND;case M.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case M.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case M.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case M.ABORTED:return _e.ABORTED;case M.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case M.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case M.DATA_LOSS:return _e.DATA_LOSS;default:return Xe()}}(B=M||(M={}))[B.OK=0]="OK",B[B.CANCELLED=1]="CANCELLED",B[B.UNKNOWN=2]="UNKNOWN",B[B.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",B[B.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",B[B.NOT_FOUND=5]="NOT_FOUND",B[B.ALREADY_EXISTS=6]="ALREADY_EXISTS",B[B.PERMISSION_DENIED=7]="PERMISSION_DENIED",B[B.UNAUTHENTICATED=16]="UNAUTHENTICATED",B[B.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",B[B.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",B[B.ABORTED=10]="ABORTED",B[B.OUT_OF_RANGE=11]="OUT_OF_RANGE",B[B.UNIMPLEMENTED=12]="UNIMPLEMENTED",B[B.INTERNAL=13]="INTERNAL",B[B.UNAVAILABLE=14]="UNAVAILABLE",B[B.DATA_LOSS=15]="DATA_LOSS";class Y{constructor(n,r){this.comparator=n,this.root=r||ge.EMPTY}insert(n,r){return new Y(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,ge.BLACK,null,null))}remove(n){return new Y(this.comparator,this.root.remove(n,this.comparator).copy(null,null,ge.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(n,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(n){let r=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(n,s.key);if(0===o)return r+s.left.size;o<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,s)=>(n(r,s),!1))}toString(){const n=[];return this.inorderTraversal((r,s)=>(n.push(`${r}:${s}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new xe(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new xe(this.root,n,this.comparator,!1)}getReverseIterator(){return new xe(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new xe(this.root,n,this.comparator,!0)}}class xe{constructor(n,r,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!n.isEmpty();)if(c=r?s(n.key,r):1,o&&(c*=-1),c<0)n=this.isReverse?n.left:n.right;else{if(0===c){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class ge{constructor(n,r,s,o,c){this.key=n,this.value=r,this.color=null!=s?s:ge.RED,this.left=null!=o?o:ge.EMPTY,this.right=null!=c?c:ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,s,o,c){return new ge(null!=n?n:this.key,null!=r?r:this.value,null!=s?s:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,s){let o=this;const c=s(n,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(n,r,s),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ge.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let s,o=this;if(r(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,r),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===r(n,o.key)){if(o.right.isEmpty())return ge.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,r))}return o.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const n=this.left.check();if(n!==this.right.check())throw Xe();return n+(this.isRed()?0:1)}}ge.EMPTY=null,ge.RED=!0,ge.BLACK=!1,ge.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(i,n,r,s,o){return this}insert(i,n,r){return new ge(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Le{constructor(n){this.comparator=n,this.data=new Y(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,s)=>(n(r),!1))}forEachInRange(n,r){const s=this.data.getIteratorFrom(n[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,n[1])>=0)return;r(o.key)}}forEachWhile(n,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!n(s.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new pt(this.data.getIterator())}getIteratorFrom(n){return new pt(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(s=>{r=r.add(s)}),r}isEqual(n){if(!(n instanceof Le)||this.size!==n.size)return!1;const r=this.data.getIterator(),s=n.data.getIterator();for(;r.hasNext();){const o=r.getNext().key,c=s.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new Le(this.comparator);return r.data=n,r}}class pt{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Lt=new Y(Ke.comparator);function nn(){return Lt}const Ps=new Y(Ke.comparator);function Ic(){return Ps}const Xh=new Y(Ke.comparator);function Dc(){return Xh}const ef=new Le(Ke.comparator);function Yt(...i){let n=ef;for(const r of i)n=n.add(r);return n}const Rb=new Le(Bt);function tf(){return Rb}class Sc{constructor(n,r,s,o,c){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(n,r){const s=new Map;return s.set(n,Ac.createSynthesizedTargetChangeForCurrentChange(n,r)),new Sc(Tt.min(),s,tf(),nn(),Yt())}}class Ac{constructor(n,r,s,o,c){this.resumeToken=n,this.current=r,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(n,r){return new Ac(Pr.EMPTY_BYTE_STRING,r,Yt(),Yt(),Yt())}}class uR{constructor(n,r,s,o){this.k=n,this.removedTargetIds=r,this.key=s,this.$=o}}class eL{constructor(n,r){this.targetId=n,this.O=r}}class tL{constructor(n,r,s=Pr.EMPTY_BYTE_STRING,o=null){this.state=n,this.targetIds=r,this.resumeToken=s,this.cause=o}}class nL{constructor(){this.F=0,this.M=iL(),this.L=Pr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=Yt(),r=Yt(),s=Yt();return this.M.forEach((o,c)=>{switch(c){case 0:n=n.add(o);break;case 2:r=r.add(o);break;case 1:s=s.add(o);break;default:Xe()}}),new Ac(this.L,this.B,n,r,s)}G(){this.U=!1,this.M=iL()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class IB{constructor(n){this.tt=n,this.et=new Map,this.nt=nn(),this.st=rL(),this.it=new Le(Bt)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const s=this.ut(r);switch(n.state){case 0:this.ht(r)&&s.j(n.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(n.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(r);break;case 3:this.ht(r)&&(s.Z(),s.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),s.j(n.resumeToken));break;default:Xe()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((s,o)=>{this.ht(o)&&r(o)})}ft(n){const r=n.targetId,s=n.O.count,o=this.dt(r);if(o){const c=o.target;if(kv(c))if(0===s){const h=new Ke(c.path);this.at(r,h,fn.newNoDocument(h,Tt.min()))}else gt(1===s);else this.wt(r)!==s&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((c,h)=>{const _=this.dt(h);if(_){if(c.current&&kv(_.target)){const w=new Ke(_.target.path);null!==this.nt.get(w)||this.gt(h,w)||this.at(h,w,fn.newNoDocument(w,n))}c.K&&(r.set(h,c.W()),c.G())}});let s=Yt();this.st.forEach((c,h)=>{let _=!0;h.forEachWhile(w=>{const T=this.dt(w);return!T||2===T.purpose||(_=!1,!1)}),_&&(s=s.add(c))});const o=new Sc(n,r,this.it,this.nt,s);return this.nt=nn(),this.st=rL(),this.it=new Le(Bt),o}ot(n,r){if(!this.ht(n))return;const s=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,s),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,s){if(!this.ht(n))return;const o=this.ut(n);this.gt(n,r)?o.H(r,1):o.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),s&&(this.nt=this.nt.insert(r,s))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new nL,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new Le(Bt),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||Me("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new nL),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function rL(){return new Y(Ke.comparator)}function iL(){return new Y(Ke.comparator)}const DB={asc:"ASCENDING",desc:"DESCENDING"},SB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class AB{constructor(n,r){this.databaseId=n,this.D=r}}function Nb(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function sL(i,n){return i.D?n.toBase64():n.toUint8Array()}function RB(i,n){return Nb(i,n.toTimestamp())}function Kr(i){return gt(!!i),Tt.fromTimestamp(function(n){const r=Jl(n);return new Un(r.seconds,r.nanos)}(i))}function lM(i,n){return(r=i,new en(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function oL(i){const n=en.fromString(i);return gt(yL(n)),n}function xb(i,n){return lM(i.databaseId,n.path)}function ru(i,n){const r=oL(n);if(r.get(1)!==i.databaseId.projectId)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new Ne(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Ke(lL(r))}function uM(i,n){return lM(i.databaseId,n)}function aL(i){const n=oL(i);return 4===n.length?en.emptyPath():lL(n)}function Pb(i){return new en(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function lL(i){return gt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function uL(i,n,r){return{name:xb(i,n),fields:r.value.mapValue.fields}}function cL(i,n,r){const s=ru(i,n.name),o=Kr(n.updateTime),c=new tn({mapValue:{fields:n.fields}}),h=fn.newFoundDocument(s,o,c);return r&&h.setHasCommittedMutations(),r?h.setHasCommittedMutations():h}function cR(i,n){let r;if(n instanceof f)r={update:uL(i,n.key,n.value)};else if(n instanceof A)r={delete:xb(i,n.key)};else if(n instanceof m)r={update:uL(i,n.key,n.data),updateMask:VB(n.fieldMask)};else{if(!(n instanceof N))return Xe();r={verify:xb(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(s=>function(o,c){const h=c.transform;if(h instanceof sm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Yh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Qh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Jh)return{fieldPath:c.field.canonicalString(),increment:h.C};throw Xe()}(0,s))),n.precondition.isNone||(r.currentDocument=void 0!==(o=n.precondition).updateTime?{updateTime:RB(i,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),r;var o}function dL(i,n){const r=n.currentDocument?void 0!==(o=n.currentDocument).updateTime?pr.updateTime(Kr(o.updateTime)):void 0!==o.exists?pr.exists(o.exists):pr.none():pr.none(),s=n.updateTransforms?n.updateTransforms.map(o=>function(c,h){let _=null;"setToServerValue"in h?(gt("REQUEST_TIME"===h.setToServerValue),_=new sm):"appendMissingElements"in h?_=new Yh(h.appendMissingElements.values||[]):"removeAllFromArray"in h?_=new Qh(h.removeAllFromArray.values||[]):"increment"in h?_=new Jh(c,h.increment):Xe();const w=xr.fromServerFormat(h.fieldPath);return new Uv(w,_)}(i,o)):[];var o;if(n.update){const o=ru(i,n.update.name),c=new tn({mapValue:{fields:n.update.fields}});if(n.updateMask){const h=new $h((n.updateMask.fieldPaths||[]).map(T=>xr.fromServerFormat(T)));return new m(o,c,h,r,s)}return new f(o,c,r,s)}if(n.delete){const o=ru(i,n.delete);return new A(o,r)}if(n.verify){const o=ru(i,n.verify);return new N(o,r)}return Xe()}function hL(i,n){return{documents:[uM(i,n.path)]}}function fL(i,n){const r={structuredQuery:{}},s=n.path;null!==n.collectionGroup?(r.parent=uM(i,s),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=uM(i,s.popLast()),r.structuredQuery.from=[{collectionId:s.lastSegment()}]);const o=function(_){if(0===_.length)return;const w=_.map(T=>function(S){if("=="===S.op){if(QA(S.value))return{unaryFilter:{field:Bv(S.field),op:"IS_NAN"}};if(YA(S.value))return{unaryFilter:{field:Bv(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(QA(S.value))return{unaryFilter:{field:Bv(S.field),op:"IS_NOT_NAN"}};if(YA(S.value))return{unaryFilter:{field:Bv(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bv(S.field),op:kB(S.op),value:S.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(n.filters);o&&(r.structuredQuery.where=o);const c=function(_){if(0!==_.length)return _.map(w=>{return{field:Bv((T=w).field),direction:MB(T.dir)};var T})}(n.orderBy);c&&(r.structuredQuery.orderBy=c);const h=(w=n.limit,i.D||Xl(w)?w:{value:w});var w;return null!==h&&(r.structuredQuery.limit=h),n.startAt&&(r.structuredQuery.startAt=mL(n.startAt)),n.endAt&&(r.structuredQuery.endAt=mL(n.endAt)),r}function pL(i){let n=aL(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let o=null;if(s>0){gt(1===s);const S=r.from[0];S.allDescendants?o=S.collectionId:n=n.child(S.collectionId)}let c=[];r.where&&(c=gL(r.where));let h=[];r.orderBy&&(h=r.orderBy.map(S=>{return new Wh(jv((R=S).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let _=null;r.limit&&(_=function(S){let R;return R="object"==typeof S?S.value:S,Xl(R)?null:R}(r.limit));let w=null;r.startAt&&(w=_L(r.startAt));let T=null;return r.endAt&&(T=_L(r.endAt)),rR(n,o,h,c,_,"F",w,T)}function gL(i){return i?void 0!==i.unaryFilter?[LB(i)]:void 0!==i.fieldFilter?[FB(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>gL(n)).reduce((n,r)=>n.concat(r)):Xe():[]}function mL(i){return{before:i.before,values:i.position}}function _L(i){return new rm(i.values||[],!!i.before)}function MB(i){return DB[i]}function kB(i){return SB[i]}function Bv(i){return{fieldPath:i.canonicalString()}}function jv(i){return xr.fromServerFormat(i.fieldPath)}function FB(i){return di.create(jv(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Xe()}}(i.fieldFilter.op),i.fieldFilter.value)}function LB(i){switch(i.unaryFilter.op){case"IS_NAN":const n=jv(i.unaryFilter.field);return di.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=jv(i.unaryFilter.field);return di.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jv(i.unaryFilter.field);return di.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jv(i.unaryFilter.field);return di.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Xe()}}function VB(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function yL(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function za(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=vL(n)),n=UB(i.get(r),n);return vL(n)}function UB(i,n){let r=n;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=c}}return r}function vL(i){return i+"\x01\x01"}function Rc(i){const n=i.length;if(gt(n>=2),2===n)return gt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),en.emptyPath();const r=n-2,s=[];let o="";for(let c=0;c<n;){const h=i.indexOf("\x01",c);switch((h<0||h>r)&&Xe(),i.charAt(h+1)){case"\x01":const _=i.substring(c,h);let w;0===o.length?w=_:(o+=_,w=o,o=""),s.push(w);break;case"\x10":o+=i.substring(c,h),o+="\0";break;case"\x11":o+=i.substring(c,h+1);break;default:Xe()}c=h+2}return new en(s)}class BB{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class go{constructor(n,r,s){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=s}}go.store="owner",go.key="owner";class nf{constructor(n,r,s){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=s}}nf.store="mutationQueues",nf.keyPath="userId";class kn{constructor(n,r,s,o,c){this.userId=n,this.batchId=r,this.localWriteTimeMs=s,this.baseMutations=o,this.mutations=c}}kn.store="mutations",kn.keyPath="batchId",kn.userMutationsIndex="userMutationsIndex",kn.userMutationsKeyPath=["userId","batchId"];class Pi{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,za(r)]}static key(n,r,s){return[n,za(r),s]}}Pi.store="documentMutations",Pi.PLACEHOLDER=new Pi;class jB{constructor(n,r){this.path=n,this.readTime=r}}class HB{constructor(n,r){this.path=n,this.version=r}}class rr{constructor(n,r,s,o,c,h){this.unknownDocument=n,this.noDocument=r,this.document=s,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=h}}rr.store="remoteDocuments",rr.readTimeIndex="readTimeIndex",rr.readTimeIndexPath="readTime",rr.collectionReadTimeIndex="collectionReadTimeIndex",rr.collectionReadTimeIndexPath=["parentPath","readTime"];class iu{constructor(n){this.byteSize=n}}iu.store="remoteDocumentGlobal",iu.key="remoteDocumentGlobalKey";class Os{constructor(n,r,s,o,c,h,_){this.targetId=n,this.canonicalId=r,this.readTime=s,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=h,this.query=_}}Os.store="targets",Os.keyPath="targetId",Os.queryTargetsIndexName="queryTargetsIndex",Os.queryTargetsKeyPath=["canonicalId","targetId"];class hi{constructor(n,r,s){this.targetId=n,this.path=r,this.sequenceNumber=s}}hi.store="targetDocuments",hi.keyPath=["targetId","path"],hi.documentTargetsIndex="documentTargetsIndex",hi.documentTargetsKeyPath=["path","targetId"];class mo{constructor(n,r,s,o){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=s,this.targetCount=o}}mo.key="targetGlobalKey",mo.store="targetGlobal";class om{constructor(n,r){this.collectionId=n,this.parent=r}}om.store="collectionParents",om.keyPath=["collectionId","parent"];class Nc{constructor(n,r,s,o){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=s,this.inForeground=o}}Nc.store="clientMetadata",Nc.keyPath="clientId";class Hv{constructor(n,r,s){this.bundleId=n,this.createTime=r,this.version=s}}Hv.store="bundles",Hv.keyPath="bundleId";class $v{constructor(n,r,s){this.name=n,this.readTime=r,this.bundledQuery=s}}$v.store="namedQueries",$v.keyPath="name";const $B=[nf.store,kn.store,Pi.store,rr.store,Os.store,go.store,mo.store,hi.store,Nc.store,iu.store,om.store,Hv.store,$v.store],EL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class Re{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new Re((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(n,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(r,c).next(s,o)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof Re?r:Re.resolve(r)}catch(r){return Re.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):Re.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):Re.reject(r)}static resolve(n){return new Re((r,s)=>{r(n)})}static reject(n){return new Re((r,s)=>{s(n)})}static waitFor(n){return new Re((r,s)=>{let o=0,c=0,h=!1;n.forEach(_=>{++o,_.next(()=>{++c,h&&c===o&&r()},w=>s(w))}),h=!0,c===o&&r()})}static or(n){let r=Re.resolve(!1);for(const s of n)r=r.next(o=>o?Re.resolve(o):s());return r}static forEach(n,r){const s=[];return n.forEach((o,c)=>{s.push(r.call(this,o,c))}),this.waitFor(s)}}class dR{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new Er,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new Ob(n,r.error)):this.Tt.resolve()},this.transaction.onerror=s=>{const o=cM(s.target.error);this.Tt.reject(new Ob(n,o))}}static open(n,r,s,o){try{return new dR(r,n.transaction(o,s))}catch(c){throw new Ob(r,c)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(Me("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new GB(r)}}class Ka{constructor(n,r,s){this.name=n,this.version=r,this.At=s,12.2===Ka.Rt((0,L.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Me("SimpleDb","Removing database:",n),lm(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,L.hl)())return!1;if(Ka.Pt())return!0;const n=(0,L.z$)(),r=Ka.Rt(n),s=0<r&&r<10,o=Ka.vt(n),c=0<o&&o<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||s||c)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(n){const r=n.match(/Android ([\d.]+)/i),s=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(n){var r=this;return(0,Ce.Z)(function*(){return r.db||(Me("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,o)=>{const c=indexedDB.open(r.name,r.version);c.onsuccess=h=>{s(h.target.result)},c.onblocked=()=>{o(new Ob(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const _=h.target.error;o("VersionError"===_.name?new Ne(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Ne(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new Ob(n,_))},c.onupgradeneeded=h=>{Me("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',h.oldVersion),r.At.Ct(h.target.result,c.transaction,h.oldVersion,r.version).next(()=>{Me("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=s=>r.Nt(s)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,s,o){var c=this;return(0,Ce.Z)(function*(){const h="readonly"===r;let _=0;for(;;){++_;try{c.db=yield c.Dt(n);const w=dR.open(c.db,n,h?"readonly":"readwrite",s),T=o(w).catch(S=>(w.abort(S),Re.reject(S))).toPromise();return T.catch(()=>{}),yield w.It,T}catch(w){const T="FirebaseError"!==w.name&&_<3;if(Me("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),c.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qB{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return lm(this.kt.delete())}}class Ob extends Ne{constructor(n,r){super(_e.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function am(i){return"IndexedDbTransactionError"===i.name}class GB{constructor(n){this.store=n}put(n,r){let s;return void 0!==r?(Me("SimpleDb","PUT",this.store.name,n,r),s=this.store.put(r,n)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",n),s=this.store.put(n)),lm(s)}add(n){return Me("SimpleDb","ADD",this.store.name,n,n),lm(this.store.add(n))}get(n){return lm(this.store.get(n)).next(r=>(void 0===r&&(r=null),Me("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return Me("SimpleDb","DELETE",this.store.name,n),lm(this.store.delete(n))}count(){return Me("SimpleDb","COUNT",this.store.name),lm(this.store.count())}Lt(n,r){const s=this.cursor(this.options(n,r)),o=[];return this.Bt(s,(c,h)=>{o.push(h)}).next(()=>o)}Ut(n,r){Me("SimpleDb","DELETE ALL",this.store.name);const s=this.options(n,r);s.qt=!1;const o=this.cursor(s);return this.Bt(o,(c,h,_)=>_.delete())}Kt(n,r){let s;r?s=n:(s={},r=n);const o=this.cursor(s);return this.Bt(o,r)}jt(n){const r=this.cursor({});return new Re((s,o)=>{r.onerror=c=>{const h=cM(c.target.error);o(h)},r.onsuccess=c=>{const h=c.target.result;h?n(h.primaryKey,h.value).next(_=>{_?h.continue():s()}):s()}})}Bt(n,r){const s=[];return new Re((o,c)=>{n.onerror=h=>{c(h.target.error)},n.onsuccess=h=>{const _=h.target.result;if(!_)return void o();const w=new qB(_),T=r(_.primaryKey,_.value,w);if(T instanceof Re){const S=T.catch(R=>(w.done(),Re.reject(R)));s.push(S)}w.isDone?o():null===w.Ft?_.continue():_.continue(w.Ft)}}).next(()=>Re.waitFor(s))}options(n,r){let s;return void 0!==n&&("string"==typeof n?s=n:r=n),{index:s,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const s=this.store.index(n.index);return n.qt?s.openKeyCursor(n.range,r):s.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function lm(i){return new Re((n,r)=>{i.onsuccess=s=>{n(s.target.result)},i.onerror=s=>{const o=cM(s.target.error);r(o)}})}let CL=!1;function cM(i){const n=Ka.Rt((0,L.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const s=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CL||(CL=!0,setTimeout(()=>{throw s},0)),s}}return i}class bL extends wL{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function Ms(i,n){const r=Be(i);return Ka.St(r.Qt,n)}class dM{constructor(n,r,s,o){this.batchId=n,this.localWriteTime=r,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(n,r){const s=r.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(n.key)&&XF(c,n,s[o])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&a(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&a(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const s=n.get(r.key),o=s;this.applyToLocalView(o),s.isValidDocument()||o.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),Yt())}isEqual(n){return this.batchId===n.batchId&&Hh(this.mutations,n.mutations,(r,s)=>u(r,s))&&Hh(this.baseMutations,n.baseMutations,(r,s)=>u(r,s))}}class hM{constructor(n,r,s,o){this.batch=n,this.commitVersion=r,this.mutationResults=s,this.docVersions=o}static from(n,r,s){gt(n.mutations.length===s.length);let o=Dc();const c=n.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new hM(n,r,s,o)}}class rf{constructor(n,r,s,o,c=Tt.min(),h=Tt.min(),_=Pr.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=_}withSequenceNumber(n){return new rf(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class TL{constructor(n){this.Wt=n}}function fM(i,n){if(n.document)return cL(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=Ke.fromSegments(n.noDocument.path),s=Gv(n.noDocument.readTime),o=fn.newNoDocument(r,s);return n.hasCommittedMutations?o.setHasCommittedMutations():o}if(n.unknownDocument){const r=Ke.fromSegments(n.unknownDocument.path),s=Gv(n.unknownDocument.version);return fn.newUnknownDocument(r,s)}return Xe()}function IL(i,n,r){const s=pM(r),o=n.key.path.popLast().toArray();if(n.isFoundDocument()){const c={name:xb(_=i.Wt,(w=n).key),fields:w.data.value.mapValue.fields,updateTime:Nb(_,w.version.toTimestamp())};return new rr(null,null,c,n.hasCommittedMutations,s,o)}var _,w;if(n.isNoDocument()){const c=n.key.path.toArray(),h=qv(n.version),_=n.hasCommittedMutations;return new rr(null,new jB(c,h),null,_,s,o)}if(n.isUnknownDocument()){const c=n.key.path.toArray(),h=qv(n.version);return new rr(new HB(c,h),null,null,!0,s,o)}return Xe()}function pM(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function DL(i){const n=new Un(i[0],i[1]);return Tt.fromTimestamp(n)}function qv(i){const n=i.toTimestamp();return new BB(n.seconds,n.nanoseconds)}function Gv(i){const n=new Un(i.seconds,i.nanoseconds);return Tt.fromTimestamp(n)}function Wv(i,n){const r=(n.baseMutations||[]).map(c=>dL(i.Wt,c));for(let c=0;c<n.mutations.length-1;++c){const h=n.mutations[c];c+1<n.mutations.length&&void 0!==n.mutations[c+1].transform&&(h.updateTransforms=n.mutations[c+1].transform.fieldTransforms,n.mutations.splice(c+1,1),++c)}const s=n.mutations.map(c=>dL(i.Wt,c)),o=Un.fromMillis(n.localWriteTimeMs);return new dM(n.batchId,o,r,s)}function Mb(i){const n=Gv(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?Gv(i.lastLimboFreeSnapshotVersion):Tt.min();let s;var o;return void 0!==i.query.documents?(gt(1===(o=i.query).documents.length),s=xs(Zh(aL(o.documents[0])))):s=xs(pL(i.query)),new rf(s,i.targetId,0,i.lastListenSequenceNumber,n,r,Pr.fromBase64String(i.resumeToken))}function SL(i,n){const r=qv(n.snapshotVersion),s=qv(n.lastLimboFreeSnapshotVersion);let o;o=kv(n.target)?hL(i.Wt,n.target):fL(i.Wt,n.target);const c=n.resumeToken.toBase64();return new Os(n.targetId,Cc(n.target),r,c,n.sequenceNumber,s,o)}function gM(i){const n=pL({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?iR(n,n.limit,"L"):n}class WB{getBundleMetadata(n,r){return AL(n).get(r).next(s=>{if(s)return{id:(o=s).bundleId,createTime:Gv(o.createTime),version:o.version};var o})}saveBundleMetadata(n,r){return AL(n).put({bundleId:(s=r).id,createTime:qv(Kr(s.createTime)),version:s.version});var s}getNamedQuery(n,r){return RL(n).get(r).next(s=>{if(s)return{name:(o=s).name,query:gM(o.bundledQuery),readTime:Gv(o.readTime)};var o})}saveNamedQuery(n,r){return RL(n).put({name:(s=r).name,readTime:qv(Kr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function AL(i){return Ms(i,Hv.store)}function RL(i){return Ms(i,$v.store)}class ZB{constructor(){this.Gt=new mM}addToCollectionParentIndex(n,r){return this.Gt.add(r),Re.resolve()}getCollectionParents(n,r){return Re.resolve(this.Gt.getEntries(r))}}class mM{constructor(){this.index={}}add(n){const r=n.lastSegment(),s=n.popLast(),o=this.index[r]||new Le(en.comparator),c=!o.has(s);return this.index[r]=o.add(s),c}has(n){const r=n.lastSegment(),s=n.popLast(),o=this.index[r];return o&&o.has(s)}getEntries(n){return(this.index[n]||new Le(en.comparator)).toArray()}}class zB{constructor(){this.zt=new mM}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const s=r.lastSegment(),o=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const c={collectionId:s,parent:za(o)};return NL(n).put(c)}return Re.resolve()}getCollectionParents(n,r){const s=[],o=IDBKeyRange.bound([r,""],[zA(r),""],!1,!0);return NL(n).Lt(o).next(c=>{for(const h of c){if(h.collectionId!==r)break;s.push(Rc(h.parent))}return s})}}function NL(i){return Ms(i,om.store)}const xL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ks{constructor(n,r,s){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(n){return new ks(n,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PL(i,n,r){const s=i.store(kn.store),o=i.store(Pi.store),c=[],h=IDBKeyRange.only(r.batchId);let _=0;const w=s.Kt({range:h},(S,R,P)=>(_++,P.delete()));c.push(w.next(()=>{gt(1===_)}));const T=[];for(const S of r.mutations){const R=Pi.key(n,S.key.path,r.batchId);c.push(o.delete(R)),T.push(S.key)}return Re.waitFor(c).next(()=>T)}function hR(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw Xe();n=i.noDocument}return JSON.stringify(n).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);class _M{constructor(n,r,s,o){this.userId=n,this.N=r,this.Ht=s,this.referenceDelegate=o,this.Jt={}}static Yt(n,r,s,o){gt(""!==n.uid);const c=n.isAuthenticated()?n.uid:"";return new _M(c,r,s,o)}checkEmpty(n){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sf(n).Kt({index:kn.userMutationsIndex,range:s},(o,c,h)=>{r=!1,h.done()}).next(()=>r)}addMutationBatch(n,r,s,o){const c=Zv(n),h=sf(n);return h.add({}).next(_=>{gt("number"==typeof _);const w=new dM(_,r,s,o),T=function(P,k,U){const J=U.baseMutations.map(Oe=>cR(P.Wt,Oe)),me=U.mutations.map(Oe=>cR(P.Wt,Oe));return new kn(k,U.batchId,U.localWriteTime.toMillis(),J,me)}(this.N,this.userId,w),S=[];let R=new Le((P,k)=>Bt(P.canonicalString(),k.canonicalString()));for(const P of o){const k=Pi.key(this.userId,P.key.path,_);R=R.add(P.key.path.popLast()),S.push(h.put(T)),S.push(c.put(k,Pi.PLACEHOLDER))}return R.forEach(P=>{S.push(this.Ht.addToCollectionParentIndex(n,P))}),n.addOnCommittedListener(()=>{this.Jt[_]=w.keys()}),Re.waitFor(S).next(()=>w)})}lookupMutationBatch(n,r){return sf(n).get(r).next(s=>s?(gt(s.userId===this.userId),Wv(this.N,s)):null)}Xt(n,r){return this.Jt[r]?Re.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(s=>{if(s){const o=s.keys();return this.Jt[r]=o,o}return null})}getNextMutationBatchAfterBatchId(n,r){const s=r+1,o=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return sf(n).Kt({index:kn.userMutationsIndex,range:o},(h,_,w)=>{_.userId===this.userId&&(gt(_.batchId>=s),c=Wv(this.N,_)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return sf(n).Kt({index:kn.userMutationsIndex,range:r,reverse:!0},(o,c,h)=>{s=c.batchId,h.done()}).next(()=>s)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sf(n).Lt(kn.userMutationsIndex,r).next(s=>s.map(o=>Wv(this.N,o)))}getAllMutationBatchesAffectingDocumentKey(n,r){const s=Pi.prefixForPath(this.userId,r.path),o=IDBKeyRange.lowerBound(s),c=[];return Zv(n).Kt({range:o},(h,_,w)=>{const[T,S,R]=h,P=Rc(S);if(T===this.userId&&r.path.isEqual(P))return sf(n).get(R).next(k=>{if(!k)throw Xe();gt(k.userId===this.userId),c.push(Wv(this.N,k))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new Le(Bt);const o=[];return r.forEach(c=>{const h=Pi.prefixForPath(this.userId,c.path),_=IDBKeyRange.lowerBound(h),w=Zv(n).Kt({range:_},(T,S,R)=>{const[P,k,U]=T,J=Rc(k);P===this.userId&&c.path.isEqual(J)?s=s.add(U):R.done()});o.push(w)}),Re.waitFor(o).next(()=>this.Zt(n,s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,o=s.length+1,c=Pi.prefixForPath(this.userId,s),h=IDBKeyRange.lowerBound(c);let _=new Le(Bt);return Zv(n).Kt({range:h},(w,T,S)=>{const[R,P,k]=w,U=Rc(P);R===this.userId&&s.isPrefixOf(U)?U.length===o&&(_=_.add(k)):S.done()}).next(()=>this.Zt(n,_))}Zt(n,r){const s=[],o=[];return r.forEach(c=>{o.push(sf(n).get(c).next(h=>{if(null===h)throw Xe();gt(h.userId===this.userId),s.push(Wv(this.N,h))}))}),Re.waitFor(o).next(()=>s)}removeMutationBatch(n,r){return PL(n.Qt,this.userId,r).next(s=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),Re.forEach(s,o=>this.referenceDelegate.markPotentiallyOrphaned(n,o))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return Re.resolve();const s=IDBKeyRange.lowerBound(Pi.prefixForUser(this.userId)),o=[];return Zv(n).Kt({range:s},(c,h,_)=>{if(c[0]===this.userId){const w=Rc(c[1]);o.push(w)}else _.done()}).next(()=>{gt(0===o.length)})})}containsKey(n,r){return OL(n,this.userId,r)}ee(n){return ML(n).get(this.userId).next(r=>r||new nf(this.userId,-1,""))}}function OL(i,n,r){const s=Pi.prefixForPath(n,r.path),o=s[1],c=IDBKeyRange.lowerBound(s);let h=!1;return Zv(i).Kt({range:c,qt:!0},(_,w,T)=>{const[S,R,P]=_;S===n&&R===o&&(h=!0),T.done()}).next(()=>h)}function sf(i){return Ms(i,kn.store)}function Zv(i){return Ms(i,Pi.store)}function ML(i){return Ms(i,nf.store)}class um{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new um(0)}static ie(){return new um(-1)}}class KB{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const s=new um(r.highestTargetId);return r.highestTargetId=s.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>Tt.fromTimestamp(new Un(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,s){return this.re(n).next(o=>(o.highestListenSequenceNumber=r,s&&(o.lastRemoteSnapshotVersion=s.toTimestamp()),r>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=r),this.oe(n,o)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(s=>(s.targetCount+=1,this.ce(r,s),this.oe(n,s))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>zv(n).delete(r.targetId)).next(()=>this.re(n)).next(s=>(gt(s.targetCount>0),s.targetCount-=1,this.oe(n,s)))}removeTargets(n,r,s){let o=0;const c=[];return zv(n).Kt((h,_)=>{const w=Mb(_);w.sequenceNumber<=r&&null===s.get(w.targetId)&&(o++,c.push(this.removeTargetData(n,w)))}).next(()=>Re.waitFor(c)).next(()=>o)}forEachTarget(n,r){return zv(n).Kt((s,o)=>{const c=Mb(o);r(c)})}re(n){return kL(n).get(mo.key).next(r=>(gt(null!==r),r))}oe(n,r){return kL(n).put(mo.key,r)}ae(n,r){return zv(n).put(SL(this.N,r))}ce(n,r){let s=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,s=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,s=!0),s}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const s=Cc(r),o=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return zv(n).Kt({range:o,index:Os.queryTargetsIndexName},(h,_,w)=>{const T=Mb(_);bc(r,T.target)&&(c=T,w.done())}).next(()=>c)}addMatchingKeys(n,r,s){const o=[],c=of(n);return r.forEach(h=>{const _=za(h.path);o.push(c.put(new hi(s,_))),o.push(this.referenceDelegate.addReference(n,s,h))}),Re.waitFor(o)}removeMatchingKeys(n,r,s){const o=of(n);return Re.forEach(r,c=>{const h=za(c.path);return Re.waitFor([o.delete([s,h]),this.referenceDelegate.removeReference(n,s,c)])})}removeMatchingKeysForTargetId(n,r){const s=of(n),o=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(o)}getMatchingKeysForTargetId(n,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),o=of(n);let c=Yt();return o.Kt({range:s,qt:!0},(h,_,w)=>{const T=Rc(h[1]),S=new Ke(T);c=c.add(S)}).next(()=>c)}containsKey(n,r){const s=za(r.path),o=IDBKeyRange.bound([s],[zA(s)],!1,!0);let c=0;return of(n).Kt({index:hi.documentTargetsIndex,qt:!0,range:o},([h,_],w,T)=>{0!==h&&(c++,T.done())}).next(()=>c>0)}Et(n,r){return zv(n).get(r).next(s=>s?Mb(s):null)}}function zv(i){return Ms(i,Os.store)}function kL(i){return Ms(i,mo.store)}function of(i){return Ms(i,hi.store)}function cm(i){return yM.apply(this,arguments)}function yM(){return(yM=(0,Ce.Z)(function*(i){if(i.code!==_e.FAILED_PRECONDITION||i.message!==EL)throw i;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function FL([i,n],[r,s]){const o=Bt(i,r);return 0===o?Bt(n,s):o}class YB{constructor(n){this.ue=n,this.buffer=new Le(FL),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();FL(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class QB{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const s=this.de?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,Ce.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(o){am(o)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield cm(o)}yield r._e(n)}))}}class JB{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(s=>Math.floor(r/100*s))}nthSequenceNumber(n,r){if(0===r)return Re.resolve(Ji.T);const s=new YB(r);return this.me.forEachTarget(n,o=>s.fe(o.sequenceNumber)).next(()=>this.me.ye(n,o=>s.fe(o))).next(()=>s.maxValue)}removeTargets(n,r,s){return this.me.removeTargets(n,r,s)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(xL)):this.getCacheSize(n).next(s=>s<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xL):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let s,o,c,h,_,w,T;const S=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,h=Date.now(),this.nthSequenceNumber(n,o))).next(R=>(s=R,_=Date.now(),this.removeTargets(n,s,r))).next(R=>(c=R,w=Date.now(),this.removeOrphanedDocuments(n,s))).next(R=>(T=Date.now(),hb()<=Zt.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-S}ms\n\tDetermined least recently used ${o} in `+(_-h)+`ms\n\tRemoved ${c} targets in `+(w-_)+`ms\n\tRemoved ${R} documents in `+(T-w)+`ms\nTotal Duration: ${T-S}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:R})))}}class XB{constructor(n,r){this.db=n,this.garbageCollector=new JB(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(s=>r.next(o=>s+o))}Ee(n){let r=0;return this.ye(n,s=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(s,o)=>r(o))}addReference(n,r,s){return fR(n,s)}removeReference(n,r,s){return fR(n,s)}removeTargets(n,r,s){return this.db.getTargetCache().removeTargets(n,r,s)}markPotentiallyOrphaned(n,r){return fR(n,r)}Ie(n,r){return function(s,o){let c=!1;return ML(s).jt(h=>OL(s,h,o).next(_=>(_&&(c=!0),Re.resolve(!_)))).next(()=>c)}(n,r)}removeOrphanedDocuments(n,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Te(n,(h,_)=>{if(_<=r){const w=this.Ie(n,h).next(T=>{if(!T)return c++,s.getEntry(n,h).next(()=>(s.removeEntry(h),of(n).delete([0,za(h.path)])))});o.push(w)}}).next(()=>Re.waitFor(o)).next(()=>s.apply(n)).next(()=>c)}removeTarget(n,r){const s=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,s)}updateLimboDocument(n,r){return fR(n,r)}Te(n,r){const s=of(n);let o,c=Ji.T;return s.Kt({index:hi.documentTargetsIndex},([h,_],{path:w,sequenceNumber:T})=>{0===h?(c!==Ji.T&&r(new Ke(Rc(o)),c),c=T,o=w):c=Ji.T}).next(()=>{c!==Ji.T&&r(new Ke(Rc(o)),c)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function fR(i,n){return of(i).put((s=i.currentSequenceNumber,new hi(0,za(n.path),s)));var s}class Kv{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0!==s)for(const[o,c]of s)if(this.equalsFn(o,n))return c}has(n){return void 0!==this.get(n)}set(n,r){const s=this.mapKeyFn(n),o=this.inner[s];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],n))return void(o[c]=[n,r]);o.push([n,r])}else this.inner[s]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),s=this.inner[r];if(void 0===s)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],n))return 1===s.length?delete this.inner[r]:s.splice(o,1),!0;return!1}forEach(n){wc(this.inner,(r,s)=>{for(const[o,c]of s)n(o,c)})}isEmpty(){return YO(this.inner)}}class LL{constructor(){this.changes=new Kv(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:Tt.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:fn.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?Re.resolve(s.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class ej{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,s){return af(n).put(pR(r),s)}removeEntry(n,r){const s=af(n),o=pR(r);return s.delete(o)}updateMetadata(n,r){return this.getMetadata(n).next(s=>(s.byteSize+=r,this.Ae(n,s)))}getEntry(n,r){return af(n).get(pR(r)).next(s=>this.Re(r,s))}be(n,r){return af(n).get(pR(r)).next(s=>({document:this.Re(r,s),size:hR(s)}))}getEntries(n,r){let s=nn();return this.Pe(n,r,(o,c)=>{const h=this.Re(o,c);s=s.insert(o,h)}).next(()=>s)}ve(n,r){let s=nn(),o=new Y(Ke.comparator);return this.Pe(n,r,(c,h)=>{const _=this.Re(c,h);s=s.insert(c,_),o=o.insert(c,hR(h))}).next(()=>({documents:s,Ve:o}))}Pe(n,r,s){if(r.isEmpty())return Re.resolve();const o=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),c=r.getIterator();let h=c.getNext();return af(n).Kt({range:o},(_,w,T)=>{const S=Ke.fromSegments(_);for(;h&&Ke.comparator(h,S)<0;)s(h,null),h=c.getNext();h&&h.isEqual(S)&&(s(h,w),h=c.hasNext()?c.getNext():null),h?T.Mt(h.path.toArray()):T.done()}).next(()=>{for(;h;)s(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(n,r,s){let o=nn();const c=r.path.length+1,h={};if(s.isEqual(Tt.min())){const _=r.path.toArray();h.range=IDBKeyRange.lowerBound(_)}else{const _=r.path.toArray(),w=pM(s);h.range=IDBKeyRange.lowerBound([_,w],!0),h.index=rr.collectionReadTimeIndex}return af(n).Kt(h,(_,w,T)=>{if(_.length!==c)return;const S=fM(this.N,w);r.path.isPrefixOf(S.key.path)?Kh(r,S)&&(o=o.insert(S.key,S)):T.done()}).next(()=>o)}newChangeBuffer(n){return new tj(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return VL(n).get(iu.key).next(r=>(gt(!!r),r))}Ae(n,r){return VL(n).put(iu.key,r)}Re(n,r){if(r){const s=fM(this.N,r);if(!s.isNoDocument()||!s.version.isEqual(Tt.min()))return s}return fn.newInvalidDocument(n)}}class tj extends LL{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new Kv(s=>s.toString(),(s,o)=>s.isEqual(o))}applyChanges(n){const r=[];let s=0,o=new Le((c,h)=>Bt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const _=this.De.get(c);if(h.document.isValidDocument()){const w=IL(this.Se.N,h.document,this.getReadTime(c));o=o.add(c.path.popLast()),s+=hR(w)-_,r.push(this.Se.addEntry(n,c,w))}else if(s-=_,this.trackRemovals){const w=IL(this.Se.N,fn.newNoDocument(c,Tt.min()),this.getReadTime(c));r.push(this.Se.addEntry(n,c,w))}else r.push(this.Se.removeEntry(n,c))}),o.forEach(c=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,c))}),r.push(this.Se.updateMetadata(n,s)),Re.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(s=>(this.De.set(r,s.size),s.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:s,Ve:o})=>(o.forEach((c,h)=>{this.De.set(c,h)}),s))}}function VL(i){return Ms(i,iu.store)}function af(i){return Ms(i,rr.store)}function pR(i){return i.path.toArray()}class nj{constructor(n){this.N=n}Ct(n,r,s,o){gt(s<o&&s>=0&&o<=11);const c=new dR("createOrUpgrade",r);var _;s<1&&o>=1&&(n.createObjectStore(go.store),(_=n).createObjectStore(nf.store,{keyPath:nf.keyPath}),_.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(Pi.store),UL(n),function(_){_.createObjectStore(rr.store)}(n));let h=Re.resolve();return s<3&&o>=3&&(0!==s&&(function(_){_.deleteObjectStore(hi.store),_.deleteObjectStore(Os.store),_.deleteObjectStore(mo.store)}(n),UL(n)),h=h.next(()=>function(_){const w=_.store(mo.store),T=new mo(0,0,Tt.min().toTimestamp(),0);return w.put(mo.key,T)}(c))),s<4&&o>=4&&(0!==s&&(h=h.next(()=>function(_,w){return w.store(kn.store).Lt().next(T=>{_.deleteObjectStore(kn.store),_.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.userMutationsIndex,kn.userMutationsKeyPath,{unique:!0});const S=w.store(kn.store),R=T.map(P=>S.put(P));return Re.waitFor(R)})}(n,c))),h=h.next(()=>{!function(_){_.createObjectStore(Nc.store,{keyPath:Nc.keyPath})}(n)})),s<5&&o>=5&&(h=h.next(()=>this.Ce(c))),s<6&&o>=6&&(h=h.next(()=>(function(_){_.createObjectStore(iu.store)}(n),this.Ne(c)))),s<7&&o>=7&&(h=h.next(()=>this.xe(c))),s<8&&o>=8&&(h=h.next(()=>this.ke(n,c))),s<9&&o>=9&&(h=h.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(n),function(_){const w=_.objectStore(rr.store);w.createIndex(rr.readTimeIndex,rr.readTimeIndexPath,{unique:!1}),w.createIndex(rr.collectionReadTimeIndex,rr.collectionReadTimeIndexPath,{unique:!1})}(r)})),s<10&&o>=10&&(h=h.next(()=>this.$e(c))),s<11&&o>=11&&(h=h.next(()=>{(function(_){_.createObjectStore(Hv.store,{keyPath:Hv.keyPath})})(n),function(_){_.createObjectStore($v.store,{keyPath:$v.keyPath})}(n)})),h}Ne(n){let r=0;return n.store(rr.store).Kt((s,o)=>{r+=hR(o)}).next(()=>{const s=new iu(r);return n.store(iu.store).put(iu.key,s)})}Ce(n){const r=n.store(nf.store),s=n.store(kn.store);return r.Lt().next(o=>Re.forEach(o,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.Lt(kn.userMutationsIndex,h).next(_=>Re.forEach(_,w=>{gt(w.userId===c.userId);const T=Wv(this.N,w);return PL(n,c.userId,T).next(()=>{})}))}))}xe(n){const r=n.store(hi.store),s=n.store(rr.store);return n.store(mo.store).get(mo.key).next(o=>{const c=[];return s.Kt((h,_)=>{const w=new en(h),T=[0,za(w)];c.push(r.get(T).next(S=>S?Re.resolve():r.put(new hi(0,za(w),o.highestListenSequenceNumber))))}).next(()=>Re.waitFor(c))})}ke(n,r){n.createObjectStore(om.store,{keyPath:om.keyPath});const s=r.store(om.store),o=new mM,c=h=>{if(o.add(h)){const _=h.lastSegment(),w=h.popLast();return s.put({collectionId:_,parent:za(w)})}};return r.store(rr.store).Kt({qt:!0},(h,_)=>{const w=new en(h);return c(w.popLast())}).next(()=>r.store(Pi.store).Kt({qt:!0},([h,_,w],T)=>{const S=Rc(_);return c(S.popLast())}))}$e(n){const r=n.store(Os.store);return r.Kt((s,o)=>{const c=Mb(o),h=SL(this.N,c);return r.put(h)})}}function UL(i){i.createObjectStore(hi.store,{keyPath:hi.keyPath}).createIndex(hi.documentTargetsIndex,hi.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Os.store,{keyPath:Os.keyPath}).createIndex(Os.queryTargetsIndexName,Os.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(mo.store)}const vM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class EM{constructor(n,r,s,o,c,h,_,w,T,S){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=s,this.Oe=c,this.window=h,this.document=_,this.Fe=T,this.Me=S,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=R=>Promise.resolve(),!EM.bt())throw new Ne(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XB(this,o),this.We=r+"main",this.N=new TL(w),this.Ge=new Ka(this.We,11,new nj(this.N)),this.ze=new KB(this.referenceDelegate,this.N),this.Ht=new zB,this.He=new ej(this.N,this.Ht),this.Je=new WB,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===S&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,vM);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new Ji(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var s=(0,Ce.Z)(function*(o){if(r.started)return n(o)});return function(o){return s.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,Ce.Z)(function*(s){null===s.newVersion&&(yield n())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,Ce.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>gR(n).put(new Nc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(am(n))return Me("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return kb(n).get(go.key).next(r=>Re.resolve(this.cn(r)))}un(n){return gR(n).delete(this.clientId)}hn(){var n=this;return(0,Ce.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const o=Ms(s,Nc.store);return o.Lt().next(c=>{const h=n.fn(c,18e5),_=c.filter(w=>-1===h.indexOf(w));return Re.forEach(_,w=>o.delete(w.clientId)).next(()=>_)})}).catch(()=>[]);if(n.Ye)for(const s of r)n.Ye.removeItem(n.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?Re.resolve(!0):kb(n).get(go.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new Ne(_e.FAILED_PRECONDITION,vM);return!1}}return!(!this.networkEnabled||!this.inForeground)||gR(n).Lt().next(s=>void 0===this.fn(s,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,_=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&_)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Me("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,Ce.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[go.store,Nc.store],r=>{const s=new bL(r,Ji.T);return n.on(s).next(()=>n.un(s))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(s=>this.ln(s.updateTimeMs,r)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>gR(n).Lt().next(r=>this.fn(r,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(n){return _M.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,s){let c;return Me("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",$B,h=>(c=new bL(h,this.Le?this.Le.next():Ji.T),"readwrite-primary"===r?this.sn(c).next(_=>!!_||this.rn(c)).next(_=>{if(!_)throw tr(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ne(_e.FAILED_PRECONDITION,EL);return s(c)}).next(_=>this.an(c).next(()=>_)):this.En(c).next(()=>s(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}En(n){return kb(n).get(go.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ne(_e.FAILED_PRECONDITION,vM)})}an(n){const r=new go(this.clientId,this.allowTabSynchronization,Date.now());return kb(n).put(go.key,r)}static bt(){return Ka.bt()}on(n){const r=kb(n);return r.get(go.key).next(s=>this.cn(s)?(Me("IndexedDbPersistence","Releasing primary lease."),r.delete(go.key)):Re.resolve())}ln(n,r){const s=Date.now();return!(n<s-r||n>s&&(tr(`Detected an update time that is in the future: ${n} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,L.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const s=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Me("IndexedDbPersistence",`Client '${n}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return tr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){tr("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function kb(i){return Ms(i,go.store)}function gR(i){return Ms(i,Nc.store)}function wM(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class rj{constructor(n,r){this.progress=n,this.Tn=r}}class BL{constructor(n,r,s){this.He=n,this.In=r,this.Ht=s}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(s=>this.Rn(n,r,s))}Rn(n,r,s){return this.He.getEntry(n,r).next(o=>{for(const c of s)c.applyToLocalView(o);return o})}bn(n,r){n.forEach((s,o)=>{for(const c of r)c.applyToLocalView(o)})}Pn(n,r){return this.He.getEntries(n,r).next(s=>this.vn(n,s).next(()=>s))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(s=>this.bn(r,s))}getDocumentsMatchingQuery(n,r,s){return Ke.isDocumentKey((o=r).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(n,r.path):zh(r)?this.Sn(n,r,s):this.Dn(n,r,s);var o}Vn(n,r){return this.An(n,new Ke(r)).next(s=>{let o=Ic();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}Sn(n,r,s){const o=r.collectionGroup;let c=Ic();return this.Ht.getCollectionParents(n,o).next(h=>Re.forEach(h,_=>{const w=(T=r,S=_.child(o),new ia(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,S;return this.Dn(n,w,s).next(T=>{T.forEach((S,R)=>{c=c.insert(S,R)})})}).next(()=>c))}Dn(n,r,s){let o,c;return this.He.getDocumentsMatchingQuery(n,r,s).next(h=>(o=h,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(h=>(c=h,this.Cn(n,c,o).next(_=>{o=_;for(const w of c)for(const T of w.mutations){const S=T.key;let R=o.get(S);null==R&&(R=fn.newInvalidDocument(S),o=o.insert(S,R)),a(T,R,w.localWriteTime),R.isFoundDocument()||(o=o.remove(S))}}))).next(()=>(o.forEach((h,_)=>{Kh(r,_)||(o=o.remove(h))}),o))}Cn(n,r,s){let o=Yt();for(const h of r)for(const _ of h.mutations)_ instanceof m&&null===s.get(_.key)&&(o=o.add(_.key));let c=s;return this.He.getEntries(n,o).next(h=>(h.forEach((_,w)=>{w.isFoundDocument()&&(c=c.insert(_,w))}),c))}}class CM{constructor(n,r,s,o){this.targetId=n,this.fromCache=r,this.Nn=s,this.xn=o}static kn(n,r){let s=Yt(),o=Yt();for(const c of r.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new CM(n,r.fromCache,s,o)}}class jL{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,s,o){return 0===(c=r).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||s.isEqual(Tt.min())?this.Fn(n,r):this.On.Pn(n,o).next(c=>{const h=this.Mn(r,c);return(Lv(r)||Ns(r))&&this.Ln(r.limitType,h,o,s)?this.Fn(n,r):(hb()<=Zt.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vv(r)),this.On.getDocumentsMatchingQuery(n,r,s).next(_=>(h.forEach(w=>{_=_.insert(w.key,w)}),_)))});var c}Mn(n,r){let s=new Le(bb(n));return r.forEach((o,c)=>{Kh(n,c)&&(s=s.add(c))}),s}Ln(n,r,s,o){if(s.size!==r.size)return!0;const c="F"===n?r.last():r.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Fn(n,r){return hb()<=Zt.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Vv(r)),this.On.getDocumentsMatchingQuery(n,r,Tt.min())}}class ij{constructor(n,r,s,o){this.persistence=n,this.Bn=r,this.N=o,this.Un=new Y(Bt),this.qn=new Kv(c=>Cc(c),bc),this.Kn=Tt.min(),this.In=n.getMutationQueue(s),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new BL(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function HL(i,n,r,s){return new ij(i,n,r,s)}function $L(i,n){return bM.apply(this,arguments)}function bM(){return(bM=(0,Ce.Z)(function*(i,n){const r=Be(i);let s=r.In,o=r.Qn;const c=yield r.persistence.runTransaction("Handle user change","readonly",h=>{let _;return r.In.getAllMutationBatches(h).next(w=>(_=w,s=r.persistence.getMutationQueue(n),o=new BL(r.jn,s,r.persistence.getIndexManager()),s.getAllMutationBatches(h))).next(w=>{const T=[],S=[];let R=Yt();for(const P of _){T.push(P.batchId);for(const k of P.mutations)R=R.add(k.key)}for(const P of w){S.push(P.batchId);for(const k of P.mutations)R=R.add(k.key)}return o.Pn(h,R).next(P=>({Wn:P,removedBatchIds:T,addedBatchIds:S}))})});return r.In=s,r.Qn=o,r.Bn.$n(r.Qn),c})).apply(this,arguments)}function sj(i,n){const r=Be(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=n.batch.keys(),c=r.jn.newChangeBuffer({trackRemovals:!0});return function(h,_,w,T){const S=w.batch,R=S.keys();let P=Re.resolve();return R.forEach(k=>{P=P.next(()=>T.getEntry(_,k)).next(U=>{const J=w.docVersions.get(k);gt(null!==J),U.version.compareTo(J)<0&&(S.applyToRemoteDocument(U,w),U.isValidDocument()&&T.addEntry(U,w.commitVersion))})}),P.next(()=>h.In.removeMutationBatch(_,S))}(r,s,n,c).next(()=>c.apply(s)).next(()=>r.In.performConsistencyCheck(s)).next(()=>r.Qn.Pn(s,o))})}function qL(i){const n=Be(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function oj(i,n){const r=Be(i),s=n.snapshotVersion;let o=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=r.jn.newChangeBuffer({trackRemovals:!0});o=r.Un;const _=[];n.targetChanges.forEach((T,S)=>{const R=o.get(S);if(!R)return;_.push(r.ze.removeMatchingKeys(c,T.removedDocuments,S).next(()=>r.ze.addMatchingKeys(c,T.addedDocuments,S)));const P=T.resumeToken;if(P.approximateByteSize()>0){const k=R.withResumeToken(P,s).withSequenceNumber(c.currentSequenceNumber);o=o.insert(S,k),U=R,me=T,gt((J=k).resumeToken.approximateByteSize()>0),(0===U.resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0)&&_.push(r.ze.updateTargetData(c,k))}var U,J,me});let w=nn();if(n.documentUpdates.forEach((T,S)=>{n.resolvedLimboDocuments.has(T)&&_.push(r.persistence.referenceDelegate.updateLimboDocument(c,T))}),_.push(GL(c,h,n.documentUpdates,s,void 0).next(T=>{w=T})),!s.isEqual(Tt.min())){const T=r.ze.getLastRemoteSnapshotVersion(c).next(S=>r.ze.setTargetsMetadata(c,c.currentSequenceNumber,s));_.push(T)}return Re.waitFor(_).next(()=>h.apply(c)).next(()=>r.Qn.vn(c,w)).next(()=>w)}).then(c=>(r.Un=o,c))}function GL(i,n,r,s,o){let c=Yt();return r.forEach(h=>c=c.add(h)),n.getEntries(i,c).next(h=>{let _=nn();return r.forEach((w,T)=>{const S=h.get(w),R=(null==o?void 0:o.get(w))||s;T.isNoDocument()&&T.version.isEqual(Tt.min())?(n.removeEntry(w,R),_=_.insert(w,T)):!S.isValidDocument()||T.version.compareTo(S.version)>0||0===T.version.compareTo(S.version)&&S.hasPendingWrites?(n.addEntry(T,R),_=_.insert(w,T)):Me("LocalStore","Ignoring outdated watch update for ",w,". Current version:",S.version," Watch version:",T.version)}),_})}function aj(i,n){const r=Be(i);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(s,n)))}function Yv(i,n){const r=Be(i);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return r.ze.getTargetData(s,n).next(c=>c?(o=c,Re.resolve(o)):r.ze.allocateTargetId(s).next(h=>(o=new rf(n,h,0,s.currentSequenceNumber),r.ze.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=r.Un.get(s.targetId);return(null===o||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(r.Un=r.Un.insert(s.targetId,s),r.qn.set(n,s.targetId)),s})}function Qv(i,n,r){return TM.apply(this,arguments)}function TM(){return(TM=(0,Ce.Z)(function*(i,n,r){const s=Be(i),o=s.Un.get(n),c=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",c,h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!am(h))throw h;Me("LocalStore",`Failed to update sequence numbers for target ${n}: ${h}`)}s.Un=s.Un.remove(n),s.qn.delete(o.target)})).apply(this,arguments)}function mR(i,n,r){const s=Be(i);let o=Tt.min(),c=Yt();return s.persistence.runTransaction("Execute query","readonly",h=>function(_,w,T){const S=Be(_),R=S.qn.get(T);return void 0!==R?Re.resolve(S.Un.get(R)):S.ze.getTargetData(w,T)}(s,h,xs(n)).next(_=>{if(_)return o=_.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(h,_.targetId).next(w=>{c=w})}).next(()=>s.Bn.getDocumentsMatchingQuery(h,n,r?o:Tt.min(),r?c:Yt())).next(_=>({documents:_,Gn:c})))}function WL(i,n){const r=Be(i),s=Be(r.ze),o=r.Un.get(n);return o?Promise.resolve(o.target):r.persistence.runTransaction("Get target data","readonly",c=>s.Et(c,n).next(h=>h?h.target:null))}function ZL(i){const n=Be(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(s,o,c){const h=Be(s);let _=nn(),w=pM(c);const T=af(o),S=IDBKeyRange.lowerBound(w,!0);return T.Kt({index:rr.readTimeIndex,range:S},(R,P)=>{const k=fM(h.N,P);_=_.insert(k.key,k),w=P.readTime}).next(()=>({Tn:_,readTime:DL(w)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:s})=>(n.Kn=s,r))}function IM(){return(IM=(0,Ce.Z)(function*(i){const n=Be(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(s){const o=af(s);let c=Tt.min();return o.Kt({index:rr.readTimeIndex,reverse:!0},(h,_,w)=>{_.readTime&&(c=DL(_.readTime)),w.done()}).next(()=>c)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function DM(){return(DM=(0,Ce.Z)(function*(i,n,r,s){const o=Be(i);let c=Yt(),h=nn(),_=Dc();for(const S of r){const R=n.zn(S.metadata.name);S.document&&(c=c.add(R)),h=h.insert(R,n.Hn(S)),_=_.insert(R,n.Jn(S.metadata.readTime))}const w=o.jn.newChangeBuffer({trackRemovals:!0}),T=yield Yv(o,(S=s,xs(Zh(en.fromString(`__bundle__/docs/${S}`)))));var S;return o.persistence.runTransaction("Apply bundle documents","readwrite",S=>GL(S,w,h,Tt.min(),_).next(R=>(w.apply(S),R)).next(R=>o.ze.removeMatchingKeysForTargetId(S,T.targetId).next(()=>o.ze.addMatchingKeys(S,c,T.targetId)).next(()=>o.Qn.vn(S,R)).next(()=>R)))})).apply(this,arguments)}function cj(i,n){return SM.apply(this,arguments)}function SM(){return(SM=(0,Ce.Z)(function*(i,n,r=Yt()){const s=yield Yv(i,xs(gM(n.bundledQuery))),o=Be(i);return o.persistence.runTransaction("Save named query","readwrite",c=>{const h=Kr(n.readTime);if(s.snapshotVersion.compareTo(h)>=0)return o.Je.saveNamedQuery(c,n);const _=s.withResumeToken(Pr.EMPTY_BYTE_STRING,h);return o.Un=o.Un.insert(_.targetId,_),o.ze.updateTargetData(c,_).next(()=>o.ze.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>o.ze.addMatchingKeys(c,r,s.targetId)).next(()=>o.Je.saveNamedQuery(c,n))})})).apply(this,arguments)}class dj{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return Re.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var s;return this.Yn.set(r.id,{id:(s=r).id,version:s.version,createTime:Kr(s.createTime)}),Re.resolve()}getNamedQuery(n,r){return Re.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(s=r).name,query:gM(s.bundledQuery),readTime:Kr(s.readTime)}),Re.resolve();var s}}class AM{constructor(){this.Zn=new Le(Yr.ts),this.es=new Le(Yr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const s=new Yr(n,r);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(n,r){n.forEach(s=>this.addReference(s,r))}removeReference(n,r){this.rs(new Yr(n,r))}os(n,r){n.forEach(s=>this.removeReference(s,r))}cs(n){const r=new Ke(new en([])),s=new Yr(r,n),o=new Yr(r,n+1),c=[];return this.es.forEachInRange([s,o],h=>{this.rs(h),c.push(h.key)}),c}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new Ke(new en([])),s=new Yr(r,n),o=new Yr(r,n+1);let c=Yt();return this.es.forEachInRange([s,o],h=>{c=c.add(h.key)}),c}containsKey(n){const r=new Yr(n,0),s=this.Zn.firstAfterOrEqual(r);return null!==s&&n.isEqual(s.key)}}class Yr{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return Ke.comparator(n.key,r.key)||Bt(n.ls,r.ls)}static ns(n,r){return Bt(n.ls,r.ls)||Ke.comparator(n.key,r.key)}}class hj{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new Le(Yr.ts)}checkEmpty(n){return Re.resolve(0===this.In.length)}addMutationBatch(n,r,s,o){const c=this.fs;this.fs++;const h=new dM(c,r,s,o);this.In.push(h);for(const _ of o)this.ds=this.ds.add(new Yr(_.key,c)),this.Ht.addToCollectionParentIndex(n,_.key.path.popLast());return Re.resolve(h)}lookupMutationBatch(n,r){return Re.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const o=this._s(r+1),c=o<0?0:o;return Re.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return Re.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const s=new Yr(r,0),o=new Yr(r,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([s,o],h=>{const _=this.ws(h.ls);c.push(_)}),Re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(n,r){let s=new Le(Bt);return r.forEach(o=>{const c=new Yr(o,0),h=new Yr(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,h],_=>{s=s.add(_.ls)})}),Re.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(n,r){const s=r.path,o=s.length+1;let c=s;Ke.isDocumentKey(c)||(c=c.child(""));const h=new Yr(new Ke(c),0);let _=new Le(Bt);return this.ds.forEachWhile(w=>{const T=w.key.path;return!!s.isPrefixOf(T)&&(T.length===o&&(_=_.add(w.ls)),!0)},h),Re.resolve(this.gs(_))}gs(n){const r=[];return n.forEach(s=>{const o=this.ws(s);null!==o&&r.push(o)}),r}removeMutationBatch(n,r){gt(0===this.ys(r.batchId,"removed")),this.In.shift();let s=this.ds;return Re.forEach(r.mutations,o=>{const c=new Yr(o.key,r.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(n,o.key)}).next(()=>{this.ds=s})}te(n){}containsKey(n,r){const s=new Yr(r,0),o=this.ds.firstAfterOrEqual(s);return Re.resolve(r.isEqual(o&&o.key))}performConsistencyCheck(n){return Re.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class fj{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new Y(Ke.comparator),this.size=0}addEntry(n,r,s){const o=r.key,c=this.docs.get(o),h=c?c.size:0,_=this.ps(r);return this.docs=this.docs.insert(o,{document:r.clone(),size:_,readTime:s}),this.size+=_-h,this.Ht.addToCollectionParentIndex(n,o.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const s=this.docs.get(r);return Re.resolve(s?s.document.clone():fn.newInvalidDocument(r))}getEntries(n,r){let s=nn();return r.forEach(o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.clone():fn.newInvalidDocument(o))}),Re.resolve(s)}getDocumentsMatchingQuery(n,r,s){let o=nn();const c=new Ke(r.path.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:_,value:{document:w,readTime:T}}=h.getNext();if(!r.path.isPrefixOf(_.path))break;T.compareTo(s)<=0||Kh(r,w)&&(o=o.insert(w.key,w.clone()))}return Re.resolve(o)}Es(n,r){return Re.forEach(this.docs,s=>r(s))}newChangeBuffer(n){return new pj(this)}getSize(n){return Re.resolve(this.size)}}class pj extends LL{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((s,o)=>{o.document.isValidDocument()?r.push(this.Se.addEntry(n,o.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Re.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class gj{constructor(n){this.persistence=n,this.Ts=new Kv(r=>Cc(r),bc),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Is=0,this.As=new AM,this.targetCount=0,this.Rs=um.se()}forEachTarget(n,r){return this.Ts.forEach((s,o)=>r(o)),Re.resolve()}getLastRemoteSnapshotVersion(n){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return Re.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(n,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Is&&(this.Is=r),Re.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new um(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,Re.resolve()}updateTargetData(n,r){return this.ae(r),Re.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,Re.resolve()}removeTargets(n,r,s){let o=0;const c=[];return this.Ts.forEach((h,_)=>{_.sequenceNumber<=r&&null===s.get(_.targetId)&&(this.Ts.delete(h),c.push(this.removeMatchingKeysForTargetId(n,_.targetId)),o++)}),Re.waitFor(c).next(()=>o)}getTargetCount(n){return Re.resolve(this.targetCount)}getTargetData(n,r){const s=this.Ts.get(r)||null;return Re.resolve(s)}addMatchingKeys(n,r,s){return this.As.ss(r,s),Re.resolve()}removeMatchingKeys(n,r,s){this.As.os(r,s);const o=this.persistence.referenceDelegate,c=[];return o&&r.forEach(h=>{c.push(o.markPotentiallyOrphaned(n,h))}),Re.waitFor(c)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),Re.resolve()}getMatchingKeysForTargetId(n,r){const s=this.As.hs(r);return Re.resolve(s)}containsKey(n,r){return Re.resolve(this.As.containsKey(r))}}class mj{constructor(n,r){this.bs={},this.Le=new Ji(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new gj(this),this.Ht=new ZB,this.He=new fj(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new TL(r),this.Je=new dj(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new hj(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,s){Me("MemoryPersistence","Starting transaction:",n);const o=new _j(this.Le.next());return this.referenceDelegate.vs(),s(o).next(c=>this.referenceDelegate.Vs(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ss(n,r){return Re.or(Object.values(this.bs).map(s=>()=>s.containsKey(n,r)))}}class _j extends wL{constructor(n){super(),this.currentSequenceNumber=n}}class RM{constructor(n){this.persistence=n,this.Ds=new AM,this.Cs=null}static Ns(n){return new RM(n)}get xs(){if(this.Cs)return this.Cs;throw Xe()}addReference(n,r,s){return this.Ds.addReference(s,r),this.xs.delete(s.toString()),Re.resolve()}removeReference(n,r,s){return this.Ds.removeReference(s,r),this.xs.add(s.toString()),Re.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),Re.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(o=>this.xs.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(n,r.targetId).next(o=>{o.forEach(c=>this.xs.add(c.toString()))}).next(()=>s.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.xs,s=>{const o=Ke.fromPath(s);return this.ks(n,o).next(c=>{c||r.removeEntry(o)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(s=>{s?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return Re.or([()=>Re.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function zL(i,n){return`firestore_clients_${i}_${n}`}function KL(i,n,r){let s=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(s+=`_${n.uid}`),s}function NM(i,n){return`firestore_targets_${i}_${n}`}class _R{constructor(n,r,s,o){this.user=n,this.batchId=r,this.state=s,this.error=o}static $s(n,r,s){const o=JSON.parse(s);let c,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(c=new Ne(o.error.code,o.error.message))),h?new _R(n,r,o.state,c):(tr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Fb{constructor(n,r,s){this.targetId=n,this.state=r,this.error=s}static $s(n,r){const s=JSON.parse(r);let o,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(o=new Ne(s.error.code,s.error.message))),c?new Fb(n,s.state,o):(tr("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class yR{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const s=JSON.parse(r);let o="object"==typeof s&&s.activeTargetIds instanceof Array,c=tf();for(let h=0;o&&h<s.activeTargetIds.length;++h)o=gb(s.activeTargetIds[h]),c=c.add(s.activeTargetIds[h]);return o?new yR(n,c):(tr("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class xM{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new xM(r.clientId,r.onlineState):(tr("SharedClientState",`Failed to parse online state: ${n}`),null)}}class PM{constructor(){this.activeTargetIds=tf()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class OM{constructor(n,r,s,o,c){this.window=n,this.Oe=r,this.persistenceKey=s,this.Ls=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Y(Bt),this.started=!1,this.Ks=[];const h=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=zL(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new PM),this.Ws=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,Ce.Z)(function*(){const r=yield n.syncEngine.pn();for(const o of r){if(o===n.Ls)continue;const c=n.getItem(zL(n.persistenceKey,o));if(c){const h=yR.$s(o,c);h&&(n.qs=n.qs.insert(h.clientId,h))}}n.Ys();const s=n.storage.getItem(n.Hs);if(s){const o=n.Xs(s);o&&n.Zs(o)}for(const o of n.Ks)n.Us(o);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((s,o)=>{o.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,s){this.ei(n,r,s),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const s=this.storage.getItem(NM(this.persistenceKey,n));if(s){const o=Fb.$s(n,s);o&&(r=o.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(NM(this.persistenceKey,n))}updateQueryState(n,r,s){this.ii(n,r,s)}handleUserChange(n,r,s){r.forEach(o=>{this.ni(o)}),this.currentUser=n,s.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return Me("SharedClientState","READ",n,r),r}setItem(n,r){Me("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){Me("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const s=n;if(s.storageArea===this.storage){if(Me("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ce.Z)(function*(){if(r.started){if(null!==s.key)if(r.Ws.test(s.key)){if(null==s.newValue){const o=r.ai(s.key);return r.ci(o,null)}{const o=r.ui(s.key,s.newValue);if(o)return r.ci(o.clientId,o)}}else if(r.Gs.test(s.key)){if(null!==s.newValue){const o=r.hi(s.key,s.newValue);if(o)return r.li(o)}}else if(r.zs.test(s.key)){if(null!==s.newValue){const o=r.fi(s.key,s.newValue);if(o)return r.di(o)}}else if(s.key===r.Hs){if(null!==s.newValue){const o=r.Xs(s.newValue);if(o)return r.Zs(o)}}else if(s.key===r.Qs){const o=function(c){let h=Ji.T;if(null!=c)try{const _=JSON.parse(c);gt("number"==typeof _),h=_}catch(_){tr("SharedClientState","Failed to read sequence number from WebStorage",_)}return h}(s.newValue);o!==Ji.T&&r.sequenceNumberHandler(o)}else if(s.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,s){const o=new _R(this.currentUser,n,r,s),c=KL(this.persistenceKey,this.currentUser,n);this.setItem(c,o.Os())}ni(n){const r=KL(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,s){const o=NM(this.persistenceKey,n),c=new Fb(n,r,s);this.setItem(o,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const s=this.ai(n);return yR.$s(s,r)}hi(n,r){const s=this.Gs.exec(n),o=Number(s[1]);return _R.$s(new Zr(void 0!==s[2]?s[2]:null),o,r)}fi(n,r){const s=this.zs.exec(n),o=Number(s[1]);return Fb.$s(o,r)}Xs(n){return xM.$s(n)}li(n){var r=this;return(0,Ce.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);Me("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const s=r?this.qs.insert(n,r):this.qs.remove(n),o=this.ti(this.qs),c=this.ti(s),h=[],_=[];return c.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{c.has(w)||_.push(w)}),this.syncEngine.gi(h,_).then(()=>{this.qs=s})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=tf();return n.forEach((s,o)=>{r=r.unionWith(o.activeTargetIds)}),r}}class YL{constructor(){this.yi=new PM,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,s){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,s){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new PM,Promise.resolve()}handleUserChange(n,r,s){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class yj{Ei(n){}shutdown(){}}class QL{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Ej{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class wj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,s,o){const c=this.Bi(n,r);Me("RestConnection","Sending: ",c,s);const h={};return this.Ui(h,o),this.qi(n,c,h,s).then(_=>(Me("RestConnection","Received: ",_),_),_=>{throw Qg("RestConnection",`${n} failed with error: `,_,"url: ",c,"request:",s),_})}Ki(n,r,s,o){return this.Li(n,r,s,o)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Yg,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const s in r.authHeaders)r.authHeaders.hasOwnProperty(s)&&(n[s]=r.authHeaders[s])}Bi(n,r){return`${this.Fi}/v1/${r}:${vj[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,s,o){return new Promise((c,h)=>{const _=new BO;_.listenOnce(YF.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case er.NO_ERROR:const T=_.getResponseJson();Me("Connection","XHR received:",JSON.stringify(T)),c(T);break;case er.TIMEOUT:Me("Connection",'RPC "'+n+'" timed out'),h(new Ne(_e.DEADLINE_EXCEEDED,"Request time out"));break;case er.HTTP_ERROR:const S=_.getStatus();if(Me("Connection",'RPC "'+n+'" failed with status:',S,"response text:",_.getResponseText()),S>0){const R=_.getResponseJson().error;if(R&&R.status&&R.message){const P=function(k){const U=k.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN}(R.status);h(new Ne(P,R.message))}else h(new Ne(_e.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Ne(_e.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Me("Connection",'RPC "'+n+'" completed.')}});const w=JSON.stringify(o);_.send(r,"POST",w,s,15)})}ji(n,r){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],o=db(),c=qA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new QF({})),this.Ui(h.initMessageHeaders,r),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=s.join("");Me("Connection","Creating WebChannel: "+_,h);const w=o.createWebChannel(_,h);let T=!1,S=!1;const R=new Ej({vi:k=>{S?Me("Connection","Not sending because WebChannel is closed:",k):(T||(Me("Connection","Opening WebChannel transport."),w.open(),T=!0),Me("Connection","WebChannel sending:",k),w.send(k))},Vi:()=>w.close()}),P=(k,U,J)=>{k.listen(U,me=>{try{J(me)}catch(Oe){setTimeout(()=>{throw Oe},0)}})};return P(w,vc.EventType.OPEN,()=>{S||Me("Connection","WebChannel transport opened.")}),P(w,vc.EventType.CLOSE,()=>{S||(S=!0,Me("Connection","WebChannel transport closed"),R.$i())}),P(w,vc.EventType.ERROR,k=>{S||(S=!0,Qg("Connection","WebChannel transport errored:",k),R.$i(new Ne(_e.UNAVAILABLE,"The operation could not be completed")))}),P(w,vc.EventType.MESSAGE,k=>{var U;if(!S){const J=k.data[0];gt(!!J);const me=J,Oe=me.error||(null===(U=me[0])||void 0===U?void 0:U.error);if(Oe){Me("Connection","WebChannel received error:",Oe);const je=Oe.status;let $e=function(un){const or=M[un];if(void 0!==or)return le(or)}(je),Ge=Oe.message;void 0===$e&&($e=_e.INTERNAL,Ge="Unknown error status: "+je+" with message "+Oe.message),S=!0,R.$i(new Ne($e,Ge)),w.close()}else Me("Connection","WebChannel received:",J),R.Oi(J)}}),P(c,UO.STAT_EVENT,k=>{k.stat===GA.PROXY?Me("Connection","Detected buffering proxy"):k.stat===GA.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.ki()},0),R}}function JL(){return"undefined"!=typeof window?window:null}function vR(){return"undefined"!=typeof document?document:null}function Lb(i){return new AB(i,!0)}class MM{constructor(n,r,s=1e3,o=1.5,c=6e4){this.Oe=n,this.timerId=r,this.Qi=s,this.Wi=o,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),o=Math.max(0,r-s);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class XL{constructor(n,r,s,o,c,h){this.Oe=n,this.er=s,this.nr=o,this.credentialsProvider=c,this.listener=h,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new MM(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,Ce.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,Ce.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var s=this;return(0,Ce.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==n?s.rr.reset():r&&r.code===_e.RESOURCE_EXHAUSTED?(tr(r.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):r&&r.code===_e.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=n,yield s.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===r&&this.yr(s)},s=>{n(()=>{const o=new Ne(_e.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(o)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{r(()=>this.pr(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}ur(){var n=this;this.state=4,this.rr.Xi((0,Ce.Z)(function*(){n.state=0,n.start()}))}pr(n){return Me("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cj extends XL{constructor(n,r,s,o,c){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,s,c),this.N=o}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const s="NO_CHANGE"===(w=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Xe(),o=n.targetChange.targetIds||[],c=function(w,T){return w.D?(gt(void 0===T||"string"==typeof T),Pr.fromBase64String(T||"")):(gt(void 0===T||T instanceof Uint8Array),Pr.fromUint8Array(T||new Uint8Array))}(i,n.targetChange.resumeToken),h=n.targetChange.cause,_=h&&function(w){const T=void 0===w.code?_e.UNKNOWN:le(w.code);return new Ne(T,w.message||"")}(h);r=new tL(s,o,c,_||null)}else if("documentChange"in n){const s=n.documentChange,o=ru(i,s.document.name),c=Kr(s.document.updateTime),h=new tn({mapValue:{fields:s.document.fields}}),_=fn.newFoundDocument(o,c,h);r=new uR(s.targetIds||[],s.removedTargetIds||[],_.key,_)}else if("documentDelete"in n){const s=n.documentDelete,o=ru(i,s.document),c=s.readTime?Kr(s.readTime):Tt.min(),h=fn.newNoDocument(o,c);r=new uR([],s.removedTargetIds||[],h.key,h)}else if("documentRemove"in n){const s=n.documentRemove,o=ru(i,s.document);r=new uR([],s.removedTargetIds||[],o,null)}else{if(!("filter"in n))return Xe();{const s=n.filter,c=new O(s.count||0);r=new eL(s.targetId,c)}}var w;return r}(this.N,n),s=function(o){if(!("targetChange"in o))return Tt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Tt.min():c.readTime?Kr(c.readTime):Tt.min()}(n);return this.listener.Tr(r,s)}Ir(n){const r={};r.database=Pb(this.N),r.addTarget=function(o,c){let h;const _=c.target;return h=kv(_)?{documents:hL(o,_)}:{query:fL(o,_)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=sL(o,c.resumeToken):c.snapshotVersion.compareTo(Tt.min())>0&&(h.readTime=Nb(o,c.snapshotVersion.toTimestamp())),h}(this.N,n);const s=function(i,n){const r=function(s,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);s&&(r.labels=s),this.wr(r)}Ar(n){const r={};r.database=Pb(this.N),r.removeTarget=n,this.wr(r)}}class bj extends XL{constructor(n,r,s,o,c){super(n,"write_stream_connection_backoff","write_stream_idle",r,s,c),this.N=o,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(gt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(gt(void 0!==n),i.map(r=>function(s,o){let c=Kr(s.updateTime?s.updateTime:o);return c.isEqual(Tt.min())&&(c=Kr(o)),new aM(c,s.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),s=Kr(n.commitTime);return this.listener.vr(s,r)}return gt(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=Pb(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(s=>cR(this.N,s))};this.wr(r)}}class Tj extends class{}{constructor(n,r,s){super(),this.credentials=n,this.nr=r,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,s){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Li(n,r,s,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Ne(_e.UNKNOWN,o.toString())})}Ki(n,r,s){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Ki(n,r,s,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===_e.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Ne(_e.UNKNOWN,o.toString())})}terminate(){this.Dr=!0}}class Ij{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(tr(r),this.$r=!1):Me("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Dj{constructor(n,r,s,o,c){var h=this;this.localStore=n,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=c,this.Qr.Ei(_=>{s.enqueueAndForget((0,Ce.Z)(function*(){var w;lf(h)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ce.Z)(function*(T){const S=Be(T);S.Kr.add(4),yield Jv(S),S.Wr.set("Unknown"),S.Kr.delete(4),yield Vb(S)}),function(T){return w.apply(this,arguments)})(h))}))}),this.Wr=new Ij(s,o)}}function Vb(i){return kM.apply(this,arguments)}function kM(){return(kM=(0,Ce.Z)(function*(i){if(lf(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Jv(i){return FM.apply(this,arguments)}function FM(){return(FM=(0,Ce.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function ER(i,n){const r=Be(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),UM(r)?VM(r):eE(r).cr()&&LM(r,n))}function Ub(i,n){const r=Be(i),s=eE(r);r.qr.delete(n),s.cr()&&eV(r,n),0===r.qr.size&&(s.cr()?s.lr():lf(r)&&r.Wr.set("Unknown"))}function LM(i,n){i.Gr.Y(n.targetId),eE(i).Ir(n)}function eV(i,n){i.Gr.Y(n),eE(i).Ar(n)}function VM(i){i.Gr=new IB({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),eE(i).start(),i.Wr.Or()}function UM(i){return lf(i)&&!eE(i).ar()&&i.qr.size>0}function lf(i){return 0===Be(i).Kr.size}function tV(i){i.Gr=void 0}function Sj(i){return BM.apply(this,arguments)}function BM(){return(BM=(0,Ce.Z)(function*(i){i.qr.forEach((n,r)=>{LM(i,n)})})).apply(this,arguments)}function Aj(i,n){return jM.apply(this,arguments)}function jM(){return(jM=(0,Ce.Z)(function*(i,n){tV(i),UM(i)?(i.Wr.Lr(n),VM(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function Rj(i,n,r){return HM.apply(this,arguments)}function HM(){return(HM=(0,Ce.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof tL&&2===n.state&&n.cause)try{yield(s=(0,Ce.Z)(function*(o,c){const h=c.cause;for(const _ of c.targetIds)o.qr.has(_)&&(yield o.remoteSyncer.rejectListen(_,h),o.qr.delete(_),o.Gr.removeTarget(_))}),function(o,c){return s.apply(this,arguments)})(i,n)}catch(s){Me("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),s),yield wR(i,s)}else if(n instanceof uR?i.Gr.rt(n):n instanceof eL?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(Tt.min()))try{const s=yield qL(i.localStore);r.compareTo(s)>=0&&(yield function(o,c){const h=o.Gr._t(c);return h.targetChanges.forEach((_,w)=>{if(_.resumeToken.approximateByteSize()>0){const T=o.qr.get(w);T&&o.qr.set(w,T.withResumeToken(_.resumeToken,c))}}),h.targetMismatches.forEach(_=>{const w=o.qr.get(_);if(!w)return;o.qr.set(_,w.withResumeToken(Pr.EMPTY_BYTE_STRING,w.snapshotVersion)),eV(o,_);const T=new rf(w.target,_,1,w.sequenceNumber);LM(o,T)}),o.remoteSyncer.applyRemoteEvent(h)}(i,r))}catch(s){Me("RemoteStore","Failed to raise snapshot:",s),yield wR(i,s)}var s})).apply(this,arguments)}function wR(i,n,r){return $M.apply(this,arguments)}function $M(){return($M=(0,Ce.Z)(function*(i,n,r){if(!am(n))throw n;i.Kr.add(1),yield Jv(i),i.Wr.set("Offline"),r||(r=()=>qL(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield Vb(i)}))})).apply(this,arguments)}function nV(i,n){return n().catch(r=>wR(i,r,n))}function Xv(i){return qM.apply(this,arguments)}function qM(){return(qM=(0,Ce.Z)(function*(i){const n=Be(i),r=uf(n);let s=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;Nj(n);)try{const o=yield aj(n.localStore,s);if(null===o){0===n.Ur.length&&r.lr();break}s=o.batchId,xj(n,o)}catch(o){yield wR(n,o)}rV(n)&&iV(n)})).apply(this,arguments)}function Nj(i){return lf(i)&&i.Ur.length<10}function xj(i,n){i.Ur.push(n);const r=uf(i);r.cr()&&r.br&&r.Pr(n.mutations)}function rV(i){return lf(i)&&!uf(i).ar()&&i.Ur.length>0}function iV(i){uf(i).start()}function Pj(i){return GM.apply(this,arguments)}function GM(){return(GM=(0,Ce.Z)(function*(i){uf(i).Sr()})).apply(this,arguments)}function Oj(i){return WM.apply(this,arguments)}function WM(){return(WM=(0,Ce.Z)(function*(i){const n=uf(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function Mj(i,n,r){return ZM.apply(this,arguments)}function ZM(){return(ZM=(0,Ce.Z)(function*(i,n,r){const s=i.Ur.shift(),o=hM.from(s,n,r);yield nV(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),yield Xv(i)})).apply(this,arguments)}function kj(i,n){return zM.apply(this,arguments)}function zM(){return(zM=(0,Ce.Z)(function*(i,n){var r;n&&uf(i).br&&(yield(r=(0,Ce.Z)(function*(s,o){if(Z(c=o.code)&&c!==_e.ABORTED){const h=s.Ur.shift();uf(s).hr(),yield nV(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Xv(s)}var c}),function(s,o){return r.apply(this,arguments)})(i,n)),rV(i)&&iV(i)})).apply(this,arguments)}function KM(i,n){return YM.apply(this,arguments)}function YM(){return(YM=(0,Ce.Z)(function*(i,n){const r=Be(i);n?(r.Kr.delete(2),yield Vb(r)):n||(r.Kr.add(2),yield Jv(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function eE(i){return i.zr||(i.zr=function(n,r,s){const o=Be(n);return o.Cr(),new Cj(r,o.nr,o.credentials,o.N,s)}(i.datastore,i.asyncQueue,{Si:Sj.bind(null,i),Ci:Aj.bind(null,i),Tr:Rj.bind(null,i)}),i.jr.push(function(){var n=(0,Ce.Z)(function*(r){r?(i.zr.hr(),UM(i)?VM(i):i.Wr.set("Unknown")):(yield i.zr.stop(),tV(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function uf(i){return i.Hr||(i.Hr=function(n,r,s){const o=Be(n);return o.Cr(),new bj(r,o.nr,o.credentials,o.N,s)}(i.datastore,i.asyncQueue,{Si:Pj.bind(null,i),Ci:kj.bind(null,i),Vr:Oj.bind(null,i),vr:Mj.bind(null,i)}),i.jr.push(function(){var n=(0,Ce.Z)(function*(r){r?(i.Hr.hr(),yield Xv(i)):(yield i.Hr.stop(),i.Ur.length>0&&(Me("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class QM{constructor(n,r,s,o,c){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(n,r,s,o,c){const h=Date.now()+s,_=new QM(n,r,h,o,c);return _.start(s),_}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(_e.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tE(i,n){if(tr("AsyncQueue",`${n}: ${i}`),am(i))return new Ne(_e.UNAVAILABLE,`${n}: ${i}`);throw i}class nE{constructor(n){this.comparator=n?(r,s)=>n(r,s)||Ke.comparator(r.key,s.key):(r,s)=>Ke.comparator(r.key,s.key),this.keyedMap=Ic(),this.sortedSet=new Y(this.comparator)}static emptySet(n){return new nE(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,s)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof nE)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),s=n.sortedSet.getIterator();for(;r.hasNext();){const o=r.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const s=new nE;return s.comparator=this.comparator,s.keyedMap=n,s.sortedSet=r,s}}class sV{constructor(){this.Jr=new Y(Ke.comparator)}track(n){const r=n.doc.key,s=this.Jr.get(r);s?0!==n.type&&3===s.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==s.type?this.Jr=this.Jr.insert(r,{type:s.type,doc:n.doc}):2===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===s.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===s.type?this.Jr=this.Jr.remove(r):1===n.type&&2===s.type?this.Jr=this.Jr.insert(r,{type:1,doc:s.doc}):0===n.type&&1===s.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):Xe():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,s)=>{n.push(s)}),n}}class rE{constructor(n,r,s,o,c,h,_,w){this.query=n,this.docs=r,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=_,this.excludesMetadataChanges=w}static fromInitialDocuments(n,r,s,o){const c=[];return r.forEach(h=>{c.push({type:0,doc:h})}),new rE(n,r,nE.emptySet(r),c,s,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&im(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,s=n.docChanges;if(r.length!==s.length)return!1;for(let o=0;o<r.length;o++)if(r[o].type!==s[o].type||!r[o].doc.isEqual(s[o].doc))return!1;return!0}}class Fj{constructor(){this.Xr=void 0,this.listeners=[]}}class Lj{constructor(){this.queries=new Kv(n=>Cb(n),im),this.onlineState="Unknown",this.Zr=new Set}}function JM(i,n){return XM.apply(this,arguments)}function XM(){return(XM=(0,Ce.Z)(function*(i,n){const r=Be(i),s=n.query;let o=!1,c=r.queries.get(s);if(c||(o=!0,c=new Fj),o)try{c.Xr=yield r.onListen(s)}catch(h){const _=tE(h,`Initialization of query '${Vv(n.query)}' failed`);return void n.onError(_)}r.queries.set(s,c),c.listeners.push(n),n.eo(r.onlineState),c.Xr&&n.no(c.Xr)&&n1(r)})).apply(this,arguments)}function e1(i,n){return t1.apply(this,arguments)}function t1(){return(t1=(0,Ce.Z)(function*(i,n){const r=Be(i),s=n.query;let o=!1;const c=r.queries.get(s);if(c){const h=c.listeners.indexOf(n);h>=0&&(c.listeners.splice(h,1),o=0===c.listeners.length)}if(o)return r.queries.delete(s),r.onUnlisten(s)})).apply(this,arguments)}function Vj(i,n){const r=Be(i);let s=!1;for(const o of n){const h=r.queries.get(o.query);if(h){for(const _ of h.listeners)_.no(o)&&(s=!0);h.Xr=o}}s&&n1(r)}function Uj(i,n,r){const s=Be(i),o=s.queries.get(n);if(o)for(const c of o.listeners)c.onError(r);s.queries.delete(n)}function n1(i){i.Zr.forEach(n=>{n.next()})}class r1{constructor(n,r,s){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(n){if(!this.options.includeMetadataChanges){const s=[];for(const o of n.docChanges)3!==o.type&&s.push(o);n=new rE(n.query,n.docs,n.oldDocs,s,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=rE.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class Bj{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class oV{constructor(n){this.N=n}zn(n){return ru(this.N,n)}Hn(n){return n.metadata.exists?cL(this.N,n.document,!1):fn.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return Kr(n)}}class jj{constructor(n,r,s){this.lo=n,this.localStore=r,this.N=s,this.queries=[],this.documents=[],this.progress=aV(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,s=new oV(this.N);for(const o of n)if(o.metadata.queries){const c=s.zn(o.metadata.name);for(const h of o.metadata.queries){const _=(r.get(h)||Yt()).add(c);r.set(h,_)}}return r}complete(){var n=this;return(0,Ce.Z)(function*(){const r=yield function(i,n,r,s){return DM.apply(this,arguments)}(n.localStore,new oV(n.N),n.documents,n.lo.id),s=n.wo(n.documents);for(const o of n.queries)yield cj(n.localStore,o,s.get(o.name));return n.progress.taskState="Success",new rj(Object.assign({},n.progress),r)})()}}function aV(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class lV{constructor(n){this.key=n}}class uV{constructor(n){this.key=n}}class cV{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=Yt(),this.mutatedKeys=Yt(),this.po=bb(n),this.Eo=new nE(this.po)}get To(){return this._o}Io(n,r){const s=r?r.Ao:new sV,o=r?r.Eo:this.Eo;let c=r?r.mutatedKeys:this.mutatedKeys,h=o,_=!1;const w=Lv(this.query)&&o.size===this.query.limit?o.last():null,T=Ns(this.query)&&o.size===this.query.limit?o.first():null;if(n.inorderTraversal((S,R)=>{const P=o.get(S),k=Kh(this.query,R)?R:null,U=!!P&&this.mutatedKeys.has(P.key),J=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let me=!1;P&&k?P.data.isEqual(k.data)?U!==J&&(s.track({type:3,doc:k}),me=!0):this.Ro(P,k)||(s.track({type:2,doc:k}),me=!0,(w&&this.po(k,w)>0||T&&this.po(k,T)<0)&&(_=!0)):!P&&k?(s.track({type:0,doc:k}),me=!0):P&&!k&&(s.track({type:1,doc:P}),me=!0,(w||T)&&(_=!0)),me&&(k?(h=h.add(k),c=J?c.add(S):c.delete(S)):(h=h.delete(S),c=c.delete(S)))}),Lv(this.query)||Ns(this.query))for(;h.size>this.query.limit;){const S=Lv(this.query)?h.last():h.first();h=h.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{Eo:h,Ao:s,Ln:_,mutatedKeys:c}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,s){const o=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const c=n.Ao.Yr();c.sort((T,S)=>function(R,P){const k=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return k(R)-k(P)}(T.type,S.type)||this.po(T.doc,S.doc)),this.bo(s);const h=r?this.Po():[],_=0===this.yo.size&&this.current?1:0,w=_!==this.mo;return this.mo=_,0!==c.length||w?{snapshot:new rE(this.query,n.Eo,o,c,n.mutatedKeys,0===_,w,!1),vo:h}:{vo:h}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new sV,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=Yt(),this.Eo.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const r=[];return n.forEach(s=>{this.yo.has(s)||r.push(new uV(s))}),this.yo.forEach(s=>{n.has(s)||r.push(new lV(s))}),r}So(n){this._o=n.Gn,this.yo=Yt();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return rE.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class Hj{constructor(n,r,s){this.query=n,this.targetId=r,this.view=s}}class $j{constructor(n){this.key=n,this.Co=!1}}class qj{constructor(n,r,s,o,c,h){this.localStore=n,this.remoteStore=r,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.No={},this.xo=new Kv(_=>Cb(_),im),this.ko=new Map,this.$o=new Set,this.Oo=new Y(Ke.comparator),this.Fo=new Map,this.Mo=new AM,this.Lo={},this.Bo=new Map,this.Uo=um.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function Gj(i,n){return i1.apply(this,arguments)}function i1(){return(i1=(0,Ce.Z)(function*(i,n){const r=S1(i);let s,o;const c=r.xo.get(n);if(c)s=c.targetId,r.sharedClientState.addLocalQueryTarget(s),o=c.view.Do();else{const h=yield Yv(r.localStore,xs(n)),_=r.sharedClientState.addLocalQueryTarget(h.targetId);s=h.targetId,o=yield s1(r,n,s,"current"===_),r.isPrimaryClient&&ER(r.remoteStore,h)}return o})).apply(this,arguments)}function s1(i,n,r,s){return o1.apply(this,arguments)}function o1(){return(o1=(0,Ce.Z)(function*(i,n,r,s){i.Ko=(S,R,P)=>{return(k=(0,Ce.Z)(function*(U,J,me,Oe){let je=J.view.Io(me);je.Ln&&(je=yield mR(U.localStore,J.query,!1).then(({documents:un})=>J.view.Io(un,je)));const $e=Oe&&Oe.targetChanges.get(J.targetId),Ge=J.view.applyChanges(je,U.isPrimaryClient,$e);return m1(U,J.targetId,Ge.vo),Ge.snapshot}),function(U,J,me,Oe){return k.apply(this,arguments)})(i,S,R,P);var k};const o=yield mR(i.localStore,n,!0),c=new cV(n,o.Gn),h=c.Io(o.documents),_=Ac.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==i.onlineState),w=c.applyChanges(h,i.isPrimaryClient,_);m1(i,r,w.vo);const T=new Hj(n,r,c);return i.xo.set(n,T),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),w.snapshot})).apply(this,arguments)}function Wj(i,n){return a1.apply(this,arguments)}function a1(){return(a1=(0,Ce.Z)(function*(i,n){const r=Be(i),s=r.xo.get(n),o=r.ko.get(s.targetId);if(o.length>1)return r.ko.set(s.targetId,o.filter(c=>!im(c,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Qv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),Ub(r.remoteStore,s.targetId),iE(r,s.targetId)}).catch(cm))):(iE(r,s.targetId),yield Qv(r.localStore,s.targetId,!0))})).apply(this,arguments)}function l1(){return(l1=(0,Ce.Z)(function*(i,n,r){const s=A1(i);try{const o=yield function(c,h){const _=Be(c),w=Un.now(),T=h.reduce((R,P)=>R.add(P.key),Yt());let S;return _.persistence.runTransaction("Locally write mutations","readwrite",R=>_.Qn.Pn(R,T).next(P=>{S=P;const k=[];for(const U of h){const J=l(U,S.get(U.key));null!=J&&k.push(new m(U.key,J,Gh(J.value.mapValue),pr.exists(!0)))}return _.In.addMutationBatch(R,w,k,h)})).then(R=>(R.applyToLocalDocumentSet(S),{batchId:R.batchId,changes:S}))}(s.localStore,n);s.sharedClientState.addPendingMutation(o.batchId),function(c,h,_){let w=c.Lo[c.currentUser.toKey()];w||(w=new Y(Bt)),w=w.insert(h,_),c.Lo[c.currentUser.toKey()]=w}(s,o.batchId,r),yield xc(s,o.changes),yield Xv(s.remoteStore)}catch(o){const c=tE(o,"Failed to persist write");r.reject(c)}})).apply(this,arguments)}function dV(i,n){return u1.apply(this,arguments)}function u1(){return(u1=(0,Ce.Z)(function*(i,n){const r=Be(i);try{const s=yield oj(r.localStore,n);n.targetChanges.forEach((o,c)=>{const h=r.Fo.get(c);h&&(gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Co=!0:o.modifiedDocuments.size>0?gt(h.Co):o.removedDocuments.size>0&&(gt(h.Co),h.Co=!1))}),yield xc(r,s,n)}catch(s){yield cm(s)}})).apply(this,arguments)}function hV(i,n,r){const s=Be(i);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const o=[];s.xo.forEach((c,h)=>{const _=h.view.eo(n);_.snapshot&&o.push(_.snapshot)}),function(c,h){const _=Be(c);_.onlineState=h;let w=!1;_.queries.forEach((T,S)=>{for(const R of S.listeners)R.eo(h)&&(w=!0)}),w&&n1(_)}(s.eventManager,n),o.length&&s.No.Tr(o),s.onlineState=n,s.isPrimaryClient&&s.sharedClientState.setOnlineState(n)}}function zj(i,n,r){return c1.apply(this,arguments)}function c1(){return(c1=(0,Ce.Z)(function*(i,n,r){const s=Be(i);s.sharedClientState.updateQueryState(n,"rejected",r);const o=s.Fo.get(n),c=o&&o.key;if(c){let h=new Y(Ke.comparator);h=h.insert(c,fn.newNoDocument(c,Tt.min()));const _=Yt().add(c),w=new Sc(Tt.min(),new Map,new Le(Bt),h,_);yield dV(s,w),s.Oo=s.Oo.remove(c),s.Fo.delete(n),_1(s)}else yield Qv(s.localStore,n,!1).then(()=>iE(s,n,r)).catch(cm)})).apply(this,arguments)}function Kj(i,n){return d1.apply(this,arguments)}function d1(){return(d1=(0,Ce.Z)(function*(i,n){const r=Be(i),s=n.batch.batchId;try{const o=yield sj(r.localStore,n);g1(r,s,null),p1(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield xc(r,o)}catch(o){yield cm(o)}})).apply(this,arguments)}function Yj(i,n,r){return h1.apply(this,arguments)}function h1(){return(h1=(0,Ce.Z)(function*(i,n,r){const s=Be(i);try{const o=yield function(c,h){const _=Be(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let T;return _.In.lookupMutationBatch(w,h).next(S=>(gt(null!==S),T=S.keys(),_.In.removeMutationBatch(w,S))).next(()=>_.In.performConsistencyCheck(w)).next(()=>_.Qn.Pn(w,T))})}(s.localStore,n);g1(s,n,r),p1(s,n),s.sharedClientState.updateMutationState(n,"rejected",r),yield xc(s,o)}catch(o){yield cm(o)}})).apply(this,arguments)}function f1(){return(f1=(0,Ce.Z)(function*(i,n){const r=Be(i);lf(r.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const h=Be(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>h.In.getHighestUnacknowledgedBatchId(_))}(r.localStore);if(-1===s)return void n.resolve();const o=r.Bo.get(s)||[];o.push(n),r.Bo.set(s,o)}catch(s){const o=tE(s,"Initialization of waitForPendingWrites() operation failed");n.reject(o)}})).apply(this,arguments)}function p1(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function g1(i,n,r){const s=Be(i);let o=s.Lo[s.currentUser.toKey()];if(o){const c=o.get(n);c&&(r?c.reject(r):c.resolve(),o=o.remove(n)),s.Lo[s.currentUser.toKey()]=o}}function iE(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const s of i.ko.get(n))i.xo.delete(s),r&&i.No.jo(s,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(s=>{i.Mo.containsKey(s)||fV(i,s)})}function fV(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(Ub(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),_1(i))}function m1(i,n,r){for(const s of r)s instanceof lV?(i.Mo.addReference(s.key,n),Jj(i,s)):s instanceof uV?(Me("SyncEngine","Document no longer in limbo: "+s.key),i.Mo.removeReference(s.key,n),i.Mo.containsKey(s.key)||fV(i,s.key)):Xe()}function Jj(i,n){const r=n.key,s=r.path.canonicalString();i.Oo.get(r)||i.$o.has(s)||(Me("SyncEngine","New document in limbo: "+r),i.$o.add(s),_1(i))}function _1(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new Ke(en.fromString(n)),s=i.Uo.next();i.Fo.set(s,new $j(r)),i.Oo=i.Oo.insert(r,s),ER(i.remoteStore,new rf(xs(Zh(r.path)),s,2,Ji.T))}}function xc(i,n,r){return y1.apply(this,arguments)}function y1(){return(y1=(0,Ce.Z)(function*(i,n,r){const s=Be(i),o=[],c=[],h=[];var _;s.xo.isEmpty()||(s.xo.forEach((_,w)=>{h.push(s.Ko(w,n,r).then(T=>{if(T){s.isPrimaryClient&&s.sharedClientState.updateQueryState(w.targetId,T.fromCache?"not-current":"current"),o.push(T);const S=CM.kn(w.targetId,T);c.push(S)}}))}),yield Promise.all(h),s.No.Tr(o),yield(_=(0,Ce.Z)(function*(w,T){const S=Be(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>Re.forEach(T,P=>Re.forEach(P.Nn,k=>S.persistence.referenceDelegate.addReference(R,P.targetId,k)).next(()=>Re.forEach(P.xn,k=>S.persistence.referenceDelegate.removeReference(R,P.targetId,k)))))}catch(R){if(!am(R))throw R;Me("LocalStore","Failed to update sequence numbers: "+R)}for(const R of T){const P=R.targetId;if(!R.fromCache){const k=S.Un.get(P),J=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);S.Un=S.Un.insert(P,J)}}}),function(w,T){return _.apply(this,arguments)})(s.localStore,c))})).apply(this,arguments)}function Xj(i,n){return v1.apply(this,arguments)}function v1(){return(v1=(0,Ce.Z)(function*(i,n){const r=Be(i);if(!r.currentUser.isEqual(n)){Me("SyncEngine","User change. New user:",n.toKey());const s=yield $L(r.localStore,n);r.currentUser=n,(o=r).Bo.forEach(h=>{h.forEach(_=>{_.reject(new Ne(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Bo.clear(),r.sharedClientState.handleUserChange(n,s.removedBatchIds,s.addedBatchIds),yield xc(r,s.Wn)}var o})).apply(this,arguments)}function eH(i,n){const r=Be(i),s=r.Fo.get(n);if(s&&s.Co)return Yt().add(s.key);{let o=Yt();const c=r.ko.get(n);if(!c)return o;for(const h of c){const _=r.xo.get(h);o=o.unionWith(_.view.To)}return o}}function tH(i,n){return E1.apply(this,arguments)}function E1(){return(E1=(0,Ce.Z)(function*(i,n){const r=Be(i),s=yield mR(r.localStore,n.query,!0),o=n.view.So(s);return r.isPrimaryClient&&m1(r,n.targetId,o.vo),o})).apply(this,arguments)}function nH(i){return w1.apply(this,arguments)}function w1(){return(w1=(0,Ce.Z)(function*(i){const n=Be(i);return ZL(n.localStore).then(r=>xc(n,r))})).apply(this,arguments)}function rH(i,n,r,s){return C1.apply(this,arguments)}function C1(){return(C1=(0,Ce.Z)(function*(i,n,r,s){const o=Be(i),c=yield function(h,_){const w=Be(h),T=Be(w.In);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>T.Xt(S,_).next(R=>R?w.Qn.Pn(S,R):Re.resolve(null)))}(o.localStore,n);var _;null!==c?("pending"===r?yield Xv(o.remoteStore):"acknowledged"===r||"rejected"===r?(g1(o,n,s||null),p1(o,n),_=n,Be(Be(o.localStore).In).te(_)):Xe(),yield xc(o,c)):Me("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function b1(){return(b1=(0,Ce.Z)(function*(i,n){const r=Be(i);if(S1(r),A1(r),!0===n&&!0!==r.qo){const s=r.sharedClientState.getAllActiveQueryTargets(),o=yield pV(r,s.toArray());r.qo=!0,yield KM(r.remoteStore,!0);for(const c of o)ER(r.remoteStore,c)}else if(!1===n&&!1!==r.qo){const s=[];let o=Promise.resolve();r.ko.forEach((c,h)=>{r.sharedClientState.isLocalQueryTarget(h)?s.push(h):o=o.then(()=>(iE(r,h),Qv(r.localStore,h,!0))),Ub(r.remoteStore,h)}),yield o,yield pV(r,s),function(c){const h=Be(c);h.Fo.forEach((_,w)=>{Ub(h.remoteStore,w)}),h.Mo.us(),h.Fo=new Map,h.Oo=new Y(Ke.comparator)}(r),r.qo=!1,yield KM(r.remoteStore,!1)}})).apply(this,arguments)}function pV(i,n,r){return T1.apply(this,arguments)}function T1(){return(T1=(0,Ce.Z)(function*(i,n,r){const s=Be(i),o=[],c=[];for(const h of n){let _;const w=s.ko.get(h);if(w&&0!==w.length){_=yield Yv(s.localStore,xs(w[0]));for(const T of w){const S=s.xo.get(T),R=yield tH(s,S);R.snapshot&&c.push(R.snapshot)}}else{const T=yield WL(s.localStore,h);_=yield Yv(s.localStore,T),yield s1(s,gV(T),h,!1)}o.push(_)}return s.No.Tr(c),o})).apply(this,arguments)}function gV(i){return rR(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function sH(i){const n=Be(i);return Be(Be(n.localStore).persistence).pn()}function oH(i,n,r,s){return I1.apply(this,arguments)}function I1(){return(I1=(0,Ce.Z)(function*(i,n,r,s){const o=Be(i);if(o.qo)Me("SyncEngine","Ignoring unexpected query state notification.");else if(o.ko.has(n))switch(r){case"current":case"not-current":{const c=yield ZL(o.localStore),h=Sc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield xc(o,c,h);break}case"rejected":yield Qv(o.localStore,n,!0),iE(o,n,s);break;default:Xe()}})).apply(this,arguments)}function aH(i,n,r){return D1.apply(this,arguments)}function D1(){return(D1=(0,Ce.Z)(function*(i,n,r){const s=S1(i);if(s.qo){for(const o of n){if(s.ko.has(o)){Me("SyncEngine","Adding an already active target "+o);continue}const c=yield WL(s.localStore,o),h=yield Yv(s.localStore,c);yield s1(s,gV(c),h.targetId,!1),ER(s.remoteStore,h)}for(const o of r)s.ko.has(o)&&(yield Qv(s.localStore,o,!1).then(()=>{Ub(s.remoteStore,o),iE(s,o)}).catch(cm))}})).apply(this,arguments)}function S1(i){const n=Be(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=dV.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=eH.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=zj.bind(null,n),n.No.Tr=Vj.bind(null,n.eventManager),n.No.jo=Uj.bind(null,n.eventManager),n}function A1(i){const n=Be(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Kj.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=Yj.bind(null,n),n}class mV{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,Ce.Z)(function*(){r.N=Lb(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return HL(this.persistence,new jL,n.initialUser,this.N)}Go(n){return new mj(RM.Ns,this.N)}Wo(n){return new YL}terminate(){var n=this;return(0,Ce.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class _V extends mV{constructor(n,r,s){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,s=this;return(0,Ce.Z)(function*(){yield r().call(s,n),yield function(i){return IM.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,n),yield A1(s.Jo.syncEngine),yield Xv(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(n){return HL(this.persistence,new jL,n.initialUser,this.N)}zo(n){return new QB(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=wM(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new EM(this.synchronizeTabs,r,n.clientId,s,n.asyncQueue,JL(),vR(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new YL}}class uH extends _V{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,s=this;return(0,Ce.Z)(function*(){yield r().call(s,n);const o=s.Jo.syncEngine;s.sharedClientState instanceof OM&&(s.sharedClientState.syncEngine={_i:rH.bind(null,o),mi:oH.bind(null,o),gi:aH.bind(null,o),pn:sH.bind(null,o),wi:nH.bind(null,o)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var c=(0,Ce.Z)(function*(h){yield function(i,n){return b1.apply(this,arguments)}(s.Jo.syncEngine,h),s.gcScheduler&&(h&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):h||s.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}Wo(n){const r=JL();if(!OM.bt(r))throw new Ne(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=wM(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new OM(r,n.asyncQueue,s,n.clientId,n.initialUser)}}class R1{initialize(n,r){var s=this;return(0,Ce.Z)(function*(){s.localStore||(s.localStore=n.localStore,s.sharedClientState=n.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!n.synchronizeTabs),s.sharedClientState.onlineStateHandler=o=>hV(s.syncEngine,o,1),s.remoteStore.remoteSyncer.handleCredentialChange=Xj.bind(null,s.syncEngine),yield KM(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Lj}createDatastore(n){const r=Lb(n.databaseInfo.databaseId),s=new wj(n.databaseInfo);return new Tj(n.credentials,s,r)}createRemoteStore(n){return r=this.localStore,s=this.datastore,o=n.asyncQueue,c=_=>hV(this.syncEngine,_,0),h=QL.bt()?new QL:new yj,new Dj(r,s,o,c,h);var r,s,o,c,h}createSyncEngine(n,r){return function(s,o,c,h,_,w,T){const S=new qj(s,o,c,h,_,w);return T&&(S.qo=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,Ce.Z)(function*(r){const s=Be(r);Me("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield Jv(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function yV(i,n=10240){let r=0;return{read:()=>(0,Ce.Z)(function*(){if(r<i.byteLength){const s={value:i.slice(r,r+n),done:!1};return r+=n,s}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class CR{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class cH{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new Er,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,Ce.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,Ce.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,Ce.Z)(function*(){const r=yield n.na();if(null===r)return null;const s=n.ta.decode(r),o=Number(s);isNaN(o)&&n.sa(`length string (${s}) is not valid number`);const c=yield n.ia(o);return new Bj(JSON.parse(c),r.length+o)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,Ce.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const s=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),s})()}ia(n){var r=this;return(0,Ce.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const s=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),s})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,Ce.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const s=new Uint8Array(n.buffer.length+r.value.length);s.set(n.buffer),s.set(r.value,n.buffer.length),n.buffer=s}return r.done})()}}class dH{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,Ce.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Ne(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(o=(0,Ce.Z)(function*(c,h){const _=Be(c),w=Pb(_.N)+"/documents",T={documents:h.map(k=>xb(_.N,k))},S=yield _.Ki("BatchGetDocuments",w,T),R=new Map;S.forEach(k=>{const U=function(i,n){return"found"in n?function(r,s){gt(!!s.found);const o=ru(r,s.found.name),c=Kr(s.found.updateTime),h=new tn({mapValue:{fields:s.found.fields}});return fn.newFoundDocument(o,c,h)}(i,n):"missing"in n?function(r,s){gt(!!s.missing),gt(!!s.readTime);const o=ru(r,s.missing),c=Kr(s.readTime);return fn.newNoDocument(o,c)}(i,n):Xe()}(_.N,k);R.set(U.key.toString(),U)});const P=[];return h.forEach(k=>{const U=R.get(k.toString());gt(!!U),P.push(U)}),P}),function(c,h){return o.apply(this,arguments)})(r.datastore,n);var o;return s.forEach(o=>r.recordVersion(o)),s})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(n.toString())}delete(n){this.write(new A(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,Ce.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var s;n.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,o)=>{const c=Ke.fromPath(o);n.mutations.push(new N(c,n.precondition(c)))}),yield(s=(0,Ce.Z)(function*(o,c){const h=Be(o),_=Pb(h.N)+"/documents",w={writes:c.map(T=>cR(h.N,T))};yield h.Li("Commit",_,w)}),function(o,c){return s.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw Xe();r=Tt.min()}const s=this.readVersions.get(n.key.toString());if(s){if(!r.isEqual(s))throw new Ne(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?pr.updateTime(r):pr.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(Tt.min()))throw new Ne(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(r)}return pr.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class hH{constructor(n,r,s,o){this.asyncQueue=n,this.datastore=r,this.updateFunction=s,this.deferred=o,this.aa=5,this.rr=new MM(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,Ce.Z)(function*(){const r=new dH(n.datastore),s=n.ua(r);s&&s.then(o=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(o)}).catch(c=>{n.ha(c)}))}).catch(o=>{n.ha(o)})}))}ua(n){try{const r=this.updateFunction(n);return!Xl(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!Z(r)}return!1}}class fH{constructor(n,r,s){var o=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Zr.UNAUTHENTICATED,this.clientId=zO.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var c=(0,Ce.Z)(function*(h){Me("FirestoreClient","Received user=",h.uid),yield o.credentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,Ce.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(s){const o=tE(s,"Failed to shutdown persistence");r.reject(o)}})),r.promise}}function vV(i,n){return N1.apply(this,arguments)}function N1(){return(N1=(0,Ce.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let s=r.initialUser;i.setCredentialChangeListener(function(){var o=(0,Ce.Z)(function*(c){s.isEqual(c)||(yield $L(n.localStore,c),s=c)});return function(c){return o.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function EV(i,n){return x1.apply(this,arguments)}function x1(){return(x1=(0,Ce.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield P1(i);Me("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield n.initialize(r,s),i.setCredentialChangeListener(o=>{return(c=(0,Ce.Z)(function*(h,_){const w=Be(h);w.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const T=lf(w);w.Kr.add(3),yield Jv(w),T&&w.Wr.set("Unknown"),yield w.remoteSyncer.handleCredentialChange(_),w.Kr.delete(3),yield Vb(w)}),function(h,_){return c.apply(this,arguments)})(n.remoteStore,o);var c}),i.onlineComponents=n})).apply(this,arguments)}function P1(i){return O1.apply(this,arguments)}function O1(){return(O1=(0,Ce.Z)(function*(i){return i.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield vV(i,new mV)),i.offlineComponents})).apply(this,arguments)}function bR(i){return M1.apply(this,arguments)}function M1(){return(M1=(0,Ce.Z)(function*(i){return i.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield EV(i,new R1)),i.onlineComponents})).apply(this,arguments)}function wV(i){return P1(i).then(n=>n.persistence)}function k1(i){return P1(i).then(n=>n.localStore)}function CV(i){return bR(i).then(n=>n.remoteStore)}function F1(i){return bR(i).then(n=>n.syncEngine)}function sE(i){return L1.apply(this,arguments)}function L1(){return(L1=(0,Ce.Z)(function*(i){const n=yield bR(i),r=n.eventManager;return r.onListen=Gj.bind(null,n.syncEngine),r.onUnlisten=Wj.bind(null,n.syncEngine),r})).apply(this,arguments)}function bV(i,n,r={}){const s=new Er;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,c,h,_,w){const T=new CR({next:R=>{c.enqueueAndForget(()=>e1(o,S));const P=R.docs.has(h);!P&&R.fromCache?w.reject(new Ne(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&R.fromCache&&_&&"server"===_.source?w.reject(new Ne(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),S=new r1(Zh(h.path),T,{includeMetadataChanges:!0,uo:!0});return JM(o,S)}(yield sE(i),i.asyncQueue,n,r,s)})),s.promise}function TV(i,n,r={}){const s=new Er;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(o,c,h,_,w){const T=new CR({next:R=>{c.enqueueAndForget(()=>e1(o,S)),R.fromCache&&"server"===_.source?w.reject(new Ne(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),S=new r1(h,T,{includeMetadataChanges:!0,uo:!0});return JM(o,S)}(yield sE(i),i.asyncQueue,n,r,s)})),s.promise}class CH{constructor(n,r,s,o,c,h,_,w){this.databaseId=n,this.appId=r,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=_,this.useFetchStreams=w}}class oE{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof oE&&n.projectId===this.projectId&&n.database===this.database}}const IV=new Map;function V1(i,n,r){if(!r)throw new Ne(_e.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function DV(i,n,r,s){if(!0===n&&!0===s)throw new Ne(_e.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function SV(i){if(!Ke.isDocumentKey(i))throw new Ne(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function AV(i){if(Ke.isDocumentKey(i))throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function TR(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":Xe()}function Qt(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new Ne(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=TR(i);throw new Ne(_e.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function RV(i,n){if(n<=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class NV{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new Ne(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Ne(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,DV("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class Bb{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NV({}),this._settingsFrozen=!1,n instanceof oE?this._databaseId=n:(this._app=n,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ne(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oE(s.options.projectId)}(n))}get app(){if(!this._app)throw new Ne(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NV(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new $O;switch(r.type){case"gapi":const s=r.client;return gt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new WO(s,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Ne(_e.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IV.get(n);r&&(Me("ComponentProvider","Removing Datastore"),IV.delete(n),r.terminate())}(this),Promise.resolve()}}class Fn{constructor(n,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Fn(this.firestore,n,this._key)}}class Oi{constructor(n,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=n}withConverter(n){return new Oi(this.firestore,n,this._query)}}class su extends Oi{constructor(n,r,s){super(n,r,Zh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Fn(this.firestore,null,new Ke(n))}withConverter(n){return new su(this.firestore,n,this._path)}}function xV(i,n,...r){if(i=(0,L.m9)(i),V1("collection","path",n),i instanceof Bb){const s=en.fromString(n,...r);return AV(s),new su(i,null,s)}{if(!(i instanceof Fn||i instanceof su))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(en.fromString(n,...r));return AV(s),new su(i.firestore,null,s)}}function IR(i,n,...r){if(i=(0,L.m9)(i),1===arguments.length&&(n=zO.I()),V1("doc","path",n),i instanceof Bb){const s=en.fromString(n,...r);return SV(s),new Fn(i,null,new Ke(s))}{if(!(i instanceof Fn||i instanceof su))throw new Ne(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(en.fromString(n,...r));return SV(s),new Fn(i.firestore,i instanceof su?i.converter:null,new Ke(s))}}function PV(i,n){return i=(0,L.m9)(i),n=(0,L.m9)(n),(i instanceof Fn||i instanceof su)&&(n instanceof Fn||n instanceof su)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function OV(i,n){return i=(0,L.m9)(i),n=(0,L.m9)(n),i instanceof Oi&&n instanceof Oi&&i.firestore===n.firestore&&im(i._query,n._query)&&i.converter===n.converter}class IH{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new MM(this,"async_queue_retry"),this.Ea=()=>{const r=vR();r&&Me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=vR();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=vR();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new Er;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,Ce.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!am(r))throw r;Me("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(s=>{throw this.ma=s,this.ga=!1,tr("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=r,r}enqueueAfterDelay(n,r,s){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const o=QM.createAndSchedule(this,n,r,s,c=>this.Ra(c));return this._a.push(o),o}Ta(){this.ma&&Xe()}verifyOperationInProgress(){}ba(){var n=this;return(0,Ce.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function U1(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const s=n;for(const o of["next","error","complete"])if(o in s&&"function"==typeof s[o])return!0;return!1}(i)}class DH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,s){this._progressObserver={next:n,error:r,complete:s}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class ir extends Bb{constructor(n,r){super(n,r),this.type="firestore",this._queue=new IH,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||MV(this),this._firestoreClient.terminate()}}function Or(i){return i._firestoreClient||MV(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function MV(i){var n;const r=i._freezeSettings(),s=(c=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new CH(i._databaseId,c,i._persistenceKey,(_=r).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var c,_;i._firestoreClient=new fH(i._credentials,i._queue,s)}function kV(i,n,r){const s=new Er;return i.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield vV(i,r),yield EV(i,n),s.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===_e.FAILED_PRECONDITION||c.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),s.reject(o)}var c})).then(()=>s.promise)}function FV(i){if(i._initialized||i._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pc{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new Ne(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class ou{constructor(n){this._byteString=n}static fromBase64String(n){try{return new ou(Pr.fromBase64String(n))}catch(r){throw new Ne(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new ou(Pr.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class dm{constructor(n){this._methodName=n}}class DR{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new Ne(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new Ne(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Bt(this._lat,n._lat)||Bt(this._long,n._long)}}const FH=/^__.*__$/;class LH{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return null!==this.fieldMask?new m(n,this.data,this.fieldMask,r,this.fieldTransforms):new f(n,this.data,r,this.fieldTransforms)}}class LV{constructor(n,r,s){this.data=n,this.fieldMask=r,this.fieldTransforms=s}toMutation(n,r){return new m(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function VV(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class SR{constructor(n,r,s,o,c,h){this.settings=n,this.databaseId=r,this.N=s,this.ignoreUndefinedProperties=o,void 0===c&&this.Sa(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new SR(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:s,xa:!1});return o.ka(n),o}$a(n){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:s,xa:!1});return o.Sa(),o}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return RR(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(VV(this.Da)&&FH.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class VH{constructor(n,r,s){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=s||Lb(n)}Ba(n,r,s,o=!1){return new SR({Da:n,methodName:r,La:s,path:xr.emptyPath(),xa:!1,Ma:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function hm(i){const n=i._freezeSettings(),r=Lb(i._databaseId);return new VH(i._databaseId,!!n.ignoreUndefinedProperties,r)}function AR(i,n,r,s,o,c={}){const h=i.Ba(c.merge||c.mergeFields?2:0,n,r,o);$1("Data must be an object, but it was:",h,s);const _=jV(s,h);let w,T;if(c.merge)w=new $h(h.fieldMask),T=h.fieldTransforms;else if(c.mergeFields){const S=[];for(const R of c.mergeFields){const P=q1(n,R,r);if(!h.contains(P))throw new Ne(_e.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);$V(S,P)||S.push(P)}w=new $h(S),T=h.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,T=h.fieldTransforms;return new LH(new tn(_),w,T)}class jb extends dm{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof jb}}function UV(i,n,r){return new SR({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class B1 extends dm{_toFieldTransform(n){return new Uv(n.path,new sm)}isEqual(n){return n instanceof B1}}class UH extends dm{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=UV(this,n,!0),s=this.Ua.map(c=>fm(c,r)),o=new Yh(s);return new Uv(n.path,o)}isEqual(n){return this===n}}class BH extends dm{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=UV(this,n,!0),s=this.Ua.map(c=>fm(c,r)),o=new Qh(s);return new Uv(n.path,o)}isEqual(n){return this===n}}class jH extends dm{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new Jh(n.N,Ib(n.N,this.qa));return new Uv(n.path,r)}isEqual(n){return this===n}}function j1(i,n,r,s){const o=i.Ba(1,n,r);$1("Data must be an object, but it was:",o,s);const c=[],h=tn.empty();wc(s,(w,T)=>{const S=G1(n,w,r);T=(0,L.m9)(T);const R=o.$a(S);if(T instanceof jb)c.push(S);else{const P=fm(T,R);null!=P&&(c.push(S),h.set(S,P))}});const _=new $h(c);return new LV(h,_,o.fieldTransforms)}function H1(i,n,r,s,o,c){const h=i.Ba(1,n,r),_=[q1(n,s,r)],w=[o];if(c.length%2!=0)throw new Ne(_e.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<c.length;P+=2)_.push(q1(n,c[P])),w.push(c[P+1]);const T=[],S=tn.empty();for(let P=_.length-1;P>=0;--P)if(!$V(T,_[P])){const k=_[P];let U=w[P];U=(0,L.m9)(U);const J=h.$a(k);if(U instanceof jb)T.push(k);else{const me=fm(U,J);null!=me&&(T.push(k),S.set(k,me))}}const R=new $h(T);return new LV(S,R,h.fieldTransforms)}function BV(i,n,r,s=!1){return fm(r,i.Ba(s?4:3,n))}function fm(i,n){if(HV(i=(0,L.m9)(i)))return $1("Unsupported field value:",n,i),jV(i,n);if(i instanceof dm)return function(r,s){if(!VV(s.Da))throw s.Fa(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,s){const o=[];let c=0;for(const h of r){let _=fm(h,s.Oa(c));null==_&&(_={nullValue:"NULL_VALUE"}),o.push(_),c++}return{arrayValue:{values:o}}}(i,n)}return function(r,s){if(null===(r=(0,L.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Ib(s.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Un.fromDate(r);return{timestampValue:Nb(s.N,o)}}if(r instanceof Un){const o=new Un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nb(s.N,o)}}if(r instanceof DR)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ou)return{bytesValue:sL(s.N,r._byteString)};if(r instanceof Fn){const o=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw s.Fa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lM(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Fa(`Unsupported field value: ${TR(r)}`)}(i,n)}function jV(i,n){const r={};return YO(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):wc(i,(s,o)=>{const c=fm(o,n.Na(s));null!=c&&(r[s]=c)}),{mapValue:{fields:r}}}function HV(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Un||i instanceof DR||i instanceof ou||i instanceof Fn||i instanceof dm)}function $1(i,n,r){if(!HV(r)||"object"!=typeof(s=r)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=TR(r);throw n.Fa("an object"===s?i+" a custom object":i+" "+s)}var s}function q1(i,n,r){if((n=(0,L.m9)(n))instanceof Pc)return n._internalPath;if("string"==typeof n)return G1(i,n);throw RR("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const HH=new RegExp("[~\\*/\\[\\]]");function G1(i,n,r){if(n.search(HH)>=0)throw RR(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Pc(...n.split("."))._internalPath}catch(s){throw RR(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function RR(i,n,r,s,o){const c=s&&!s.isEmpty(),h=void 0!==o;let _=`Function ${n}() called with invalid data`;r&&(_+=" (via `toFirestore()`)"),_+=". ";let w="";return(c||h)&&(w+=" (found",c&&(w+=` in field ${s}`),h&&(w+=` in document ${o}`),w+=")"),new Ne(_e.INVALID_ARGUMENT,_+i+w)}function $V(i,n){return i.some(r=>r.isEqual(n))}class Hb{constructor(n,r,s,o,c){this._firestore=n,this._userDataWriter=r,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new $H(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(NR("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class $H extends Hb{data(){return super.data()}}function NR(i,n){return"string"==typeof n?G1(i,n):n instanceof Pc?n._internalPath:n._delegate._internalPath}class pm{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Oc extends Hb{constructor(n,r,s,o,c,h){super(n,r,s,o,h),this._firestore=n,this._firestoreImpl=n,this.metadata=c}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new $b(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const s=this._document.data.field(NR("DocumentSnapshot.get",n));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class $b extends Oc{data(n={}){return super.data(n)}}class cf{constructor(n,r,s,o){this._firestore=n,this._userDataWriter=r,this._snapshot=o,this.metadata=new pm(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(s=>{n.call(r,new $b(this._firestore,this._userDataWriter,s.key,s,new pm(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ne(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(h=>({type:"added",doc:new $b(s._firestore,s._userDataWriter,h.doc.key,h.doc,new pm(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const _=new $b(s._firestore,s._userDataWriter,h.doc.key,h.doc,new pm(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let w=-1,T=-1;return 0!==h.type&&(w=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),T=c.indexOf(h.doc.key)),{type:qH(h.type),doc:_,oldIndex:w,newIndex:T}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function qH(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function qV(i,n){return i instanceof Oc&&n instanceof Oc?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof cf&&n instanceof cf&&i._firestore===n._firestore&&OV(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function GV(i){if(Ns(i)&&0===i.explicitOrderBy.length)throw new Ne(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qb{}function df(i,...n){for(const r of n)i=r._apply(i);return i}class GH extends qb{constructor(n,r,s){super(),this.Ka=n,this.ja=r,this.Qa=s,this.type="where"}_apply(n){const r=hm(n.firestore),s=function(o,c,h,_,w,T,S){let R;if(w.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on FieldPath.documentId().`);if("in"===T||"not-in"===T){QV(S,T);const k=[];for(const U of S)k.push(YV(_,o,U));R={arrayValue:{values:k}}}else R=YV(_,o,S)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||QV(S,T),R=BV(h,"where",S,"in"===T||"not-in"===T);const P=di.create(w,T,R);return function(k,U){if(U.v()){const me=nu(k);if(null!==me&&!me.isEqual(U.field))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${me.toString()}' and '${U.field.toString()}'`);const Oe=Tc(k);null!==Oe&&JV(0,U.field,Oe)}const J=function(me,Oe){for(const je of me.filters)if(Oe.indexOf(je.op)>=0)return je.op;return null}(k,function(me){switch(me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==J)throw new Ne(_e.INVALID_ARGUMENT,J===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${J.toString()}' filters.`)}(o,P),P}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Oi(n.firestore,n.converter,function(o,c){const h=o.filters.concat([c]);return new ia(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(n._query,s))}}class ZH extends qb{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(s,o,c){if(null!==s.startAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Wh(o,c);return function(_,w){if(null===Tc(_)){const T=nu(_);null!==T&&JV(0,T,w.field)}}(s,h),h}(n._query,this.Ka,this.Wa);return new Oi(n.firestore,n.converter,function(s,o){const c=s.explicitOrderBy.concat([o]);return new ia(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(n._query,r))}}class WV extends qb{constructor(n,r,s){super(),this.type=n,this.Ga=r,this.za=s}_apply(n){return new Oi(n.firestore,n.converter,iR(n._query,this.Ga,this.za))}}class ZV extends qb{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=KV(n,this.type,this.Ha,this.Ja);return new Oi(n.firestore,n.converter,(o=r,new ia((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)));var s,o}}class zV extends qb{constructor(n,r,s){super(),this.type=n,this.Ha=r,this.Ja=s}_apply(n){const r=KV(n,this.type,this.Ha,this.Ja);return new Oi(n.firestore,n.converter,(o=r,new ia((s=n._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)));var s,o}}function KV(i,n,r,s){if(r[0]=(0,L.m9)(r[0]),r[0]instanceof Hb)return function(o,c,h,_,w){if(!_)throw new Ne(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const T=[];for(const S of po(o))if(S.field.isKeyField())T.push(Ov(c,_.key));else{const R=_.data.field(S.field);if(KA(R))throw new Ne(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const P=S.field.canonicalString();throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}T.push(R)}return new rm(T,w)}(i._query,i.firestore._databaseId,n,r[0]._document,s);{const o=hm(i.firestore);return function(c,h,_,w,T,S){const R=c.explicitOrderBy;if(T.length>R.length)throw new Ne(_e.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let k=0;k<T.length;k++){const U=T[k];if(R[k].field.isKeyField()){if("string"!=typeof U)throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof U}`);if(!zh(c)&&-1!==U.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${w}() must be a plain document ID, but '${U}' contains a slash.`);const J=c.path.child(en.fromString(U));if(!Ke.isDocumentKey(J))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${w}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const me=new Ke(J);P.push(Ov(h,me))}else{const J=BV(_,w,U);P.push(J)}}return new rm(P,S)}(i._query,i.firestore._databaseId,o,n,r,s)}}function YV(i,n,r){if("string"==typeof(r=(0,L.m9)(r))){if(""===r)throw new Ne(_e.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!zh(n)&&-1!==r.indexOf("/"))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=n.path.child(en.fromString(r));if(!Ke.isDocumentKey(s))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ov(i,new Ke(s))}if(r instanceof Fn)return Ov(i,r._key);throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${TR(r)}.`)}function QV(i,n){if(!Array.isArray(i)||0===i.length)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new Ne(_e.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function JV(i,n,r){if(!r.isEqual(n))throw new Ne(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class W1{convertValue(n,r="none"){switch(Wa(n)){case 0:return null;case 1:return n.booleanValue;case 2:return nr(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(zr(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw Xe()}}convertObject(n,r){const s={};return wc(n.fields,(o,c)=>{s[o]=this.convertValue(c,r)}),s}convertGeoPoint(n){return new DR(nr(n.latitude),nr(n.longitude))}convertArray(n,r){return(n.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(n,r){switch(r){case"previous":const s=pb(n);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Jg(n));default:return null}}convertTimestamp(n){const r=Jl(n);return new Un(r.seconds,r.nanos)}convertDocumentKey(n,r){const s=en.fromString(n);gt(yL(s));const o=new oE(s.get(1),s.get(3)),c=new Ke(s.popFirst(5));return o.isEqual(r)||tr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),c}}function xR(i,n,r){let s;return s=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,s}class t3 extends W1{constructor(n){super(),this.firestore=n}convertBytes(n){return new ou(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Fn(this.firestore,null,r)}}class XV{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=hm(n)}set(n,r,s){this._verifyNotCommitted();const o=hf(n,this._firestore),c=xR(o.converter,r,s),h=AR(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,s);return this._mutations.push(h.toMutation(o._key,pr.none())),this}update(n,r,s,...o){this._verifyNotCommitted();const c=hf(n,this._firestore);let h;return h="string"==typeof(r=(0,L.m9)(r))||r instanceof Pc?H1(this._dataReader,"WriteBatch.update",c._key,r,s,o):j1(this._dataReader,"WriteBatch.update",c._key,r),this._mutations.push(h.toMutation(c._key,pr.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=hf(n,this._firestore);return this._mutations=this._mutations.concat(new A(r._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hf(i,n){if((i=(0,L.m9)(i)).firestore!==n)throw new Ne(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class gm extends W1{constructor(n){super(),this.firestore=n}convertBytes(n){return new ou(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Fn(this.firestore,null,r)}}function eU(i,n,r){i=Qt(i,Fn);const s=Qt(i.firestore,ir),o=xR(i.converter,n,r);return aE(s,[AR(hm(s),"setDoc",i._key,o,null!==i.converter,r).toMutation(i._key,pr.none())])}function tU(i,n,r,...s){i=Qt(i,Fn);const o=Qt(i.firestore,ir),c=hm(o);let h;return h="string"==typeof(n=(0,L.m9)(n))||n instanceof Pc?H1(c,"updateDoc",i._key,n,r,s):j1(c,"updateDoc",i._key,n),aE(o,[h.toMutation(i._key,pr.exists(!0))])}function nU(i,...n){var r,s,o;i=(0,L.m9)(i);let c={includeMetadataChanges:!1},h=0;"object"!=typeof n[h]||U1(n[h])||(c=n[h],h++);const _={includeMetadataChanges:c.includeMetadataChanges};if(U1(n[h])){const R=n[h];n[h]=null===(r=R.next)||void 0===r?void 0:r.bind(R),n[h+1]=null===(s=R.error)||void 0===s?void 0:s.bind(R),n[h+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,T,S;if(i instanceof Fn)T=Qt(i.firestore,ir),S=Zh(i._key.path),w={next:R=>{n[h]&&n[h](Z1(T,i,R))},error:n[h+1],complete:n[h+2]};else{const R=Qt(i,Oi);T=Qt(R.firestore,ir),S=R._query;const P=new gm(T);w={next:k=>{n[h]&&n[h](new cf(T,P,R,k))},error:n[h+1],complete:n[h+2]},GV(i._query)}return function(R,P,k,U){const J=new CR(U),me=new r1(P,J,k);return R.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return JM(yield sE(R),me)})),()=>{J.Xo(),R.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return e1(yield sE(R),me)}))}}(Or(T),S,_,w)}function aE(i,n){return function(r,s){const o=new Er;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,n,r){return l1.apply(this,arguments)}(yield F1(r),s,o)})),o.promise}(Or(i),n)}function Z1(i,n,r){const s=r.docs.get(n._key),o=new gm(i);return new Oc(i,o,n._key,s,new pm(r.hasPendingWrites,r.fromCache),n.converter)}class d3 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=hm(n)}get(n){const r=hf(n,this._firestore),s=new t3(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Xe();const c=o[0];if(c.isFoundDocument())return new Hb(this._firestore,s,c.key,c,r.converter);if(c.isNoDocument())return new Hb(this._firestore,s,r._key,null,r.converter);throw Xe()})}set(n,r,s){const o=hf(n,this._firestore),c=xR(o.converter,r,s),h=AR(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,s);return this._transaction.set(o._key,h),this}update(n,r,s,...o){const c=hf(n,this._firestore);let h;return h="string"==typeof(r=(0,L.m9)(r))||r instanceof Pc?H1(this._dataReader,"Transaction.update",c._key,r,s,o):j1(this._dataReader,"Transaction.update",c._key,r),this._transaction.update(c._key,h),this}delete(n){const r=hf(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=hf(n,this._firestore),s=new gm(this._firestore);return super.get(n).then(o=>new Oc(this._firestore,s,r._key,o._document,new pm(!1,!1),r.converter))}}function z1(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function rU(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function iU(){if("undefined"==typeof atob)throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){Yg=i})(ka.SDK_VERSION),(0,ka._registerComponent)(new Ma.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),s=new ir(r,new fo(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),s._setSettings(n),s},"PUBLIC")),(0,ka.registerVersion)("@firebase/firestore","3.1.0",void 0);class Gb{constructor(n){this._delegate=n}static fromBase64String(n){return iU(),new Gb(ou.fromBase64String(n))}static fromUint8Array(n){return rU(),new Gb(ou.fromUint8Array(n))}toBase64(){return iU(),this._delegate.toBase64()}toUint8Array(){return rU(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function K1(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(i)}class C3{enableIndexedDbPersistence(n,r){return function(i,n){FV(i=Qt(i,ir));const r=Or(i),s=i._freezeSettings(),o=new R1;return kV(r,o,new _V(o,s.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){FV(i=Qt(i,ir));const n=Or(i),r=i._freezeSettings(),s=new R1;return kV(n,s,new uH(s,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new Ne(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new Er;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(r=(0,Ce.Z)(function*(s){if(!Ka.bt())return Promise.resolve();const o=s+"main";yield Ka.delete(o)}),function(s){return r.apply(this,arguments)})(wM(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class sU{constructor(n,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},n instanceof oE||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&Qg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,s={}){!function(i,n,r,s={}){var o;const c=(i=Qt(i,Bb))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==n&&Qg("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:`${n}:${r}`,ssl:!1})),s.mockUserToken){let h,_;if("string"==typeof s.mockUserToken)h=s.mockUserToken,_=Zr.MOCK_USER;else{h=(0,L.Sg)(s.mockUserToken,null===(o=i._app)||void 0===o?void 0:o.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new Ne(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Zr(w)}i._credentials=new qO(new ZA(h,_))}}(this._delegate,n,r,s)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){const n=yield wV(i),r=yield CV(i);return n.setNetworkEnabled(!0),function(s){const o=Be(s);return o.Kr.delete(0),Vb(o)}(r)}))}(Or(i=Qt(i,ir)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){const n=yield wV(i),r=yield CV(i);return n.setNetworkEnabled(!1),(s=(0,Ce.Z)(function*(o){const c=Be(o);c.Kr.add(0),yield Jv(c),c.Wr.set("Offline")}),function(o){return s.apply(this,arguments)})(r);var s}))}(Or(i=Qt(i,ir)))}(this._delegate)}enablePersistence(n){let r=!1,s=!1;return n&&(r=!!n.synchronizeTabs,s=!!n.experimentalForceOwningTab,DV("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new Er;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,n){return f1.apply(this,arguments)}(yield F1(n),r)})),r.promise}(Or(i=Qt(i,ir)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new CR(n);return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return s=yield sE(i),o=r,Be(s).Zr.add(o),void o.next();var s,o})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return s=yield sE(i),o=r,void Be(s).Zr.delete(o);var s,o}))}}(Or(i=Qt(i,ir)),U1(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new lE(this,xV(this._delegate,n))}catch(r){throw Xi(r,"collection()","Firestore.collection()")}}doc(n){try{return new oa(this,IR(this._delegate,n))}catch(r){throw Xi(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new es(this,function(i,n){if(i=Qt(i,Bb),V1("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Ne(_e.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oi(i,null,(r=n,new ia(en.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw Xi(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new Er;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const s=yield(o=i,bR(o).then(c=>c.datastore));var o;new hH(i.asyncQueue,s,n,r).run()})),r.promise}(Or(i),r=>n(new d3(i,r)))}(this._delegate,r=>n(new oU(this,r)))}batch(){return Or(this._delegate),new aU(new XV(this._delegate,n=>aE(this._delegate,n)))}loadBundle(n){return function(i,n){const r=Or(i=Qt(i,ir)),s=new DH;return function(i,n,r,s){const o=function(c,h){let _;return _="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,T){if(w instanceof Uint8Array)return yV(w,T);if(w instanceof ArrayBuffer)return yV(new Uint8Array(w),T);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new cH(w,h);var w}(r,Lb(n));i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(i,n,r){const s=Be(i);var o;(o=(0,Ce.Z)(function*(c,h,_){try{const w=yield h.getMetadata();if(yield function(P,k){const U=Be(P),J=Kr(k.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",me=>U.Je.getBundleMetadata(me,k.id)).then(me=>!!me&&me.createTime.compareTo(J)>=0)}(c.localStore,w))return yield h.close(),void _._completeWith((P=w,{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}));_._updateProgress(aV(w));const T=new jj(w,c.localStore,h.N);let S=yield h.Qo();for(;S;){const P=yield T.fo(S);P&&_._updateProgress(P),S=yield h.Qo()}const R=yield T.complete();yield xc(c,R.Tn,void 0),yield function(P,k){const U=Be(P);return U.persistence.runTransaction("Save bundle","readwrite",J=>U.Je.saveBundleMetadata(J,k))}(c.localStore,w),_._completeWith(R.progress)}catch(w){Qg("SyncEngine",`Loading bundle failed with ${w}`),_._failWith(w)}var P}),function(c,h,_){return o.apply(this,arguments)})(s,n,r).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield F1(i),o,s)}))}(r,i._databaseId,n,s),s}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(r,s){const o=Be(r);return o.persistence.runTransaction("Get named query","readonly",c=>o.Je.getNamedQuery(c,s))}(yield k1(i),n)}))}(Or(i=Qt(i,ir)),n).then(r=>r?new Oi(i,null,r.query):null)}(this._delegate,n).then(r=>r?new es(this,r):null)}}class PR extends W1{constructor(n){super(),this.firestore=n}convertBytes(n){return new Gb(new ou(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return oa.forKey(r,this.firestore,null)}}class oU{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new PR(n)}get(n){const r=_m(n);return this._delegate.get(r).then(s=>new Wb(this._firestore,new Oc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(n,r,s){const o=_m(n);return s?(z1("Transaction.set",s),this._delegate.set(o,r,s)):this._delegate.set(o,r),this}update(n,r,s,...o){const c=_m(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...o),this}delete(n){const r=_m(n);return this._delegate.delete(r),this}}class aU{constructor(n){this._delegate=n}set(n,r,s){const o=_m(n);return s?(z1("WriteBatch.set",s),this._delegate.set(o,r,s)):this._delegate.set(o,r),this}update(n,r,s,...o){const c=_m(n);return 2===arguments.length?this._delegate.update(c,r):this._delegate.update(c,r,s,...o),this}delete(n){const r=_m(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class mm{constructor(n,r,s){this._firestore=n,this._userDataWriter=r,this._delegate=s}fromFirestore(n,r){const s=new $b(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new Zb(this._firestore,s),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const s=mm.INSTANCES;let o=s.get(n);o||(o=new WeakMap,s.set(n,o));let c=o.get(r);return c||(c=new mm(n,new PR(n),r),o.set(r,c)),c}}mm.INSTANCES=new WeakMap;class oa{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new PR(n)}static forPath(n,r,s){if(n.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new oa(r,new Fn(r._delegate,s,new Ke(n)))}static forKey(n,r,s){return new oa(r,new Fn(r._delegate,s,n))}get id(){return this._delegate.id}get parent(){return new lE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new lE(this.firestore,xV(this._delegate,n))}catch(r){throw Xi(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,L.m9)(n))instanceof Fn&&PV(this._delegate,n)}set(n,r){r=z1("DocumentReference.set",r);try{return r?eU(this._delegate,n,r):eU(this._delegate,n)}catch(s){throw Xi(s,"setDoc()","DocumentReference.set()")}}update(n,r,...s){try{return 1===arguments.length?tU(this._delegate,n):tU(this._delegate,n,r,...s)}catch(o){throw Xi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return aE(Qt(i.firestore,ir),[new A(i._key,pr.none())])}(this._delegate)}onSnapshot(...n){const r=lU(n),s=uU(n,o=>new Wb(this.firestore,new Oc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return nU(this._delegate,r,s)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Qt(i,Fn);const n=Qt(i.firestore,ir),r=Or(n),s=new gm(n);return function(i,n){const r=new Er;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(s=(0,Ce.Z)(function*(o,c,h){try{const _=yield function(w,T){const S=Be(w);return S.persistence.runTransaction("read document","readonly",R=>S.Qn.An(R,T))}(o,c);_.isFoundDocument()?h.resolve(_):_.isNoDocument()?h.resolve(null):h.reject(new Ne(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const w=tE(_,`Failed to get document '${c} from cache`);h.reject(w)}}),function(o,c,h){return s.apply(this,arguments)})(yield k1(i),n,r);var s})),r.promise}(r,i._key).then(o=>new Oc(n,s,i._key,o,new pm(null!==o&&o.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Qt(i,Fn);const n=Qt(i.firestore,ir);return bV(Or(n),i._key,{source:"server"}).then(r=>Z1(n,i,r))}(this._delegate):function(i){i=Qt(i,Fn);const n=Qt(i.firestore,ir);return bV(Or(n),i._key).then(r=>Z1(n,i,r))}(this._delegate),r.then(s=>new Wb(this.firestore,new Oc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(n){return new oa(this.firestore,this._delegate.withConverter(n?mm.getInstance(this.firestore,n):null))}}function Xi(i,n,r){return i.message=i.message.replace(n,r),i}function lU(i){for(const n of i)if("object"==typeof n&&!K1(n))return n;return{}}function uU(i,n){var r,s;let o;return o=K1(i[0])?i[0]:K1(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{o.next&&o.next(n(c))},error:null===(r=o.error)||void 0===r?void 0:r.bind(o),complete:null===(s=o.complete)||void 0===s?void 0:s.bind(o)}}class Wb{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return qV(this._delegate,n._delegate)}}class Zb extends Wb{data(n){const r=this._delegate.data(n);return function(i,n){i||Xe()}(void 0!==r),r}}class es{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new PR(n)}where(n,r,s){try{return new es(this.firestore,df(this._delegate,function(i,n,r){const s=n,o=NR("where",i);return new GH(o,s,r)}(n,r,s)))}catch(o){throw Xi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new es(this.firestore,df(this._delegate,function(i,n="asc"){const r=n,s=NR("orderBy",i);return new ZH(s,r)}(n,r)))}catch(s){throw Xi(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new es(this.firestore,df(this._delegate,function(i){return RV("limit",i),new WV("limit",i,"F")}(n)))}catch(r){throw Xi(r,"limit()","Query.limit()")}}limitToLast(n){try{return new es(this.firestore,df(this._delegate,function(i){return RV("limitToLast",i),new WV("limitToLast",i,"L")}(n)))}catch(r){throw Xi(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new es(this.firestore,df(this._delegate,function(...i){return new ZV("startAt",i,!0)}(...n)))}catch(r){throw Xi(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new es(this.firestore,df(this._delegate,function(...i){return new ZV("startAfter",i,!1)}(...n)))}catch(r){throw Xi(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new es(this.firestore,df(this._delegate,function(...i){return new zV("endBefore",i,!0)}(...n)))}catch(r){throw Xi(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new es(this.firestore,df(this._delegate,function(...i){return new zV("endAt",i,!1)}(...n)))}catch(r){throw Xi(r,"endAt()","Query.endAt()")}}isEqual(n){return OV(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=Qt(i,Oi);const n=Qt(i.firestore,ir),r=Or(n),s=new gm(n);return function(i,n){const r=new Er;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(s=(0,Ce.Z)(function*(o,c,h){try{const _=yield mR(o,c,!0),w=new cV(c,_.Gn),T=w.Io(_.documents),S=w.applyChanges(T,!1);h.resolve(S.snapshot)}catch(_){const w=tE(_,`Failed to execute query '${c} against cache`);h.reject(w)}}),function(o,c,h){return s.apply(this,arguments)})(yield k1(i),n,r);var s})),r.promise}(r,i._query).then(o=>new cf(n,s,i,o))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Qt(i,Oi);const n=Qt(i.firestore,ir),r=Or(n),s=new gm(n);return TV(r,i._query,{source:"server"}).then(o=>new cf(n,s,i,o))}(this._delegate):function(i){i=Qt(i,Oi);const n=Qt(i.firestore,ir),r=Or(n),s=new gm(n);return GV(i._query),TV(r,i._query).then(o=>new cf(n,s,i,o))}(this._delegate),r.then(s=>new Y1(this.firestore,new cf(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...n){const r=lU(n),s=uU(n,o=>new Y1(this.firestore,new cf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return nU(this._delegate,r,s)}withConverter(n){return new es(this.firestore,this._delegate.withConverter(n?mm.getInstance(this.firestore,n):null))}}class T3{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Zb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Y1{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new Zb(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new T3(this._firestore,r))}forEach(n,r){this._delegate.forEach(s=>{n.call(r,new Zb(this._firestore,s))})}isEqual(n){return qV(this._delegate,n._delegate)}}class lE extends es{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new oa(this.firestore,n):null}doc(n){try{return new oa(this.firestore,void 0===n?IR(this._delegate):IR(this._delegate,n))}catch(r){throw Xi(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=Qt(i.firestore,ir),s=IR(i),o=xR(i.converter,n);return aE(r,[AR(hm(i.firestore),"addDoc",s._key,o,null!==i.converter,{}).toMutation(s._key,pr.exists(!1))]).then(()=>s)}(this._delegate,n).then(r=>new oa(this.firestore,r))}isEqual(n){return PV(this._delegate,n._delegate)}withConverter(n){return new lE(this.firestore,this._delegate.withConverter(n?mm.getInstance(this.firestore,n):null))}}function _m(i){return Qt(i,Fn)}class Q1{constructor(...n){this._delegate=new Pc(...n)}static documentId(){return new Q1(xr.keyField().canonicalString())}isEqual(n){return(n=(0,L.m9)(n))instanceof Pc&&this._delegate._internalPath.isEqual(n._internalPath)}}class ym{constructor(n){this._delegate=n}static serverTimestamp(){const n=new B1("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new ym(n)}static delete(){const n=new jb("deleteField");return n._methodName="FieldValue.delete",new ym(n)}static arrayUnion(...n){const r=function(...i){return new UH("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new ym(r)}static arrayRemove(...n){const r=function(...i){return new BH("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new ym(r)}static increment(n){const r=function(i){return new jH("increment",i)}(n);return r._methodName="FieldValue.increment",new ym(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const I3={Firestore:sU,GeoPoint:DR,Timestamp:Un,Blob:Gb,Transaction:oU,WriteBatch:aU,DocumentReference:oa,DocumentSnapshot:Wb,Query:es,QueryDocumentSnapshot:Zb,QuerySnapshot:Y1,CollectionReference:lE,FieldPath:Q1,FieldValue:ym,setLogLevel:function(i){!function(i){Ec.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function cU(i,n){return function(i,n=Ud.P){return new zn.y(r=>{let s;return null!=n?n.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},r)}):s=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=s&&s()}})}(i,n)}function J1(i,n){return cU(i,n).pipe((0,rt.U)(r=>({payload:r,type:"query"})))}function OR(i,n){return J1(i,n).pipe(Ky(void 0),A0(),(0,rt.U)(([r,s])=>{const o=s.payload.docChanges(),c=o.map(h=>({type:h.type,payload:h}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((h,_)=>{const w=o.find(S=>S.doc.ref.isEqual(h.ref)),T=null==r?void 0:r.payload.docs.find(S=>S.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&T&&JSON.stringify(T.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:h}})}),c}))}function dU(i,n,r){return OR(i,r).pipe($u((s,o)=>function(i,n,r){return n.forEach(s=>{r.indexOf(s.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return X1(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return X1(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return X1(i,n.oldIndex,1)}return i}(i,s))}),i}(s,o.map(c=>c.payload),n),[]),$_(),(0,rt.U)(s=>s.map(o=>({type:o.type,payload:o}))))}function X1(i,n,r,...s){const o=i.slice();return o.splice(n,r,...s),o}function hU(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}!function(i){(function(i,n){i.INTERNAL.registerComponent(new Ma.wA("firestore-compat",r=>((n,r)=>new sU(n,r,new C3))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},I3)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(jw.Z);class fU{constructor(n,r,s){this.ref=n,this.query=r,this.afs=s}stateChanges(n){let r=OR(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,rt.U)(s=>s.filter(o=>n.indexOf(o.type)>-1)))),r.pipe(Ky(void 0),A0(),ta(([s,o])=>o.length>0||!s),(0,rt.U)(([s,o])=>o),Wt.iC)}auditTrail(n){return this.stateChanges(n).pipe($u((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=hU(n);return dU(this.query,r,this.afs.schedulers.outsideAngular).pipe(Wt.iC)}valueChanges(n={}){return J1(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(r=>r.payload.docs.map(s=>n.idField?Object.assign(Object.assign({},s.data()),{[n.idField]:s.id}):s.data())),Wt.iC)}get(n){return(0,on.D)(this.query.get(n)).pipe(Wt.iC)}add(n){return this.ref.add(n)}doc(n){return new pU(this.ref.doc(n),this.afs)}}class pU{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const s=this.ref.collection(n),{ref:o,query:c}=_U(s,r);return new fU(o,c,this.afs)}snapshotChanges(){return function(i,n){return cU(i,n).pipe(Ky(void 0),A0(),(0,rt.U)(([r,s])=>s.exists?(null==r?void 0:r.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wt.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,on.D)(this.ref.get(n)).pipe(Wt.iC)}}class P3{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?OR(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(r=>r.filter(s=>n.indexOf(s.type)>-1)),ta(r=>r.length>0),Wt.iC):OR(this.query,this.afs.schedulers.outsideAngular).pipe(Wt.iC)}auditTrail(n){return this.stateChanges(n).pipe($u((r,s)=>[...r,...s],[]))}snapshotChanges(n){const r=hU(n);return dU(this.query,r,this.afs.schedulers.outsideAngular).pipe(Wt.iC)}valueChanges(n={}){return J1(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(s=>s.payload.docs.map(o=>n.idField?Object.assign({[n.idField]:o.id},o.data()):o.data())),Wt.iC)}get(n){return(0,on.D)(this.query.get(n)).pipe(Wt.iC)}}const gU=new g.OlP("angularfire2.enableFirestorePersistence"),mU=new g.OlP("angularfire2.firestore.persistenceSettings"),O3=new g.OlP("angularfire2.firestore.settings"),M3=new g.OlP("angularfire2.firestore.use-emulator");function _U(i,n=(r=>r)){return{query:n(i),ref:i}}let ek=(()=>{class i{constructor(r,s,o,c,h,_,w,T,S,R,P,k,U,J,me,Oe){this.schedulers=w;const je=(0,Nn.on)(r,_,s),$e=S;R&&Wy(je,_,P,U,J,me,k,Oe),[this.firestore,this.persistenceEnabled$]=(0,Wt.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const Ge=_.runOutsideAngular(()=>je.firestore());if(c&&Ge.settings(c),$e&&Ge.useEmulator(...$e),o&&!Gc(h)){const un=()=>{try{return(0,on.D)(Ge.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(or){return"undefined"!=typeof console&&console.warn(or),(0,lt.of)(!1)}};return[Ge,_.runOutsideAngular(un)]}return[Ge,(0,lt.of)(!1)]},[c,$e,o])}collection(r,s){let o;o="string"==typeof r?this.firestore.collection(r):r;const{ref:c,query:h}=_U(o,s),_=this.schedulers.ngZone.run(()=>c);return new fU(_,h,this)}collectionGroup(r,s){const o=s||(h=>h),c=this.firestore.collectionGroup(r);return new P3(o(c),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const o=this.schedulers.ngZone.run(()=>s);return new pU(o,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Nn.Dh),g.LFG(Nn.xv,8),g.LFG(gU,8),g.LFG(O3,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Wt.HU),g.LFG(mU,8),g.LFG(M3,8),g.LFG(Dg,8),g.LFG(_0,8),g.LFG(y0,8),g.LFG(v0,8),g.LFG(E0,8),g.LFG(w0,8),g.LFG(C0,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),yU=(()=>{class i{constructor(){US.Z.registerVersion("angularfire",Wt.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:gU,useValue:!0},{provide:mU,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[ek]}),i})();const vU_firebaseConfig={apiKey:"AIzaSyDBqGfMtoWFfse3BujOQlLrZl0nikC8Xvo",authDomain:"primerparcial-47317.firebaseapp.com",projectId:"primerparcial-47317",storageBucket:"primerparcial-47317.appspot.com",messagingSenderId:"377983552070",appId:"1:377983552070:web:63c2e029263b1b1347d847"};class Ya extends oi.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new PS.N;return this._value}next(n){super.next(this._value=n)}}var k3=V(6693);const EU={};class L3{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new V3(n,this.resultSelector))}}class V3 extends Oa.L{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(EU),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let s=0;s<r;s++){const o=n[s];this.add((0,xl.D)(this,o,o,s))}}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,s,o,c){const h=this.values,w=this.toRespond?h[s]===EU?--this.toRespond:this.toRespond:0;h[s]=r,0===w&&(this.resultSelector?this._tryResultSelector(h):this.destination.next(h.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(s){return void this.destination.error(s)}this.destination.next(r)}}function wU(i){return new zn.y(n=>{let r;try{r=i()}catch(o){return void n.error(o)}return(r?(0,on.D)(r):(0,ql.c)()).subscribe(n)})}var U3=V(2441);function vm(i){return function(r){const s=new B3(i),o=r.lift(s);return s.caught=o}}class B3{constructor(n){this.selector=n}call(n,r){return r.subscribe(new j3(n,this.selector,this.caught))}}class j3 extends Oa.L{constructor(n,r,s){super(n),this.selector=r,this.caught=s}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const s=new Uw.d(this,void 0,void 0);this.add(s);const o=(0,xl.D)(this,r,void 0,void 0,s);o!==s&&this.add(o)}}}var ts=V(9773);function uE(i,n){return(0,ts.zg)(i,n,1)}function tk(i){return function(r){return 0===i?(0,ql.c)():r.lift(new H3(i))}}class H3{constructor(n){if(this.total=n,this.total<0)throw new MS}call(n,r){return r.subscribe(new $3(n,this.total))}}class $3 extends Es.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,s=this.total,o=this.count++;r.length<s?r.push(n):r[o%s]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const s=this.count>=this.total?this.total:this.count,o=this.ring;for(let c=0;c<s;c++){const h=r++%s;n.next(o[h])}}n.complete()}}var _o=V(3342),G3=V(1307);class Z3{constructor(n){this.callback=n}call(n,r){return r.subscribe(new z3(n,this.callback))}}class z3 extends Es.L{constructor(n,r){super(n),this.add(new xS.w(r))}}class Mc{constructor(n,r){this.id=n,this.url=r}}class nk extends Mc{constructor(n,r,s="imperative",o=null){super(n,r),this.navigationTrigger=s,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zb extends Mc{constructor(n,r,s){super(n,r),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class CU extends Mc{constructor(n,r,s){super(n,r),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class K3 extends Mc{constructor(n,r,s){super(n,r),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Y3 extends Mc{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q3 extends Mc{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J3 extends Mc{constructor(n,r,s,o,c){super(n,r),this.urlAfterRedirects=s,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class X3 extends Mc{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e$ extends Mc{constructor(n,r,s,o){super(n,r),this.urlAfterRedirects=s,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bU{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TU{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class t${constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n${constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r${constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i${constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IU{constructor(n,r,s){this.routerEvent=n,this.position=r,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class s${constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function cE(i){return new s$(i)}const DU="ngNavigationCancelingError";function rk(i){const n=Error("NavigationCancelingError: "+i);return n[DU]=!0,n}function a$(i,n,r){const s=r.path.split("/");if(s.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||s.length<i.length))return null;const o={};for(let c=0;c<s.length;c++){const h=s[c],_=i[c];if(h.startsWith(":"))o[h.substring(1)]=_;else if(h!==_.path)return null}return{consumed:i.slice(0,s.length),posParams:o}}function au(i,n){const r=i?Object.keys(i):void 0,s=n?Object.keys(n):void 0;if(!r||!s||r.length!=s.length)return!1;let o;for(let c=0;c<r.length;c++)if(o=r[c],!SU(i[o],n[o]))return!1;return!0}function SU(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),s=[...n].sort();return r.every((o,c)=>s[c]===o)}return i===n}function AU(i){return Array.prototype.concat.apply([],i)}function RU(i){return i.length>0?i[i.length-1]:null}function fi(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function lu(i){return(0,g.CqO)(i)?i:(0,g.QGY)(i)?(0,on.D)(Promise.resolve(i)):(0,lt.of)(i)}const c$={exact:function PU(i,n,r){if(!wm(i.segments,n.segments)||!MR(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children)if(!i.children[s]||!PU(i.children[s],n.children[s],r))return!1;return!0},subset:OU},NU={exact:function(i,n){return au(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>SU(i[r],n[r]))},ignored:()=>!0};function xU(i,n,r){return c$[r.paths](i.root,n.root,r.matrixParams)&&NU[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function OU(i,n,r){return MU(i,n,n.segments,r)}function MU(i,n,r,s){if(i.segments.length>r.length){const o=i.segments.slice(0,r.length);return!(!wm(o,r)||n.hasChildren()||!MR(o,r,s))}if(i.segments.length===r.length){if(!wm(i.segments,r)||!MR(i.segments,r,s))return!1;for(const o in n.children)if(!i.children[o]||!OU(i.children[o],n.children[o],s))return!1;return!0}{const o=r.slice(0,i.segments.length),c=r.slice(i.segments.length);return!!(wm(i.segments,o)&&MR(i.segments,o,s)&&i.children[jt])&&MU(i.children[jt],n,c,s)}}function MR(i,n,r){return n.every((s,o)=>NU[r](i[o].parameters,s.parameters))}class Em{constructor(n,r,s){this.root=n,this.queryParams=r,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cE(this.queryParams)),this._queryParamMap}toString(){return g$.serialize(this)}}class Gt{constructor(n,r){this.segments=n,this.children=r,this.parent=null,fi(r,(s,o)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kR(this)}}class Kb{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=cE(this.parameters)),this._parameterMap}toString(){return VU(this)}}function wm(i,n){return i.length===n.length&&i.every((r,s)=>r.path===n[s].path)}class ik{}class kU{parse(n){const r=new T$(n);return new Em(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){return`${`/${Yb(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const s=i[r];return Array.isArray(s)?s.map(o=>`${FR(r)}=${FR(o)}`).join("&"):`${FR(r)}=${FR(s)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${function(i){return encodeURI(i)}(n.fragment)}`:""}`}}const g$=new kU;function kR(i){return i.segments.map(n=>VU(n)).join("/")}function Yb(i,n){if(!i.hasChildren())return kR(i);if(n){const r=i.children[jt]?Yb(i.children[jt],!1):"",s=[];return fi(i.children,(o,c)=>{c!==jt&&s.push(`${c}:${Yb(o,!1)}`)}),s.length>0?`${r}(${s.join("//")})`:r}{const r=function(i,n){let r=[];return fi(i.children,(s,o)=>{o===jt&&(r=r.concat(n(s,o)))}),fi(i.children,(s,o)=>{o!==jt&&(r=r.concat(n(s,o)))}),r}(i,(s,o)=>o===jt?[Yb(i.children[jt],!1)]:[`${o}:${Yb(s,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[jt]?`${kR(i)}/${r[0]}`:`${kR(i)}/(${r.join("//")})`}}function FU(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function FR(i){return FU(i).replace(/%3B/gi,";")}function sk(i){return FU(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function LR(i){return decodeURIComponent(i)}function LU(i){return LR(i.replace(/\+/g,"%20"))}function VU(i){return`${sk(i.path)}${function(i){return Object.keys(i).map(n=>`;${sk(n)}=${sk(i[n])}`).join("")}(i.parameters)}`}const v$=/^[^\/()?;=#]+/;function VR(i){const n=i.match(v$);return n?n[0]:""}const E$=/^[^=?&#]+/,C$=/^[^?&#]+/;class T${constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gt([],{}):new Gt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(s[jt]=new Gt(n,r)),s}parseSegment(){const n=VR(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Kb(LR(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=VR(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const o=VR(this.remaining);o&&(s=o,this.capture(s))}n[LR(r)]=LR(s)}parseQueryParam(n){const r=function(i){const n=i.match(E$);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let s="";if(this.consumeOptional("=")){const h=function(i){const n=i.match(C$);return n?n[0]:""}(this.remaining);h&&(s=h,this.capture(s))}const o=LU(r),c=LU(s);if(n.hasOwnProperty(o)){let h=n[o];Array.isArray(h)||(h=[h],n[o]=h),h.push(c)}else n[o]=c}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=VR(this.remaining),o=this.remaining[s.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;s.indexOf(":")>-1?(c=s.substr(0,s.indexOf(":")),this.capture(c),this.capture(":")):n&&(c=jt);const h=this.parseChildren();r[c]=1===Object.keys(h).length?h[jt]:new Gt([],h),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class UU{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=ok(n,this._root);return r?r.children.map(s=>s.value):[]}firstChild(n){const r=ok(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=ak(n,this._root);return r.length<2?[]:r[r.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return ak(n,this._root).map(r=>r.value)}}function ok(i,n){if(i===n.value)return n;for(const r of n.children){const s=ok(i,r);if(s)return s}return null}function ak(i,n){if(i===n.value)return[n];for(const r of n.children){const s=ak(i,r);if(s.length)return s.unshift(n),s}return[]}class kc{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function Qb(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class BU extends UU{constructor(n,r){super(n),this.snapshot=r,lk(this,n)}toString(){return this.snapshot.toString()}}function jU(i,n){const r=function(i,n){const h=new UR([],{},{},"",{},jt,n,null,i.root,-1,{});return new $U("",new kc(h,[]))}(i,n),s=new Ya([new Kb("",{})]),o=new Ya({}),c=new Ya({}),h=new Ya({}),_=new Ya(""),w=new dE(s,o,h,_,c,jt,n,r.root);return w.snapshot=r.root,new BU(new kc(w,[]),r)}class dE{constructor(n,r,s,o,c,h,_,w){this.url=n,this.params=r,this.queryParams=s,this.fragment=o,this.data=c,this.outlet=h,this.component=_,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(n=>cE(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(n=>cE(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function HU(i,n="emptyOnly"){const r=i.pathFromRoot;let s=0;if("always"!==n)for(s=r.length-1;s>=1;){const o=r[s],c=r[s-1];if(o.routeConfig&&""===o.routeConfig.path)s--;else{if(c.component)break;s--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(s))}class UR{constructor(n,r,s,o,c,h,_,w,T,S,R){this.url=n,this.params=r,this.queryParams=s,this.fragment=o,this.data=c,this.outlet=h,this.component=_,this.routeConfig=w,this._urlSegment=T,this._lastPathIndex=S,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cE(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cE(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $U extends UU{constructor(n,r){super(r),this.url=n,lk(this,r)}toString(){return qU(this._root)}}function lk(i,n){n.value._routerState=i,n.children.forEach(r=>lk(i,r))}function qU(i){const n=i.children.length>0?` { ${i.children.map(qU).join(", ")} } `:"";return`${i.value}${n}`}function uk(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,au(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),au(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!au(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),au(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function ck(i,n){return au(i.params,n.params)&&function(i,n){return wm(i,n)&&i.every((r,s)=>au(r.parameters,n[s].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||ck(i.parent,n.parent))}function BR(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const s=r.value;s._futureSnapshot=n.value;const o=function(i,n,r){return n.children.map(s=>{for(const o of r.children)if(i.shouldReuseRoute(s.value,o.value.snapshot))return BR(i,s,o);return BR(i,s)})}(i,n,r);return new kc(s,o)}{if(i.shouldAttach(n.value)){const c=i.retrieve(n.value);if(null!==c){const h=c.route;return GU(n,h),h}}const s=function(i){return new dE(new Ya(i.url),new Ya(i.params),new Ya(i.queryParams),new Ya(i.fragment),new Ya(i.data),i.outlet,i.component,i)}(n.value),o=n.children.map(c=>BR(i,c));return new kc(s,o)}}function GU(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)GU(i.children[r],n.children[r])}function jR(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Jb(i){return"object"==typeof i&&null!=i&&i.outlets}function dk(i,n,r,s,o){let c={};return s&&fi(s,(h,_)=>{c[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),new Em(r.root===i?n:WU(r.root,i,n),c,o)}function WU(i,n,r){const s={};return fi(i.children,(o,c)=>{s[c]=o===n?r:WU(o,n,r)}),new Gt(i.segments,s)}class ZU{constructor(n,r,s){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=s,n&&s.length>0&&jR(s[0]))throw new Error("Root segment cannot have matrix parameters");const o=s.find(Jb);if(o&&o!==RU(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hk{constructor(n,r,s){this.segmentGroup=n,this.processChildren=r,this.index=s}}function zU(i,n,r){if(i||(i=new Gt([],{})),0===i.segments.length&&i.hasChildren())return HR(i,n,r);const s=function(i,n,r){let s=0,o=n;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<i.segments.length;){if(s>=r.length)return c;const h=i.segments[o],_=r[s];if(Jb(_))break;const w=`${_}`,T=s<r.length-1?r[s+1]:null;if(o>0&&void 0===w)break;if(w&&T&&"object"==typeof T&&void 0===T.outlets){if(!YU(w,T,h))return c;s+=2}else{if(!YU(w,{},h))return c;s++}o++}return{match:!0,pathIndex:o,commandIndex:s}}(i,n,r),o=r.slice(s.commandIndex);if(s.match&&s.pathIndex<i.segments.length){const c=new Gt(i.segments.slice(0,s.pathIndex),{});return c.children[jt]=new Gt(i.segments.slice(s.pathIndex),i.children),HR(c,0,o)}return s.match&&0===o.length?new Gt(i.segments,{}):s.match&&!i.hasChildren()?fk(i,n,r):s.match?HR(i,0,o):fk(i,n,r)}function HR(i,n,r){if(0===r.length)return new Gt(i.segments,{});{const s=function(i){return Jb(i[0])?i[0].outlets:{[jt]:i}}(r),o={};return fi(s,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[h]=zU(i.children[h],n,c))}),fi(i.children,(c,h)=>{void 0===s[h]&&(o[h]=c)}),new Gt(i.segments,o)}}function fk(i,n,r){const s=i.segments.slice(0,n);let o=0;for(;o<r.length;){const c=r[o];if(Jb(c)){const w=F$(c.outlets);return new Gt(s,w)}if(0===o&&jR(r[0])){s.push(new Kb(i.segments[n].path,KU(r[0]))),o++;continue}const h=Jb(c)?c.outlets[jt]:`${c}`,_=o<r.length-1?r[o+1]:null;h&&_&&jR(_)?(s.push(new Kb(h,KU(_))),o+=2):(s.push(new Kb(h,{})),o++)}return new Gt(s,{})}function F$(i){const n={};return fi(i,(r,s)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[s]=fk(new Gt([],{}),0,r))}),n}function KU(i){const n={};return fi(i,(r,s)=>n[s]=`${r}`),n}function YU(i,n,r){return i==r.path&&au(n,r.parameters)}class V${constructor(n,r,s,o){this.routeReuseStrategy=n,this.futureState=r,this.currState=s,this.forwardEvent=o}activate(n){const r=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,s,n),uk(this.futureState.root),this.activateChildRoutes(r,s,n)}deactivateChildRoutes(n,r,s){const o=Qb(r);n.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,o[h],s),delete o[h]}),fi(o,(c,h)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(n,r,s){const o=n.value,c=r?r.value:null;if(o===c)if(o.component){const h=s.getContext(o.outlet);h&&this.deactivateChildRoutes(n,r,h.children)}else this.deactivateChildRoutes(n,r,s);else c&&this.deactivateRouteAndItsChildren(r,s)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const s=r.getContext(n.value.outlet);if(s&&s.outlet){const o=s.outlet.detach(),c=s.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:c})}}deactivateRouteAndOutlet(n,r){const s=r.getContext(n.value.outlet),o=s&&n.value.component?s.children:r,c=Qb(n);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],o);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(n,r,s){const o=Qb(r);n.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],s),this.forwardEvent(new i$(c.value.snapshot))}),n.children.length&&this.forwardEvent(new n$(n.value.snapshot))}activateRoutes(n,r,s){const o=n.value,c=r?r.value:null;if(uk(o),o===c)if(o.component){const h=s.getOrCreateContext(o.outlet);this.activateChildRoutes(n,r,h.children)}else this.activateChildRoutes(n,r,s);else if(o.component){const h=s.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const _=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(_.contexts),h.attachRef=_.componentRef,h.route=_.route.value,h.outlet&&h.outlet.attach(_.componentRef,_.route.value),QU(_.route)}else{const _=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(o.snapshot),w=_?_.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(n,null,h.children)}}else this.activateChildRoutes(n,null,s)}}function QU(i){uk(i.value),i.children.forEach(QU)}class pk{constructor(n,r){this.routes=n,this.module=r}}function ff(i){return"function"==typeof i}function Cm(i){return i instanceof Em}const Xb=Symbol("INITIAL_VALUE");function eT(){return xn(i=>function(...i){let n=null,r=null;return(0,zS.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,_a.k)(i[0])&&(i=i[0]),(0,k3.n)(i,r).lift(new L3(n))}(i.map(n=>n.pipe(Gy(1),Ky(Xb)))).pipe($u((n,r)=>{let s=!1;return r.reduce((o,c,h)=>o!==Xb?o:(c===Xb&&(s=!0),s||!1!==c&&h!==r.length-1&&!Cm(c)?o:c),n)},Xb),ta(n=>n!==Xb),(0,rt.U)(n=>Cm(n)?n:!0===n),Gy(1)))}let JU=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=g.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,s){1&r&&g._UZ(0,"router-outlet")},directives:function(){return[wk]},encapsulation:2}),i})();function XU(i,n=""){for(let r=0;r<i.length;r++){const s=i[r];G$(s,W$(n,s))}}function G$(i,n){i.children&&XU(i.children,n)}function W$(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function gk(i){const n=i.children&&i.children.map(gk),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==jt&&(r.component=JU),r}function aa(i){return i.outlet||jt}function e2(i,n){const r=i.filter(s=>aa(s)===n);return r.push(...i.filter(s=>aa(s)!==n)),r}const t2={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $R(i,n,r){var s;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},t2):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(n.matcher||a$)(r,i,n);if(!c)return Object.assign({},t2);const h={};fi(c.posParams,(w,T)=>{h[T]=w.path});const _=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:_,positionalParamSegments:null!==(s=c.posParams)&&void 0!==s?s:{}}}function qR(i,n,r,s,o="corrected"){if(r.length>0&&function(i,n,r){return r.some(s=>GR(i,n,s)&&aa(s)!==jt)}(i,r,s)){const h=new Gt(n,function(i,n,r,s){const o={};o[jt]=s,s._sourceSegment=i,s._segmentIndexShift=n.length;for(const c of r)if(""===c.path&&aa(c)!==jt){const h=new Gt([],{});h._sourceSegment=i,h._segmentIndexShift=n.length,o[aa(c)]=h}return o}(i,n,s,new Gt(r,i.children)));return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(s=>GR(i,n,s))}(i,r,s)){const h=new Gt(i.segments,function(i,n,r,s,o,c){const h={};for(const _ of s)if(GR(i,r,_)&&!o[aa(_)]){const w=new Gt([],{});w._sourceSegment=i,w._segmentIndexShift="legacy"===c?i.segments.length:n.length,h[aa(_)]=w}return Object.assign(Object.assign({},o),h)}(i,n,r,s,i.children,o));return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:r}}const c=new Gt(i.segments,i.children);return c._sourceSegment=i,c._segmentIndexShift=n.length,{segmentGroup:c,slicedSegments:r}}function GR(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function n2(i,n,r,s){return!!(aa(i)===s||s!==jt&&GR(n,r,i))&&("**"===i.path||$R(n,i,r).matched)}function r2(i,n,r){return 0===n.length&&!i.children[r]}class tT{constructor(n){this.segmentGroup=n||null}}class i2{constructor(n){this.urlTree=n}}function WR(i){return new zn.y(n=>n.error(new tT(i)))}function s2(i){return new zn.y(n=>n.error(new i2(i)))}function Q$(i){return new zn.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class eq{constructor(n,r,s,o,c){this.configLoader=r,this.urlSerializer=s,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=n.get(g.h0i)}apply(){const n=qR(this.urlTree.root,[],[],this.config).segmentGroup,r=new Gt(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,jt).pipe((0,rt.U)(c=>this.createUrlTree(mk(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vm(c=>{if(c instanceof i2)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof tT?this.noMatchError(c):c}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,jt).pipe((0,rt.U)(o=>this.createUrlTree(mk(o),n.queryParams,n.fragment))).pipe(vm(o=>{throw o instanceof tT?this.noMatchError(o):o}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,s){const o=n.segments.length>0?new Gt([],{[jt]:n}):n;return new Em(o,r,s)}expandSegmentGroup(n,r,s,o){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(n,r,s).pipe((0,rt.U)(c=>new Gt([],c))):this.expandSegment(n,s,r,s.segments,o,!0)}expandChildren(n,r,s){const o=[];for(const c of Object.keys(s.children))"primary"===c?o.unshift(c):o.push(c);return(0,on.D)(o).pipe(uE(c=>{const h=s.children[c],_=e2(r,c);return this.expandSegmentGroup(n,_,h,c).pipe((0,rt.U)(w=>({segment:w,outlet:c})))}),$u((c,h)=>(c[h.outlet]=h.segment,c),{}),function(i,n){const r=arguments.length>=2;return s=>s.pipe(i?ta((o,c)=>i(o,c,s)):LS.y,tk(1),r?g0(n):kS(()=>new $y))}())}expandSegment(n,r,s,o,c,h){return(0,on.D)(s).pipe(uE(_=>this.expandSegmentAgainstRoute(n,r,s,_,o,c,h).pipe(vm(T=>{if(T instanceof tT)return(0,lt.of)(null);throw T}))),pc(_=>!!_),vm((_,w)=>{if(_ instanceof $y||"EmptyError"===_.name){if(r2(r,o,c))return(0,lt.of)(new Gt([],{}));throw new tT(r)}throw _}))}expandSegmentAgainstRoute(n,r,s,o,c,h,_){return n2(o,r,c,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,r,o,c,h):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h):WR(r):WR(r)}expandSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,s,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,s,o){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?s2(c):this.lineralizeSegments(s,c).pipe((0,ts.zg)(h=>{const _=new Gt(h,{});return this.expandSegment(n,_,r,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,s,o,c,h){const{matched:_,consumedSegments:w,lastChild:T,positionalParamSegments:S}=$R(r,o,c);if(!_)return WR(r);const R=this.applyRedirectCommands(w,o.redirectTo,S);return o.redirectTo.startsWith("/")?s2(R):this.lineralizeSegments(o,R).pipe((0,ts.zg)(P=>this.expandSegment(n,r,s,P.concat(c.slice(T)),h,!1)))}matchSegmentAgainstRoute(n,r,s,o,c){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,lt.of)(s._loadedConfig):this.configLoader.load(n.injector,s)).pipe((0,rt.U)(P=>(s._loadedConfig=P,new Gt(o,{})))):(0,lt.of)(new Gt(o,{}));const{matched:h,consumedSegments:_,lastChild:w}=$R(r,s,o);if(!h)return WR(r);const T=o.slice(w);return this.getChildConfig(n,s,o).pipe((0,ts.zg)(R=>{const P=R.module,k=R.routes,{segmentGroup:U,slicedSegments:J}=qR(r,_,T,k),me=new Gt(U.segments,U.children);if(0===J.length&&me.hasChildren())return this.expandChildren(P,k,me).pipe((0,rt.U)(Ge=>new Gt(_,Ge)));if(0===k.length&&0===J.length)return(0,lt.of)(new Gt(_,{}));const Oe=aa(s)===c;return this.expandSegment(P,me,k,J,Oe?jt:c,!0).pipe((0,rt.U)($e=>new Gt(_.concat($e.segments),$e.children)))}))}getChildConfig(n,r,s){return r.children?(0,lt.of)(new pk(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,lt.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,s).pipe((0,ts.zg)(o=>o?this.configLoader.load(n.injector,r).pipe((0,rt.U)(c=>(r._loadedConfig=c,c))):function(i){return new zn.y(n=>n.error(rk(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(r))):(0,lt.of)(new pk([],n))}runCanLoadGuards(n,r,s){const o=r.canLoad;if(!o||0===o.length)return(0,lt.of)(!0);const c=o.map(h=>{const _=n.get(h);let w;if(function(i){return i&&ff(i.canLoad)}(_))w=_.canLoad(r,s);else{if(!ff(_))throw new Error("Invalid CanLoad guard");w=_(r,s)}return lu(w)});return(0,lt.of)(c).pipe(eT(),(0,_o.b)(h=>{if(!Cm(h))return;const _=rk(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw _.url=h,_}),(0,rt.U)(h=>!0===h))}lineralizeSegments(n,r){let s=[],o=r.root;for(;;){if(s=s.concat(o.segments),0===o.numberOfChildren)return(0,lt.of)(s);if(o.numberOfChildren>1||!o.children[jt])return Q$(n.redirectTo);o=o.children[jt]}}applyRedirectCommands(n,r,s){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,s)}applyRedirectCreatreUrlTree(n,r,s,o){const c=this.createSegmentGroup(n,r.root,s,o);return new Em(c,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const s={};return fi(n,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const _=o.substring(1);s[c]=r[_]}else s[c]=o}),s}createSegmentGroup(n,r,s,o){const c=this.createSegments(n,r.segments,s,o);let h={};return fi(r.children,(_,w)=>{h[w]=this.createSegmentGroup(n,_,s,o)}),new Gt(c,h)}createSegments(n,r,s,o){return r.map(c=>c.path.startsWith(":")?this.findPosParam(n,c,o):this.findOrReturn(c,s))}findPosParam(n,r,s){const o=s[r.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return o}findOrReturn(n,r){let s=0;for(const o of r){if(o.path===n.path)return r.splice(s),o;s++}return n}}function mk(i){const n={};for(const s of Object.keys(i.children)){const c=mk(i.children[s]);(c.segments.length>0||c.hasChildren())&&(n[s]=c)}return function(i){if(1===i.numberOfChildren&&i.children[jt]){const n=i.children[jt];return new Gt(i.segments.concat(n.segments),n.children)}return i}(new Gt(i.segments,n))}class o2{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class ZR{constructor(n,r){this.component=n,this.route=r}}function rq(i,n,r){const s=i._root;return nT(s,n?n._root:null,r,[s.value])}function zR(i,n,r){const s=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(s?s.module.injector:r).get(i)}function nT(i,n,r,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=Qb(n);return i.children.forEach(h=>{(function(i,n,r,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=i.value,h=n?n.value:null,_=r?r.getContext(i.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const w=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!wm(i.url,n.url);case"pathParamsOrQueryParamsChange":return!wm(i.url,n.url)||!au(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ck(i,n)||!au(i.queryParams,n.queryParams);case"paramsChange":default:return!ck(i,n)}}(h,c,c.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new o2(s)):(c.data=h.data,c._resolvedData=h._resolvedData),nT(i,n,c.component?_?_.children:null:r,s,o),w&&_&&_.outlet&&_.outlet.isActivated&&o.canDeactivateChecks.push(new ZR(_.outlet.component,h))}else h&&rT(n,_,o),o.canActivateChecks.push(new o2(s)),nT(i,null,c.component?_?_.children:null:r,s,o)})(h,c[h.value.outlet],r,s.concat([h.value]),o),delete c[h.value.outlet]}),fi(c,(h,_)=>rT(h,r.getContext(_),o)),o}function rT(i,n,r){const s=Qb(i),o=i.value;fi(s,(c,h)=>{rT(c,o.component?n?n.children.getContext(h):null:n,r)}),r.canDeactivateChecks.push(new ZR(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}class mq{}function a2(i){return new zn.y(n=>n.error(i))}class yq{constructor(n,r,s,o,c,h){this.rootComponentType=n,this.config=r,this.urlTree=s,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const n=qR(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,jt);if(null===r)return null;const s=new UR([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new kc(s,r),c=new $U(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(n){const r=n.value,s=HU(r,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,s)}processChildren(n,r){const s=[];for(const c of Object.keys(r.children)){const h=r.children[c],_=e2(n,c),w=this.processSegmentGroup(_,h,c);if(null===w)return null;s.push(...w)}const o=l2(s);return function(i){i.sort((n,r)=>n.value.outlet===jt?-1:r.value.outlet===jt?1:n.value.outlet.localeCompare(r.value.outlet))}(o),o}processSegment(n,r,s,o){for(const c of n){const h=this.processSegmentAgainstRoute(c,r,s,o);if(null!==h)return h}return r2(r,s,o)?[]:null}processSegmentAgainstRoute(n,r,s,o){if(n.redirectTo||!n2(n,r,s,o))return null;let c,h=[],_=[];if("**"===n.path){const k=s.length>0?RU(s).parameters:{};c=new UR(s,k,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,d2(n),aa(n),n.component,n,u2(r),c2(r)+s.length,h2(n))}else{const k=$R(r,n,s);if(!k.matched)return null;h=k.consumedSegments,_=s.slice(k.lastChild),c=new UR(h,k.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,d2(n),aa(n),n.component,n,u2(r),c2(r)+h.length,h2(n))}const w=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(n),{segmentGroup:T,slicedSegments:S}=qR(r,h,_,w.filter(k=>void 0===k.redirectTo),this.relativeLinkResolution);if(0===S.length&&T.hasChildren()){const k=this.processChildren(w,T);return null===k?null:[new kc(c,k)]}if(0===w.length&&0===S.length)return[new kc(c,[])];const R=aa(n)===o,P=this.processSegment(w,T,S,R?jt:o);return null===P?null:[new kc(c,P)]}}function wq(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function l2(i){const n=[],r=new Set;for(const s of i){if(!wq(s)){n.push(s);continue}const o=n.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...s.children),r.add(o)):n.push(s)}for(const s of r){const o=l2(s.children);n.push(new kc(s.value,o))}return n.filter(s=>!r.has(s))}function u2(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function c2(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function d2(i){return i.data||{}}function h2(i){return i.resolve||{}}function _k(i){return xn(n=>{const r=i(n);return r?(0,on.D)(r).pipe((0,rt.U)(()=>n)):(0,lt.of)(n)})}class Rq extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const yk=new g.OlP("ROUTES");class f2{constructor(n,r,s,o){this.loader=n,this.compiler=r,this.onLoadStartListener=s,this.onLoadEndListener=o}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactory(r.loadChildren).pipe((0,rt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);const h=c.create(n);return new pk(AU(h.injector.get(yk,void 0,g.XFs.Self|g.XFs.Optional)).map(gk),h)}),vm(c=>{throw r._loader$=void 0,c}));return r._loader$=new U3.c(o,()=>new oi.xQ).pipe((0,G3.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,on.D)(this.loader.load(n)):lu(n()).pipe((0,ts.zg)(r=>r instanceof g.YKP?(0,lt.of)(r):(0,on.D)(this.compiler.compileModuleAsync(r))))}}class Nq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new hE,this.attachRef=null}}class hE{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Nq,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class Pq{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function Oq(i){throw i}function Mq(i,n,r){return n.parse("/")}function p2(i,n){return(0,lt.of)(null)}const kq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fs=(()=>{class i{constructor(r,s,o,c,h,_,w,T){this.rootComponentType=r,this.urlSerializer=s,this.rootContexts=o,this.location=c,this.config=T,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new oi.xQ,this.errorHandler=Oq,this.malformedUriErrorHandler=Mq,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:p2,afterPreactivation:p2},this.urlHandlingStrategy=new Pq,this.routeReuseStrategy=new Rq,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(g.h0i),this.console=h.get(g.c2e);const P=h.get(g.R0b);this.isNgZoneEnabled=P instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(T),this.currentUrlTree=new Em(new Gt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new f2(_,w,k=>this.triggerEvent(new bU(k)),k=>this.triggerEvent(new TU(k))),this.routerState=jU(this.currentUrlTree,this.rootComponentType),this.transitions=new Ya({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const s=this.events;return r.pipe(ta(o=>0!==o.id),(0,rt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xn(o=>{let c=!1,h=!1;return(0,lt.of)(o).pipe((0,_o.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),xn(_=>{const w=this.browserUrlTree.toString(),T=!this.navigated||_.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return KR(_.source)&&(this.browserUrlTree=_.extractedUrl),(0,lt.of)(_).pipe(xn(R=>{const P=this.transitions.getValue();return s.next(new nk(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),P!==this.transitions.getValue()?ql.E:Promise.resolve(R)}),function(i,n,r,s){return xn(o=>function(i,n,r,s,o){return new eq(i,n,r,s,o).apply()}(i,n,r,o.extractedUrl,s).pipe((0,rt.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_o.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function(i,n,r,s,o){return(0,ts.zg)(c=>function(i,n,r,s,o="emptyOnly",c="legacy"){try{const h=new yq(i,n,r,s,o,c).recognize();return null===h?a2(new mq):(0,lt.of)(h)}catch(h){return a2(h)}}(i,n,c.urlAfterRedirects,r(c.urlAfterRedirects),s,o).pipe((0,rt.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_o.b)(R=>{"eager"===this.urlUpdateStrategy&&(R.extras.skipLocationChange||this.setBrowserUrl(R.urlAfterRedirects,R),this.browserUrlTree=R.urlAfterRedirects);const P=new Y3(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);s.next(P)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:k,source:U,restoredState:J,extras:me}=_,Oe=new nk(P,this.serializeUrl(k),U,J);s.next(Oe);const je=jU(k,this.rootComponentType).snapshot;return(0,lt.of)(Object.assign(Object.assign({},_),{targetSnapshot:je,urlAfterRedirects:k,extras:Object.assign(Object.assign({},me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),ql.E}),_k(_=>{const{targetSnapshot:w,id:T,extractedUrl:S,rawUrl:R,extras:{skipLocationChange:P,replaceUrl:k}}=_;return this.hooks.beforePreactivation(w,{navigationId:T,appliedUrlTree:S,rawUrlTree:R,skipLocationChange:!!P,replaceUrl:!!k})}),(0,_o.b)(_=>{const w=new Q3(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),(0,rt.U)(_=>Object.assign(Object.assign({},_),{guards:rq(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(i,n){return(0,ts.zg)(r=>{const{targetSnapshot:s,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:h}}=r;return 0===h.length&&0===c.length?(0,lt.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,s){return(0,on.D)(i).pipe((0,ts.zg)(o=>function(i,n,r,s,o){const c=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,lt.of)(!0);const h=c.map(_=>{const w=zR(_,n,o);let T;if(function(i){return i&&ff(i.canDeactivate)}(w))T=lu(w.canDeactivate(i,n,r,s));else{if(!ff(w))throw new Error("Invalid CanDeactivate guard");T=lu(w(i,n,r,s))}return T.pipe(pc())});return(0,lt.of)(h).pipe(eT())}(o.component,o.route,r,n,s)),pc(o=>!0!==o,!0))}(h,s,o,i).pipe((0,ts.zg)(_=>_&&function(i){return"boolean"==typeof i}(_)?function(i,n,r,s){return(0,on.D)(n).pipe(uE(o=>S0(function(i,n){return null!==i&&n&&n(new t$(i)),(0,lt.of)(!0)}(o.route.parent,s),function(i,n){return null!==i&&n&&n(new r$(i)),(0,lt.of)(!0)}(o.route,s),function(i,n,r){const s=n[n.length-1],c=n.slice(0,n.length-1).reverse().map(h=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(h)).filter(h=>null!==h).map(h=>wU(()=>{const _=h.guards.map(w=>{const T=zR(w,h.node,r);let S;if(function(i){return i&&ff(i.canActivateChild)}(T))S=lu(T.canActivateChild(s,i));else{if(!ff(T))throw new Error("Invalid CanActivateChild guard");S=lu(T(s,i))}return S.pipe(pc())});return(0,lt.of)(_).pipe(eT())}));return(0,lt.of)(c).pipe(eT())}(i,o.path,r),function(i,n,r){const s=n.routeConfig?n.routeConfig.canActivate:null;if(!s||0===s.length)return(0,lt.of)(!0);const o=s.map(c=>wU(()=>{const h=zR(c,n,r);let _;if(function(i){return i&&ff(i.canActivate)}(h))_=lu(h.canActivate(n,i));else{if(!ff(h))throw new Error("Invalid CanActivate guard");_=lu(h(n,i))}return _.pipe(pc())}));return(0,lt.of)(o).pipe(eT())}(i,o.route,r))),pc(o=>!0!==o,!0))}(s,c,i,n):(0,lt.of)(_)),(0,rt.U)(_=>Object.assign(Object.assign({},r),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,_o.b)(_=>{if(Cm(_.guardsResult)){const T=rk(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw T.url=_.guardsResult,T}const w=new J3(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(w)}),ta(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),_k(_=>{if(_.guards.canActivateChecks.length)return(0,lt.of)(_).pipe((0,_o.b)(w=>{const T=new X3(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}),xn(w=>{let T=!1;return(0,lt.of)(w).pipe(function(i,n){return(0,ts.zg)(r=>{const{targetSnapshot:s,guards:{canActivateChecks:o}}=r;if(!o.length)return(0,lt.of)(r);let c=0;return(0,on.D)(o).pipe(uE(h=>function(i,n,r,s){return function(i,n,r,s){const o=Object.keys(i);if(0===o.length)return(0,lt.of)({});const c={};return(0,on.D)(o).pipe((0,ts.zg)(h=>function(i,n,r,s){const o=zR(i,n,s);return lu(o.resolve?o.resolve(n,r):o(n,r))}(i[h],n,r,s).pipe((0,_o.b)(_=>{c[h]=_}))),tk(1),(0,ts.zg)(()=>Object.keys(c).length===o.length?(0,lt.of)(c):ql.E))}(i._resolve,i,n,s).pipe((0,rt.U)(c=>(i._resolvedData=c,i.data=Object.assign(Object.assign({},i.data),HU(i,r).resolve),null)))}(h.route,s,i,n)),(0,_o.b)(()=>c++),tk(1),(0,ts.zg)(h=>c===o.length?(0,lt.of)(r):ql.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_o.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,_o.b)(w=>{const T=new e$(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}))}),_k(_=>{const{targetSnapshot:w,id:T,extractedUrl:S,rawUrl:R,extras:{skipLocationChange:P,replaceUrl:k}}=_;return this.hooks.afterPreactivation(w,{navigationId:T,appliedUrlTree:S,rawUrlTree:R,skipLocationChange:!!P,replaceUrl:!!k})}),(0,rt.U)(_=>{const w=function(i,n,r){const s=BR(i,n._root,r?r._root:void 0);return new BU(s,n)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:w})}),(0,_o.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((i,n,r)=>(0,rt.U)(s=>(new V$(n,s.targetRouterState,s.currentRouterState,r).activate(i),s)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,_o.b)({next(){c=!0},complete(){c=!0}}),function(i){return n=>n.lift(new Z3(i))}(()=>{if(!c&&!h){const _=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,_)):this.cancelNavigationTransition(o,_)}this.currentNavigation=null}),vm(_=>{if(h=!0,function(i){return i&&i[DU]}(_)){const w=Cm(_.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const T=new CU(o.id,this.serializeUrl(o.extractedUrl),_.message);s.next(T),w?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||KR(o.source)};this.scheduleNavigation(S,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new K3(o.id,this.serializeUrl(o.extractedUrl),_);s.next(w);try{o.resolve(this.errorHandler(_))}catch(T){o.reject(T)}}return ql.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const s=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:o,state:c,urlTree:h}=s,_={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(_.state=w)}this.scheduleNavigation(h,o,c,_)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(r){var s;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(s=r.state)||void 0===s?void 0:s.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,s){if(!r)return!0;const o=s.urlTree.toString()===r.urlTree.toString();return s.transitionId!==r.transitionId||!o||!("hashchange"===s.source&&"popstate"===r.source||"popstate"===s.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){XU(r),this.config=r.map(gk),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,s={}){const{relativeTo:o,queryParams:c,fragment:h,queryParamsHandling:_,preserveFragment:w}=s,T=o||this.routerState.root,S=w?this.currentUrlTree.fragment:h;let R=null;switch(_){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=c||null}return null!==R&&(R=this.removeEmptyProps(R)),function(i,n,r,s,o){if(0===r.length)return dk(n.root,n.root,n,s,o);const c=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new ZU(!0,0,i);let n=0,r=!1;const s=i.reduce((o,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const _={};return fi(c.outlets,(w,T)=>{_[T]="string"==typeof w?w.split("/"):w}),[...o,{outlets:_}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===h?(c.split("/").forEach((_,w)=>{0==w&&"."===_||(0==w&&""===_?r=!0:".."===_?n++:""!=_&&o.push(_))}),o):[...o,c]},[]);return new ZU(r,n,s)}(r);if(c.toRoot())return dk(n.root,new Gt([],{}),n,s,o);const h=function(i,n,r){if(i.isAbsolute)return new hk(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const c=r.snapshot._urlSegment;return new hk(c,c===n.root,0)}const s=jR(i.commands[0])?0:1;return function(i,n,r){let s=i,o=n,c=r;for(;c>o;){if(c-=o,s=s.parent,!s)throw new Error("Invalid number of '../'");o=s.segments.length}return new hk(s,!1,o-c)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+s,i.numberOfDoubleDots)}(c,n,i),_=h.processChildren?HR(h.segmentGroup,h.index,c.commands):zU(h.segmentGroup,h.index,c.commands);return dk(h.segmentGroup,_,n,s,o)}(T,this.currentUrlTree,r,R,null!=S?S:null)}navigateByUrl(r,s={skipLocationChange:!1}){const o=Cm(r)?r:this.parseUrl(r),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(r,s={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let s;try{s=this.urlSerializer.parse(r)}catch(o){s=this.malformedUriErrorHandler(o,this.urlSerializer,r)}return s}isActive(r,s){let o;if(o=!0===s?Object.assign({},kq):!1===s?Object.assign({},Fq):s,Cm(r))return xU(this.currentUrlTree,r,o);const c=this.parseUrl(r);return xU(this.currentUrlTree,c,o)}removeEmptyProps(r){return Object.keys(r).reduce((s,o)=>{const c=r[o];return null!=c&&(s[o]=c),s},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new zb(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,s,o,c,h){var _,w;if(this.disposed)return Promise.resolve(!1);const T=this.getTransition(),S=KR(s)&&T&&!KR(T.source),k=(this.lastSuccessfulId===T.id||this.currentNavigation?T.rawUrl:T.urlAfterRedirects).toString()===r.toString();if(S&&k)return Promise.resolve(!0);let U,J,me;h?(U=h.resolve,J=h.reject,me=h.promise):me=new Promise(($e,Ge)=>{U=$e,J=Ge});const Oe=++this.navigationId;let je;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),je=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):je=0,this.setTransition({id:Oe,targetPageId:je,source:s,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:c,resolve:U,reject:J,promise:me,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),me.catch($e=>Promise.reject($e))}setBrowserUrl(r,s){const o=this.urlSerializer.serialize(r),c=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(o)||s.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(r,s=!1){var o,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,s){const o=new CU(r.id,this.serializeUrl(r.extractedUrl),s);this.triggerEvent(o),r.resolve(!1)}generateNgRouterState(r,s){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(g.DyG),g.LFG(ik),g.LFG(hE),g.LFG(ot),g.LFG(g.zs3),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(void 0))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();function KR(i){return"imperative"!==i}let wk=(()=>{class i{constructor(r,s,o,c,h){this.parentContexts=r,this.location=s,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.name=c||jt,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const h=(s=s||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,w=new Bq(r,_,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(hE),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},i.\u0275dir=g.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class Bq{constructor(n,r,s){this.route=n,this.childContexts=r,this.parent=s}get(n,r){return n===dE?this.route:n===hE?this.childContexts:this.parent.get(n,r)}}class g2{}class m2{preload(n,r){return(0,lt.of)(null)}}let _2=(()=>{class i{constructor(r,s,o,c,h){this.router=r,this.injector=c,this.preloadingStrategy=h,this.loader=new f2(s,o,T=>r.triggerEvent(new bU(T)),T=>r.triggerEvent(new TU(T)))}setUpPreloading(){this.subscription=this.router.events.pipe(ta(r=>r instanceof zb),uE(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(g.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){const o=[];for(const c of s)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(r,c)):c.children&&o.push(this.processRoutes(r,c.children));return(0,on.D)(o).pipe((0,zy.J)(),(0,rt.U)(c=>{}))}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,lt.of)(s._loadedConfig):this.loader.load(r.injector,s)).pipe((0,ts.zg)(c=>(s._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Fs),g.LFG(g.v3s),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(g2))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),Ck=(()=>{class i{constructor(r,s,o={}){this.router=r,this.viewportScroller=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof nk?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof zb&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof IU&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.router.triggerEvent(new IU(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Fs),g.LFG(Cu),g.LFG(void 0))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();const bm=new g.OlP("ROUTER_CONFIGURATION"),y2=new g.OlP("ROUTER_FORROOT_GUARD"),$q=[ot,{provide:ik,useClass:kU},{provide:Fs,useFactory:function(i,n,r,s,o,c,h,_={},w,T){const S=new Fs(null,i,n,r,s,o,c,AU(h));return w&&(S.urlHandlingStrategy=w),T&&(S.routeReuseStrategy=T),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(_,S),_.enableTracing&&S.events.subscribe(R=>{var P,k;null===(P=console.group)||void 0===P||P.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===(k=console.groupEnd)||void 0===k||k.call(console)}),S},deps:[ik,hE,ot,g.zs3,g.v3s,g.Sil,yk,bm,[class{},new g.FiY],[class{},new g.FiY]]},hE,{provide:dE,useFactory:function(i){return i.routerState.root},deps:[Fs]},{provide:g.v3s,useClass:g.EAV},_2,m2,class{preload(n,r){return r().pipe(vm(()=>(0,lt.of)(null)))}},{provide:bm,useValue:{enableTracing:!1}}];function qq(){return new g.PXZ("Router",Fs)}let v2=(()=>{class i{constructor(r,s){}static forRoot(r,s){return{ngModule:i,providers:[$q,E2(r),{provide:y2,useFactory:Zq,deps:[[Fs,new g.FiY,new g.tp0]]},{provide:bm,useValue:s||{}},{provide:Ae,useFactory:Wq,deps:[X,[new g.tBr(we),new g.FiY],bm]},{provide:Ck,useFactory:Gq,deps:[Fs,Cu,bm]},{provide:g2,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:m2},{provide:g.PXZ,multi:!0,useFactory:qq},[bk,{provide:g.ip1,multi:!0,useFactory:Qq,deps:[bk]},{provide:w2,useFactory:Jq,deps:[bk]},{provide:g.tb,multi:!0,useExisting:w2}]]}}static forChild(r){return{ngModule:i,providers:[E2(r)]}}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(y2,8),g.LFG(Fs,8))},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({}),i})();function Gq(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new Ck(i,n,r)}function Wq(i,n,r={}){return r.useHash?new He(i,n):new Ve(i,n)}function Zq(i){return"guarded"}function E2(i){return[{provide:g.deG,multi:!0,useValue:i},{provide:yk,multi:!0,useValue:i}]}let bk=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new oi.xQ}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const o=new Promise(_=>s=_),c=this.injector.get(Fs),h=this.injector.get(bm);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),s(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,lt.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),c.initialNavigation()):s(!0),o})}bootstrapListener(r){const s=this.injector.get(bm),o=this.injector.get(_2),c=this.injector.get(Ck),h=this.injector.get(Fs),_=this.injector.get(g.z2F);r===_.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),c.init(),h.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(g.zs3))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();function Qq(i){return i.appInitializer.bind(i)}function Jq(i){return i.bootstrapListener.bind(i)}const w2=new g.OlP("Router Initializer");class Tk{constructor(n,r,s,o,c){this.nombre=n,this.apellido=r,this.email=s,this.direccion=o,this.pais=c}}let Ik=(()=>{class i{constructor(r){this.firestore=r,this.actores=this.firestore.collection("actores").snapshotChanges()}getActores(){return this.firestore.collection("actores").snapshotChanges()}getActor(r){return this.firestore.collection("actores").doc(r).valueChanges()}guardarActor(r){return this.firestore.collection("actores").add({nombre:r.nombre,apellido:r.apellido,email:r.email,direccion:r.direccion,pais:r.pais})}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(ek))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class C2{constructor(n,r){this.nombre=n,this.bandera=r}}class b2{}class T2{}class Fc{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(r=>{const s=r.indexOf(":");if(s>0){const o=r.slice(0,s),c=o.toLowerCase(),h=r.slice(s+1).trim();this.maybeSetNormalizedName(o,c),this.headers.has(c)?this.headers.get(c).push(h):this.headers.set(c,[h])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(r=>{let s=n[r];const o=r.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(o,s),this.maybeSetNormalizedName(r,o))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const r=this.headers.get(n.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,r){return this.clone({name:n,value:r,op:"a"})}set(n,r){return this.clone({name:n,value:r,op:"s"})}delete(n,r){return this.clone({name:n,value:r,op:"d"})}maybeSetNormalizedName(n,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,n)}init(){this.lazyInit&&(this.lazyInit instanceof Fc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(r=>{this.headers.set(r,n.headers.get(r)),this.normalizedNames.set(r,n.normalizedNames.get(r))})}clone(n){const r=new Fc;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof Fc?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([n]),r}applyUpdate(n){const r=n.name.toLowerCase();switch(n.op){case"a":case"s":let s=n.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(n.name,r);const o=("a"===n.op?this.headers.get(r):void 0)||[];o.push(...s),this.headers.set(r,o);break;case"d":const c=n.value;if(c){let h=this.headers.get(r);if(!h)return;h=h.filter(_=>-1===c.indexOf(_)),0===h.length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,h)}else this.headers.delete(r),this.normalizedNames.delete(r)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>n(this.normalizedNames.get(r),this.headers.get(r)))}}class eG{encodeKey(n){return I2(n)}encodeValue(n){return I2(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const nG=/%(\d[a-f0-9])/gi,rG={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function I2(i){return encodeURIComponent(i).replace(nG,(n,r)=>{var s;return null!==(s=rG[r])&&void 0!==s?s:n})}function D2(i){return`${i}`}class pf{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new eG,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(i,n){const r=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(o=>{const c=o.indexOf("="),[h,_]=-1==c?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,c)),n.decodeValue(o.slice(c+1))],w=r.get(h)||[];w.push(_),r.set(h,w)}),r}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(r=>{const s=n.fromObject[r];this.map.set(r,Array.isArray(s)?s:[s])})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const r=this.map.get(n);return r?r[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,r){return this.clone({param:n,value:r,op:"a"})}appendAll(n){const r=[];return Object.keys(n).forEach(s=>{const o=n[s];Array.isArray(o)?o.forEach(c=>{r.push({param:s,value:c,op:"a"})}):r.push({param:s,value:o,op:"a"})}),this.clone(r)}set(n,r){return this.clone({param:n,value:r,op:"s"})}delete(n,r){return this.clone({param:n,value:r,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const r=this.encoder.encodeKey(n);return this.map.get(n).map(s=>r+"="+this.encoder.encodeValue(s)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const r=new pf({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(n),r}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const r=("a"===n.op?this.map.get(n.param):void 0)||[];r.push(D2(n.value)),this.map.set(n.param,r);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let s=this.map.get(n.param)||[];const o=s.indexOf(D2(n.value));-1!==o&&s.splice(o,1),s.length>0?this.map.set(n.param,s):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class iG{constructor(){this.map=new Map}set(n,r){return this.map.set(n,r),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}keys(){return this.map.keys()}}function S2(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function A2(i){return"undefined"!=typeof Blob&&i instanceof Blob}function R2(i){return"undefined"!=typeof FormData&&i instanceof FormData}class iT{constructor(n,r,s,o){let c;if(this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==s?s:null,c=o):c=s,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new Fc),this.context||(this.context=new iG),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=r;else{const _=r.indexOf("?");this.urlWithParams=r+(-1===_?"?":_<r.length-1?"&":"")+h}}else this.params=new pf,this.urlWithParams=r}serializeBody(){return null===this.body?null:S2(this.body)||A2(this.body)||R2(this.body)||function(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||R2(this.body)?null:A2(this.body)?this.body.type||null:S2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){var r;const s=n.method||this.method,o=n.url||this.url,c=n.responseType||this.responseType,h=void 0!==n.body?n.body:this.body,_=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,w=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let T=n.headers||this.headers,S=n.params||this.params;const R=null!==(r=n.context)&&void 0!==r?r:this.context;return void 0!==n.setHeaders&&(T=Object.keys(n.setHeaders).reduce((P,k)=>P.set(k,n.setHeaders[k]),T)),n.setParams&&(S=Object.keys(n.setParams).reduce((P,k)=>P.set(k,n.setParams[k]),S)),new iT(s,o,h,{params:S,headers:T,context:R,reportProgress:w,responseType:c,withCredentials:_})}}var wr=(()=>((wr=wr||{})[wr.Sent=0]="Sent",wr[wr.UploadProgress=1]="UploadProgress",wr[wr.ResponseHeader=2]="ResponseHeader",wr[wr.DownloadProgress=3]="DownloadProgress",wr[wr.Response=4]="Response",wr[wr.User=5]="User",wr))();class Dk{constructor(n,r=200,s="OK"){this.headers=n.headers||new Fc,this.status=void 0!==n.status?n.status:r,this.statusText=n.statusText||s,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Sk extends Dk{constructor(n={}){super(n),this.type=wr.ResponseHeader}clone(n={}){return new Sk({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class YR extends Dk{constructor(n={}){super(n),this.type=wr.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new YR({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class N2 extends Dk{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Ak(i,n){return{body:n,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let x2=(()=>{class i{constructor(r){this.handler=r}request(r,s,o={}){let c;if(r instanceof iT)c=r;else{let w,T;w=o.headers instanceof Fc?o.headers:new Fc(o.headers),o.params&&(T=o.params instanceof pf?o.params:new pf({fromObject:o.params})),c=new iT(r,s,void 0!==o.body?o.body:null,{headers:w,context:o.context,params:T,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=(0,lt.of)(c).pipe(uE(w=>this.handler.handle(w)));if(r instanceof iT||"events"===o.observe)return h;const _=h.pipe(ta(w=>w instanceof YR));switch(o.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return _.pipe((0,rt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return _.pipe((0,rt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return _.pipe((0,rt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));case"json":default:return _.pipe((0,rt.U)(w=>w.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,s={}){return this.request("DELETE",r,s)}get(r,s={}){return this.request("GET",r,s)}head(r,s={}){return this.request("HEAD",r,s)}jsonp(r,s){return this.request("JSONP",r,{params:(new pf).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,s={}){return this.request("OPTIONS",r,s)}patch(r,s,o={}){return this.request("PATCH",r,Ak(o,s))}post(r,s,o={}){return this.request("POST",r,Ak(o,s))}put(r,s,o={}){return this.request("PUT",r,Ak(o,s))}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(b2))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();class P2{constructor(n,r){this.next=n,this.interceptor=r}handle(n){return this.interceptor.intercept(n,this.next)}}const O2=new g.OlP("HTTP_INTERCEPTORS");let aG=(()=>{class i{intercept(r,s){return s.handle(r)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();const lG=/^\)\]\}',?\n/;let M2=(()=>{class i{constructor(r){this.xhrFactory=r}handle(r){if("JSONP"===r.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zn.y(s=>{const o=this.xhrFactory.build();if(o.open(r.method,r.urlWithParams),r.withCredentials&&(o.withCredentials=!0),r.headers.forEach((k,U)=>o.setRequestHeader(k,U.join(","))),r.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){const k=r.detectContentTypeHeader();null!==k&&o.setRequestHeader("Content-Type",k)}if(r.responseType){const k=r.responseType.toLowerCase();o.responseType="json"!==k?k:"text"}const c=r.serializeBody();let h=null;const _=()=>{if(null!==h)return h;const k=1223===o.status?204:o.status,U=o.statusText||"OK",J=new Fc(o.getAllResponseHeaders()),me=function(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(o)||r.url;return h=new Sk({headers:J,status:k,statusText:U,url:me}),h},w=()=>{let{headers:k,status:U,statusText:J,url:me}=_(),Oe=null;204!==U&&(Oe=void 0===o.response?o.responseText:o.response),0===U&&(U=Oe?200:0);let je=U>=200&&U<300;if("json"===r.responseType&&"string"==typeof Oe){const $e=Oe;Oe=Oe.replace(lG,"");try{Oe=""!==Oe?JSON.parse(Oe):null}catch(Ge){Oe=$e,je&&(je=!1,Oe={error:Ge,text:Oe})}}je?(s.next(new YR({body:Oe,headers:k,status:U,statusText:J,url:me||void 0})),s.complete()):s.error(new N2({error:Oe,headers:k,status:U,statusText:J,url:me||void 0}))},T=k=>{const{url:U}=_(),J=new N2({error:k,status:o.status||0,statusText:o.statusText||"Unknown Error",url:U||void 0});s.error(J)};let S=!1;const R=k=>{S||(s.next(_()),S=!0);let U={type:wr.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(U.total=k.total),"text"===r.responseType&&!!o.responseText&&(U.partialText=o.responseText),s.next(U)},P=k=>{let U={type:wr.UploadProgress,loaded:k.loaded};k.lengthComputable&&(U.total=k.total),s.next(U)};return o.addEventListener("load",w),o.addEventListener("error",T),o.addEventListener("timeout",T),o.addEventListener("abort",T),r.reportProgress&&(o.addEventListener("progress",R),null!==c&&o.upload&&o.upload.addEventListener("progress",P)),o.send(c),s.next({type:wr.Sent}),()=>{o.removeEventListener("error",T),o.removeEventListener("abort",T),o.removeEventListener("load",w),o.removeEventListener("timeout",T),r.reportProgress&&(o.removeEventListener("progress",R),null!==c&&o.upload&&o.upload.removeEventListener("progress",P)),o.readyState!==o.DONE&&o.abort()}})}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Tf))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})();const Rk=new g.OlP("XSRF_COOKIE_NAME"),Nk=new g.OlP("XSRF_HEADER_NAME");class k2{}let cG=(()=>{class i{constructor(r,s,o){this.doc=r,this.platform=s,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=cr(r,this.cookieName),this.lastCookieString=r),this.lastToken}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(de),g.LFG(g.Lbi),g.LFG(Rk))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),xk=(()=>{class i{constructor(r,s){this.tokenService=r,this.headerName=s}intercept(r,s){const o=r.url.toLowerCase();if("GET"===r.method||"HEAD"===r.method||o.startsWith("http://")||o.startsWith("https://"))return s.handle(r);const c=this.tokenService.getToken();return null!==c&&!r.headers.has(this.headerName)&&(r=r.clone({headers:r.headers.set(this.headerName,c)})),s.handle(r)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(k2),g.LFG(Nk))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),dG=(()=>{class i{constructor(r,s){this.backend=r,this.injector=s,this.chain=null}handle(r){if(null===this.chain){const s=this.injector.get(O2,[]);this.chain=s.reduceRight((o,c)=>new P2(o,c),this.backend)}return this.chain.handle(r)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(T2),g.LFG(g.zs3))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac}),i})(),hG=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:xk,useClass:aG}]}}static withOptions(r={}){return{ngModule:i,providers:[r.cookieName?{provide:Rk,useValue:r.cookieName}:[],r.headerName?{provide:Nk,useValue:r.headerName}:[]]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[xk,{provide:O2,useExisting:xk,multi:!0},{provide:k2,useClass:cG},{provide:Rk,useValue:"XSRF-TOKEN"},{provide:Nk,useValue:"X-XSRF-TOKEN"}]}),i})(),fG=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[x2,{provide:b2,useClass:dG},M2,{provide:T2,useExisting:M2}],imports:[[hG.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i})(),F2=(()=>{class i{constructor(r){this.http=r}getPaises(){return this.http.get("https://restcountries.com/v3.1/all")}getPaisByName(r){return this.http.get("https://restcountries.com/v3.1/name/"+r)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(x2))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function pG(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"li",6),g.NdJ("click",function(){const c=g.CHM(r).$implicit;return g.oxw().SeleccionarPais(c)}),g.TgZ(1,"span"),g._uU(2),g.qZA(),g.qZA()}if(2&i){const r=n.$implicit;g.xp6(2),g.Oqu(r.nombre)}}let gG=(()=>{class i{constructor(r){this.paisService=r,this.seSeleccionoPais=new g.vpe,this.listaPaises=[]}ngOnInit(){let r,s;this.paisService.getPaises().subscribe(o=>{for(let c=0;c<o.length;c++)r=o[c].name.common,s=o[c].flags.png,this.listaPaises.push(new C2(r,s));this.listaPaises=this.shuffle(this.listaPaises).slice(0,5)})}SeleccionarPais(r){this.bandera=r.bandera,this.seSeleccionoPais.emit(r.nombre)}shuffle(r){let o,s=r.length;for(;0!=s;)o=Math.floor(Math.random()*s),s--,[r[s],r[o]]=[r[o],r[s]];return r}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(F2))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-tabla-paises"]],outputs:{seSeleccionoPais:"seSeleccionoPais"},decls:12,vars:2,consts:[[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"my-0"],[1,"list-group","mb-3","text-muted"],["class","list-group-item d-flex justify-content-between lh-condensed ",3,"click",4,"ngFor","ngForOf"],["alt","",3,"src"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed",3,"click"]],template:function(r,s){1&r&&(g.TgZ(0,"ul",0),g.TgZ(1,"li",1),g.TgZ(2,"div"),g.TgZ(3,"h6",2),g._uU(4,"Pais"),g.qZA(),g.TgZ(5,"ul",3),g.YNc(6,pG,3,1,"li",4),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"li",1),g.TgZ(8,"div"),g.TgZ(9,"h6",2),g._uU(10,"Bandera"),g.qZA(),g._UZ(11,"img",5),g.qZA(),g.qZA(),g.qZA()),2&r&&(g.xp6(6),g.Q6J("ngForOf",s.listaPaises),g.xp6(5),g.Q6J("src",s.bandera,g.LSH))},directives:[$t],styles:["img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:scale-down}"]}),i})(),mG=(()=>{class i{constructor(r,s){this.actorService=r,this.toastr=s}ngOnInit(){}cambiarPais(r){this.pais=r}guardarActor(){let r=new Tk(this.nombre,this.apellido,this.email,this.direccion,this.pais);this.actorService.guardarActor(r).then(s=>{this.showSuccess()}).catch(s=>{this.showError(s)})}showSuccess(){this.toastr.success("Se guard\xf3 correctamente")}showError(r){this.toastr.error("Algo sali\xf3 mal. Error: "+r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(Ik),g.Y36(Vd))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-actor-alta"]],decls:39,vars:5,consts:[["lang","en"],[1,"bg-light"],[1,"container"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[3,"seSeleccionoPais"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation"],[1,"col-md-6","mb-3"],["for","firstName"],["type","text","id","firstName","name","nombre","placeholder","","value","","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName"],["type","text","id","lastName","name","apellido","placeholder","","value","","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","email","id","email","name","email","placeholder","john.connery.k-po2000@hotmail.com",1,"form-control",3,"ngModel","ngModelChange"],["for","address"],["type","text","id","address","name","direccion","placeholder","Dr. R. Balb\xedn 2551","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-5","mb-3"],["for","country"],["type","text","readonly","true","id","address","name","pais","placeholder","Elegir de la tabla de pa\xedses","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"click"]],template:function(r,s){1&r&&(g.TgZ(0,"html",0),g.TgZ(1,"body",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g.TgZ(5,"h4",5),g.TgZ(6,"span",6),g._uU(7,"Pa\xedses"),g.qZA(),g.qZA(),g.TgZ(8,"app-tabla-paises",7),g.NdJ("seSeleccionoPais",function(c){return s.cambiarPais(c)}),g.qZA(),g.qZA(),g.TgZ(9,"div",8),g.TgZ(10,"h4",9),g._uU(11,"Alta Actor"),g.qZA(),g.TgZ(12,"form",10),g.TgZ(13,"div",3),g.TgZ(14,"div",11),g.TgZ(15,"label",12),g._uU(16,"Nombre"),g.qZA(),g.TgZ(17,"input",13),g.NdJ("ngModelChange",function(c){return s.nombre=c}),g.qZA(),g.qZA(),g.TgZ(18,"div",11),g.TgZ(19,"label",14),g._uU(20,"Apellido"),g.qZA(),g.TgZ(21,"input",15),g.NdJ("ngModelChange",function(c){return s.apellido=c}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(22,"div",9),g.TgZ(23,"label",16),g._uU(24,"Email "),g.TgZ(25,"span",6),g._uU(26,"(Opcional)"),g.qZA(),g.qZA(),g.TgZ(27,"input",17),g.NdJ("ngModelChange",function(c){return s.email=c}),g.qZA(),g.qZA(),g.TgZ(28,"div",9),g.TgZ(29,"label",18),g._uU(30,"Direcci\xf3n"),g.qZA(),g.TgZ(31,"input",19),g.NdJ("ngModelChange",function(c){return s.direccion=c}),g.qZA(),g.qZA(),g.TgZ(32,"div",3),g.TgZ(33,"div",20),g.TgZ(34,"label",21),g._uU(35,"Pais"),g.qZA(),g.TgZ(36,"input",22),g.NdJ("ngModelChange",function(c){return s.pais=c}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(37,"button",23),g.NdJ("click",function(){return s.guardarActor()}),g._uU(38,"Cargar actor"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&r&&(g.xp6(17),g.Q6J("ngModel",s.nombre),g.xp6(4),g.Q6J("ngModel",s.apellido),g.xp6(6),g.Q6J("ngModel",s.email),g.xp6(4),g.Q6J("ngModel",s.direccion),g.xp6(5),g.Q6J("ngModel",s.pais))},directives:[gG,Vo,Mu,gs,ds,Aa,dd,El],styles:[""]}),i})();function _G(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"li",4),g.NdJ("click",function(){const c=g.CHM(r).$implicit;return g.oxw(2).SeleccionarActor(c)}),g.TgZ(1,"span"),g._uU(2),g.qZA(),g.TgZ(3,"span"),g._uU(4),g.qZA(),g.qZA()}if(2&i){const r=n.$implicit;g.xp6(2),g.hij("",r.nombre," "),g.xp6(2),g.hij(" ",r.apellido,"")}}function yG(i,n){if(1&i&&(g.TgZ(0,"ul",2),g.YNc(1,_G,5,2,"li",3),g.qZA()),2&i){const r=g.oxw();g.xp6(1),g.Q6J("ngForOf",r.listaActores)}}function vG(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"div",7),g.NdJ("click",function(){const c=g.CHM(r).$implicit;return g.oxw(2).SeleccionarActor(c)}),g.TgZ(1,"span"),g._uU(2),g.qZA(),g.TgZ(3,"span"),g._uU(4),g.qZA(),g.qZA()}if(2&i){const r=n.$implicit;g.xp6(2),g.hij("",r.nombre," "),g.xp6(2),g.hij(" ",r.apellido,"")}}function EG(i,n){if(1&i&&(g.TgZ(0,"div",5),g.YNc(1,vG,5,2,"div",6),g.qZA()),2&i){const r=g.oxw();g.xp6(1),g.Q6J("ngForOf",r.listaActores)}}let L2=(()=>{class i{constructor(r){this.actorService=r,this.seSeleccionoActorDeListado=new g.vpe,this.vista=!1,this.listaActores=[]}ngOnInit(){let r,s,o,c,h,_;this.actorService.getActores().subscribe(w=>{for(let T=0;T<w.length;T++){const S=w[T];r=S.payload.doc.data().nombre,s=S.payload.doc.data().apellido,o=S.payload.doc.data().email,c=S.payload.doc.data().direccion,h=S.payload.doc.data().pais,_=S.payload.doc.id;let R=new Tk(r,s,o,c,h);R.id=_,this.listaActores.push(R)}})}SeleccionarActor(r){this.seSeleccionoActorDeListado.emit(r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(Ik))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-actor-listado"]],inputs:{vista:"vista"},outputs:{seSeleccionoActorDeListado:"seSeleccionoActorDeListado"},decls:2,vars:2,consts:[["class","list-group",4,"ngIf"],["class","wrapper",4,"ngIf"],[1,"list-group"],["class","list-group-item lh-condensed ",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","lh-condensed",3,"click"],[1,"wrapper"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(r,s){1&r&&(g.YNc(0,yG,2,1,"ul",0),g.YNc(1,EG,2,1,"div",1)),2&r&&(g.Q6J("ngIf",s.vista),g.xp6(1),g.Q6J("ngIf",!s.vista))},directives:[Ei,$t],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:10px;grid-auto-rows:100px}"]}),i})();class QR{constructor(n,r,s,o,c,h){this.nombre=n,this.tipo=r,this.fechaDeEstreno=s,this.cantidadDePublico=o,this.fotoDeLaPelicula=c,this.actorId=h}}var JR=(()=>(function(i){i.terror="terror",i.comedia="comedia",i.amor="amor",i.otros="otros"}(JR||(JR={})),JR))();let sT=(()=>{class i{constructor(r){this.firestore=r,this.peliculas=this.firestore.collection("peliculas").snapshotChanges()}getPeliculas(){return this.firestore.collection("peliculas").snapshotChanges()}getPelicula(r){return this.firestore.collection("peliculas").doc(r).valueChanges()}guardarPelicula(r){return this.firestore.collection("peliculas").add({nombre:r.nombre,tipo:r.tipo,fechaDeEstreno:r.fechaDeEstreno,cantidadDePublico:r.cantidadDePublico,fotoDeLaPelicula:r.fotoDeLaPelicula,actorId:r.actorId})}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(ek))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function wG(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"li",5),g.NdJ("click",function(){const c=g.CHM(r).$implicit;return g.oxw(2).SeleccionarPelicula(c)}),g._UZ(1,"img",6),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.qZA()}if(2&i){const r=n.$implicit;g.xp6(1),g.Q6J("src",r.fotoDeLaPelicula,g.LSH),g.xp6(2),g.Oqu(r.nombre)}}function CG(i,n){if(1&i&&(g.TgZ(0,"ul",3),g.YNc(1,wG,4,2,"li",4),g.qZA()),2&i){const r=g.oxw();g.xp6(1),g.Q6J("ngForOf",r.arrayPeliculas)}}function bG(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"div",9),g.NdJ("click",function(){const c=g.CHM(r).$implicit;return g.oxw(2).SeleccionarPelicula(c)}),g._UZ(1,"img",6),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.qZA()}if(2&i){const r=n.$implicit;g.xp6(1),g.Q6J("src",r.fotoDeLaPelicula,g.LSH),g.xp6(2),g.Oqu(r.nombre)}}function TG(i,n){if(1&i&&(g.TgZ(0,"div",7),g.YNc(1,bG,4,2,"div",8),g.qZA()),2&i){const r=g.oxw();g.xp6(1),g.Q6J("ngForOf",r.arrayPeliculas)}}let V2=(()=>{class i{constructor(r){this.peliculaService=r,this.seSeleccionoPelicula=new g.vpe,this.arrayPeliculas=[]}ngOnInit(){}SeleccionarPelicula(r){this.seSeleccionoPelicula.emit(r)}CambiarVista(){this.vista=1!=this.vista}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(sT))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-tabla-pelicula"]],inputs:{arrayPeliculas:"arrayPeliculas"},outputs:{seSeleccionoPelicula:"seSeleccionoPelicula"},decls:6,vars:2,consts:[["class","list-group",4,"ngIf"],["class","wrapper",4,"ngIf"],["role","button",1,"btn","btn-primary","btn-lg",3,"click"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"],[3,"src"],[1,"wrapper"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(r,s){1&r&&(g.YNc(0,CG,2,1,"ul",0),g.YNc(1,TG,2,1,"div",1),g._UZ(2,"br"),g.TgZ(3,"p"),g.TgZ(4,"a",2),g.NdJ("click",function(){return s.CambiarVista()}),g._uU(5,"Cambiar vista"),g.qZA(),g.qZA()),2&r&&(g.Q6J("ngIf",s.vista),g.xp6(1),g.Q6J("ngIf",!s.vista))},directives:[Ei,$t],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:10px;grid-auto-rows:100px}img[_ngcontent-%COMP%]{display:inline;width:100px;height:100px;object-fit:scale-down}"]}),i})(),U2=(()=>{class i{constructor(r){this.peliculaService=r,this.arrayPeliculas=[],this.peliculasListado=!0}ngOnInit(){this.peliculasListado&&this.peliculaService.getPeliculas().subscribe(r=>{for(let s=0;s<r.length;s++){const o=r[s];let c=o.payload.doc.id,h=o.payload.doc.data().nombre,_=o.payload.doc.data().tipo,w=o.payload.doc.data().fechaDeEstreno,T=o.payload.doc.data().cantidadDePublico,S=o.payload.doc.data().fotoDeLaPelicula,R=o.payload.doc.data().actorId,P=new QR(h,_,w,T,S,R);P.id=c,this.arrayPeliculas.push(P)}})}limpiar(){this.arrayPeliculas!=[]&&(this.arrayPeliculas=[])}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(sT))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-pelicula-listado"]],inputs:{arrayPeliculas:"arrayPeliculas",peliculasListado:"peliculasListado"},decls:5,vars:1,consts:[[3,"arrayPeliculas"],["role","button",1,"btn","btn-secondary",3,"click"]],template:function(r,s){1&r&&(g._UZ(0,"app-tabla-pelicula",0),g._UZ(1,"br"),g.TgZ(2,"p"),g.TgZ(3,"a",1),g.NdJ("click",function(){return s.limpiar()}),g._uU(4,"limpiar"),g.qZA(),g.qZA()),2&r&&g.Q6J("arrayPeliculas",s.arrayPeliculas)},directives:[V2],styles:["img[_ngcontent-%COMP%]{display:inline;width:100px;height:100px;object-fit:scale-down}"]}),i})();function IG(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"li",6),g.NdJ("click",function(){const c=g.CHM(r).$implicit;return g.oxw(2).SeleccionarPais(c)}),g.TgZ(1,"span"),g._uU(2),g.qZA(),g._UZ(3,"br"),g._UZ(4,"img",7),g.qZA()}if(2&i){const r=n.$implicit;g.xp6(2),g.hij("",r.nombre," "),g.xp6(2),g.Q6J("src",r.bandera,g.LSH)}}function DG(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"ul",1),g.TgZ(1,"li",2),g.TgZ(2,"div"),g.TgZ(3,"ul",3),g.YNc(4,IG,5,2,"li",4),g.qZA(),g.qZA(),g.qZA(),g._UZ(5,"br"),g.TgZ(6,"p"),g.TgZ(7,"a",5),g.NdJ("click",function(){return g.CHM(r),g.oxw().limpiar()}),g._uU(8,"limpiar"),g.qZA(),g.qZA(),g.qZA()}if(2&i){const r=g.oxw();g.xp6(4),g.Q6J("ngForOf",r.listaPaises)}}const SG=function(){return[]};let AG=(()=>{class i{constructor(){}ngOnInit(){}limpiar(){this.listaPaises!=[]&&(this.listaPaises=[])}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-detalle-pais"]],inputs:{listaPaises:"listaPaises"},decls:1,vars:2,consts:[["class","list-group mb-3",4,"ngIf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"list-group","mb-3","text-muted"],["class","list-group-item lh-condensed ",3,"click",4,"ngFor","ngForOf"],["role","button",1,"btn","btn-secondary",3,"click"],[1,"list-group-item","lh-condensed",3,"click"],[3,"src"]],template:function(r,s){1&r&&g.YNc(0,DG,9,1,"ul",0),2&r&&g.Q6J("ngIf",s.listaPaises!=g.DdM(1,SG))},directives:[Ei,$t],styles:["img[_ngcontent-%COMP%]{display:inline;width:100px;height:100px;object-fit:scale-down}"]}),i})();function RG(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"ul",1),g.TgZ(1,"li",2),g.TgZ(2,"div"),g.TgZ(3,"ul",3),g.TgZ(4,"li",2),g.TgZ(5,"span"),g._uU(6),g.qZA(),g.qZA(),g.TgZ(7,"li",2),g.TgZ(8,"span"),g._uU(9),g.qZA(),g.qZA(),g.TgZ(10,"li",2),g.TgZ(11,"span"),g._uU(12),g.qZA(),g.qZA(),g.TgZ(13,"li",2),g.TgZ(14,"span"),g._uU(15),g.qZA(),g.qZA(),g.TgZ(16,"li",2),g.TgZ(17,"span"),g._uU(18),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(19,"br"),g.TgZ(20,"p"),g.TgZ(21,"a",4),g.NdJ("click",function(){return g.CHM(r),g.oxw().limpiar()}),g._uU(22,"limpiar"),g.qZA(),g.qZA(),g.qZA()}if(2&i){const r=g.oxw();g.xp6(6),g.hij("Nombre: ",r.actor.nombre,""),g.xp6(3),g.hij("Apellido: ",r.actor.apellido,""),g.xp6(3),g.hij("Email: ",r.actor.email,""),g.xp6(3),g.hij("Direcci\xf3n: ",r.actor.direccion,""),g.xp6(3),g.hij("Pa\xeds: ",r.actor.pais,"")}}let NG=(()=>{class i{constructor(){}ngOnInit(){}limpiar(){null!=this.actor&&(this.actor=null)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-detalle-actor"]],inputs:{actor:"actor"},decls:1,vars:1,consts:[["class","list-group mb-3",4,"ngIf"],[1,"list-group","mb-3"],[1,"list-group-item","lh-condensed"],[1,"list-group","mb-3","text-muted"],["role","button",1,"btn","btn-secondary",3,"click"]],template:function(r,s){1&r&&g.YNc(0,RG,23,5,"ul",0),2&r&&g.Q6J("ngIf",s.actor)},directives:[Ei],styles:[""]}),i})(),xG=(()=>{class i{constructor(r,s){this.paisService=r,this.peliculaService=s,this.vista=!1,this.listaPaises=[],this.arrayPeliculas=[]}ngOnInit(){}mostrar(r){let s,o;this.arrayPeliculas=[],this.listaPaises=[],this.actor=r,this.paisService.getPaisByName(r.pais).subscribe(c=>{for(let h=0;h<c.length;h++)s=c[h].name.common,o=c[h].flags.png,this.listaPaises.push(new C2(s,o))}),this.peliculaService.getPeliculas().subscribe(c=>{for(let h=0;h<c.length;h++){const _=c[h];let w=_.payload.doc.data().actorId;if(_.payload.doc.data().actorId==this.actor.id){let T=_.payload.doc.id,S=_.payload.doc.data().nombre,R=_.payload.doc.data().tipo,P=_.payload.doc.data().fechaDeEstreno,k=_.payload.doc.data().cantidadDePublico,U=_.payload.doc.data().fotoDeLaPelicula,J=new QR(S,R,P,k,U,w);J.id=T,this.arrayPeliculas.push(J)}}})}CambiarVista(){this.vista=1!=this.vista}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(F2),g.Y36(sT))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-actor-pelicula"]],decls:26,vars:5,consts:[["lang","en"],["role","main"],[1,"jumbotron"],[1,"container"],[1,"display-3"],[3,"vista","seSeleccionoActorDeListado"],["role","button",1,"btn","btn-primary","btn-lg",3,"click"],[1,"row"],[1,"col-md-4"],[3,"arrayPeliculas","peliculasListado"],[1,"col-md-4","solomostrar"],[3,"listaPaises"],[3,"actor"]],template:function(r,s){1&r&&(g.TgZ(0,"html",0),g.TgZ(1,"body"),g.TgZ(2,"main",1),g.TgZ(3,"div",2),g.TgZ(4,"div",3),g.TgZ(5,"h1",4),g._uU(6,"Listado de actores"),g.qZA(),g.TgZ(7,"app-actor-listado",5),g.NdJ("seSeleccionoActorDeListado",function(c){return s.mostrar(c)}),g.qZA(),g.TgZ(8,"p"),g.TgZ(9,"a",6),g.NdJ("click",function(){return s.CambiarVista()}),g._uU(10,"cambiar vista"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(11,"div",3),g.TgZ(12,"div",7),g.TgZ(13,"div",8),g.TgZ(14,"h2"),g._uU(15,"Peliculas"),g.qZA(),g._UZ(16,"app-pelicula-listado",9),g.qZA(),g.TgZ(17,"div",10),g.TgZ(18,"h2"),g._uU(19,"Pais"),g.qZA(),g._UZ(20,"app-detalle-pais",11),g.qZA(),g.TgZ(21,"div",8),g.TgZ(22,"h2"),g._uU(23,"Detalle"),g.qZA(),g._UZ(24,"app-detalle-actor",12),g.qZA(),g.qZA(),g._UZ(25,"hr"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&r&&(g.xp6(7),g.Q6J("vista",s.vista),g.xp6(9),g.Q6J("arrayPeliculas",s.arrayPeliculas)("peliculasListado",!1),g.xp6(4),g.Q6J("listaPaises",s.listaPaises),g.xp6(4),g.Q6J("actor",s.actor))},directives:[L2,U2,AG,NG],styles:["img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:scale-down}"]}),i})();function PG(i,n){if(1&i&&(g.TgZ(0,"div"),g.TgZ(1,"span"),g._uU(2),g.qZA(),g._UZ(3,"br"),g.TgZ(4,"span"),g._uU(5),g.qZA(),g._UZ(6,"br"),g.TgZ(7,"span"),g._uU(8),g.qZA(),g._UZ(9,"br"),g.TgZ(10,"span"),g._uU(11),g.qZA(),g._UZ(12,"br"),g.TgZ(13,"span"),g._uU(14),g.qZA(),g._UZ(15,"br"),g._UZ(16,"img",2),g.qZA()),2&i){const r=g.oxw();g.xp6(2),g.hij("id: ",r.pelicula.id,""),g.xp6(3),g.hij("nombre: ",r.pelicula.nombre,""),g.xp6(3),g.hij("tipo: ",r.pelicula.tipo,""),g.xp6(3),g.hij("fecha de estreno: ",r.pelicula.fechaDeEstreno,""),g.xp6(3),g.hij("cantidad de p\xfablico: ",r.pelicula.cantidadDePublico,""),g.xp6(2),g.Q6J("src",r.pelicula.fotoDeLaPelicula,g.LSH)}}let OG=(()=>{class i{constructor(){}ngOnInit(){}limpiar(){null!=this.pelicula&&(this.pelicula=null)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-detalle-pelicula"]],inputs:{pelicula:"pelicula"},decls:5,vars:1,consts:[[4,"ngIf"],["role","button",1,"btn","btn-secondary",3,"click"],["alt","",3,"src"]],template:function(r,s){1&r&&(g.YNc(0,PG,17,6,"div",0),g._UZ(1,"br"),g.TgZ(2,"p"),g.TgZ(3,"a",1),g.NdJ("click",function(){return s.limpiar()}),g._uU(4,"limpiar"),g.qZA(),g.qZA()),2&r&&g.Q6J("ngIf",s.pelicula)},directives:[Ei],styles:["img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:scale-down}"]}),i})(),MG=(()=>{class i{constructor(r){this.peliculaService=r,this.arrayPeliculas=[]}ngOnInit(){this.peliculaService.getPeliculas().subscribe(r=>{for(let s=0;s<r.length;s++){const o=r[s];let c=o.payload.doc.id,h=o.payload.doc.data().nombre,_=o.payload.doc.data().tipo,w=o.payload.doc.data().fechaDeEstreno,T=o.payload.doc.data().cantidadDePublico,S=o.payload.doc.data().fotoDeLaPelicula,R=o.payload.doc.data().actorId,P=new QR(h,_,w,T,S,R);P.id=c,this.arrayPeliculas.push(P)}})}mostrar(r){this.pelicula=r}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(sT))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-busqueda"]],decls:19,vars:2,consts:[["lang","en"],["role","main"],[1,"jumbotron"],[1,"container"],[1,"display-3"],[3,"arrayPeliculas","seSeleccionoPelicula"],[1,"row"],[1,"col-md-4","solomostrar"],[3,"pelicula"]],template:function(r,s){1&r&&(g.TgZ(0,"html",0),g.TgZ(1,"body"),g.TgZ(2,"main",1),g.TgZ(3,"div",2),g.TgZ(4,"div",3),g.TgZ(5,"h1",4),g._uU(6,"Listado de pel\xedculas"),g.qZA(),g.TgZ(7,"app-tabla-pelicula",5),g.NdJ("seSeleccionoPelicula",function(c){return s.mostrar(c)}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"div",3),g.TgZ(9,"div",6),g.TgZ(10,"div",7),g.TgZ(11,"h2"),g._uU(12,"Solo mostrar"),g.qZA(),g._UZ(13,"app-detalle-pelicula",8),g._UZ(14,"br"),g.qZA(),g.qZA(),g._UZ(15,"hr"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(16,"footer",3),g.TgZ(17,"p"),g._uU(18,"\xa9 Company 2017-2020"),g.qZA(),g.qZA(),g.qZA()),2&r&&(g.xp6(7),g.Q6J("arrayPeliculas",s.arrayPeliculas),g.xp6(6),g.Q6J("pelicula",s.pelicula))},directives:[V2,OG],styles:["body[_ngcontent-%COMP%]{padding-top:3.5rem}.solomostrar[_ngcontent-%COMP%]{display:grid}"]}),i})(),kG=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-home"]],decls:0,vars:0,template:function(r,s){},styles:["body[_ngcontent-%COMP%]{padding-top:3.5rem}"]}),i})();var FG=V(4762);class VG{constructor(n,r){this.dueTime=n,this.scheduler=r}call(n,r){return r.subscribe(new UG(n,this.dueTime,this.scheduler))}}class UG extends Es.L{constructor(n,r,s){super(n),this.dueTime=r,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(BG,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function BG(i){i.debouncedNext()}var gf=(()=>(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"}(gf||(gf={})),gf))();const B2="firebasestorage.googleapis.com",j2="storageBucket";class sr extends L.ZR{constructor(n,r){super(Pk(n),`Firebase Storage: ${r} (${Pk(n)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sr.prototype)}_codeEquals(n){return Pk(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Pk(i){return"storage/"+i}function Ok(){return new sr("unknown","An unknown error occurred, please check the error payload for server response.")}function H2(){return new sr("canceled","User canceled the upload/download.")}function $2(){return new sr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function XG(){return new sr("no-download-url","The given file does not have any download URLs.")}function pE(i){return new sr("invalid-argument",i)}function q2(){return new sr("app-deleted","The Firebase app was deleted.")}function G2(i){return new sr("invalid-root-operation","The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oT(i,n){return new sr("invalid-format","String does not match format '"+i+"': "+n)}function XR(i){throw new sr("internal-error","Internal error: "+i)}class eW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=gf.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gf.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gf.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,r,s,o){if(this.sent_)throw XR("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,n,!0),void 0!==o)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw XR("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw XR("cannot .getStatus() before sending");try{return this.xhr_.status}catch(n){return-1}}getResponseText(){if(!this.sent_)throw XR("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class nW{createConnection(){return new eW}}class Mi{constructor(n,r){this.bucket=n,this.path_=r}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,r){let s;try{s=Mi.makeFromUrl(n,r)}catch(o){return new Mi(n,"")}if(""===s.path)return s;throw function(i){return new sr("invalid-default-bucket","Invalid default bucket '"+i+"'.")}(n)}static makeFromUrl(n,r){let s=null;const o="([A-Za-z0-9.\\-_]+)",_=new RegExp("^gs://"+o+"(/(.*))?$","i");function T(Ge){Ge.path_=decodeURIComponent(Ge.path)}const R=r.replace(/[.]/g,"\\."),$e=[{regex:_,indices:{bucket:1,path:3},postModify:function(Ge){"/"===Ge.path.charAt(Ge.path.length-1)&&(Ge.path_=Ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${R}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:T},{regex:new RegExp(`^https?://${r===B2?"(?:storage.googleapis.com|storage.cloud.google.com)":r}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:T}];for(let Ge=0;Ge<$e.length;Ge++){const un=$e[Ge],or=un.regex.exec(n);if(or){let is=or[un.indices.path];is||(is=""),s=new Mi(or[un.indices.bucket],is),un.postModify(s);break}}if(null==s)throw function(i){return new sr("invalid-url","Invalid URL '"+i+"'.")}(n);return s}}class rW{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function eN(i){return"string"==typeof i||i instanceof String}function W2(i){return Mk()&&i instanceof Blob}function Mk(){return"undefined"!=typeof Blob}function kk(i,n,r,s){if(s<n)throw pE(`Invalid value for '${i}'. Expected ${n} or greater.`);if(s>r)throw pE(`Invalid value for '${i}'. Expected ${r} or less.`)}function mf(i,n,r){let s=n;return null==r&&(s=`https://${n}`),`${r}://${s}/v0${i}`}function Z2(i){const n=encodeURIComponent;let r="?";for(const s in i)i.hasOwnProperty(s)&&(r=r+(n(s)+"=")+n(i[s])+"&");return r=r.slice(0,-1),r}class uW{constructor(n,r,s,o,c,h,_,w,T,S,R){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=n,this.method_=r,this.headers_=s,this.body_=o,this.successCodes_=c.slice(),this.additionalRetryCodes_=h.slice(),this.callback_=_,this.errorCallback_=w,this.progressCallback_=S,this.timeout_=T,this.pool_=R,this.promise_=new Promise((P,k)=>{this.resolve_=P,this.reject_=k,this.start_()})}start_(){const n=this;function s(o,c){const h=n.resolve_,_=n.reject_,w=c.connection;if(c.wasSuccessCode)try{const T=n.callback_(w,w.getResponseText());!function(i){return void 0!==i}(T)?h():h(T)}catch(T){_(T)}else if(null!==w){const T=Ok();T.serverResponse=w.getResponseText(),_(n.errorCallback_?n.errorCallback_(w,T):T)}else _(c.canceled?n.appDelete_?q2():H2():new sr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?s(0,new tN(!1,null,!0)):this.backoffId_=function(i,n,r){let s=1,o=null,c=!1,h=0;function _(){return 2===h}let w=!1;function T(...U){w||(w=!0,n.apply(null,U))}function S(U){o=setTimeout(()=>{o=null,i(R,_())},U)}function R(U,...J){if(w)return;if(U)return void T.call(null,U,...J);if(_()||c)return void T.call(null,U,...J);let Oe;s<64&&(s*=2),1===h?(h=2,Oe=0):Oe=1e3*(s+Math.random()),S(Oe)}let P=!1;function k(U){P||(P=!0,!w&&(null!==o?(U||(h=2),clearTimeout(o),S(0)):U||(h=1)))}return S(0),setTimeout(()=>{c=!0,k(!0)},r),k}(function(o,c){if(c)return void o(!1,new tN(!1,null,!0));const h=n.pool_.createConnection();function _(w){null!==n.progressCallback_&&n.progressCallback_(w.loaded,w.lengthComputable?w.total:-1)}n.pendingConnection_=h,null!==n.progressCallback_&&h.addUploadProgressListener(_),h.send(n.url_,n.method_,n.body_,n.headers_).then(()=>{null!==n.progressCallback_&&h.removeUploadProgressListener(_),n.pendingConnection_=null;const w=h.getErrorCode()===gf.NO_ERROR,T=h.getStatus();if(!w||n.isRetryStatusCode_(T)){const R=h.getErrorCode()===gf.ABORT;return void o(!1,new tN(!1,null,R))}const S=-1!==n.successCodes_.indexOf(T);o(!0,new tN(S,h))})},s,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(n){const r=n>=500&&n<600,o=-1!==[408,429].indexOf(n),c=-1!==this.additionalRetryCodes_.indexOf(n);return r||o||c}}class tN{constructor(n,r,s){this.wasSuccessCode=n,this.connection=r,this.canceled=!!s}}function mW(...i){const n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){const r=new n;for(let s=0;s<i.length;s++)r.append(i[s]);return r.getBlob()}if(Mk())return new Blob(i);throw new sr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fk{constructor(n,r){this.data=n,this.contentType=r||null}}function Lk(i,n){switch(i){case yo.RAW:return new Fk(z2(n));case yo.BASE64:case yo.BASE64URL:return new Fk(K2(i,n));case yo.DATA_URL:return new Fk(function(i){const n=new Y2(i);return n.base64?K2(yo.BASE64,n.rest):function(i){let n;try{n=decodeURIComponent(i)}catch(r){throw oT(yo.DATA_URL,"Malformed data URL.")}return z2(n)}(n.rest)}(n),function(i){return new Y2(i).contentType}(n))}throw Ok()}function z2(i){const n=[];for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<=127?n.push(s):s<=2047?n.push(192|s>>6,128|63&s):55296==(64512&s)?r<i.length-1&&56320==(64512&i.charCodeAt(r+1))?(s=65536|(1023&s)<<10|1023&i.charCodeAt(++r),n.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):n.push(239,191,189):56320==(64512&s)?n.push(239,191,189):n.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(n)}function K2(i,n){switch(i){case yo.BASE64:{const o=-1!==n.indexOf("-"),c=-1!==n.indexOf("_");if(o||c)throw oT(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case yo.BASE64URL:{const o=-1!==n.indexOf("+"),c=-1!==n.indexOf("/");if(o||c)throw oT(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=function(i){return atob(i)}(n)}catch(o){throw oT(i,"Invalid character found")}const s=new Uint8Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return s}class Y2{constructor(n){this.base64=!1,this.contentType=null;const r=n.match(/^data:([^,]+)?,/);if(null===r)throw oT(yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=r[1]||null;null!=s&&(this.base64=function(i,n){return i.length>=n.length&&i.substring(i.length-n.length)===n}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-";base64".length):s),this.rest=n.substring(n.indexOf(",")+1)}}class uu{constructor(n,r){let s=0,o="";W2(n)?(this.data_=n,s=n.size,o=n.type):n instanceof ArrayBuffer?(r?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),s=this.data_.length):n instanceof Uint8Array&&(r?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),s=n.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(n,r){if(W2(this.data_)){const o=function(i,n,r){return i.webkitSlice?i.webkitSlice(n,r):i.mozSlice?i.mozSlice(n,r):i.slice?i.slice(n,r):null}(this.data_,n,r);return null===o?null:new uu(o)}{const s=new Uint8Array(this.data_.buffer,n,r-n);return new uu(s,!0)}}static getBlob(...n){if(Mk()){const r=n.map(s=>s instanceof uu?s.data_:s);return new uu(mW.apply(null,r))}{const r=n.map(h=>eN(h)?Lk(yo.RAW,h).data:h.data_);let s=0;r.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let c=0;return r.forEach(h=>{for(let _=0;_<h.length;_++)o[c++]=h[_]}),new uu(o,!0)}}uploadData(){return this.data_}}function Vk(i){let n;try{n=JSON.parse(i)}catch(r){return null}return function(i){return"object"==typeof i&&!Array.isArray(i)}(n)?n:null}function Q2(i){const n=i.lastIndexOf("/",i.length-2);return-1===n?i:i.slice(n+1)}function IW(i,n){return n}class ns{constructor(n,r,s,o){this.server=n,this.local=r||n,this.writable=!!s,this.xform=o||IW}}let nN=null;function aT(){if(nN)return nN;const i=[];i.push(new ns("bucket")),i.push(new ns("generation")),i.push(new ns("metageneration")),i.push(new ns("name","fullPath",!0));const r=new ns("name");r.xform=function(c,h){return function(i){return!eN(i)||i.length<2?i:Q2(i)}(h)},i.push(r);const o=new ns("size");return o.xform=function(c,h){return void 0!==h?Number(h):h},i.push(o),i.push(new ns("timeCreated")),i.push(new ns("updated")),i.push(new ns("md5Hash",null,!0)),i.push(new ns("cacheControl",null,!0)),i.push(new ns("contentDisposition",null,!0)),i.push(new ns("contentEncoding",null,!0)),i.push(new ns("contentLanguage",null,!0)),i.push(new ns("contentType",null,!0)),i.push(new ns("metadata","customMetadata",!0)),nN=i,nN}function J2(i,n,r){const s=Vk(n);return null===s?null:function(i,n,r){const s={type:"file"},o=r.length;for(let c=0;c<o;c++){const h=r[c];s[h.local]=h.xform(s,n[h.server])}return function(i,n){Object.defineProperty(i,"ref",{get:function(){const c=new Mi(i.bucket,i.fullPath);return n._makeStorageReference(c)}})}(s,i),s}(i,s,r)}function Uk(i,n){const r={},s=n.length;for(let o=0;o<s;o++){const c=n[o];c.writable&&(r[c.server]=i[c.local])}return JSON.stringify(r)}const X2="prefixes";class Lc{constructor(n,r,s,o){this.url=n,this.method=r,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function cu(i){if(!i)throw Ok()}function rN(i,n){return function(s,o){const c=J2(i,o,n);return cu(null!==c),c}}function gE(i){return function(r,s){let o;return o=401===r.getStatus()?r.getResponseText().includes("Firebase App Check token is invalid")?new sr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new sr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===r.getStatus()?function(i){return new sr("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===r.getStatus()?function(i){return new sr("unauthorized","User does not have permission to access '"+i+"'.")}(i.path):s,o.serverResponse=s.serverResponse,o}}function iN(i){const n=gE(i);return function(s,o){let c=n(s,o);return 404===s.getStatus()&&(c=function(i){return new sr("object-not-found","Object '"+i+"' does not exist.")}(i.path)),c.serverResponse=o.serverResponse,c}}function tB(i,n,r){const o=mf(n.fullServerUrl(),i.host,i._protocol),h=i.maxOperationRetryTime,_=new Lc(o,"GET",rN(i,r),h);return _.errorHandler=iN(n),_}function MW(i,n,r,s,o){const c={};c.prefix=n.isRoot?"":n.path+"/",r&&r.length>0&&(c.delimiter=r),s&&(c.pageToken=s),o&&(c.maxResults=o);const _=mf(n.bucketOnlyServerUrl(),i.host,i._protocol),T=i.maxOperationRetryTime,S=new Lc(_,"GET",function(i,n){return function(s,o){const c=function(i,n,r){const s=Vk(r);return null===s?null:function(i,n,r){const s={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[X2])for(const o of r[X2]){const c=o.replace(/\/$/,""),h=i._makeStorageReference(new Mi(n,c));s.prefixes.push(h)}if(r.items)for(const o of r.items){const c=i._makeStorageReference(new Mi(n,o.name));s.items.push(c)}return s}(i,n,s)}(i,n,o);return cu(null!==c),c}}(i,n.bucket),T);return S.urlParams=c,S.errorHandler=gE(n),S}function kW(i,n,r){const o=mf(n.fullServerUrl(),i.host,i._protocol),h=i.maxOperationRetryTime,_=new Lc(o,"GET",function(i,n){return function(s,o){const c=J2(i,o,n);return cu(null!==c),function(i,n,r,s){const o=Vk(n);if(null===o||!eN(o.downloadTokens))return null;const c=o.downloadTokens;if(0===c.length)return null;const h=encodeURIComponent;return c.split(",").map(T=>{const R=i.fullPath;return mf("/b/"+h(i.bucket)+"/o/"+h(R),r,s)+Z2({alt:"media",token:T})})[0]}(c,o,i.host,i._protocol)}}(i,r),h);return _.errorHandler=iN(n),_}function FW(i,n,r,s){const c=mf(n.fullServerUrl(),i.host,i._protocol),_=Uk(r,s),T=i.maxOperationRetryTime,S=new Lc(c,"PATCH",rN(i,s),T);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=_,S.errorHandler=iN(n),S}function LW(i,n){const s=mf(n.fullServerUrl(),i.host,i._protocol),_=new Lc(s,"DELETE",function(w,T){},i.maxOperationRetryTime);return _.successCodes=[200,204],_.errorHandler=iN(n),_}function nB(i,n,r){const s=Object.assign({},r);return s.fullPath=i.path,s.size=n.size(),s.contentType||(s.contentType=function(i,n){return n&&n.type()||"application/octet-stream"}(0,n)),s}class sN{constructor(n,r,s,o){this.current=n,this.total=r,this.finalized=!!s,this.metadata=o||null}}function Bk(i,n){let r=null;try{r=i.getResponseHeader("X-Goog-Upload-Status")}catch(o){cu(!1)}return cu(!!r&&-1!==(n||["active"]).indexOf(r)),r}const HW={STATE_CHANGED:"state_changed"},rs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jk(i){switch(i){case"running":case"pausing":case"canceling":return rs.RUNNING;case"paused":return rs.PAUSED;case"success":return rs.SUCCESS;case"canceled":return rs.CANCELED;case"error":default:return rs.ERROR}}class $W{constructor(n,r,s){if(function(i){return"function"==typeof i}(n)||null!=r||null!=s)this.next=n,this.error=null!=r?r:void 0,this.complete=null!=s?s:void 0;else{const c=n;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function mE(i){return(...n)=>{Promise.resolve().then(()=>i(...n))}}class sB{constructor(n,r,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=r,this._metadata=s,this._mappings=aT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const n=this._transferred;return r=>this._updateProgress(n+r)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,s])=>{switch(this._state){case"running":n(r,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,o){const c=n.bucketOnlyServerUrl(),h=nB(n,s,o),_={name:h.fullPath},w=mf(c,i.host,i._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},R=Uk(h,r),U=new Lc(w,"POST",function(J){let me;Bk(J);try{me=J.getResponseHeader("X-Goog-Upload-URL")}catch(Oe){cu(!1)}return cu(eN(me)),me},i.maxUploadRetryTime);return U.urlParams=_,U.headers=S,U.body=R,U.errorHandler=gE(n),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(s,n,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((r,s)=>{const o=function(i,n,r,s){const w=new Lc(r,"POST",function(T){const S=Bk(T,["active","final"]);let R=null;try{R=T.getResponseHeader("X-Goog-Upload-Size-Received")}catch(k){cu(!1)}R||cu(!1);const P=Number(R);return cu(!isNaN(P)),new sN(P,s.size(),"final"===S)},i.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=gE(n),w}(this._ref.storage,this._ref._location,n,this._blob),c=this._ref.storage._makeRequest(o,r,s);this._request=c,c.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,r=new sN(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((o,c)=>{let h;try{h=function(i,n,r,s,o,c,h,_){const w=new sN(0,0);if(h?(w.current=h.current,w.total=h.total):(w.current=0,w.total=s.size()),s.size()!==w.total)throw new sr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const T=w.total-w.current;let S=T;o>0&&(S=Math.min(S,o));const R=w.current,U={"X-Goog-Upload-Command":S===T?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},J=s.slice(R,R+S);if(null===J)throw $2();const $e=new Lc(r,"POST",function(Ge,un){const or=Bk(Ge,["active","final"]),Mr=w.current+S,is=s.size();let vo;return vo="final"===or?rN(n,c)(Ge,un):null,new sN(Mr,is,"final"===or,vo)},n.maxUploadRetryTime);return $e.headers=U,$e.body=J.uploadData(),$e.progressCallback=_||null,$e.errorHandler=gE(i),$e}(this._ref._location,this._ref.storage,s,this._blob,n,this._mappings,r,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const _=this._ref.storage._makeRequest(h,o,c);this._request=_,_.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,r)=>{const s=tB(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(s,n,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,r)=>{const s=function(i,n,r,s,o){const c=n.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"},w=function(){let $e="";for(let Ge=0;Ge<2;Ge++)$e+=Math.random().toString().slice(2);return $e}();h["Content-Type"]="multipart/related; boundary="+w;const T=nB(n,s,o),S=Uk(T,r),k=uu.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+w+"\r\nContent-Type: "+T.contentType+"\r\n\r\n",s,"\r\n--"+w+"--");if(null===k)throw $2();const U={name:T.fullPath},J=mf(c,i.host,i._protocol),Oe=i.maxUploadRetryTime,je=new Lc(J,"POST",rN(i,r),Oe);return je.urlParams=U,je.headers=h,je.body=k.uploadData(),je.errorHandler=gE(n),je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(s,n,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const r=this._transferred;this._transferred=n,this._transferred!==r&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request&&this._request.cancel();break;case"running":const r="paused"===this._state;this._state=n,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=n,this._notifyObservers();break;case"canceled":this._error=H2(),this._state=n,this._notifyObservers();break;case"error":case"success":this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=jk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,r,s,o){const c=new $W(r||void 0,s||void 0,o||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(n,r){return this._promise.then(n,r)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const r=this._observers.indexOf(n);-1!==r&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(jk(this._state)){case rs.SUCCESS:mE(this._resolve.bind(null,this.snapshot))();break;case rs.CANCELED:case rs.ERROR:mE(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(jk(this._state)){case rs.RUNNING:case rs.PAUSED:n.next&&mE(n.next.bind(n,this.snapshot))();break;case rs.SUCCESS:n.complete&&mE(n.complete.bind(n))();break;case rs.CANCELED:case rs.ERROR:n.error&&mE(n.error.bind(n,this._error))();break;default:n.error&&mE(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class Tm{constructor(n,r){this._service=n,this._location=r instanceof Mi?r:Mi.makeFromUrl(r,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,r){return new Tm(n,r)}get root(){const n=new Mi(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q2(this._location.path)}get storage(){return this._service}get parent(){const n=function(i){if(0===i.length)return null;const n=i.lastIndexOf("/");return-1===n?"":i.slice(0,n)}(this._location.path);if(null===n)return null;const r=new Mi(this._location.bucket,n);return new Tm(this._service,r)}_throwIfRoot(n){if(""===this._location.path)throw G2(n)}}function aB(i,n,r){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,Ce.Z)(function*(i,n,r){const o=yield lB(i,{pageToken:r});n.prefixes.push(...o.prefixes),n.items.push(...o.items),null!=o.nextPageToken&&(yield aB(i,n,o.nextPageToken))})).apply(this,arguments)}function lB(i,n){return $k.apply(this,arguments)}function $k(){return($k=(0,Ce.Z)(function*(i,n){null!=n&&"number"==typeof n.maxResults&&kk("options.maxResults",1,1e3,n.maxResults);const r=n||{},s=MW(i.storage,i._location,"/",r.pageToken,r.maxResults);return(yield i.storage.makeRequestWithTokens(s)).getPromise()})).apply(this,arguments)}function qk(){return(qk=(0,Ce.Z)(function*(i){i._throwIfRoot("getMetadata");const n=tB(i.storage,i._location,aT());return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function Gk(){return(Gk=(0,Ce.Z)(function*(i,n){i._throwIfRoot("updateMetadata");const r=FW(i.storage,i._location,n,aT());return(yield i.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function Wk(){return(Wk=(0,Ce.Z)(function*(i){i._throwIfRoot("getDownloadURL");const n=kW(i.storage,i._location,aT());return(yield i.storage.makeRequestWithTokens(n)).getPromise().then(r=>{if(null===r)throw XG();return r})})).apply(this,arguments)}function Zk(){return(Zk=(0,Ce.Z)(function*(i){i._throwIfRoot("deleteObject");const n=LW(i.storage,i._location);return(yield i.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function uB(i,n){const r=function(i,n){const r=n.split("/").filter(s=>s.length>0).join("/");return 0===i.length?r:i+"/"+r}(i._location.path,n),s=new Mi(i._location.bucket,r);return new Tm(i.storage,s)}function cB(i,n){if(i instanceof zk){const r=i;if(null==r._bucket)throw new sr("no-default-bucket","No default bucket found. Did you set the '"+j2+"' property when initializing the app?");const s=new Tm(r,r._bucket);return null!=n?cB(s,n):s}return void 0!==n?uB(i,n):i}function XW(i,n){if(n&&function(i){return/^[A-Za-z]+:\/\//.test(i)}(n)){if(i instanceof zk)return function(i,n){return new Tm(i,n)}(i,n);throw pE("To use ref(service, url), the first argument must be a Storage instance.")}return cB(i,n)}function dB(i,n){const r=null==n?void 0:n[j2];return null==r?null:Mi.makeFromBucketSpec(r,i)}class zk{constructor(n,r,s,o,c,h){this.app=n,this._authProvider=r,this._appCheckProvider=s,this._pool=o,this._url=c,this._firebaseVersion=h,this._bucket=null,this._host=B2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=c?Mi.makeFromBucketSpec(c,this._host):dB(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?Mi.makeFromBucketSpec(this._url,n):dB(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){kk("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){kk("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,Ce.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const r=n._authProvider.getImmediate({optional:!0});if(r){const s=yield r.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,Ce.Z)(function*(){const r=n._appCheckProvider.getImmediate({optional:!0});return r?(yield r.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new Tm(this,n)}_makeRequest(n,r,s){if(this._deleted)return new rW(q2());{const o=function(i,n,r,s,o,c){const h=Z2(i.urlParams),_=i.url+h,w=Object.assign({},i.headers);return function(i,n){n&&(i["X-Firebase-GMPID"]=n)}(w,n),function(i,n){null!==n&&n.length>0&&(i.Authorization="Firebase "+n)}(w,r),function(i,n){i["X-Firebase-Storage-Version"]="webjs/"+(null!=n?n:"AppManager")}(w,c),function(i,n){null!==n&&(i["X-Firebase-AppCheck"]=n)}(w,s),new uW(_,i.method,w,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o)}(n,this._appId,r,s,this._pool,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(n){var r=this;return(0,Ce.Z)(function*(){const[s,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(n,s,o)})()}}function fB(i,n){return XW(i=(0,L.m9)(i),n)}(0,ka._registerComponent)(new Ma.wA("storage",function(i,{instanceIdentifier:n}){const r=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new zk(r,s,o,new nW,n,ka.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,ka.registerVersion)("@firebase/storage","0.8.3");class oN{constructor(n,r,s){this._delegate=n,this.task=r,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class pB{constructor(n,r){this._delegate=n,this._ref=r,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oN(this._delegate.snapshot,this,this._ref)}then(n,r){return this._delegate.then(s=>{if(n)return n(new oN(s,this,this._ref))},r)}on(n,r,s,o){let c;return r&&(c="function"==typeof r?h=>r(new oN(h,this,this._ref)):{next:r.next?h=>r.next(new oN(h,this,this._ref)):void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(n,c,s||void 0,o||void 0)}}class gB{constructor(n,r){this._delegate=n,this._service=r}get prefixes(){return this._delegate.prefixes.map(n=>new Vc(n,this._service))}get items(){return this._delegate.items.map(n=>new Vc(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Vc{constructor(n,r){this._delegate=n,this.storage=r}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const r=function(i,n){return uB(i,n)}(this._delegate,n);return new Vc(r,this.storage)}get root(){return new Vc(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new Vc(n,this.storage)}put(n,r){return this._throwIfRoot("put"),new pB(function(i,n,r){return function(i,n,r){return i._throwIfRoot("uploadBytesResumable"),new sB(i,new uu(n),r)}(i=(0,L.m9)(i),n,r)}(this._delegate,n,r),this)}putString(n,r=yo.RAW,s){this._throwIfRoot("putString");const o=Lk(r,n),c=Object.assign({},s);return null==c.contentType&&null!=o.contentType&&(c.contentType=o.contentType),new pB(new sB(this._delegate,new uu(o.data,!0),c),this)}listAll(){return function(i){return function(i){const n={prefixes:[],items:[]};return aB(i,n).then(()=>n)}(i=(0,L.m9)(i))}(this._delegate).then(n=>new gB(n,this.storage))}list(n){return function(i,n){return lB(i=(0,L.m9)(i),n)}(this._delegate,n||void 0).then(r=>new gB(r,this.storage))}getMetadata(){return function(i){return function(i){return qk.apply(this,arguments)}(i=(0,L.m9)(i))}(this._delegate)}updateMetadata(n){return function(i,n){return function(i,n){return Gk.apply(this,arguments)}(i=(0,L.m9)(i),n)}(this._delegate,n)}getDownloadURL(){return function(i){return function(i){return Wk.apply(this,arguments)}(i=(0,L.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(i){return function(i){return Zk.apply(this,arguments)}(i=(0,L.m9)(i))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw G2(n)}}class mB{constructor(n,r){this.app=n,this._delegate=r}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(_B(n))throw pE("ref() expected a child path but got a URL, use refFromURL instead.");return new Vc(fB(this._delegate,n),this)}refFromURL(n){if(!_B(n))throw pE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mi.makeFromUrl(n,this._delegate.host)}catch(r){throw pE("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vc(fB(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,r,s={}){!function(i,n,r,s={}){!function(i,n,r,s={}){i.host=`${n}:${r}`,i._protocol="http";const{mockUserToken:o}=s;o&&(i._overrideAuthToken="string"==typeof o?o:(0,L.Sg)(o,i.app.options.projectId))}(i,n,r,s)}(this._delegate,n,r,s)}}function _B(i){return/^[A-Za-z]+:\/\//.test(i)}function _6(i,{instanceIdentifier:n}){const r=i.getProvider("app-compat").getImmediate(),s=i.getProvider("storage").getImmediate({identifier:n});return new mB(r,s)}function yB(i){const n=function(i){return new zn.y(n=>{const r=h=>n.next(h);r(i.snapshot);const c=i.on("state_changed",r);return i.then(h=>{r(h),n.complete()},h=>{r(i.snapshot),(h=>{n.error(h)})(h)}),function(){c()}}).pipe(function(i,n=Ud.P){return r=>r.lift(new VG(i,n))}(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,rt.U)(r=>r.bytesTransferred/r.totalBytes*100))}}function aN(i){return{getDownloadURL:()=>(0,lt.of)(void 0).pipe(Wt.fc,xn(()=>i.getDownloadURL()),Wt.iC),getMetadata:()=>(0,lt.of)(void 0).pipe(Wt.fc,xn(()=>i.getMetadata()),Wt.iC),delete:()=>(0,on.D)(i.delete()),child:n=>aN(i.child(n)),updateMetadata:n=>(0,on.D)(i.updateMetadata(n)),put:(n,r)=>yB(i.put(n,r)),putString:(n,r,s)=>yB(i.putString(n,r,s)),listAll:()=>(0,on.D)(i.listAll())}}!function(i){const n={TaskState:rs,TaskEvent:HW,StringFormat:yo,Storage:mB,Reference:Vc};i.INTERNAL.registerComponent(new Ma.wA("storage-compat",_6,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.1.3")}(jw.Z);const E6=new g.OlP("angularfire2.storageBucket"),w6=new g.OlP("angularfire2.storage.maxUploadRetryTime"),C6=new g.OlP("angularfire2.storage.maxOperationRetryTime"),b6=new g.OlP("angularfire2.storage.use-emulator");let vB=(()=>{class i{constructor(r,s,o,c,h,_,w,T,S){const R=(0,Nn.on)(r,h,s);this.storage=(0,Wt.cc)(`${R.name}.storage.${o}`,"AngularFireStorage",R.name,()=>{const P=h.runOutsideAngular(()=>R.storage(o||void 0)),k=S;return k&&P.useEmulator(...k),w&&P.setMaxUploadRetryTime(w),T&&P.setMaxOperationRetryTime(T),P},[w,T])}ref(r){return aN(this.storage.ref(r))}refFromURL(r){return aN(this.storage.refFromURL(r))}upload(r,s,o){return aN(this.storage.ref(r)).put(s,o)}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Nn.Dh),g.LFG(Nn.xv,8),g.LFG(E6,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Wt.HU),g.LFG(w6,8),g.LFG(C6,8),g.LFG(b6,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),T6=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({}),i})(),I6=(()=>{class i{constructor(){US.Z.registerVersion("angularfire",Wt.q4.full,"gcs-compat")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({providers:[vB],imports:[T6]}),i})();function D6(i,n){if(1&i){const r=g.EpF();g.TgZ(0,"li",4),g.NdJ("click",function(){const c=g.CHM(r).$implicit;return g.oxw().SeleccionarActor(c)}),g.TgZ(1,"span"),g._uU(2),g.qZA(),g.TgZ(3,"span"),g._uU(4),g.qZA(),g.qZA()}if(2&i){const r=n.$implicit;g.xp6(2),g.Oqu(r.nombre),g.xp6(2),g.Oqu(r.apellido)}}let S6=(()=>{class i{constructor(r){this.actorService=r,this.seSeleccionoActor=new g.vpe,this.listaActores=[]}ngOnInit(){let r,s,o,c,h,_;this.actorService.getActores().subscribe(w=>{for(let T=0;T<w.length;T++){const S=w[T];r=S.payload.doc.data().nombre,s=S.payload.doc.data().apellido,o=S.payload.doc.data().email,c=S.payload.doc.data().direccion,h=S.payload.doc.data().pais,_=S.payload.doc.id;let R=new Tk(r,s,o,c,h);R.id=_,this.listaActores.push(R)}})}SeleccionarActor(r){this.seSeleccionoActor.emit(r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(Ik))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-tabla-actor"]],outputs:{seSeleccionoActor:"seSeleccionoActor"},decls:5,vars:1,consts:[[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"list-group","mb-3","text-muted"],["class","list-group-item d-flex justify-content-between lh-condensed ",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed",3,"click"]],template:function(r,s){1&r&&(g.TgZ(0,"ul",0),g.TgZ(1,"li",1),g.TgZ(2,"div"),g.TgZ(3,"ul",2),g.YNc(4,D6,5,2,"li",3),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&r&&(g.xp6(4),g.Q6J("ngForOf",s.listaActores))},directives:[$t],styles:[""]}),i})();function A6(i,n){if(1&i&&(g.TgZ(0,"span",30),g._uU(1),g.ALo(2,"number"),g.qZA()),2&i){const r=g.oxw().ngIf;g.xp6(1),g.hij("",g.lcZ(2,1,r),"% ")}}function R6(i,n){1&i&&(g.TgZ(0,"span",31),g._uU(1,"Completed !"),g.qZA())}function N6(i,n){if(1&i&&(g.TgZ(0,"div"),g._UZ(1,"progress",27),g._UZ(2,"br"),g.YNc(3,A6,3,3,"span",28),g.YNc(4,R6,2,0,"span",29),g.qZA()),2&i){const r=n.ngIf;g.xp6(1),g.Q6J("value",r),g.xp6(2),g.Q6J("ngIf",r<100),g.xp6(1),g.Q6J("ngIf",100==r)}}const x6=[{path:"",redirectTo:"bienvenido",pathMatch:"full"},{path:"peliculas",children:[{path:"",redirectTo:"alta",pathMatch:"full"},{path:"alta",component:(()=>{class i{constructor(r,s,o){this.peliculaService=r,this.fireStorage=s,this.toastr=o,this.basePath="/images",this.downloadableURL=""}ngOnInit(){let r=new Date,s=r.toString(),o=r.getDate(),c=o.toString(),h=r.getMonth()+1,_=h.toString();o<10&&(c="0"+c),h<10&&(_="0"+_),s=r.getFullYear().toString()+"-"+_+"-"+c,document.getElementById("start").setAttribute("max",s);let S=document.getElementById("tipo");for(let R in JR)S.options[S.options.length]=new Option(R)}cambiarActor(r){this.actorId=r.id,this.actorNombre=r.nombre+" "+r.apellido}guardarPelicula(){this.fotoDeLaPelicula=this.downloadableURL;let r=new QR(this.nombre,this.tipo,this.fechaDeEstreno,this.cantidadDePublico,this.fotoDeLaPelicula,this.actorId);this.peliculaService.guardarPelicula(r).then(s=>{this.showSuccess()}).catch(s=>{this.showError(s)})}onFileChanged(r){return(0,FG.mG)(this,void 0,void 0,function*(){const s=r.target.files[0];s?(this.task=this.fireStorage.upload(`${this.basePath}/${s.name}`,s),this.progressValue=this.task.percentageChanges(),(yield this.task).ref.getDownloadURL().then(c=>{this.downloadableURL=c})):(alert("No images selected"),this.downloadableURL="")})}showSuccess(){this.toastr.success("Se guard\xf3 correctamente")}showError(r){this.toastr.error("Algo sali\xf3 mal. Error: "+r)}}return i.\u0275fac=function(r){return new(r||i)(g.Y36(sT),g.Y36(vB),g.Y36(Vd))},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-pelicula-alta"]],decls:52,vars:10,consts:[["lang","en"],[1,"bg-light"],[1,"container"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[3,"seSeleccionoActor"],[1,"col-md-8","order-md-1"],[1,"mb-3"],["novalidate","",1,"needs-validation"],[1,"col-md-6","mb-3"],["for","firstName"],["type","text","id","firstName","name","nombre","placeholder","","value","","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","tipo"],["id","tipo","name","tipo",3,"ngModel","ngModelChange"],["for","start"],["type","date","id","start","name","trip-start","value","","min","1878-01-01","max","","name","fechaDeEstreno",3,"ngModel","ngModelChange"],["for","cantidadPublico"],["type","number","id","cantidadPublico","name","cantidadDePublico","placeholder","","value","","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","actor"],["type","text","readonly","true","id","actor","name","actor","placeholder","Elegir de la tabla de actores","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","photo"],["type","file","name","file","accept",".jpeg,.jpg,.png,.svg",3,"input"],["onerror","this.onerror=null;this.src='assets/noimage.png';","width","300px","height","300px",3,"src"],[4,"ngIf"],["type","submit","onerror","showError()",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],["type","warning","max","100",2,"height","7mm","width","50%",3,"value"],["style","color:rgb(255, 60, 0); font-size: 17px; font-weight: 410;",4,"ngIf"],["style","color:rgb(1, 153, 34);  font-size: 17px; font-weight: 410;",4,"ngIf"],[2,"color","rgb(255, 60, 0)","font-size","17px","font-weight","410"],[2,"color","rgb(1, 153, 34)","font-size","17px","font-weight","410"]],template:function(r,s){1&r&&(g.TgZ(0,"html",0),g.TgZ(1,"body",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g.TgZ(5,"h4",5),g.TgZ(6,"span",6),g._uU(7,"Actores"),g.qZA(),g.qZA(),g.TgZ(8,"app-tabla-actor",7),g.NdJ("seSeleccionoActor",function(c){return s.cambiarActor(c)}),g.qZA(),g.qZA(),g.TgZ(9,"div",8),g.TgZ(10,"h4",9),g._uU(11,"Alta Pel\xedcula"),g.qZA(),g.TgZ(12,"form",10),g.TgZ(13,"div",3),g.TgZ(14,"div",11),g.TgZ(15,"label",12),g._uU(16,"Nombre"),g.qZA(),g._UZ(17,"br"),g.TgZ(18,"input",13),g.NdJ("ngModelChange",function(c){return s.nombre=c}),g.qZA(),g.qZA(),g.TgZ(19,"div",11),g.TgZ(20,"label",14),g._uU(21,"Tipo"),g.qZA(),g._UZ(22,"br"),g.TgZ(23,"select",15),g.NdJ("ngModelChange",function(c){return s.tipo=c}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(24,"div",9),g.TgZ(25,"label",16),g._uU(26,"Fecha de estreno "),g.qZA(),g._UZ(27,"br"),g.TgZ(28,"input",17),g.NdJ("ngModelChange",function(c){return s.fechaDeEstreno=c}),g.qZA(),g.qZA(),g.TgZ(29,"div",9),g.TgZ(30,"label",18),g._uU(31,"Cantidad de P\xfablico"),g.qZA(),g._UZ(32,"br"),g.TgZ(33,"input",19),g.NdJ("ngModelChange",function(c){return s.cantidadDePublico=c}),g.qZA(),g.qZA(),g.TgZ(34,"div",9),g.TgZ(35,"label",20),g._uU(36,"Actor"),g.qZA(),g._UZ(37,"br"),g.TgZ(38,"input",21),g.NdJ("ngModelChange",function(c){return s.actorNombre=c}),g.qZA(),g.qZA(),g.TgZ(39,"div",9),g.TgZ(40,"label",22),g._uU(41,"Foto de la pel\xedcula"),g.qZA(),g._UZ(42,"br"),g.TgZ(43,"input",23),g.NdJ("input",function(c){return s.onFileChanged(c)}),g.qZA(),g._UZ(44,"br"),g._UZ(45,"img",24),g._UZ(46,"br"),g._uU(47),g.YNc(48,N6,5,3,"div",25),g.ALo(49,"async"),g.qZA(),g.TgZ(50,"button",26),g.NdJ("click",function(){return s.guardarPelicula()}),g._uU(51,"Cargar pel\xedcula"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&r&&(g.xp6(18),g.Q6J("ngModel",s.nombre),g.xp6(5),g.Q6J("ngModel",s.tipo),g.xp6(5),g.Q6J("ngModel",s.fechaDeEstreno),g.xp6(5),g.Q6J("ngModel",s.cantidadDePublico),g.xp6(5),g.Q6J("ngModel",s.actorNombre),g.xp6(7),g.Q6J("src",s.downloadableURL,g.LSH),g.xp6(2),g.hij(" ",s.downloadableURL," "),g.xp6(1),g.Q6J("ngIf",g.lcZ(49,8,s.progressValue)))},directives:[S6,Vo,Mu,gs,ds,Aa,dd,El,Cl,tp,Ei],pipes:[Ef,Eu],styles:["#cantidadPublico[_ngcontent-%COMP%]{width:20em}img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:scale-down}"]}),i})()},{path:"listado",component:U2}]},{path:"actor",children:[{path:"",redirectTo:"alta",pathMatch:"full"},{path:"alta",component:mG},{path:"listado",component:L2},{path:"actorpelicula",component:xG}]},{path:"bienvenido",component:kG},{path:"busqueda",component:MG},{path:"**",pathMatch:"full",redirectTo:"bienvenido"}];let P6=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({imports:[[v2.forRoot(x6,{relativeLinkResolution:"legacy"})],v2]}),i})(),O6=(()=>{class i{constructor(){this.title="primerParcial"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=g.Xpm({type:i,selectors:[["app-root"]],decls:38,vars:0,consts:[["lang","en"],[1,"autohide","navbar","navbar-expand-md","navbar-dark","bg-dark"],["href","./bienvenido",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["href","./busqueda",1,"nav-link"],[1,"sr-only"],[1,"nav-item","dropdown"],["id","dropdown01","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","dropdown01",1,"dropdown-menu"],["href","./peliculas/alta",1,"dropdown-item"],["href","./peliculas/listado",1,"dropdown-item"],["href","./actor/alta",1,"dropdown-item"],["href","./actor/listado",1,"dropdown-item"],["href","./actor/actorpelicula",1,"dropdown-item"]],template:function(r,s){1&r&&(g.TgZ(0,"html",0),g.TgZ(1,"body"),g.TgZ(2,"nav",1),g.TgZ(3,"a",2),g._uU(4,"Bienvenido"),g.qZA(),g.TgZ(5,"button",3),g._UZ(6,"span",4),g.qZA(),g.TgZ(7,"div",5),g.TgZ(8,"ul",6),g.TgZ(9,"li",7),g.TgZ(10,"a",8),g._uU(11,"B\xfasqueda "),g.TgZ(12,"span",9),g._uU(13,"(current)"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"li",10),g.TgZ(15,"a",11),g._uU(16,"Peliculas"),g.qZA(),g.TgZ(17,"ul",12),g.TgZ(18,"li"),g.TgZ(19,"a",13),g._uU(20,"Alta"),g.qZA(),g.qZA(),g.TgZ(21,"li"),g.TgZ(22,"a",14),g._uU(23,"Listado"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(24,"li",10),g.TgZ(25,"a",11),g._uU(26,"Actores"),g.qZA(),g.TgZ(27,"ul",12),g.TgZ(28,"li"),g.TgZ(29,"a",15),g._uU(30,"Alta"),g.qZA(),g.qZA(),g.TgZ(31,"li"),g.TgZ(32,"a",16),g._uU(33,"Listado"),g.qZA(),g.qZA(),g.TgZ(34,"li"),g.TgZ(35,"a",17),g._uU(36,"Peliculas por actor"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(37,"router-outlet"))},directives:[wk],styles:[""]}),i})(),M6=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=g.oAB({type:i,bootstrap:[O6]}),i.\u0275inj=g.cJS({providers:[yU],imports:[[jf,Nn.hO.initializeApp(vU_firebaseConfig),ZS,yU,P6,Sn,fG,I6,ha,$N,Lw.forRoot()]]}),i})();(0,g.G48)(),Ru().bootstrapModule(M6).catch(i=>console.error(i))},4762:(Ze,Te,V)=>{"use strict";function Ee(oe,ce){var be={};for(var fe in oe)Object.prototype.hasOwnProperty.call(oe,fe)&&ce.indexOf(fe)<0&&(be[fe]=oe[fe]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(fe=Object.getOwnPropertySymbols(oe);pe<fe.length;pe++)ce.indexOf(fe[pe])<0&&Object.prototype.propertyIsEnumerable.call(oe,fe[pe])&&(be[fe[pe]]=oe[fe[pe]])}return be}function X(oe,ce,be,fe){return new(be||(be=Promise))(function(ee,ke){function Ye(et){try{nt(fe.next(et))}catch(dt){ke(dt)}}function bt(et){try{nt(fe.throw(et))}catch(dt){ke(dt)}}function nt(et){et.done?ee(et.value):function(ee){return ee instanceof be?ee:new be(function(ke){ke(ee)})}(et.value).then(Ye,bt)}nt((fe=fe.apply(oe,ce||[])).next())})}function ne(oe,ce){var fe,pe,ee,ke,be={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return ke={next:Ye(0),throw:Ye(1),return:Ye(2)},"function"==typeof Symbol&&(ke[Symbol.iterator]=function(){return this}),ke;function Ye(nt){return function(et){return function(nt){if(fe)throw new TypeError("Generator is already executing.");for(;be;)try{if(fe=1,pe&&(ee=2&nt[0]?pe.return:nt[0]?pe.throw||((ee=pe.return)&&ee.call(pe),0):pe.next)&&!(ee=ee.call(pe,nt[1])).done)return ee;switch(pe=0,ee&&(nt=[2&nt[0],ee.value]),nt[0]){case 0:case 1:ee=nt;break;case 4:return be.label++,{value:nt[1],done:!1};case 5:be.label++,pe=nt[1],nt=[0];continue;case 7:nt=be.ops.pop(),be.trys.pop();continue;default:if(!(ee=(ee=be.trys).length>0&&ee[ee.length-1])&&(6===nt[0]||2===nt[0])){be=0;continue}if(3===nt[0]&&(!ee||nt[1]>ee[0]&&nt[1]<ee[3])){be.label=nt[1];break}if(6===nt[0]&&be.label<ee[1]){be.label=ee[1],ee=nt;break}if(ee&&be.label<ee[2]){be.label=ee[2],be.ops.push(nt);break}ee[2]&&be.ops.pop(),be.trys.pop();continue}nt=ce.call(oe,be)}catch(et){nt=[6,et],pe=0}finally{fe=ee=0}if(5&nt[0])throw nt[1];return{value:nt[0]?nt[1]:void 0,done:!0}}([nt,et])}}}function $(oe){var ce="function"==typeof Symbol&&Symbol.iterator,be=ce&&oe[ce],fe=0;if(be)return be.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&fe>=oe.length&&(oe=void 0),{value:oe&&oe[fe++],done:!oe}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(oe,ce){var be="function"==typeof Symbol&&oe[Symbol.iterator];if(!be)return oe;var pe,ke,fe=be.call(oe),ee=[];try{for(;(void 0===ce||ce-- >0)&&!(pe=fe.next()).done;)ee.push(pe.value)}catch(Ye){ke={error:Ye}}finally{try{pe&&!pe.done&&(be=fe.return)&&be.call(fe)}finally{if(ke)throw ke.error}}return ee}function ae(oe,ce,be){if(be||2===arguments.length)for(var ee,fe=0,pe=ce.length;fe<pe;fe++)(ee||!(fe in ce))&&(ee||(ee=Array.prototype.slice.call(ce,0,fe)),ee[fe]=ce[fe]);return oe.concat(ee||Array.prototype.slice.call(ce))}V.d(Te,{_T:()=>Ee,mG:()=>X,Jh:()=>ne,XA:()=>$,CR:()=>ie,ev:()=>ae})},8239:(Ze,Te,V)=>{"use strict";function g(G,Ee,ye,Q,de,X,ne){try{var j=G[X](ne),H=j.value}catch($){return void ye($)}j.done?Ee(H):Promise.resolve(H).then(Q,de)}function te(G){return function(){var Ee=this,ye=arguments;return new Promise(function(Q,de){var X=G.apply(Ee,ye);function ne(H){g(X,Q,de,ne,j,"next",H)}function j(H){g(X,Q,de,ne,j,"throw",H)}ne(void 0)})}}V.d(Te,{Z:()=>te})}},Ze=>{Ze(Ze.s=276)}]);